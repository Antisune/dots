!function(){return function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){return o(t[s][1][e]||e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}}()({1:[function(e,t,n){var i,o,r,s,l;"undefined"!=typeof window&&null!==window?i=e("backbone"):("../../../server/compiled/templating/",i=e("../../../server/compiled/templating/backbone")),l=e("underscore"),"undefined"!=typeof window&&null!==window&&(window.localCollections={}),o=class extends i.Collection{url(){var e,t,n,i;return null!=(e=this._meta.URL)?e:`${null!=(t=null!=(n=null!=(i=this.parent)?i.url():void 0)?n.replace(/\/~.*/,""):void 0)?t:""}`+"/"+this.key}initialize(){return this._meta={},this.on("deselect",()=>{var e;return null!=(e=this.where({selected:!0}).pop())?e.unset("selected"):void 0})}parse(e,t={}){var n,i,o,r,a,u,c,p,d,h,m,f,g;for(f=l.clone(e),i=l.clone(e.context),c=l.clone(null!=(p=e.children)?p:[]),delete f.children,delete f.context,null!=i&&null==this.parent&&((n={})[this.key]=this,this.parent=new s[i.class](n),this.parent.set(this.parent.parse(i,t))),r=o=0,a=(d=null!=c?c:[]).length;o<a;r=++o)g=d[r],(u=null!=(h=null!=(m=this.get(g.uuid))?m:s[g.class]?new s[g.class]:void 0)?h:new(l.result(this,"model"))).set(u.parse(g,t),t),c[r]=u;return t.remove||(c=this.models.concat(c).reverse(),c=l.unique(c,function(e){var t;return null!=(t=e.uuid)?t:e.cid}).reverse()),this.meta(f,l.extend({silent:!0},t)),c}toJSON(e={}){var t,n,i,o,r,s,a;for(i in t=null!=(r=(e=l.extend({deep:!0},e)).data)?r:{},delete e.data,n={},e.deep&&(n=l.compact(super.toJSON(e))),e.parents&&(n.parents={},this.parent&&(o=this.parent.toJSON(l.defaults({deep:!1,parents:!0},e)),n.parents=l.extend(n.parents,o.parents),n.parents[this.parent.key]=o)),t)a=t[i],n[i]=a;if(!e.valid)for(i in s=this._meta)a=s[i],isNaN(i)&&(n[i]=a);return e.reference&&(n.collection=this),e.query&&(n.query=query),n}equals(e,t){var n,i;return i=this.toJSON(t),n=e.toJSON?e.toJSON(t):e,l.isEqual(i,n)}get(e,t={}){var n,i,o,r,s;return null==(s=super.get(...arguments))&&t.deep?(i=null!=(o=null!=(r=this.parent)?r.id:void 0)?o:"",null!=(n=super.get(i+"-"+e.slice(i.length+1).split("-")[0]))?n.get(e,{deep:!0}):void 0):s}clone(e={}){var t,n,i,o,s,l,a;if((n=super.clone(...arguments))._meta=this._meta,!e.deep)return n;for(n.reset([],{silent:!0}),o=i=0,s=(l=this.models).length;i<s;o=++i)(a=l[o])instanceof r&&((t=a.clone(e)).collection=n,n.add(t,{silent:!0}));return n}navigate(e){return e=l.extend({trigger:!0},e),router.navigate(this.url(),e)}loadMore(){var e,t;return!(null!=(e=this.meta("properties"))&&null!=(t=e.page)?t.next:void 0)||this.pendingRequest?this.pendingRequest:(this.meta("URL",this.meta("properties").page.next,{silent:!0}),this.pendingRequest=this.fetch({silent:!0,remove:!1}),this.once("sync error",(e,t)=>{var n,i;return 404===t.status&&null!=(n=this.meta("properties"))&&null!=(i=n.page)&&delete i.next,delete this.pendingRequest}),this.pendingRequest)}fetch(e={}){var t,n;return n=~(n=l.result(this,"url")).indexOf("?")?`${n}&format=json`:`${n}?format=json`,e=l.extend(e,{url:n}),(t=super.fetch(e)).fail(e=>this.trigger("fetchError")),t}title(){return"Decide Quickly"}meta(e,t,n={}){var i,o;if("object"==typeof e?(i=e,n=null!=t?t:{}):null!=t&&((i={})[e]=t),o=!1,null!=i){for(e in i)t=i[e],this._meta[e]!==t&&(o=!0,this._meta[e]=t);return!n.silent&&o&&this.trigger("repaint"),"undefined"!=typeof window&&null!==window&&null!=this._meta.localID&&(window.localCollections[i.localID]=this),this}return this._meta[e]}unset(e,t={}){if(this._meta.hasOwnProperty(e)&&(delete this._meta[e],!t.silent))return this.trigger("repaint")}parents(e){var t,n;for(t=this.parent;t;){if(null==e||t.key===e)return t;t=null!=(n=t.collection)?n:t.parent}}count(){var e;return null!=this.meta("count")&&this.meta("count")<this.length?this.length:null!=(e=this.meta("count"))?e:this.length}},t.exports=o,r=e("./model"),s=e("./models")},{"./model":33,"./models":34,backbone:424,underscore:448}],2:[function(e,t,n){var i,o,r,s,l,a;s=e("underscore"),i=e("./collection"),o=n,"undefined"!=typeof window&&null!==window&&(l=e("algoliasearch/lite"),a=env.ALGOLIA_ID&&env.ALGOLIA_SEARCH&&env.ALGOLIA_INDEX?l(env.ALGOLIA_ID,env.ALGOLIA_SEARCH).initIndex(env.ALGOLIA_INDEX):{search:function(e,t,n){return"function"==typeof n?n("error"):void 0}}),o.Collection=function(e){return class extends e{}}.call(this,i),o.SearchList=function(){class e extends i{model(){return r.Model}search(e,t,n){var i;return t instanceof Function&&(n=t,t={}),t=s.extend({facets:"*",hitsPerPage:6,ignorePlurals:1,queryType:"prefixAll",typoTolerance:"strict",attributesToRetrieve:"URL,class,type,id,uuid,revision,source.revision,viewpoints.children.revision,viewpoints.children.URL",attributesToHighlight:"revision.title,source.revision.title,viewpoints.children.revision.title",analyticsTags:"instant-search"},t),this.query=e,null==n&&(n=function(){}),i=((e,t)=>{var i,o,r,l;return e?(console.error(e),n(e,this)):t.query===this.query?(r=function(){var e,n,i,r,a,u;for(u=[],e=0,n=(i=t.hits).length;e<n;e++)"none"===(null!=(r=(o=i[e])._highlightResult)&&null!=(a=r.revision)?a.title.matchLevel:void 0)&&(l=function(e){return s.sortBy(e,function(e,t){switch(o._highlightResult.viewpoints.children[t].revision.title.matchLevel){case"full":return 0;case"partial":return 1;default:return 2}})},o.viewpoints.children=l(o.viewpoints.children),o._highlightResult.viewpoints.children=l(o._highlightResult.viewpoints.children)),u.push(o);return u}(),delete t.hits,i={children:r,class:"SearchList",type:"List"},this.reset([],{silent:!0}),this.reset(this.parse(i)),this.meta(t,{silent:!0}),n(e,this)):void 0}),a.search(this.query,t,i)}autocomplete(e,t,n){return t instanceof Function&&(n=t,t={}),t=s.extend({filters:"class:Topic",hitsPerPage:5,restrictSearchableAttributes:"revision.title",attributesToRetrieve:"URL,class,type,id,uuid,revision",attributesToHighlight:"",analyticsTags:"autocomplete"},t),e=e.replace(/\b(what|is|the|best|are|for|to|of|with|a|an|on|in|\?)\b\s+/gi,""),this.search(e,t,n)}}return e.prototype.key="search",e}.call(this),o.TopicList=function(){class e extends i{model(){return r.Topic}}return e.prototype.key="topics",e}.call(this),o.SubscribedTopicList=function(){class e extends o.TopicList{}return e.prototype.key="subscribedTopics",e}.call(this),o.AskedTopicList=function(){class e extends o.TopicList{}return e.prototype.key="askedTopics",e}.call(this),o.ViewpointList=function(){class e extends i{model(){return r.Viewpoint}}return e.prototype.key="viewpoints",e}.call(this),o.RecommendedViewpointList=function(){class e extends o.ViewpointList{}return e.prototype.key="recommendedViewpoints",e}.call(this),o.SectionList=function(){class e extends i{model(){return r.Section}url(){return super.url(...arguments).replace(/~.*/,this.key)}removeAllReactionsOfType(e,t){return this.map(function(n){var i;if(i=n.get("reactionSet").get(e),(void 0===t||n.get("isCon")===t)&&i.meta("reacted"))return i.react(!1)})}}return e.prototype.key="sections",e}.call(this),o.CommentList=function(){class e extends i{model(){return r.Comment}url(){var e;return(e=super.url(...arguments)).indexOf("~")?e.replace(/~.+/,this.key):e}}return e.prototype.key="comments",e}.call(this),o.VoteList=function(){class e extends i{initialize(){return super.initialize(...arguments),this.on("add remove change reset sort",()=>{var e;if(this.parent instanceof r.Viewpoint)return null!=(e=this.parent.collection)?e.each(function(e){var t;return null!=(t=e.get("votes"))?t.trigger("repaint"):void 0}):void 0})}model(){return r.Vote}url(){return super.url(...arguments).replace(/~.*/,this.key)}getCurrentUserVote(){var e;return(e="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&this.find(function(t){return t.get("user").get("username")===e})}vote(e,t={}){var n,i,o,l,a,u,c,p,d,h,m,f,g,w,v,y;return l=e<=-1?"Downvote":e>=1?"Vote":"Unvote",this.parent instanceof r.Section?(l+=" Section",this.parent.get("isCon")?l+=" Con":l+=" Pro"):this.parent instanceof r.Viewpoint&&(l+=" Viewpoint"),analytics.track(l),null!=(d=this.lastVote)&&d.off(),(i="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&(v=this.find(function(e){var t;return(null!=(t=e.get("user"))?t.get("username"):void 0)===i})),null==v&&(n=this.model(),v=new n({},{collection:this}),this.add(v,{silent:!0})),v.set({value:e,delta:e},{silent:!0}),this.lastVote=v,y=p=Number(null!=(h=this.meta("count"))?h:0),w=c=Number(null!=(m=this.meta("upvotes"))?m:0),o=u=Number(null!=(f=this.meta("downvotes"))?f:0),a=Number(null!=(g=this.meta("delta"))?g:0),y+=e-a,a>0&&(w-=a),a<0&&(o+=a),e>0&&(w+=e),e<0&&(o-=e),w<0&&(w=0),o<0&&(o=0),this.meta({count:y,upvotes:w,downvotes:o,delta:e},{silent:!0}),this.hadError=!1,v.once("sync",(n,i)=>{var r,l;return null!=(l=(null!=(r=i.context)?r.votes:void 0)||i).count&&null!=l.upvotes&&null!=l.downvotes&&null!=l.delta&&this.meta({count:l.count,upvotes:l.upvotes,downvotes:l.downvotes,delta:l.delta},{silent:!0}),(this.hadError||this.meta("delta")!==e||this.meta("upvotes")!==w||this.meta("downvotes")!==o)&&this.trigger("repaint"),this.trigger("voteSuccess",i,this),s.defer(()=>this.trigger("vote",this,t))}),v.once("saveError",()=>(this.hadError=!0,this.meta({count:p,upvotes:c,downvotes:u,delta:0},{silent:!0}),v.set({delta:0},{silent:!0}),this.trigger("voteError"),s.defer(()=>this.trigger("repaint")))),this.trigger("repaint"),this.trigger("vote",this,t),v.save(null,{silent:!0})}favorite(e,t={}){var n,i;return analytics.track(`Favorite ${this.parent.key}`),(i=new(this.model())({favorite:e},{collection:this})).once("saveError",()=>{var e;return this.meta("favorite",!1,{silent:!0}),this.meta("favorite_time",null,{silent:!0}),null!=(e=this.parent)?e.trigger("repaint"):void 0}),this.meta("favorite",e,{silent:!0}),this.meta("favorite_time",(new Date).getTime(),{silent:!0}),null!=(n=this.parent)&&n.trigger("repaint"),s.defaults(t,{add:!1,silent:!0}),i.save(null,t)}}return e.prototype.key="votes",e}.call(this),o.ViewpointVoteList=class extends o.VoteList{model(){return r.ViewpointVote}},o.CommunityViewpointVoteList=function(){class e extends o.ViewpointVoteList{}return e.prototype.key="communityRecommendations",e}.call(this),o.MasterOptionList=function(){class e extends i{model(){return r.MasterOption}}return e.prototype.key="masters",e}.call(this),o.MasterOptionVoteList=class extends o.VoteList{},o.MasterOptionList=function(){class e extends i{model(){return r.MasterOption}}return e.prototype.key="masters",e}.call(this),o.SubscriptionList=function(){class e extends i{model(){return r.Subscription}url(){var e;return(e=super.url(...arguments)).indexOf("~")?e.replace(/~.+/,this.key):e}subscribe(e){var t,n;return e?analytics.track("Subscribe Topic"):analytics.track("Unsubscribe Topic"),n=new r.Subscription({subscribe:e},{collection:this}),t=this.meta("subscribed"),this.meta("subscribed",e,{silent:!0}),n.once("saveError",()=>(this.meta("subscribed",t,{silent:!0}),this.trigger("repaint"))),this.trigger("repaint"),n.save(null,{add:!1,silent:!0,success:function(){if(null!=("undefined"!=typeof window&&null!==window?window.currentUserV2:void 0)&&window.currentUserV2.get("user_id"))return dataStore.loadEntity("user",window.currentUserV2.get("user_id"))}})}}return e.prototype.key="subscriptions",e}.call(this),o.UserList=function(){class e extends i{model(){return r.User}}return e.prototype.key="users",e}.call(this),o.FollowingList=function(){class e extends o.UserList{follow(e,t){var n;return analytics.track("Follow user"),(n=new r.User({username:e.get("username"),follow:t})).isNew=function(){return!0},this.remove(n.id),this.add(n,{silent:!0}),this.once("saveError",()=>e.trigger("repaint")),e.trigger("repaint"),n.save()}}return e.prototype.key="following",e}.call(this),o.EventList=function(){class e extends i{model(){return r.Event}}return e.prototype.key="events",e}.call(this),o.NotificationGroupList=function(){class e extends i{model(){return r.NotificationGroup}permissions(e){var t;return(null!=(t=this.url().match(/[\/]users[\/]([^\/]+)/))?t[1]:void 0)===e.id}}return e.prototype.key="notification-groups",e}.call(this),o.NotificationList=function(){class e extends i{model(){return r.Notification}permissions(e){var t;return(null!=(t=this.url().match(/[\/]users[\/]([^\/]+)/))?t[1]:void 0)===e.id}}return e.prototype.key="notifications",e}.call(this),o.TagList=function(){class e extends i{model(){return r.Tag}}return e.prototype.key="tags",e}.call(this),o.ActionList=function(){class e extends i{model(){return r.Action}}return e.prototype.key="actions",e}.call(this),o.SpecList=function(){class e extends i{model(){return r.Spec}}return e.prototype.key="specs",e}.call(this),o.ImageList=function(){class e extends i{model(){return r.Image}}return e.prototype.key="images",e}.call(this),o.ReactionList=function(){class e extends i{model(){return r.Reaction}react(e,t={}){var n,i,o,l,a,u,c,p;if(e!==this.meta("reacted"))return e?analytics.track("Reacted",{reactionType:this.key,label:this.key}):analytics.track("Unreacted",{reactionType:this.key,label:this.key}),null!=(u=this.lastReaction)&&u.off(),this.lastReaction=a=new r.Reaction({reacted:e,text:null!=t?t.text:void 0},{collection:this}),n=o=parseInt(null!=(c=this.meta("count"))?c:0),l=null!=(p=this.meta("reacted"))&&p,i=this.meta("commentId"),n+=e?1:-1,this.meta("count",n,{silent:!0}),this.meta("reacted",e,{silent:!0}),this.hadError=!1,a.on("sync",(t,o)=>{if(this.meta("count",o.count,{silent:!0}),this.meta("reacted",o.reacted,{silent:!0}),this.meta("commentId",o.commentId,{silent:!0}),o.count!==n||o.reacted!==e||o.commentId!==i||this.hadError)return this.trigger("repaint")}),a.once("saveError",()=>(this.hadError=!0,this.meta("count",o,{silent:!0}),this.meta("reacted",l,{silent:!0}),this.trigger("repaint"))),this.trigger("repaint"),s.defaults(t,{add:!1,silent:!0}),a.save(null,t)}}return e.prototype.key="reactions",e}.call(this),o.KarmaBonusList=function(){class e extends i{model(){return r.KarmaBonus}}return e.prototype.key="karma",e}.call(this),o.LogList=function(){class e extends i{model(){return r.Log}}return e.prototype.key="logs",e}.call(this),r=e("./models")},{"./collection":1,"./models":34,"algoliasearch/lite":407,underscore:448}],3:[function(e,t,n){var i,o,r;"undefined"!=typeof window&&null!==window?i=e("backbone"):("../../../../server/compiled/templating/",i=e("../../../../server/compiled/templating/backbone")),r=e("underscore"),o=class extends i.Collection{model(){return e("../models/base-model").BaseModel}clone(){var e;return(e=super.clone(...arguments)).store=this.store,e.relationID=this.relationID,e.relation=this.relation,e}fetch(e={}){var t,n;return this.getParent(),n=e.success,(t=r.defaults({silent:!0},e)).success=((...t)=>(e.silent||this.trigger("update sync"),"function"==typeof n?n(...t):void 0)),this.store.loadEntities(this.model().prototype.key,this.models,t)}getParent(){if(this.store)return this.store.getModel(this.relationID);throw new Error("Model store not defined")}hasUnloaded(){return null!=r.find(this.models,function(e){return!e.loaded})}getUnloaded(){return r.filter(this.models,function(e){return!e.loaded})}getLoaded(){return r.filter(this.models,function(e){return e.loaded})}getLegacyCollection(){throw new Error('"getLegacyCollection" not implemented')}},t.exports={BaseCollection:o}},{"../models/base-model":35,backbone:424,underscore:448}],4:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/comment-model").CommentModel}},t.exports={CommentCollection:o}},{"../models/entities/comment-model":36,"./base-collection":3}],5:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/highlight-model").HighlightModel}getSectionHighlight(e){return this.find(function(t){return t.get("section_id")===e.get("section_id")})}},t.exports={HighlightCollection:o}},{"../models/entities/highlight-model":38,"./base-collection":3}],6:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/image-model").ImageModel}},t.exports={ImageCollection:o}},{"../models/entities/image-model":39,"./base-collection":3}],7:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./base-collection"),e("./comment-collection"),e("./media-collection"),e("./ml-alias-collection"),e("./ml-category-collection"),e("./ml-crawl-collection"),e("./ml-filter-collection"),e("./ml-keyword-collection"),e("./ml-product-collection"),e("./ml-product-configuration-collection"),e("./ml-product-family-collection"),e("./ml-product-generation-collection"),e("./ml-product-type-collection"),e("./ml-query-collection"),e("./ml-rating-collection"),e("./ml-source-collection"),e("./highlight-collection"),e("./image-collection"),e("./option-collection"),e("./product-collection"),e("./question-collection"),e("./reaction-collection"),e("./rec-collection"),e("./section-collection"),e("./spec-collection"),e("./store-page-collection"),e("./tag-collection"),e("./user-collection"))},{"./base-collection":3,"./comment-collection":4,"./highlight-collection":5,"./image-collection":6,"./media-collection":8,"./ml-alias-collection":9,"./ml-category-collection":10,"./ml-crawl-collection":11,"./ml-filter-collection":12,"./ml-keyword-collection":13,"./ml-product-collection":14,"./ml-product-configuration-collection":15,"./ml-product-family-collection":16,"./ml-product-generation-collection":17,"./ml-product-type-collection":18,"./ml-query-collection":19,"./ml-rating-collection":20,"./ml-source-collection":21,"./option-collection":22,"./product-collection":23,"./question-collection":24,"./reaction-collection":25,"./rec-collection":26,"./section-collection":27,"./spec-collection":28,"./store-page-collection":29,"./tag-collection":30,"./user-collection":31,underscore:448}],8:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/media-model").MediaModel}},t.exports={MediaCollection:o}},{"../models/entities/media-model":41,"./base-collection":3}],9:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-alias-model").MLAliasModel}},t.exports={MLAliasCollection:o}},{"../models/entities/ml-alias-model":42,"./base-collection":3}],10:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-category-model").MLCategoryModel}},t.exports={MLCategoryCollection:o}},{"../models/entities/ml-category-model":43,"./base-collection":3}],11:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-crawl-model").MLCrawlModel}},t.exports={MLCrawlCollection:o}},{"../models/entities/ml-crawl-model":44,"./base-collection":3}],12:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-filter-model").MLFilterModel}},t.exports={MLFilterCollection:o}},{"../models/entities/ml-filter-model":45,"./base-collection":3}],13:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-keyword-model").MLKeywordModel}},t.exports={MLKeywordCollection:o}},{"../models/entities/ml-keyword-model":46,"./base-collection":3}],14:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/utilities/ml-product-model").MLProductModel}},t.exports={MLProductCollection:o}},{"../models/utilities/ml-product-model":79,"./base-collection":3}],15:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-product-configuration-model").MLProductConfigurationModel}},t.exports={MLProductConfigurationCollection:o}},{"../models/entities/ml-product-configuration-model":47,"./base-collection":3}],16:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-product-family-model").MLProductFamilyModel}},t.exports={MLProductFamilyCollection:o}},{"../models/entities/ml-product-family-model":48,"./base-collection":3}],17:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-product-generation-model").MLProductGenerationModel}},t.exports={MLProductGenerationCollection:o}},{"../models/entities/ml-product-generation-model":49,"./base-collection":3}],18:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-product-type-model").MLProductTypeModel}},t.exports={MLProductTypeCollection:o}},{"../models/entities/ml-product-type-model":50,"./base-collection":3}],19:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/queries/ml-query").MLQuery}},t.exports={MLQueryCollection:o}},{"../models/queries/ml-query":70,"./base-collection":3}],20:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-rating-model").MLRatingModel}},t.exports={MLRatingCollection:o}},{"../models/entities/ml-rating-model":51,"./base-collection":3}],21:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/ml-source-model").MLSourceModel}},t.exports={MLSourceCollection:o}},{"../models/entities/ml-source-model":52,"./base-collection":3}],22:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/option-model").OptionModel}},t.exports={OptionCollection:o}},{"../models/entities/option-model":53,"./base-collection":3}],23:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/product-model").ProductModel}},t.exports={ProductCollection:o}},{"../models/entities/product-model":54,"./base-collection":3}],24:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/question-model").QuestionModel}},t.exports={QuestionCollection:o}},{"../models/entities/question-model":55,"./base-collection":3}],25:[function(e,t,n){var i,o,r=[].indexOf;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/reaction-model").ReactionModel}getUserReaction(e,t){return this.find(function(n){return n.get("user_id")===e.id&&n.get("reaction_type")===t})}setReaction(t,n,i={}){var o,s,l,a,u,c,p,d;if(l=e("../models/entities/reaction-model").ReactionModel,o=e("../models").Reaction,s=e("../collections").ReactionList,r.call(l.reactionTypes,n)<0)throw new Error(`"${n}" is an invalid reaction type`);if(d=this.getUserReaction(window.currentUserV2,n),!(t&&null!=d||!t&&null==d))return analytics.track("Reacted",{reactionType:this.key,label:this.key}),(a=this.getParent().getLegacyModel()).url().replace(/\/~.+/,n),(c=new s).meta({URL:a.url().replace(/\/~.+/,"")+`/react/${n}`}),null!=(p=this.lastReaction)&&p.off(),this.lastReaction=u=new o({reacted:t,text:i.text},{collection:c}),u.on("sync",(e,t)=>{var n;return n=a.url().match(/\/topics\/(\d+)/)[1],window.currentUserV2.loadQuestionEntities(n,{silent:!0,success:(...e)=>(i.success(...e),this.getParent().trigger("change sync"))})}),u.once("saveError",()=>{}),u.save()}},t.exports={ReactionCollection:o}},{"../collections":2,"../models":34,"../models/entities/reaction-model":56,"./base-collection":3}],26:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/rec-model").RecModel}},t.exports={RecCollection:o}},{"../models/entities/rec-model":57,"./base-collection":3}],27:[function(e,t,n){var i,o,r;({BaseCollection:i}=e("./base-collection")),({makeURL:r}=e("../../../../server/compiled/URLs")),o=class extends i{model(){return e("../models/entities/section-model").SectionModel}getLegacyCollection(){var t;return({SectionList:t}=e("../collections")),new t(this.map(function(e){return e.getLegacyModel()}))}getPageURL(e){var t,n;return n=(t=this.getParent()).getModel("question_id"),r(e,[n.get("t_id"),t.get("vp_id")])}getSectionListPageURL(){return this.getPageURL("SectionList")}},t.exports={SectionCollection:o}},{"../../../../server/compiled/URLs":454,"../collections":2,"../models/entities/section-model":58,"./base-collection":3}],28:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/spec-model").SpecModel}},t.exports={SpecCollection:o}},{"../models/entities/spec-model":59,"./base-collection":3}],29:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/store-page-model").StorePageModel}},t.exports={StorePageCollection:o}},{"../models/entities/store-page-model":61,"./base-collection":3}],30:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/tag-model").TagModel}},t.exports={TagCollection:o}},{"../models/entities/tag-model":62,"./base-collection":3}],31:[function(e,t,n){var i,o;({BaseCollection:i}=e("./base-collection")),o=class extends i{model(){return e("../models/entities/user-model").UserModel}},t.exports={UserCollection:o}},{"../models/entities/user-model":63,"./base-collection":3}],32:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V;for(y in l=e("underscore"),w=e("hash-sum"),s=e("./models/index"),i=e("./collections/index"),v={},g={},s)if((r=s[y]).prototype.key)for(V in v[r.prototype.key]=r,_=l.result(r.prototype,"relations"))x=_[V],g[V]=x;p=function(e,t,n,i){return e.combineEntityData(t,n,i)},c=function(e,t,n,i){var o;return(o=new v[n](p(e,t,n,i))).store=e,e._modelStore[t]=o,o},h=function(e,t,n,i){return e.combineQueryData(t,n,i)},d=function(e,t,n,i){var o;return(o=new v[n](h(e,t,n,i))).store=e,o.id=t,e._modelStore[t]=o,o},u=function(e,t,n,i,o){var r,s;return o?(r=g[i],y=l.result(r.prototype,"model").prototype.key,s=o.attributes[n][i][t],l.map(s,t=>{var n;return null==(n=e.getModel(t))&&(n=c(e,t,y)),n})):[]},a=function(e,t,n,i,o){var r,s,l;if(l=e.generateCollectionKey(t,i),r=g[i])return(s=new r(u(e,t,n,i,o))).store=e,s.relationID=t,s.relation=i,e._collectionStore[l]=s,s;console.error(`Relation ${i} is not supported`)},f=function(e,t,n,i,o){var r,s;return o?(r=g[i],y=l.result(r.prototype,"model").prototype.key,s=o.responses[n][t][i],l.map(s,t=>{var n;return null==(n=e.getModel(t))&&(n=c(e,t,y)),n})):[]},m=function(e,t,n,i,o){var r,s,l;if(l=e.generateCollectionKey(t,i),r=g[i])return(s=new r(f(e,t,n,i,o))).store=e,s.relationID=t,s.relation=i,e._collectionStore[l]=s,s;console.error(`Relation ${i} is not supported`)},o=class{constructor(){this._modelFactories={},this._modelStore={},this._collectionFactories={},this._collectionStore={}}combineEntityData(e,t,n){var i,o,r,s;if(r={},!n)return r[v[t].prototype.idAttribute]=e,r;if(null!=n.attributes)for(o in n.attributes[t])(i=n.attributes[t][o][e])&&(r[o]=i);return l.extend(r,null!=(s=n.entities[t])?s[e]:void 0)}combineQueryData(e,t,n){var i,o,r,s;return s={},l.extend(s,null!=(i=n.responses)&&null!=(o=i[t])?o[e]:void 0,null!=(r=n.queries[t])?r[e]:void 0)}getTypeAttributes(e){var t;return t=v[e].prototype,Object.keys(l.result(t,"relations")).concat(l.result(t,"attrs"))}generateCollectionKey(e,t){return`${e}:${t}`}storeBaseModel(e,t,n,i){var o,r;if(e=(r=e).id,r!==(o=this.getModel(e))){if(o)throw new Error('"Attempting to store model already in data store');return this._modelStore[e]=r}}storeEntity(e,t,n,i){var o,r;if(e instanceof s.BaseModel)return this.storeBaseModel(e,t,n,i);(o=this.getModel(e))?(o.loaded=!0,o.set(p(this,e,t,n),i),e===("undefined"!=typeof window&&null!==window&&null!=(r=window.currentUserV2)?r.id:void 0)&&(window.currentUserV2.loaded=!0,window.currentUserV2.set(o.attributes,i))):this._modelFactories[e]=(()=>(delete this._modelFactories[e],(o=c(this,e,t,n)).loaded=!0,o))}storeQuery(e,t,n,i){var o;if(e instanceof s.BaseModel)return this.storeBaseModel(e,t,n,i);(o=this.getModel(e))?(o.loaded=!0,o.set(h(this,e,t,n),i)):this._modelFactories[e]=(()=>(delete this._modelFactories[e],(o=d(this,e,t,n)).loaded=!0,o))}storeBaseCollection(e,t,n,i,o){var r,s;if(e=(r=e).id,r!==(s=this.getCollection(e))){if(s)throw new Error('"Attempting to store collection already in data store');return this._collectionStore[e]=r}}storeCollection(e,t,n,o,r){var s;e instanceof i.BaseCollection?this.storeBaseCollection(e,t,n,o,r):(s=this.getCollection(e,n))?s.set(u(this,e,t,n,o),r):this._collectionFactories[this.generateCollectionKey(e,n)]=(()=>{var i;return i=this.generateCollectionKey(e,n),delete this._collectionFactories[i],s=a(this,e,t,n,o)})}storeQueryCollection(e,t,n,o,r){var s;e instanceof i.BaseCollection?this.storeBaseCollection(e,t,n,o,r):(s=this.getCollection(e,n))?s.set(f(this,e,t,n,o),r):this._collectionFactories[this.generateCollectionKey(e,n)]=(()=>{var i;return i=this.generateCollectionKey(e,n),delete this._collectionFactories[i],s=m(this,e,t,n,o)})}getModel(e){var t,n;return l.isObject(e)&&(e=w(e)),(t=this._modelStore[e])?t:(n=this._modelFactories[e])?t=n():null}getCollection(e,t){var n,i,o;return o=this.generateCollectionKey(e,t),(n=this._collectionStore[o])?n:(i=this._collectionFactories[o])?n=i():null}addBundle(e,t){var n,i,o,r;for(r in e.entities)for(n in e.entities[r])this.storeEntity(n,r,e,t);for(r in e.attributes)for(i in e.attributes[r])for(n in e.attributes[r][i])null!=g[i]&&this.storeCollection(n,r,i,e,t);for(r in e.queries)for(n in e.queries[r])this.storeQuery(n,r,e,t);for(r in o=[],e.responses)o.push(function(){var o;for(n in o=[],e.responses[r])o.push(function(){var o;for(i in o=[],e.responses[r][n])null!=g[i]&&o.push(this.storeQueryCollection(n,r,i,e,t));return o}.call(this));return o}.call(this));return o}makeURL(e,t,n,i,o={}){var r;return(r=l.chain(o).mapObject((e,t)=>l.flatten([e]).map(e=>`${t}=${e}`)).values().flatten().value().join("&"))&&(r=`?${r}`),`${e}${t=t?`/${t}`:""}/${n}${i=i?`/${i}`:""}${r}`}makeQueryBundle(e,t,n){var i;return(i={queries:{}}).queries[e]={},i.queries[e][t]=n,i}loadURL(e,t){return $.ajax(e).done((e,n)=>(this.addBundle(e,t),"function"==typeof t.success?t.success(e,this):void 0)).fail(e=>"function"==typeof t.error?t.error(e,this):void 0)}loadPostURL(e,t,n){return $.ajax(e,{type:"POST",data:JSON.stringify(t),contentType:"application/json",dataType:"json"}).done((e,t)=>(this.addBundle(e,n),"function"==typeof n.success?n.success(e,this):void 0)).fail(e=>"function"==typeof n.error?n.error(e,this):void 0)}loadEntity(e,t,n={}){var i,o,r;return(i=null!=(o=n.query)?o:{}).attr=this.getTypeAttributes(e),r=this.makeURL(env.API_HOSTNAME,"entities",e,t,i),this.loadURL(r,n)}loadEntities(e,t,n={}){var i,o,r;return(i=null!=(o=n.query)?o:{}).attr=this.getTypeAttributes(e),r=this.makeURL(env.API_HOSTNAME,"entities",e,"",i),this.loadPostURL(r,t,n)}loadQuery(e,t,n,i={}){var o,r,s,l;return r=null!=(s=i.query)?s:{},l=this.makeURL(env.API_HOSTNAME,"queries",e,"",r),o=this.makeQueryBundle(e,t,n),this.loadPostURL(l,o,i)}loadBundle(e,t,n,i={}){var o,r;return r=this.makeURL(env.API_BATCH_HOSTNAME,null,e),o=this.makeQueryBundle(e,t,n),this.loadPostURL(r,o,i)}ensureEntity(e,t,n={}){var i;return n.store=this,null!=(i=this.getModel(t))?i:this.storeEntity(new e(t,n))}ensureQuery(e,t,n={}){var i;return n.store=this,null!=(i=this.getModel(t))?i:this.storeQuery(new e(t,n))}ensureCollection(e,t,n){var i;return null!=(i=this.getCollection(e,n))?i:a(this,e,t,n,null)}ensureQueryCollection(){var e;return null!=(e=this.getCollection(id,relation))?e:m(this,id,type,relation,null)}},t.exports=o},{"./collections/index":7,"./models/index":64,"hash-sum":434,underscore:448}],33:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g=[].indexOf;"undefined"!=typeof window&&null!==window?(i=e("jquery"),o=e("backbone"),l=e("fingerprintjs")):(i=e(`${f="../../../server/compiled/templating/"}jquery`),o=e(`${f}backbone`),l=function(){}),p=e("underscore"),d=new l({canvas:!0}),c=e("urijs"),({generalizeStringURL:h}=e("./utils/transforms")),"undefined"!=typeof window&&null!==window&&(window.localModels={}),m=function(e,t,n,i){return Object.defineProperty(e,t,{configurable:!0,get:function(){return delete this[t],this[t]=n.toJSON(i)}})},a=function(){class t extends o.Model{Collections(){return[]}Models(){return[]}url(){var e;return null!=(e=this.get("URL"))?e:super.url(...arguments)}clientUrl(){return this.url()}initialize(){return this.changed={},this.on("select",(e,t)=>{var n,i;return null!=(n=this.collection)&&null!=(i=n.where({selected:!0}).pop())&&i.unset("selected",t),this.set({selected:!0},t)}),this.on("navigate",()=>this.navigate())}parse(e,t={}){var n,i,o,r,l,a,c,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P;if(t=p.extend({silent:!0,reset:!0,remove:!1},t),null!=e){if(d=(l=p.clone(e)).context,delete l.context,null!=d){if(null==(f=this.id)&&this.set("uuid",l.uuid,{silent:!0}),r=u[d.class],h={silent:t.silent},null==this.collection)for(m=0,v=(b=r.prototype.Collections()).length;m<v;m++)if((n=b[m]).prototype.model()===u[l.class]){(c=new n).add(this,h),(R={})[n.prototype.key]=c;break}null!=this.collection?(null==this.collection.parent||t.parseContext)&&(V=null!=(a=this.collection).parent?a.parent:a.parent=new r(R,h)).set(V.parse(d,h),h):console.error(`Parent collection for ${d.class} context object not found`),null==f&&this.unset("uuid",{silent:!0})}for(g=0,y=(C=this.Collections()).length;g<y;g++)null!=l[(i=C[g]).prototype.key]&&((c=this.get(i.prototype.key,{populate:!1}))||((!(o=s[null!=(S=l[i.prototype.key])?S.class:void 0])||i.prototype instanceof o)&&(o=i),(c=new o).parent=this),t.reset?c.reset(c.parse(l[i.prototype.key],t),p.defaults({parse:!1},t)):c.set(l[i.prototype.key],p.defaults({parse:!0},t)),l[i.prototype.key]=c);for(w=0,_=(k=this.Models()).length;w<_;w++)null!=l[(i=k[w]).prototype.key]&&((x=this.get(i.prototype.key,{populate:!1}))||((!(o=u[null!=(P=l[i.prototype.key])?P.class:void 0])||i.prototype instanceof o)&&(o=i),(x=new o).parent=this),x.set(x.parse(l[i.prototype.key],t),t),l[i.prototype.key]=x);return l}}set(e,t,n){var i;return"undefined"==typeof window||null===window?super.set(...arguments):("object"==typeof e?i=e:(i={})[e]=t,super.set(...arguments),null!=i.localID&&(window.localModels[i.localID]=this),this)}toJSON(e={}){var n,i,o,s,l,a,u,c,d,h,f;if((e=p.extend({deep:!0},e)).valid)for(i=0,l=(c=this.validKeys).length;i<l;i++)s=c[i],this.get(s);if(n=p.clone(this.attributes),o={},!e.valid)for(s in h=null!=(d=e.data)?d:{})f=h[s],o[s]=f;for(s in delete e.data,e.reference&&(o.model=this),e.query&&(o.query="undefined"!=typeof query&&null!==query?query:{}),e.parents&&(o.parents={},(a=this.parent||this.collection)&&(u=a.toJSON(p.defaults({deep:!1,parents:!0},e)),o.parents=p.extend(o.parents,u.parents),o.parents[a.key]=u)),n)if(f=n[s],!(e.valid&&g.call(this.validKeys,s)<0))if(!e.deep&&f instanceof r)o[s]={collection:f};else if(f instanceof t||f instanceof r)e.lazy?m(o,s,f,p.defaults({parents:!1},e)):o[s]=f.toJSON(p.defaults({parents:!1},e));else{if(e.changed&&!this.hasChanged(s)&&"id"!==s&&!this.isNew())continue;o[s]=f}if(e.changed&&(this.isNew()||0!==Object.getOwnPropertyNames(o).length)||!e.changed)return o}equals(e,t){var n,i;return i=this.toJSON(t),n=e.toJSON?e.toJSON(t):e,t.omit&&(i=p.omit(i,t.omit),n=p.omit(n,t.omit)),p.isEqual(i,n)}get(e,t={}){var n,i;return i=super.get(...arguments),!1!==t.populate&&null==i&&(n=p.find(this.Models().concat(this.Collections()),function(t){return t.prototype.key===e}))&&((i=new n).parent=this,this.set(e,i,{silent:!0})),i}getByURL(e){var t,n,i,o,r;if(null!=(r=this.get(e.match(/\d+/g).join("-"))))return r;for(n=0,i=(o=this.Collections()).length;n<i;n++)if(t=o[n],null!=(r=this.get(t.prototype.key).getByURL(e)))return r}clone(e={}){var n,i,o,s,l;if(i=super.clone(...arguments),!e.deep)return i;for(o in s=i.attributes)((l=s[o])instanceof t||l instanceof r)&&((n=l.clone(e)).parent=i,i.set(o,n,{silent:!0}));return i}fetch(e={}){var t,n;return(t=null!=(n=p.result(this,"apiUrl"))?n:p.result(this,"url")).indexOf("?")>-1?t+="&format=json":t+="?format=json",super.fetch(p.extend(e,{url:t})).fail(e=>this.trigger("fetchError"))}save(t,n,o){var r,s,l,a,u,c,m,f,g,w;return({LoginModalView:a,LoginModalRegisterContentView:l,LoginModalAnonymousRegisterContentView:s}=e("./views/components/login-modal-view")),({ClaimBannerFixedDropdownView:r}=e("./views/components/claim-banner-view")),c=null,w=(()=>(!1!==o.add&&null!=c&&c.add(this),this.save(t,n,p.extend({resubmit:!0},o)))),m=(()=>i.ajax({url:"/users",type:"POST",dataType:"json",data:{anonymous:!0},headers:{"X-Fingerprint":d.get()},success:e=>(window.currentUser.set(window.currentUser.parse(e,{silent:!0})),w().done(()=>{var e,t;return(e="undefined"!=typeof window&&null!==window?window.mainHeaderView:void 0)&&e.setPopup(r,{follows:e.$(".MainHeader-Content")}),analytics.track("Anonymous Account Created",{label:h(null!=(t=this.url())?t:"")})})),error:(e,t,n)=>{var i;f(),i="";try{i=this.url()}catch(e){e,(null!=c?c.url():void 0)&&(i=`${c.url()}/${this.key}`)}return analytics.track("Anonymous Account Creation Server Error",{label:h(i),status:e.status})}})),f=((e,t)=>{var n;if(0===i("body > section.login").length)return analytics.track("Prompted Login"),(n=new a(p.extend({ContentView:null!=e?e:l},t))).on("login",w),n.on("loginRejection",()=>this.trigger("saveError"))}),null==t||"object"==typeof t?(u=t,o=n):(u={})[t]=n,null==o&&(o={}),o=p.extend({valid:!0},o),(g=super.save(u,o)).fail(e=>{if(analytics.track("Not Authenticated",{label:this.key,url:this.url(),attributes:JSON.stringify(p.extend({},this.attributes,u)),status:e.status}),c=this.collection,this.isNew()&&null!=c&&c.remove(this,{silent:!0}),o.resubmit)return this.trigger("saveError");switch(e.status){case 401:return m();case 403:case 429:return window.currentUser.get("anonymous")?f(s,{model:window.currentUser.clone()}):f();default:return this.trigger("saveError")}}),g}sync(e,t,n){return"read"!==e&&(n=p.extend({headers:{"X-Fingerprint":d.get()}},n)),super.sync(...arguments)}trigger(e,...t){return t[0]!==this&&t.unshift(this),super.trigger(e,...t)}navigate(e){var t;return t=new c(this.clientUrl()),e=p.extend({trigger:!0,hash:t.hash()},e),router.navigate(t.hash("").toString(),e)}permissions(){return!1}getColor(){return"#71AD9F"}parents(e){var t,n,i;for(t=null!=(n=this.collection)?n:this.parent;t;){if(null==e||t.key===e)return t;t=null!=(i=t.collection)?i:t.parent}}meta(){return{link:location.origin+this.url(),name:"Slant",text:"Check out ",caption:"",description:"",picture:"https://www.slant.co/images/share-logo.png"}}post(e,t={}){var n,i,o,r,s;return i=`width=${s=null!=(o=t.width)?o:550},height=${n=null!=(r=t.height)?r:450},left=${screen.width/2-s/2},top=${screen.height/2-n/2}`,open(e,void 0,i),this}getPostText(e){return`${e.text} "${this.get("revision").get("title")}"`}postToFacebook(e){var t;return e=p.extend({},p.result(this,"meta"),e),t=`https://www.facebook.com/sharer/sharer.php?display=popup&u=${encodeURIComponent(e.link)}&title=${encodeURIComponent(this.getPostText(e))}`,this.post(t),analytics.track("Social Button Facebook")}postToGoogle(e){var t;return e=p.extend({},p.result(this,"meta"),e),t=`https://plus.google.com/share?url=${encodeURIComponent(e.link)}`,this.post(t,{width:650,height:500}),analytics.track("Social Button Google")}postToTwitter(e){var t;return t=`https://twitter.com/intent/tweet?via=SlantCo&url=${(e=p.extend({},p.result(this,"meta"),e)).link}&text=${encodeURIComponent(this.getPostText(e))}`,this.post(t),analytics.track("Social Button Twitter")}}return t.prototype.idAttribute="uuid",t.prototype.key=null,t.prototype.validKeys=[],t}.call(this),t.exports=a,u=e("./models"),r=e("./collection"),s=e("./collections")},{"./collection":1,"./collections":2,"./models":34,"./utils/transforms":89,"./views/components/claim-banner-view":263,"./views/components/login-modal-view":280,backbone:424,fingerprintjs:431,jquery:438,underscore:448,urijs:452}],34:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;for(d in p=e("underscore"),u=e("urijs"),h=e("text-diff"),l=e("./model"),a=n,({YOUTUBE_LINK:c}=e("./utils/patterns")),({BADGES:i}=e("./utils/constants")),"undefined"!=typeof window&&null!==window&&(m=e("uploadcare-widget/uploadcare.api"),o=Image,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i,o,r,s,l,a;for(l=(o=atob(this.toDataURL(t,n).split(",")[1])).length,i=new Uint8Array(l),r=s=0,a=l;0<=a?s<a:s>a;r=0<=a?++s:--s)i[r]=o.charCodeAt(r);return e(new Blob([i],{type:t||"image/png"}))}})),a.Model=l,a.Post=class extends l{Models(){return[a.Revision]}},a.Topic=function(){class t extends a.Post{Collections(){return[r.ViewpointList,r.CommentList,r.EventList,r.SubscriptionList,r.TagList,r.UserList,r.CommunityViewpointVoteList]}Models(){return[a.TopicRevision,function(){var e;return(e=class extends a.Event{}).prototype.key="createdEvent",e}.call(this),a.TopicReactionSet]}apiUrl(){return this.url().replace(/\/~.+/,"/legacy")}meta(){var e;return e=(e=this.get("viewpoints").pluck("revision").map(function(e){return e.get("title")})).slice(0,-2).concat("").join(", ")+e.slice(-2).join(", or "),p.defaults({name:this.get("title"),description:e},super.meta(...arguments))}getSpecKeys(){var e;return e=this.get("viewpoints").map(function(e){return e.get("masterOption").get("specs").pluck("key")}),p.chain(e).flatten(!0).unique().value()}clientUrl(){var t;return({improveURL:t}=e("./utils/transforms")),t(this,this.get("communityURL"))}isGamingTopic(){var e;return(e=this.get("tags")).any(function(e){return"gaming"===e.id})&&e.every(function(e){return"electronics"!==e.id&&"software"!==e.id})}getRelatedQuestionsUrl(){return`/related?query=${this.get("revision").get("title").replace("#","").replace(/\?/g,"")}`}}return t.prototype.key="topic",t.prototype.validKeys=["revision","tags","feature"],t}.call(this),a.Viewpoint=function(){class e extends a.Post{Collections(){return[r.SectionList,r.UserList,r.ViewpointVoteList,r.CommunityViewpointVoteList,r.CommentList,r.EventList]}Models(){return[a.ViewpointRevision,function(){var e;return(e=class extends a.Event{}).prototype.key="createdEvent",e}.call(this),a.ViewpointReactionSet,a.MasterOption]}permissions(e={}){return null!=this.get("users").get(e.id)}meta(){var e;return e=(e=(e=this.get("revision").get("text")).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,"$2")).slice(0,301).trim()+"...",p.defaults({name:this.collection.parent.get("title")+" - "+this.get("title"),description:e},super.meta(...arguments))}getSpecs(){var e;return null!=(e=this.collection.parent.getSpecs()[this.get("id")])?e:{}}getSlantScore(){return Math.floor(100*this.get("slantscore"))}isAP(){var e;return(e=this.get("badge"))===i.best||e===i.excellent}}return e.prototype.key="viewpoint",e.prototype.validKeys=["revision"],e}.call(this),a.Section=function(){class e extends a.Post{Collections(){return[r.CommentList,r.VoteList,r.EventList,function(){var e;return(e=class extends r.UserList{}).prototype.key="contributors",e}.call(this)]}Models(){return[a.SectionRevision,a.SectionReactionSet]}navigate(e){var t;return e=p.extend({trigger:!0,hash:`#${this.get("id")}`},e),t=this.collection.parent.url(),router.navigate(t,e)}isMarked(){var e;return e=this.get("reactionSet"),this.get("isPending")||e.get("flag").count()>0||e.get("outOfDate").count()>0}}return e.prototype.key="section",e.prototype.validKeys=["accepted","isCon","revision"],e}.call(this),a.MasterOption=function(){class e extends l{Collections(){return[r.TopicList,r.SectionList,r.TagList,r.MasterOptionVoteList,function(){var e;return(e=class extends r.MasterOptionList{}).prototype.key="related",e}.call(this),r.SpecList]}Models(){return[function(){var e;return(e=class extends a.Viewpoint{}).prototype.key="source",e}.call(this)]}getVotesCount(){var e;return((null!=(e=this.get("votes"))?e.meta("upvotes"):void 0)||0)+((null!=e?e.meta("downvotes"):void 0)||0)}getRatingValue(){var e,t,n;return t=(null!=(n=this.get("votes"))?n.meta("upvotes"):void 0)||0,e=(null!=n?n.meta("downvotes"):void 0)||0,Math.round(100*t/(t+e||1))}}return e.prototype.key="masterOption",e.prototype.validKeys=["specs"],e}.call(this),a.Comparison=function(){class e extends l{Collections(){return[r.MasterOptionList]}}return e.prototype.key="masterComparison",e}.call(this),a.MasterOptionAlternatives=function(){class e extends l{Collections(){return[function(){var e;return(e=class extends r.MasterOptionList{}).prototype.key="alternatives",e}.call(this)]}Models(){return[a.MasterOption]}getSpecKeys(){var e;return e=this.get("alternatives").map(function(e){return e.get("specs").pluck("key")}),p.chain(e).flatten(!0).unique().value()}}return e.prototype.key="masterOptionAlternatives",e}.call(this),a.Revision=function(){class e extends l{}return e.prototype.validKeys=["title","text"],e.prototype.key="revision",e}.call(this),a.TopicRevision=class extends a.Revision{},a.ViewpointRevision=function(){class e extends a.Revision{Collections(){return[r.ImageList]}}return e.prototype.validKeys=["title","text","images","siteURL","price"],e}.call(this),a.SectionRevision=function(){class e extends a.Revision{}return e.prototype.validKeys=["title","text"],e}.call(this),a.Comment=function(){class e extends l{Collections(){return[r.CommentList]}Models(){return[a.User,a.Revision,a.CommentReactionSet]}clientUrl(){var e,t;return e=(t=new u(this.url())).segment(-1),t.segment(-1,"").hash(e),this.get("revision").get("class")&&t.segment(-1,"history"),t.toString()}diff(){var e,t,n,i,o,r,s;return i=null!=(o=this.get("revision"))&&null!=(r=o.get("parent"))?r.text:void 0,e="",((n=null!=(s=this.get("revision"))?s.get("text"):void 0)||i)&&i!==n&&(e=(t=new h({timeout:.1,editCost:10})).main(null!=i?i:"",null!=n?n:""),t.cleanupEfficiency(e)),e}}return e.prototype.key="comment",e.prototype.validKeys=["text","revision","accepted"],e.prototype.vote=a.Viewpoint.prototype.vote,e}.call(this),a.TopicEdit=function(){class e extends a.Comment{Collections(){return[r.TagList]}Models(){return[a.TopicRevision]}}return e.prototype.validKeys=["text","tags","revision"],e}.call(this),a.ViewpointEdit=class extends a.Comment{Models(){return[a.ViewpointRevision]}},a.SectionEdit=function(){class e extends a.Comment{Models(){return[a.SectionRevision]}}return e.prototype.validKeys=["text","revision","accepted"],e}.call(this),a.Vote=function(){class e extends l{isVoted(){return this.get("delta")>0||this.get("delta")<0}}return e.prototype.key="vote",e.prototype.validKeys=["value","votes","favorite"],e}.call(this),a.ViewpointVote=function(){class e extends a.Vote{Models(){return[a.User,a.ViewpointVoteReactionSet]}Collections(){return[r.CommentList]}}return e.prototype.validKeys=["value","votes","favorite","text"],e}.call(this),a.Subscription=function(){class e extends l{}return e.prototype.key="subscription",e.prototype.validKeys=["subscribe"],e}.call(this),a.User=function(){var e;class t extends l{save(e,t,n={}){var i;return null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,n=p.extend({patch:!0},n),super.save(i,n)}url(){return this.get("URL")?this.get("URL"):"/userInfo"}Collections(){return[r.AskedTopicList,r.RecommendedViewpointList,r.ViewpointList,r.SubscribedTopicList,r.EventList,r.KarmaBonusList,r.NotificationList,r.CommentList,function(){var e;return(e=class extends r.ViewpointList{}).prototype.key="contributions",e}.call(this),function(){var e;return(e=class extends r.CommentList{}).prototype.key="pending",e}.call(this),function(){var e;return(e=class extends r.TopicList{}).prototype.key="meta",e}.call(this),r.FollowingList]}permissions(e){return this.id===e.id}fill(t,n={}){var i,o,r;if(null!=t&&t instanceof a.Topic)return this.get("username")?(i=p.extend({reset:!1,remove:!1,add:!0,merge:!0,silent:!1,success:n.callback,error:n.errorCallback},n),t.url=function(){return`/userInfo/meta/${t.get("id")}`},t.fetch(i),delete t.url,t):(t.unset("promoted"),null!=(o=t.get("subscriptions"))&&o.unset("subscribed"),null!=(r=t.get("viewpoints"))&&r.each(function(t){var n;return t.get("votes").unset("delta"),t.get("votes").each(function(t){return t.unset("delta"),e(t.get("reactionSet"))}),t.get("communityRecommendations").each(function(t){return e(t.get("reactionSet"))}),e(t.get("reactionSet")),null!=(n=t.get("sections"))?n.each(function(t){return t.get("votes").unset("delta"),e(t.get("reactionSet"))}):void 0}),t.get("communityRecommendations").each(function(t){return e(t.get("reactionSet"))}),e(t.get("reactionSet")),void("function"==typeof n.callback&&n.callback()))}getAvatarURL(e={}){var t,n,i,o,r,s,l;return e=p.defaults(e,{size:300}),s=(null!=(n=this.get("image"))?n.source:void 0)||(null!=(i=this.get("image"))?i.small:void 0),l=new u(null!=s?s:""),r=e.size,"ucarecdn.com"!==(o=l.hostname())&&"www.ucarecdn.com"!==o||l.hostname("cdn.slant.co"),"cdn.slant.co"===l.hostname()?(t=`/${l.segment(0)}/-/format/jpeg/-/progressive/yes/`,r&&(t+=`-/scale_crop/${r}x${r}/center/`),l.path(t).toString()):"facebook.com"===l.domain()?l.setQuery({width:r,height:r}).toString():"googleusercontent.com"===l.domain()?l.setQuery({sz:r}).toString():"avatars.slant.co"===l.hostname()?l.directory(`/identicons/${r}/`).toString():s||void 0}getAvatarPreviewURL(e){return e=p.extend({size:200},e),this.getAvatarURL(e)}getAvatarThumbnailURL(e){return e=p.extend({size:50},e),this.getAvatarURL(e)}getUserId(){var e,t;if(this.get("uuid"))return null!=(e=(t=this.get("uuid").split(":",2))[1])?e:t[0]}loginEmail(e){return e={login:e.username||e.email,password:e.password},$.ajax({url:"/login/email",type:"POST",dataType:"json",data:e,success:e=>(this.set(this.parse(e)),this.trigger("login")),error:(e,t,n)=>{var i;return this.trigger("unauthorized",JSON.parse(null!=(i=e.responseText)?i:"{}"))}})}login(){var e,t,n;return e=(()=>(this.off("change",n),this.off("error",t))),n=(()=>(e(),this.trigger("login"))),t=(()=>(e(),this.trigger("unauthorized"))),this.on("sync",n),this.on("error",t),this.fetch()}logout(){return $.ajax({url:"/logout",type:"POST",contentType:"application/x-www-form-urlencoded",success:()=>(this.clear(),this.initialize(),this.trigger("logout"))})}}return t.prototype.idAttribute="username",t.prototype.key="user",t.prototype.validKeys=["displayName","username","email","id","bio","follow","picUrl","verification","password"],e=function(e){return p.chain(null!=e?e.Collections():void 0).pluck("prototype").pluck("key").each(function(t){return e.get(t).unset("reacted")})},t}.call(this),a.Event=function(){class e extends l{Models(){return[a.User,function(){var e;return(e=class extends a.Post{}).prototype.key="target",e}.call(this)]}}return e.prototype.key="event",e}.call(this),a.NotificationGroup=function(){class e extends l{Collections(){return[function(){var e;return(e=class extends r.NotificationList{}).prototype.key="items",e}.call(this)]}}return e.prototype.key="notificationGroup",e}.call(this),a.Notification=function(){class e extends l{Models(){return[a.Event]}}return e.prototype.key="notification",e}.call(this),a.Tag=function(){class e extends l{}return e.prototype.idAttribute="id",e.prototype.key="tag",e.prototype.validKeys=["id","name"],e}.call(this),a.Filter=function(){class e extends l{Collections(){return[function(){var e;return(e=class extends r.Collection{}).prototype.key="content",e}.call(this),r.TagList,r.UserList]}}return e.prototype.key="filter",e.prototype.validKeys=["id"],e}.call(this),a.Feed=function(){class e extends l{Collections(){return[function(){var e;return(e=class extends r.TopicList{}).prototype.key="content",e}.call(this),r.UserList]}}return e.prototype.key="feed",e}.call(this),a.TagFilter=function(){class e extends l{Collections(){return[function(){var e;return(e=class extends r.TagList{}).prototype.key="include",e}.call(this),function(){var e;return(e=class extends r.TagList{}).prototype.key="exclude",e}.call(this)]}}return e.prototype.key="tagFilter",e.prototype.validKeys=["include","exclude"],e}.call(this),a.Action=function(){class e extends l{}return e.prototype.key="action",e}.call(this),a.TopicComment=class extends a.Action{},a.ViewpointComment=class extends a.Action{},a.SectionComment=class extends a.Action{},a.TopicSuggestedEdit=class extends a.Action{},a.ViewpointSuggestedEdit=class extends a.Action{},a.SectionSuggestedEdit=class extends a.Action{},a.TopicEditAccepted=class extends a.Action{},a.ViewpointEditAccepted=class extends a.Action{},a.SectionEditAccepted=class extends a.Action{},a.NewViewpoint=class extends a.Action{},a.NewSection=class extends a.Action{},a.VoteViewpoint=class extends a.Action{},a.Spec=function(){class e extends l{}return e.prototype.key="spec",e.prototype.validKeys=["key","value"],e}.call(this),a.Image=function(){class t extends l{getImageURL(e={}){var t,n,i,o,r,s,l,a,d,h,m;return e=p.defaults(e,{width:2048,height:2048,method:"preview"}),i=this.get("hosted"),d=this.get("source"),o=new u(null!=i?i:""),h=e.width,n=e.height,t="scale_crop"===(r=e.method)?"center/":"","ucarecdn.com"!==(l=o.hostname())&&"www.ucarecdn.com"!==l||o.hostname("cdn.slant.co"),"cdn.slant.co"===o.hostname()?(s=`/${o.segment(0)}/-/format/jpeg/-/progressive/yes/`,(h||n)&&(s+=`-/${r}/${h}x${n}/${t}`),o.path(s).toString()):i||((m=null!=(a=c.exec(d))?a[1]:void 0)?`https://img.youtube.com/vi/${m}/hqdefault.jpg`:d||void 0)}getImageThumbnailURL(e){return e=p.extend({width:160,height:160},e),this.getImageURL(e)}getImagePreviewURL(e){return e=this.isVideo()?p.extend({method:"scale_crop",width:480,height:270},e):p.extend({width:480,height:480},e),this.getImageURL(e)}isVideo(){return null!=c.exec(this.get("source"))}createVideoEmbed(t={}){var n,i,o,r,s,l,a,u;if(({timeToSecs:a}=e("./utils/transforms")),s=this.get("source"),[o,i,l]=null!=(r=c.exec(s))?r:[],i)return n=document.createElement("iframe"),u=`https://www.youtube.com/embed/${i}?showinfo=0`,l&&(u+=`&start=${a(l)}`),t.isAutoplay&&(u+="&autoplay=1"),n.setAttribute("src",u),n.setAttribute("frameBorder",0),n.setAttribute("allowfullscreen","allowfullscreen"),n}upload(){var e,t,n,i,r,s,l;return this.get("hosted")?this:(n=this.getImageURL(this))?(this.uploadProgress=0,this.uploadState=null,this.uploadError=null,this.uploadURL=null,e=(e=>{var t;return null!=(t=this.collection)&&t.trigger("uploaded",e),(this.get("source")instanceof HTMLInputElement||this.get("source")instanceof File)&&this.unset("source",{silent:!0}),this.set("hosted",e.cdnUrl,{silent:!0}),this.set("hosted",e.cdnUrl,{silent:!0}).trigger("uploaded",e)}),i=(e=>(this.uploadProgress=e.progress,this.uploadState=e.state,this.trigger("progress",e))),t=((e,t)=>(this.uploadError=e,this.trigger("failed",e,t))),l=function(n){return m.fileFrom("url",n).done(e).progress(i).fail((i,r)=>{var s,l,a,u,c;if(-1===(null!=(u=r.mimeType)?u.indexOf("image/svg"):void 0)&&-1===(null!=(c=r.mimeType)?c.indexOf("image/webp"):void 0))return t(i,r);try{return s=document.createElement("canvas"),l=s.getContext("2d"),(a=new o).setAttribute("crossOrigin","Anonymous"),a.addEventListener("load",function(){return s.width=a.width,s.height=a.height,l.drawImage(a,0,0),s.toBlob(function(n){return m.fileFrom("object",n).done(e).fail(t)})}),a.addEventListener("error",()=>t(i,r)),a.src=n}catch(e){return t(i,r)}})},r=function(n){return m.fileFrom("object",n).done(e).progress(i).fail(t)},s=function(n){return m.fileFrom("input",n).done(e).progress(i).fail(t)},this.uploadPromise=n instanceof File?r(n):n instanceof HTMLInputElement?s(n):l(n),this):this.trigger("failed")}}return t.prototype.idAttribute="id",t.prototype.key="image",t.prototype.validKeys=["source","hosted"],t}.call(this),a.ReactionSet=function(){class e extends l{url(){var e,t;return null!=(e=null!=(t=this.get("URL"))?t:null!=this.parent?`${this.parent.url()}/react`:void 0)?e:super.url(...arguments)}}return e.prototype.key="reactionSet",e}.call(this),a.TopicReactionSet=class extends a.ReactionSet{Collections(){return[function(){var e;return(e=class extends r.ReactionList{}).prototype.key="needsImprovement",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="duplicate",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="notAFit",e}.call(this)]}},a.ViewpointReactionSet=class extends a.ReactionSet{Collections(){return[function(){var e;return(e=class extends r.ReactionList{}).prototype.key="outOfDate",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="flag",e}.call(this)]}},a.ViewpointVoteReactionSet=class extends a.ReactionSet{Collections(){return[function(){var e;return(e=class extends r.ReactionList{}).prototype.key="funny",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="useful",e}.call(this)]}},a.SectionReactionSet=class extends a.ReactionSet{Collections(){return[function(){var e;return(e=class extends r.ReactionList{}).prototype.key="needsImprovement",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="flag",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="outOfDate",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="useful",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="upvote",e}.call(this),function(){var e;return(e=class extends r.ReactionList{}).prototype.key="downvote",e}.call(this)]}},a.CommentReactionSet=class extends a.ReactionSet{Collections(){return[function(){var e;return(e=class extends r.ReactionList{}).prototype.key="useful",e}.call(this)]}},a.Reaction=function(){class e extends l{Models(){return[a.User]}}return e.prototype.key="reaction",e.prototype.validKeys=["reacted","text"],e}.call(this),a.KarmaBonus=function(){class e extends l{Models(){return[a.Event]}}return e.prototype.key="karma",e}.call(this),a.Sitemap=class extends l{},a.Log=class extends l{},a)(s=a[d]).prototype instanceof l&&(s.prototype.Models=p.memoize(s.prototype.Models),s.prototype.Collections=p.memoize(s.prototype.Collections));r=e("./collections")},{"./collections":2,"./model":33,"./utils/constants":85,"./utils/patterns":87,"./utils/transforms":89,"text-diff":447,underscore:448,"uploadcare-widget/uploadcare.api":449,urijs:452}],35:[function(e,t,n){var i,o;"undefined"!=typeof window&&null!==window?i=e("backbone"):("../../../../server/compiled/templating/",i=e("../../../../server/compiled/templating/backbone")),o=function(){class e extends i.Model{references(){return{}}relations(){return{}}attrs(){return[]}initialize(e,t={}){return this.store=t.store}clone(){var e;return(e=super.clone(...arguments)).store=this.store,e.loaded=this.loaded,e}getModel(...e){var t,n;if(this.store)return n=this.get(e[0]),t=this.store.getModel(n),e.length>1&&t?t.getModel(...e.slice(1)):t;throw new Error("Model store not defined")}getCollection(e){if(this.store)return this.store.ensureCollection(this.id,this.key,e);throw new Error("Model store not defined")}}return e.prototype.validKeys=[],e}.call(this),t.exports={BaseModel:o}},{backbone:424}],36:[function(e,t,n){var i,o;({EntityModel:o}=e("./entity-model")),i=function(){class t extends o{references(){return{context_id:{question:e("./question-model").QuestionModel,option:e("./option-model").OptionModel,section:e("./section-model").SectionModel,rec:e("./rec-model").RecModel}[this.get("context_type")],user_id:e("./user-model").UserModel,parent_id:e("./comment-model").CommentModel}}relations(){return{comment_reaction_ids:e("../../collections/reaction-collection").ReactionCollection}}attrs(){return["comment_ranking_obj"]}}return t.prototype.key="comment",t.prototype.idAttribute="comment_id",t}.call(this),t.exports={CommentModel:i}},{"../../collections/reaction-collection":25,"./comment-model":36,"./entity-model":37,"./option-model":53,"./question-model":55,"./rec-model":57,"./section-model":58,"./user-model":63}],37:[function(e,t,n){var i,o;({BaseModel:i}=e("../base-model")),o=function(){class e extends i{toJSON(e={}){var t;return t=super.toJSON(e),e.valid&&(t=_.pick(t,this.validKeys)),t}navigate(e,t){return e=new URI(e),t=_.extend({trigger:!0,hash:e.hash()},t),router.navigate(e.hash("").toString(),t)}fetch(e={}){var t,n;return n=e.success,(t=_.defaults({silent:!0},e)).success=((...t)=>(e.silent||this.trigger("change sync"),"function"==typeof n?n(...t):void 0)),this.store.loadEntity(this.key,this.id,t)}getLegacyModel(){throw new Error('"getLegacyModel" not implemented')}}return e.prototype.validKeys=[],e.prototype.category="entities",e}.call(this),t.exports={EntityModel:o}},{"../base-model":35}],38:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{section_id:e("./section-model").SectionModel,user_id:e("./user-model").UserModel}}}return t.prototype.key="highlight",t.prototype.idAttribute="highlight_id",t}.call(this),t.exports={HighlightModel:o}},{"./entity-model":37,"./section-model":58,"./user-model":63}],39:[function(e,t,n){var i,o,r,s,l,a;l=e("underscore"),r=e("urijs"),({EntityModel:i}=e("./entity-model")),({YOUTUBE_LINK:s}=e("../../utils/patterns")),"undefined"!=typeof window&&null!==window&&(a=e("uploadcare-widget/uploadcare.api"),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i,o,r,s,l,a;for(l=(o=atob(this.toDataURL(t,n).split(",")[1])).length,i=new Uint8Array(l),r=s=0,a=l;0<=a?s<a:s>a;r=0<=a?++s:--s)i[r]=o.charCodeAt(r);return e(new Blob([i],{type:t||"image/png"}))}})),o=function(){class t extends i{getImageURL(e={}){var t,n,i,o,a,u,c,p,d,h,m;return e=l.defaults(e,{width:2048,height:2048,method:"preview"}),i=this.get("hosted_uri"),d=this.get("source_uri"),o=new r(null!=i?i:""),h=e.width,n=e.height,t="scale_crop"===(a=e.method)?"center/":"","ucarecdn.com"!==(c=o.hostname())&&"www.ucarecdn.com"!==c||o.hostname("cdn.slant.co"),"cdn.slant.co"===o.hostname()?(u=`/${o.segment(0)}/-/format/jpeg/-/progressive/yes/`,(h||n)&&(u+=`-/${a}/${h}x${n}/${t}`),o.path(u).toString()):i||((m=null!=(p=s.exec(d))?p[1]:void 0)?`https://img.youtube.com/vi/${m}/hqdefault.jpg`:d||void 0)}getImageThumbnailURL(e){return e=l.extend({width:160,height:160},e),this.getImageURL(e)}getImagePreviewURL(e){return e=this.isVideo()?l.extend({method:"scale_crop",width:480,height:270},e):l.extend({width:480,height:480},e),this.getImageURL(e)}isVideo(){return null!=s.exec(this.get("source_uri"))}createVideoEmbed(t={}){var n,i,o,r,l,a,u,c;if(({timeToSecs:u}=e("../../utils/transforms")),l=this.get("source_uri"),[o,i,a]=null!=(r=s.exec(l))?r:[],i)return n=document.createElement("iframe"),c=`https://www.youtube.com/embed/${i}?showinfo=0`,a&&(c+=`&start=${u(a)}`),t.isAutoplay&&(c+="&autoplay=1"),n.setAttribute("src",c),n.setAttribute("frameBorder",0),n.setAttribute("allowfullscreen","allowfullscreen"),n}getLegacyModel(){var t;return({Image:t}=e("../../models")),this.legacyModel=new t({hosted:this.get("hosted_uri"),source:this.get("source_uri")}),this.legacyModel}upload(){var e,t,n,i,o,r,s;return this.get("hosted_uri")?this:(n=this.getImageURL(this))?(this.uploadProgress=0,this.uploadState=null,this.uploadError=null,this.uploadURL=null,e=(e=>{var t;return null!=(t=this.collection)&&t.trigger("uploaded",e),(this.get("source_uri")instanceof HTMLInputElement||this.get("source_uri")instanceof File)&&this.unset("source_uri",{silent:!0}),this.set("hosted_uri",e.cdnUrl,{silent:!0}),this.set("hosted_uri",e.cdnUrl,{silent:!0}).trigger("uploaded",e)}),i=(e=>(this.uploadProgress=e.progress,this.uploadState=e.state,this.trigger("progress",e))),t=((e,t)=>(this.uploadError=e,this.trigger("failed",e,t))),s=function(n){return a.fileFrom("url",n).done(e).progress(i).fail((i,o)=>{var r,s,l,u,c;if(-1===(null!=(u=o.mimeType)?u.indexOf("image/svg"):void 0)&&-1===(null!=(c=o.mimeType)?c.indexOf("image/webp"):void 0))return t(i,o);try{return r=document.createElement("canvas"),s=r.getContext("2d"),(l=new Image).setAttribute("crossOrigin","Anonymous"),l.addEventListener("load",function(){return r.width=l.width,r.height=l.height,s.drawImage(l,0,0),r.toBlob(function(n){return a.fileFrom("object",n).done(e).fail(t)})}),l.addEventListener("error",()=>t(i,o)),l.src=n}catch(e){return t(i,o)}})},o=function(n){return a.fileFrom("object",n).done(e).progress(i).fail(t)},r=function(n){return a.fileFrom("input",n).done(e).progress(i).fail(t)},this.uploadPromise=n instanceof File?o(n):n instanceof HTMLInputElement?r(n):s(n),this):this.trigger("failed")}}return t.prototype.key="image",t.prototype.idAttribute="image_id",t.prototype.validKeys=["hosted_uri","source_uri"],t}.call(this),t.exports={ImageModel:o}},{"../../models":34,"../../utils/patterns":87,"../../utils/transforms":89,"./entity-model":37,underscore:448,"uploadcare-widget/uploadcare.api":449,urijs:452}],40:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./comment-model"),e("./highlight-model"),e("./image-model"),e("./media-model"),e("./ml-alias-model"),e("./ml-category-model"),e("./ml-crawl-model"),e("./ml-filter-model"),e("./ml-keyword-model"),e("./ml-product-configuration-model"),e("./ml-product-family-model"),e("./ml-product-generation-model"),e("./ml-product-type-model"),e("./ml-rating-model"),e("./ml-source-model"),e("./option-model"),e("./product-model"),e("./question-model"),e("./reaction-model"),e("./rec-model"),e("./section-model"),e("./spec-model"),e("./spec-type-model"),e("./store-page-model"),e("./tag-model"),e("./user-model"))},{"./comment-model":36,"./highlight-model":38,"./image-model":39,"./media-model":41,"./ml-alias-model":42,"./ml-category-model":43,"./ml-crawl-model":44,"./ml-filter-model":45,"./ml-keyword-model":46,"./ml-product-configuration-model":47,"./ml-product-family-model":48,"./ml-product-generation-model":49,"./ml-product-type-model":50,"./ml-rating-model":51,"./ml-source-model":52,"./option-model":53,"./product-model":54,"./question-model":55,"./reaction-model":56,"./rec-model":57,"./section-model":58,"./spec-model":59,"./spec-type-model":60,"./store-page-model":61,"./tag-model":62,"./user-model":63,underscore:448}],41:[function(e,t,n){var i,o;({ImageModel:i}=e("./image-model")),o=function(){class e extends i{}return e.prototype.key="media",e.prototype.idAttribute="media_id",e}.call(this),t.exports={MediaModel:o}},{"./image-model":39}],42:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{product_node_id:e("./entity-model")}}}return t.prototype.key="alias",t.prototype.idAttribute="alias_id",t}.call(this),t.exports={MLAliasModel:o}},{"./entity-model":37}],43:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{relations(){return{ml_category_product_type_ids:e("../../collections/ml-product-type-collection").MLProductTypeCollection,ml_category_sub_category_ids:e("../../collections/ml-category-collection").MLCategoryCollection,ml_filter_ids:e("../../collections/ml-filter-collection").MLFilterCollection,ml_keyword_ids:e("../../collections/ml-keyword-collection").MLKeywordCollection}}hasSubCategories(){var e;return null!=(e=this.get("ml_category_sub_category_ids"))?e.length:void 0}getPageURL(e){return makeURL(e,[this.get("ml_category_id")])}getCategoryPageURL(){return this.getPageURL("Category")}}return t.prototype.key="ml_category",t.prototype.idAttribute="ml_category_id",t}.call(this),t.exports={MLCategoryModel:o}},{"../../collections/ml-category-collection":10,"../../collections/ml-filter-collection":12,"../../collections/ml-keyword-collection":13,"../../collections/ml-product-type-collection":18,"./entity-model":37}],44:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{source_id:e("./ml-source-model")}}relations(){return{crawl_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection}}getContextRatings(e){return[...this.getProductRatingsOfType(e,"top_pick"),...this.getProductRatingsOfType(e,"runner_up")]}getTopPicks(e){return this.getProductRatingsOfType(e,"top_pick").filter(function(e){return""===e.get("value").in})}getContextualWinners(e){return this.getProductRatingsOfType(e,"top_pick").filter(function(e){return""!==e.get("value").in})}getRunnerUps(e){return this.getProductRatingsOfType(e,"runner_up").filter(function(e){return""===e.get("value").in})}getContextualRunnerUps(e){return this.getProductRatingsOfType(e,"runner_up").filter(function(e){return""!==e.get("value").in})}getRankRatings(e){return this.getProductRatingsOfType(e,"rank")}getScoreRatings(e){return this.getProductRatingsOfType(e,"score").filter(function(e){return""===e.get("value").in})}getProductRatingsOfType(e,t){return this.getProductRatings(e).filter(function(e){return e.get("rating_type")===t})}getProductRatings(e){var t;return t=this.store.getModel(e),this.getCollection("crawl_rating_ids").filter(e=>null!=t?t.hasRating(e):void 0)}}return t.prototype.key="crawl",t.prototype.idAttribute="crawl_id",t}.call(this),t.exports={MLCrawlModel:o}},{"../../collections/ml-rating-collection":20,"./entity-model":37,"./ml-source-model":52}],45:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{ml_category_id:e("./ml-category-model").MLCategoryModel}}}return t.prototype.key="ml_filter",t.prototype.idAttribute="ml_filter_id",t}.call(this),t.exports={MLFilterModel:o}},{"./entity-model":37,"./ml-category-model":43}],46:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{ml_category_id:e("./ml-category-model").MLCategoryModel}}}return t.prototype.key="ml_keyword",t.prototype.idAttribute="ml_keyword_id",t}.call(this),t.exports={MLKeywordModel:o}},{"./entity-model":37,"./ml-category-model":43}],47:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{relations(){return{product_configuration_latest_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection}}}return t.prototype.key="product_configuration",t.prototype.idAttribute="product_configuration_id",t}.call(this),t.exports={MLProductConfigurationModel:o}},{"../../collections/ml-rating-collection":20,"./entity-model":37}],48:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{source_id:e("./ml-source-model")}}relations(){return{product_family_latest_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection,product_family_product_generation_ids:e("../../collections/ml-product-generation-collection").MLProductGenerationCollection}}}return t.prototype.key="product_family",t.prototype.idAttribute="product_family_id",t}.call(this),t.exports={MLProductFamilyModel:o}},{"../../collections/ml-product-generation-collection":17,"../../collections/ml-rating-collection":20,"./entity-model":37,"./ml-source-model":52}],49:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{product_generation_product_family_id:e("./ml-product-family-model"),source_id:e("./ml-source-model")}}relations(){return{product_generation_product_type_ids:e("../../collections/ml-product-type-collection").MLProductTypeCollection,product_generation_latest_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection}}}return t.prototype.key="product_generation",t.prototype.idAttribute="product_generation_id",t}.call(this),t.exports={MLProductGenerationModel:o}},{"../../collections/ml-product-type-collection":18,"../../collections/ml-rating-collection":20,"./entity-model":37,"./ml-product-family-model":48,"./ml-source-model":52}],50:[function(e,t,n){var i,o,r;r=e("underscore"),({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{relations(){return{product_type_product_configuration_ids:e("../../collections/ml-product-configuration-collection").MLProductConfigurationCollection,product_type_latest_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection,product_type_media_ids:e("../../collections/media-collection").MediaCollection,product_type_store_page_ids:e("../../collections/store-page-collection").StorePageCollection,product_type_spec_ids:e("../../collections/spec-collection").SpecCollection}}getProductSiblings(){var e,t,n,i;return(null!=(t=(n=this.getModel("product_type_product_generation_id")).getModel("product_generation_product_family_id"))?t.getCollection("product_family_product_generation_ids").length:void 0)>1&&(t=null),i=n.getCollection("product_generation_product_type_ids").models,e=this.getCollection("product_type_product_configuration_ids").models,r.compact([...i,t,n,...e])}hasRating(e){var t;return t=this.getProductSiblings(),r.any(t,function(t){return t.get(`${t.key}_latest_rating_ids`).includes(e.get("rating_id"))})}}return t.prototype.key="product_type",t.prototype.idAttribute="product_type_id",t}.call(this),t.exports={MLProductTypeModel:o}},{"../../collections/media-collection":8,"../../collections/ml-product-configuration-collection":15,"../../collections/ml-rating-collection":20,"../../collections/spec-collection":28,"../../collections/store-page-collection":29,"./entity-model":37,underscore:448}],51:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{crawl_id:e("./ml-crawl-model"),product_id:e("./product-model")}}getNormalizedScore(e=10){var t;return(t=this.get("value")).rating/t.max*e}}return t.prototype.key="rating",t.prototype.idAttribute="rating_id",t}.call(this),t.exports={MLRatingModel:o}},{"./entity-model":37,"./ml-crawl-model":44,"./product-model":54}],52:[function(e,t,n){var i,o,r;({EntityModel:i}=e("./entity-model")),r=e("urijs"),o=function(){class e extends i{getSourceImageURL(e){var t,n,i;return"ucarecdn.com"!==(n=(i=new r(null!=e?e:"")).hostname())&&"www.ucarecdn.com"!==n||i.hostname("cdn.slant.co"),"cdn.slant.co"===i.hostname()?(t=`/${i.segment(0)}/-/format/auto/`,i.path(t).toString()):e||void 0}getSourceLogoURL(){var e;return e=this.get("logo_url"),this.getSourceImageURL(e)}getSourceFaviconURL(){var e;return e=this.get("favicon_url"),this.getSourceImageURL(e)}getName(){return this.get("name")||this.get("host")}}return e.prototype.key="source",e.prototype.idAttribute="source_id",e}.call(this),t.exports={MLSourceModel:o}},{"./entity-model":37,urijs:452}],53:[function(e,t,n){var i,o,r,s;({EntityModel:o}=e("./entity-model")),({makeURL:s}=e("../../../../../server/compiled/URLs")),({BADGES:i}=e("../../utils/constants")),r=function(){class t extends o{references(){return{product_id:e("./product-model").ProductModel,question_id:e("./question-model").QuestionModel,created_user_id:e("./user-model").UserModel}}relations(){return{option_comment_ids:e("../../collections/comment-collection").CommentCollection,option_image_ids:e("../../collections/image-collection").ImageCollection,option_reaction_ids:e("../../collections/reaction-collection").ReactionCollection,option_rec_ids:e("../../collections/rec-collection").RecCollection,option_body_rec_ids:e("../../collections/rec-collection").RecCollection,option_section_ids:e("../../collections/section-collection").SectionCollection}}attrs(){return["option_ranking_obj","option_reactions_obj","option_sections_obj","option_updated_obj","option_spec_set"]}isAP(){var e;return(e=this.get("option_ranking_obj").badge)===i.best||e===i.excellent}getSlantScore(){return Math.floor(100*this.get("option_ranking_obj").ranking_score)}getLegacyModel(){var t,n,i,o;return({Viewpoint:t,ViewpointRevision:n}=e("../../models")),o=this.getModel("question_id"),i=new t({type:"Model",class:"Viewpoint"}),this.get("vp_id")&&i.set({id:this.get("vp_id"),URL:`/topics/${o.get("t_id")}/viewpoints/${this.get("vp_id")}/~${o.get("url_slug")}~${this.get("url_slug")}`,uuid:`${o.get("t_id")}-${this.get("vp_id")}`}),i.get("revision").set({title:this.get("title"),text:this.get("body"),siteURL:this.get("site_url"),price:this.get("price")}),this.get("option_ranking_obj")&&i.get("votes").meta({type:"List",class:"ViewpointVoteList",URL:`/topics/${o.get("t_id")}/viewpoints/${this.get("vp_id")}/votes`,count:this.get("option_ranking_obj").rec_count_up+this.get("option_ranking_obj").rec_count_down,upvotes:this.get("option_ranking_obj").rec_count_up,downvotes:this.get("option_ranking_obj").rec_count_down,uuid:`/topics/${o.get("t_id")}/viewpoints/${this.get("vp_id")}/votes`}),i}isComplete(){return null!=this.get("option_image_ids")&&null!=this.get("option_section_ids")&&null!=this.get("option_ranking_obj")&&null!=this.get("option_reactions_obj")&&null!=this.get("option_sections_obj")&&null!=this.get("option_updated_obj")&&null!=this.get("option_spec_set")}getPageURL(e){var t,n;return t=this.getModel("question_id"),n=s(e,[t.get("t_id"),this.get("vp_id"),`~${t.get("url_slug")}~${this.get("url_slug")}`]),t.get("question_indexable_obj").noindex&&(n=`/improve${n}`),n}getViewpointPageURL(){return this.getPageURL("Viewpoint")}getViewpointCommentPageURL(){return this.getPageURL("VPCommentList")}getViewpointActivityPageURL(){return this.getPageURL("ViewpointActivity")}getViewpointHistoryPageURL(){return this.getPageURL("VPHistory")}}return t.prototype.key="option",t.prototype.idAttribute="option_id",t.prototype.validKeys=["title","body","price","site_url"],t}.call(this),t.exports={OptionModel:r}},{"../../../../../server/compiled/URLs":454,"../../collections/comment-collection":4,"../../collections/image-collection":6,"../../collections/reaction-collection":25,"../../collections/rec-collection":26,"../../collections/section-collection":27,"../../models":34,"../../utils/constants":85,"./entity-model":37,"./product-model":54,"./question-model":55,"./user-model":63}],54:[function(e,t,n){var i,o,r;({EntityModel:i}=e("./entity-model")),({makeURL:r}=e("../../../../../server/compiled/URLs")),o=function(){class t extends i{references(){return{option_id:e("./option-model").OptionModel}}relations(){return{product_section_ids:e("../../collections/section-collection").SectionCollection,product_tag_ids:e("../../collections/tag-collection").TagCollection}}attrs(){return["product_indexable_obj","product_ranking_obj","product_sections_obj","product_alias_set","product_related_set","product_spec_set"]}getLegacyModel(){var t,n,i,o,r,s;return({MasterOption:t,Spec:n}=e("../../models")),i=new t({type:"Model",class:"MasterOption"}),this.get("m_vp_id")&&i.set({id:this.get("m_vp_id"),URL:this.getMasterOptionPageURL(),uuid:`o-${this.get("m_vp_id")}`}),o=this.getModel("option_id").getLegacyModel(),i.get("source").set(o.attributes),this.get("product_spec_set")&&(s=function(){var e,t,i,o;for(o=[],e=0,t=(i=this.get("product_spec_set")).length;e<t;e++)r=i[e],o.push(new n({key:r.spec_key,value:r.spec_value,type:"Model",class:"Spec",uuid:`Spec:${r.spec_key}@o-${this.get("m_vp_id")}`}));return o}.call(this),i.get("specs").set(s)),i}getMasterOptionPageURL(){var e;return e=r("MOption",[this.get("m_vp_id"),`~${this.get("url_slug")}-review`]),this.get("product_indexable_obj").noindex&&(e=`/improve${e}`),e}getMasterOptionAlternativesPageURL(){var e;return e=r("Alternatives",[this.get("m_vp_id"),this.get("url_slug")]),this.get("product_indexable_obj").noindex&&(e=`/improve${e}`),e}}return t.prototype.key="product",t.prototype.idAttribute="product_id",t.prototype.validKeys=["title","body","price","site_url"],t}.call(this),t.exports={ProductModel:o}},{"../../../../../server/compiled/URLs":454,"../../collections/section-collection":27,"../../collections/tag-collection":30,"../../models":34,"./entity-model":37,"./option-model":53}],55:[function(e,t,n){var i,o,r,s;r=e("underscore"),({EntityModel:i}=e("./entity-model")),({makeURL:s}=e("../../../../../server/compiled/URLs")),o=function(){class t extends i{references(){return{created_user_id:e("./user-model").UserModel}}relations(){return{question_rec_ids:e("../../collections/rec-collection").RecCollection,question_rec_user_ids:e("../../collections/user-collection").UserCollection,question_sub_user_ids:e("../../collections/user-collection").UserCollection,question_comment_ids:e("../../collections/comment-collection").CommentCollection,question_option_ids:e("../../collections/option-collection").OptionCollection,question_reaction_ids:e("../../collections/reaction-collection").ReactionCollection,question_tag_ids:e("../../collections/tag-collection").TagCollection}}attrs(){return["question_indexable_obj","question_reactions_obj","question_updated_obj"]}isGamingQuestion(){var e;return(e=this.getCollection("question_tag_ids")).any(function(e){return"gaming"===e.get("token")})&&e.every(function(e){return"electronics"!==e.get("token")&&"software"!==e.token})}getOptionRecCount(){return this.getCollection("question_option_ids").reduce(function(e,t){return e+t.get("option_ranking_obj").rec_count_up+t.get("option_ranking_obj").rec_count_down},0)}getSpecKeys(){var e;return e=this.getCollection("question_option_ids").map(function(e){return r.pluck(e.get("option_spec_set"),"spec_key")}),r.chain(e).flatten(!0).compact().unique().value()}getPageURL(e){var t;return t=s(e,[this.get("t_id"),`~${this.get("url_slug")}`]),this.get("question_indexable_obj").noindex&&(t=`/improve${t}`),t}getTopicPageURL(){return this.getPageURL("Topic")}getTopicComparePageURL(){return this.getPageURL("Compare")}getTopicEditPageURL(){return this.getPageURL("TPendingList")}getTopicCommentPageURL(){return this.getPageURL("TCommentList")}getTopicHistoryPageURL(){return this.getPageURL("THistory")}getRelatedQuestionsURL(){return`/related?query=${this.get("title").replace("#","").replace(/\?/g,"")}`}getLegacyModel(){var t,n;return({Topic:t}=e("../../models")),this.legacyModel=new t({type:"Model",class:"Topic",URL:`/topics/${this.get("t_id")}/~${this.get("url_slug")}`,id:this.get("t_id"),uuid:`${this.get("t_id")}`}),this.legacyModel.get("revision").set({title:this.get("title"),text:this.get("body")}),n=this.getCollection("question_option_ids").map(function(e){return e.getLegacyModel()}),this.legacyModel.get("viewpoints").set(n),this.legacyModel}}return t.prototype.key="question",t.prototype.idAttribute="question_id",t.prototype.validKeys=["title","body"],t}.call(this),t.exports={QuestionModel:o}},{"../../../../../server/compiled/URLs":454,"../../collections/comment-collection":4,"../../collections/option-collection":22,"../../collections/reaction-collection":25,"../../collections/rec-collection":26,"../../collections/tag-collection":30,"../../collections/user-collection":31,"../../models":34,"./entity-model":37,"./user-model":63,underscore:448}],56:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{context_id:{question:e("./question-model").QuestionModel,option:e("./option-model").OptionModel,section:e("./section-model").SectionModel,comment:e("./comment-model").CommentModel}[this.get("context_type")],comment_id:e("./comment-model").CommentModel,user_id:e("./user-model").UserModel}}}return t.prototype.key="reaction",t.prototype.idAttribute="reaction_id",t.reactionTypes=["not-a-fit","flag","duplicate","out-of-date","useful","needs-improvement"],t}.call(this),t.exports={ReactionModel:o}},{"./comment-model":36,"./entity-model":37,"./option-model":53,"./question-model":55,"./section-model":58,"./user-model":63}],57:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{option_id:e("./option-model").OptionModel,user_id:e("./user-model").UserModel}}relations(){return{rec_comment_ids:e("../../collections/comment-collection").CommentCollection,rec_highlight_ids:e("../../collections/highlight-collection").HighlightCollection,rec_reaction_ids:e("../../collections/reaction-collection").ReactionCollection}}attrs(){return["rec_ranking_obj"]}isVoted(){return this.get("magnitude")>0||this.get("magnitude")<0}getLegacyModel(){var t,n,i,o,r;return({ViewpointVote:t}=e("../../models")),i=this.getModel("option_id","question_id"),n=this.getModel("option_id"),r=this.getModel("user_id"),o=`/topics/${i.get("t_id")}/viewpoints/${n.get("vp_id")}/votes/${r.get("username")}`,this.legacyModel=new t({type:"Model",class:"ViewpointVote",URL:o,uuid:o}),this.legacyModel}}return t.prototype.key="rec",t.prototype.idAttribute="rec_id",t.prototype.validKeys=["magnitude"],t}.call(this),t.exports={RecModel:o}},{"../../collections/comment-collection":4,"../../collections/highlight-collection":5,"../../collections/reaction-collection":25,"../../models":34,"./entity-model":37,"./option-model":53,"./user-model":63}],58:[function(e,t,n){var i,o,r,s;({EntityModel:i}=e("./entity-model")),({makeURL:s}=e("../../../../../server/compiled/URLs")),r=e("urijs"),o=function(){class t extends i{references(){return{option_id:e("./option-model").OptionModel,created_user_id:e("./user-model").UserModel}}relations(){return{section_comment_ids:e("../../collections/comment-collection").CommentCollection,section_contrib_user_ids:e("../../collections/user-collection").UserCollection,section_highlight_ids:e("../../collections/highlight-collection").HighlightCollection,section_reaction_ids:e("../../collections/reaction-collection").ReactionCollection}}attrs(){return["section_ranking_obj","section_reactions_obj"]}isMarked(){var e;return(null!=(e=this.get("section_reactions_obj"))?e.react_count_flag:void 0)>0||(null!=e?e.react_count_out_of_date:void 0)>0}getPageURL(e){var t,n,i;return n=(t=this.getModel("option_id")).getModel("question_id"),i=s(e,[n.get("t_id"),t.get("vp_id"),this.get("sp_id")]),n.get("question_indexable_obj").noindex&&(i=`/improve${i}`),i}getSectionPageURL(){return new r(this.getModel("option_id").getViewpointPageURL()).fragment(this.get("sp_id"))}getSectionCommentPageURL(){return this.getPageURL("SPCommentList")}getSectionHistoryPageURL(){return this.getPageURL("SPHistory")}getLegacyModel(){var t,n,i,o;return({Section:t}=e("../../models")),o=(i=this.getModel("option_id")).getModel("question_id"),n=new t({type:"Model",class:"Section",title:this.get("title"),text:this.get("text"),isCon:"Con"===this.get("section_type")}),this.get("sp_id")&&n.set({id:this.get("sp_id"),uuid:`${o.get("t_id")}-${i.get("vp_id")}-${this.get("sp_id")}`,URL:`/topics/${o.get("t_id")}/viewpoints/${i.get("vp_id")}/sections/${this.get("sp_id")}`}),n.get("revision").set({title:this.get("title"),text:this.get("body")}),n}}return t.prototype.key="section",t.prototype.idAttribute="section_id",t.prototype.validKeys=["title","body","section_type"],t}.call(this),t.exports={SectionModel:o}},{"../../../../../server/compiled/URLs":454,"../../collections/comment-collection":4,"../../collections/highlight-collection":5,"../../collections/reaction-collection":25,"../../collections/user-collection":31,"../../models":34,"./entity-model":37,"./option-model":53,"./user-model":63,urijs:452}],59:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class t extends i{references(){return{spec_type_id:e("./spec-type-model").SpecTypeModel}}isSupportedType(){return this.supportedTypes.includes(this.get("value").type)}getDisplayValue(){var e,t,n;switch((n=this.get("value")).type){case"bool":return n.value?"Yes":"No";case"number":case"string":return(t=null!=(e=this.getModel("spec_type_id"))?e.get("unit_name"):void 0)?`${n.value} (${t})`:n.value}}}return t.prototype.key="spec",t.prototype.idAttribute="spec_id",t.prototype.supportedTypes=["bool","number","string"],t}.call(this),t.exports={SpecModel:o}},{"./entity-model":37,"./spec-type-model":60}],60:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class e extends i{}return e.prototype.key="spec_type",e.prototype.idAttribute="spec_type_id",e}.call(this),t.exports={SpecTypeModel:o}},{"./entity-model":37}],61:[function(e,t,n){var i,o;({EntityModel:i}=e("./entity-model")),o=function(){class e extends i{getStoreIcon(){var e;if("amazon"===(e=this.get("store"))||"walmart"===e||"bestbuy"===e)return`/images/icons/logos/${e}-store-icon.svg`}getPriceAsNumber(){var e,t,n;return null==(e=null!=(t=this.get("store_page_current_price_info_obj"))&&null!=(n=t.money)?n.amount:void 0)?null:parseInt(e)}}return e.prototype.key="store_page",e.prototype.idAttribute="store_page_id",e}.call(this),t.exports={StorePageModel:o}},{"./entity-model":37}],62:[function(e,t,n){var i,o,r;({EntityModel:i}=e("./entity-model")),({makeURL:r}=e("../../../../../server/compiled/URLs")),o=function(){class e extends i{attrs(){return["tag_usage_obj"]}getPageURL(e){return r(e,[this.get("token")])}getTagPageURL(){return this.getPageURL("TagFilter")}}return e.prototype.key="tag",e.prototype.idAttribute="tag_id",e}.call(this),t.exports={TagModel:o}},{"../../../../../server/compiled/URLs":454,"./entity-model":37}],63:[function(e,t,n){var i,o,r,s,l;({EntityModel:i}=e("./entity-model")),({makeURL:l}=e("../../../../../server/compiled/URLs")),s=e("underscore"),o=e("urijs"),r=function(){class t extends i{relations(){return{user_rec_ids:e("../../collections/rec-collection").RecCollection,user_spons_question_ids:e("../../collections/question-collection").QuestionCollection,user_sub_question_ids:e("../../collections/question-collection").QuestionCollection}}attrs(){return["user_contribs_obj"]}getAvatarURL(e={}){var t,n,i,r,l;return e=s.defaults(e,{size:300}),r=this.get("avatar_source_uri"),l=new o(null!=r?r:""),i=e.size,"ucarecdn.com"!==(n=l.hostname())&&"www.ucarecdn.com"!==n||l.hostname("cdn.slant.co"),"cdn.slant.co"===l.hostname()?(t=`/${l.segment(0)}/-/format/jpeg/-/progressive/yes/`,i&&(t+=`-/scale_crop/${i}x${i}/center/`),l.path(t).toString()):"facebook.com"===l.domain()?l.setQuery({width:i,height:i}).toString():"googleusercontent.com"===l.domain()?l.setQuery({sz:i}).toString():"avatars.slant.co"===l.hostname()?l.directory(`/identicons/${i}/`).toString():r||void 0}getAvatarPreviewURL(e){return e=s.extend({size:200},e),this.getAvatarURL(e)}getAvatarThumbnailURL(e){return e=s.extend({size:50},e),this.getAvatarURL(e)}getPageURL(e){return l(e,[this.get("username")])}getProfilePageURL(){return this.getPageURL("User")}getProfileNotificationsPageURL(){return this.getPageURL("Notifications")}getProfileKarmaPageURL(){return this.getPageURL("UserKarma")}getOptionRec(e){var t;if(e)return(t=s.intersection(this.get("user_rec_ids"),e.get("option_rec_ids"))[0])?this.store.getModel(t):void 0}loadQuestionEntities(t,n={}){var i,o;if(this.id)return({QuestionUserPageQuery:i}=e("../queries/question-user-page-query")),o={t_id:t,user_id:this.id},this.store.ensureQuery(i,o).fetch({silent:!0,success:(...e)=>(n.silent||this.trigger("change"),"function"==typeof n.success?n.success(...e):void 0)})}}return t.prototype.key="user",t.prototype.idAttribute="user_id",t.prototype.validKeys=["username","displayname","bio","avatar_soure_uri"],t}.call(this),t.exports={UserModel:r}},{"../../../../../server/compiled/URLs":454,"../../collections/question-collection":24,"../../collections/rec-collection":26,"../queries/question-user-page-query":76,"./entity-model":37,underscore:448,urijs:452}],64:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./base-model"),e("./entities/"),e("./queries/"),e("./utilities/"))},{"./base-model":35,"./entities/":40,"./queries/":68,"./utilities/":78,underscore:448}],65:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{relations(){return{category_list_page_category_ids:e("../../collections/ml-category-collection").MLCategoryCollection}}}return t.prototype.key="category_list_page",t}.call(this),t.exports={CategoryListPageQuery:i}},{"../../collections/ml-category-collection":10,"./query-model":74}],66:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{relations(){return{category_page_category_ids:e("../../collections/ml-category-collection").MLCategoryCollection,category_page_ml_query_ids:e("../../collections/ml-query-collection").MLQueryCollection}}}return t.prototype.key="category_page",t.prototype.validKeys=["category_name","price_intent","product_node_id","product_sku","store","spec_filters"],t}.call(this),t.exports={CategoryPageQuery:i}},{"../../collections/ml-category-collection":10,"../../collections/ml-query-collection":19,"./query-model":74}],67:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{references(){return{product_node_id:e("../entities/ml-product-type-model").MLProductTypeModel,winner_product_type_id:e("../entities/ml-product-type-model").MLProductTypeModel,target_ml_query_id:e("../queries/ml-query").MLQuery}}}return t.prototype.key="category_snippet_page",t.prototype.validKeys=["category_name","price_intent","product_node_id","product_sku","store","spec_filters"],t}.call(this),t.exports={CategorySnippetPageQuery:i}},{"../entities/ml-product-type-model":50,"../queries/ml-query":70,"./query-model":74}],68:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./category-list-page-query"),e("./category-page-query"),e("./category-snippet-page-query"),e("./ml-feature-query"),e("./ml-query"),e("./option-page-query"),e("./parent-category-page-query"),e("./product-node-query"),e("./query-model"),e("./question-page-query"),e("./question-user-page-query"),e("./rec-page-query"))},{"./category-list-page-query":65,"./category-page-query":66,"./category-snippet-page-query":67,"./ml-feature-query":69,"./ml-query":70,"./option-page-query":71,"./parent-category-page-query":72,"./product-node-query":73,"./query-model":74,"./question-page-query":75,"./question-user-page-query":76,"./rec-page-query":77,underscore:448}],69:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class e extends o{}return e.prototype.key="ml_feature",e.prototype.validKeys=["before","feature_key","ml_option"],e}.call(this),t.exports={MLFeatureQuery:i}},{"./query-model":74}],70:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{relations(){return{ml_query_product_type_ids:e("../../collections/ml-product-type-collection").MLProductTypeCollection,ml_query_option_image_ids:e("../../collections/image-collection").ImageCollection}}}return t.prototype.key="ml_query",t.prototype.validKeys=["context","price_intent","label_request_set","spec_filter"],t}.call(this),t.exports={MLQuery:i}},{"../../collections/image-collection":6,"../../collections/ml-product-type-collection":18,"./query-model":74}],71:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class e extends o{}return e.prototype.key="option_page",e.prototype.validKeys=["option_id"],e}.call(this),t.exports={OptionPageQuery:i}},{"./query-model":74}],72:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{references(){return{category_id:e("../entities/ml-category-model").MLCategoryModel}}relations(){return{parent_category_page_category_ids:e("../../collections/ml-category-collection").MLCategoryCollection}}}return t.prototype.key="parent_category_page",t}.call(this),t.exports={ParentCategoryPageQuery:i}},{"../../collections/ml-category-collection":10,"../entities/ml-category-model":43,"./query-model":74}],73:[function(e,t,n){var i,o;({QueryModel:o}=e("./query-model")),i=function(){class t extends o{references(){return{product_type_id:e("../entities/ml-product-type-model").MLProductTypeModel}}}return t.prototype.key="product_node",t.prototype.validKeys=["by_sku"],t}.call(this),t.exports={ProductNodeQuery:i}},{"../entities/ml-product-type-model":50,"./query-model":74}],74:[function(e,t,n){var i,o,r,s;({BaseModel:i}=e("../base-model")),r=e("underscore"),s=e("hash-sum"),o=function(){class e extends i{set(e,t,n){if(super.set(...arguments),!this.id)return this.id=s(this.attributes)}fetch(e={}){var t,n;return n=e.success,(t=r.defaults({silent:!0},e)).success=((...t)=>(e.silent||this.trigger("change sync"),"function"==typeof n?n(...t):void 0)),this.store.loadBundle(this.key,this.id,r.pick(this.attributes,this.validKeys),t)}}return e.prototype.category="queries",e}.call(this),t.exports={QueryModel:o}},{"../base-model":35,"hash-sum":434,underscore:448}],75:[function(e,t,n){var i,o,r;({QueryModel:i}=e("./query-model")),({makeURL:r}=e("../../../../../server/compiled/URLs")),o=function(){class t extends i{references(){return{question_id:e("../entities/question-model").QuestionModel}}getPageURL(e){var t,n;return t=this.getModel("question_id"),n=r(e,[t.get("t_id"),`~${t.get("url_slug")}`]),t.get("question_indexable_obj").noindex&&(n=`/improve${n}`),n}getTopicPageURL(e=0){var t,n;return n=this.getPageURL("Topic"),(t=Math.floor(this.get("option_offset")/this.get("option_limit"))+e)&&(n=`${n}?page=${t}`),n}}return t.prototype.key="question_page",t.prototype.validKeys=["question_id","t_id","option_id","option_limit","option_offset"],t}.call(this),t.exports={QuestionPageQuery:o}},{"../../../../../server/compiled/URLs":454,"../entities/question-model":55,"./query-model":74}],76:[function(e,t,n){var i,o;({QueryModel:i}=e("./query-model")),o=function(){class e extends i{}return e.prototype.key="question_user_page",e.prototype.validKeys=["question_id","t_id","user_id"],e}.call(this),t.exports={QuestionUserPageQuery:o}},{"./query-model":74}],77:[function(e,t,n){var i,o;({QueryModel:i}=e("./query-model")),o=function(){class e extends i{}return e.prototype.key="rec_page",e.prototype.validKeys=["rec_id"],e}.call(this),t.exports={RecPageQuery:o}},{"./query-model":74}],78:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./ml-product-model"))},{"./ml-product-model":79,underscore:448}],79:[function(e,t,n){var i,o,r;({BaseModel:i}=e("../base-model")),r=e("hash-sum"),o=function(){class t extends i{references(){return{crawl_id:e("../entities/ml-crawl-model").CrawlModel,product_id:e("../entities/product-model").ProductModel}}relations(){return{ml_product_rating_ids:e("../../collections/ml-rating-collection").MLRatingCollection}}set(e,t,n){if(super.set(...arguments),!this.id)return this.id=r(this.attributes)}}return t.prototype.key="ml_product",t.prototype.idAttribute="ml_product_id",t}.call(this),t.exports={MLProductModel:o}},{"../../collections/ml-rating-collection":20,"../base-model":35,"../entities/ml-crawl-model":44,"../entities/product-model":54,"hash-sum":434}],80:[function(e,t,n){(function(n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P;P=null!=P?P:n.window,({location:g}=P),d=e("underscore"),i=e("backbone"),u=e("urijs"),({URLs:c,makeKey:w}=e("../../../server/compiled/URLs")),b=e("../../../server/compiled/templates"),C=e("./utils/templating"),e("./model"),l=e("./models"),({BaseModel:o}=e("./models/base-model")),r=e("./collection"),s=e("./collections"),p=e("./views"),h=e("./utils/analytics"),({parseQuery:y}=e("./utils/transforms")),k={},v={},delete(c=d.extend({NotFound:/.*/},c)).ViewpointRedirect,delete c.TopicRedirect,(f=document.createElement("iframe")).id="loader",f.setAttribute("style","display: none;"),_={},V=function(){if(!f.parentElement)return f.src=`//${P.location.host}/loading${P.location.pathname}`,document.getElementsByTagName("body")[0].appendChild(f)},R=function(){var e;return null!=(e=f.parentElement)?e.removeChild(f):void 0},m=function(e){var t,n,i,o,r;for(e.delegateEvents(),r=[],n=0,i=(o=e.getChildren()).length;n<i;n++)t=o[n],r.push(t.delegateEvents());return r},S=function(e){var t,n,i,o,r,s;for(e.undelegateEvents(),s=[],n=0,i=(r=null!=(o=e.getChildren())?o:[]).length;n<i;n++)t=r[n],s.push(t.undelegateEvents());return s},a=class extends i.Router{initialize(e={}){var t,n;for(t in c)n=c[t],this.route(n,t,function(){});return this.on("route",this.handler)}handler(e,t,n={}){var r,s,l,a,c,p,f,w,x,R,C,T,M,L,I,O,A,E,D,U,B,q;if(a=new u(null!=(L=n.url)?L:g.href).origin("").toString(),!(U="function"==typeof this.onbeforeunload?this.onbeforeunload():void 0)||P.confirm(U))if(_.canceled=!0,_=n,r=n.bootstrap,(D=null!=(I=n.state)?I:{}).overrideHash)(x=v[D.overrideHash])?x(e,t,n):this.reload(n);else{if(!(q=k[D.name+D.id]))return n.override?(R=(new Date).getTime(),v[R]=n.override,i.history.history.replaceState({overrideHash:R},null!=(O=n.title)?O:""),void n.override(e,t,n)):(r||V(),T=$.Deferred(),s=$.Deferred(),f=$.Deferred(),w=$.Deferred(),r?T.resolve():((M=new u(a)).setSearch({templateOnly:!0}),$.ajax({url:M.toString(),timeout:1e4,success:function(e){return e&&($("main").replaceWith(e),P.scrollTo(0,0),n.prerender=!0,n.prerenderedHTMLTemplate=!0),d.defer(function(){return T.resolve()})},error:function(){return T.resolve()}})),!1!==n.fill?(C=null!=(A=a.match(/^(?:\/improve)?\/topics\/(\d+)/))?A[1]:void 0,"Topic"===e?f=P.currentUserV2.loadQuestionEntities(C,{silent:!1}):C?(B=`/userInfo/meta/${C}?format=json`,f=$.ajax({url:B,timeout:3e3})):f.resolve()):f.resolve(),r?w.resolve():P.currentUser.fetch({timeout:3e3,complete:function(){return w.resolve()}}),r?r.error?s.reject():s.resolve(r,"success"):((l=new u(a)).search(null!=(E=n.search)?E:"").setSearch({format:"json",analytics:"page"}),s=$.ajax({url:l.toString(),timeout:1e4})),c=(([t,i]=[],[o]=[])=>{var r,s,l;if(!n.canceled)return null==b[e]&&(e="NotFound"),s=b[e](t),r=y(n.search),n=d.extend({view:s.view,query:r},n),l=n.url?new u(n.url):new u(g.href),analytics.ready(function(){return d.defer(function(){return h.sendPageEvent(n.view,l)})}),P.data=t,this.updateSiteHeader(s.name),this.render(s.name,d.defaults({data:t,fill:o},n))}),p=((t={})=>{var i,o;if(console.error("Routing data request failed:",null!=s?s:t),!n.canceled){if(i=function(e){return 0===g.pathname.indexOf("/plugin/")?`AIPlugin${e}`:e},503===s.error||503===t.status)e=i("Maintenance");else if(s.error>=500||t.status>=500)e=i("Error");else{if(!(s.error>=400||t.status>=400))return void this.reload(n);e=i("NotFound")}return o=b[e](t),n=d.extend({view:o.view},n),this.render(o.name,n)}}),$.when(s,f,w,T).done(c).fail(function(e){return console.error("Routing request failed:",e),$.when(s,[],[],T).done(c).fail(p)}));q!==P.view&&(q.model instanceof o?P.currentUserV2.loadQuestionEntities(q.model.get("t_id")):P.currentUser.fill(q.model),$(q.el).replaceAll("#main").removeClass().addClass(D.classes),$("title").text(D.title),$("body").attr("id",D.name),this.updateSiteHeader(D.name),m(q),q.setPermissions(),P.view&&S(P.view),P.view=q,"function"==typeof q.loadAds&&q.loadAds())}}reload(e){return e.prerender?(R(),console.info("Redirect skipped for prerendered page")):P.location.reload(!0)}fillData(e,t,n){if(e&&t)return null!=e.entities?P.currentUserV2.trigger("change"):(t instanceof r&&(t=t.at(0).parents("topic")),n=d.extend({},n,{silent:!1,reset:!1,remove:!1,add:!0}),t.set(t.parse(e,n),n))}render(e,t){return C.load().done(()=>{var n,o,a,u,c,h,m,f,w,v,y,_,x,V;P.view&&S(P.view),P.view=null;try{if(!(n=p[t.view]))throw`Unable to find View ${t.view}`;if(t.data instanceof i.Model)for(m=t.data,(u=function(e){return e.unset("selected"),d.each(e.values(),function(e){if(e instanceof r)return e.each(function(e){return u(e)})})})(m),a=m.getByURL(g.pathname);null!=a;)a.set("selected",!0,{silent:!0}),a=null!=(v=a.collection)?v.parent:void 0;else if(t.data instanceof i.Collection)o=t.data;else if(null!=(null!=(y=t.data)?y.class:void 0))for("List"===t.data.type?(o=new s[t.data.class]).reset(o.parse(t.data,{silent:!0}),{silent:!0}):(m=new l[t.data.class]).set(m.parse(t.data,{silent:!0}),{silent:!0});null!=(null!=o?o.parent:void 0)||null!=(null!=m?m.collection:void 0);)if(null==(null!=o?o.parent:void 0)){if(null==(null!=m?m.collection:void 0))break;m.trigger("select"),o=m.collection,m=null}else m=o.parent,o=null;else(null!=(_=t.data)?_.entities:void 0)&&(dataStore.addBundle(t.data,{silent:!0}),w=n.prototype.Model.prototype.key,f=Object.keys(t.data.queries[w])[0],m=dataStore.getModel(f));t.prerender||this.fillData(t.fill,m||o,{silent:!0}),P.query=t.query,h=$("#main"),V=d.extend({},t.viewOptions,{el:h}),null!=o&&(V.collection=o),null!=m&&(V.model=m),null!=t.prerender&&(V.prerender=t.prerender),t.prerender||h.removeClass().addClass("main"),P.view=new n(V),t.prerender||P.scrollTo(0,0),i.history._hasPushState&&(k[e+view.cid]=view,x=view.title(),i.history.history.replaceState({id:view.cid,name:e,classes:view.el.className,title:x},x),$("title").text(x),$("body").attr("id",e)),t.prerender&&this.fillData(t.fill,m||o),$("body").addClass("initialized"),d.defer(()=>{var e,t;if(null!=(e=$(g.hash)[0])&&e.scrollIntoView(),g.hash)return $("body").scrollTop(null!=(t=$(g.hash).offset())?t.top:void 0)}),"function"==typeof t.callback&&t.callback(),router.trigger("navigate")}catch(e){c=e,console.error("Routing view render failed:",c.stack),P.view||this.reload(t)}return R()}).fail(e=>(console.error("Template loading failed:",e.stack),this.reload(t)))}route(e,t,n){return d.isRegExp(e)||(e=this._routeToRegExp(e)),d.isFunction(t)&&(n=t,t=""),n||(n=this[t]),i.history.route(e,(o,r)=>{var s;return s=this._extractParameters(e,o),n&&n.apply(router,s,r),router.trigger.apply(router,["route:"+t].concat(s)),router.trigger("route",t,s,r),i.history.trigger("route",router,t,s)}),this}updateSiteHeader(e=""){switch(e){case"ai-home-page":case"ai-welcome-page":case"ai-category-page":case"ai-uninstall-page":case"ai-parent-category-page":$("#header").addClass("hidden");break;default:$("#header").removeClass("hidden")}switch(e){case"ai-home-page":case"ai-welcome-page":case"ai-category-page":case"ai-uninstall-page":case"ai-parent-category-page":return $("._LustreAIBannerView").addClass("hidden");default:return $("._LustreAIBannerView").removeClass("hidden")}}},x=i.history.start,i.history.start=function(e){var t;if(t=e.silent,e.silent=!0,x.call(this,e),e.silent=t,!t)return this.loadUrl(void 0,e)},i.history.navigate,i.history.navigate=function(e,t){var n,o,r,s,l;return!!i.History.started&&(t&&!0!==t||(t={trigger:t}),s=null!=(o=t.search)?o:"",n=null!=(r=t.hash)?r:"",e=this.getFragment(e||""),this.fragment=e,this.search=s,this.hash=n,l=this.root+e+s+n,this._hasPushState?(this.history[t.replace?"replaceState":"pushState"](t.state,document.title,l),t.url=`${g.origin}${l}`,t.trigger?this.loadUrl(e,t):void 0):this.location.assign(l))},i.history.loadUrl,i.history.loadUrl=function(e,t){var n,i,o;return n=(n=this.fragment=this.getFragment(e)).replace("improve/",""),this.search=null!=(i=t.search)?i:"",this.hash=null!=(o=t.hash)?o:"",d.any(this.handlers,function(e){if(e.route.test(n))return e.callback(n,t),!0})},i.history.checkUrl=function(e){var t,n,i;if(e.originalEvent.state)return i=e.state||e.originalEvent.state,n=g.search,g.hash,t={state:i,search:n},this.getFragment(),this.loadUrl(null,t)},d.bindAll(i.history,"checkUrl"),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../server/compiled/URLs":454,"../../../server/compiled/templates":460,"./collection":1,"./collections":2,"./model":33,"./models":34,"./models/base-model":35,"./utils/analytics":83,"./utils/templating":88,"./utils/transforms":89,"./views":330,backbone:424,underscore:448,urijs:452}],81:[function(e,t,n){var i,o;i=e("rule"),o=e("./view"),i=function(e){class t extends e{static parse(e,t,n,i){var r,s,l,a,u,c,p;if(e instanceof o){if(p=t instanceof o?t:t.view,e.parent=p,p.children.push(e),c=n.selection,"="===n.position)for(l=s=0,a=(u=c.attributes).length;s<a;l=++s)"class"!==(r=u[l]).name?e.$el.attr(r.name,r.value):e.$el.addClass(r.value);return e.el}return super.parse(...arguments)}}return t.prototype.rule={"":function(){var e;if(null!=(e=this.query)?e.embed:void 0)return{"a@target":"_blank"}}},t}.call(this,i),t.exports=i},{"./view":90,rule:446}],82:[function(e,t,n){(function(t){window.$=e("jquery"),$(function(){var n,i,o,r,s,l,a,u,c,p,d,h,m;return m=null!=m?m:t.window,({location:a}=m),e("intersection-observer"),m.jQuery=e("jquery"),m.Backbone=e("backbone"),m.Backbone.$=e("jquery"),m._=e("underscore"),m.URI=e("urijs"),m.templating=e("./utils/templating"),r=e("./utils/analytics"),({IOS_USER_AGENT:n}=e("./utils/patterns")),m.Models=e("./models"),m.Collections=e("./collections"),m.ModelsV2=e("./models/index"),m.CollectionsV2=e("./collections/index"),m.ViewsV2=e("./views-v2"),m.Views=e("./views"),m.Router=e("./router"),m.DataStore=e("./data-store"),({MainHeaderView:o}=e("./views/components/main-header-view")),({LustreAIPromoteModalView:i}=e("./views-v2/components/lustre-ai-promote-modal-view")),p=e("uploadcare-widget/uploadcare.api"),m.dataStore=new DataStore,p.start({publicKey:m.env.UPLOADCARE_PUBLIC_KEY,imagesOnly:!0}),$.ajaxSetup({timeout:3e4}),r.initialize(),l=function(e){return(null!=e?e.hostname():void 0)!==a.hostname&&"http"===e.protocol().slice(0,4)},s=function(e){var t,n,o,s,u,c,p;if(s=(u=e.currentTarget).getAttribute("href")||u.getAttribute("xlink:href"),p=new URI(s),l(p)&&r.handleOutboundLinkClickEvent(p),l(p)&&0!==a.pathname.indexOf("/plugin/")){if(u.getAttribute("data-direct-ad"))return;if("amazon.com"===p.domain()&&m.env.AMAZON_ASSOCIATE_ID?(t=p.clone().addQuery({tag:m.env.AMAZON_ASSOCIATE_ID}),e.currentTarget.href=t.toString(),_.defer(()=>e.currentTarget.href=p.toString())):m.env.SKIM_LINKS_ID&&(n=encodeURIComponent(m.location.href),o=encodeURIComponent(p.toString()),c=`http://go.redirectingat.com/?id=${m.env.SKIM_LINKS_ID}&url=${o}&sref=${n}`,e.currentTarget.href=c,_.defer(()=>e.currentTarget.href=p.toString())),"false"===m.env.USE_AI_URLS&&!u.getAttribute("data-no-lustre-popup"))return new i}},$(document).on("click","a[target=_blank]",s),m.template=templating.template,m.router=new Router,d=m.currentUser=new class extends Models.User{url(){return"/userInfo"}},(h=m.currentUserV2=new ModelsV2.UserModel).store=dataStore,d.fetch(),d.on("change",function(){var e,t,n,i,o;return $("html").removeClass("loggedin"),$("html").removeClass("anonymous"),$("html").removeClass("isModerator"),this.get("uuid")||this.get("id")?($("html").addClass("loggedin"),this.get("anonymous")&&$("html").addClass("anonymous"),this.get("isModerator")&&$("html").addClass("isModerator"),document.cookie.match(/(^|; )uuid=([^;]*)/)||(document.cookie=`uuid=${this.get("uuid")}`),o={username:this.get("username"),name:this.get("displayName"),email:this.get("email"),last_login:new Date,karma:null!=(t=this.get("karma"))?t.meta("total"):void 0,isAnonymous:this.get("anonymous")},this.get("created")&&(o.created=Math.floor(new Date(this.get("created")).getTime()/1e3)),r.updateUserIdentity(o),"undefined"!=typeof FS&&null!==FS&&FS.identify(this.getUserId(),o),h.set({user_id:this.getUserId()},{silent:!0}),dataStore.loadEntity("user",this.getUserId())):(document.cookie="uuid=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",h.clear(),analytics.user&&(e=null!=(n=analytics.user())?n.anonymousId():void 0,analytics.reset(),null!=(i=analytics.user())&&i.anonymousId(e))),r.updateUserAuthenticationState()}),d.once("sync error",function(){return $("html").removeClass("prerender"),r.updateUserAuthenticationState()}),(null!=(u=m.userData)?u.uuid:void 0)&&(d.set(m.userData,{silent:!0}),h.set({user_id:userData.uuid.replace("User:","")},{silent:!0})),templating.load({bootstrap:m.templateData}).done(function(){return m.mainHeaderView=new o({model:m.currentUser}),$("#header").replaceWith(m.mainHeaderView.$el)}),Backbone.history.start({pushState:!0,hashChange:!1,bootstrap:null!=(c=m.jsonData)?c:{},prerender:!0,search:a.search}),delete m.jsonData,delete m.templateData,n.test(m.navigator.userAgent)&&$("body").addClass("iOSDevice"),r.isPluginPage()&&r.updateUserIdentity(),"#debug"===m.location.hash&&(m.onerror=function(e,t,n){return m.debug(`${e} - ${t} - ${n}`),!1}),m.debug=function(e){var t,n;return n=function(e){var n;return(n=document.createElement("p")).appendChild(document.createTextNode(e)),t.appendChild(n)},null==(t=document.getElementById("debug"))&&((t=document.createElement("div")).id="debug",document.getElementsByTagName("body")[0].appendChild(t),n(m.navigator.userAgent)),n(e),!1}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collections":2,"./collections/index":7,"./data-store":32,"./models":34,"./models/index":64,"./router":80,"./utils/analytics":83,"./utils/patterns":87,"./utils/templating":88,"./views":330,"./views-v2":169,"./views-v2/components/lustre-ai-promote-modal-view":118,"./views/components/main-header-view":282,backbone:424,"intersection-observer":436,jquery:438,underscore:448,"uploadcare-widget/uploadcare.api":449,urijs:452}],83:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;l=e("underscore"),s=e("urijs"),({Topic:r}=e("../models")),({BaseModel:i,QuestionModel:o}=e("../models/index")),g=function(e){var t;if(t=e&&e.stack)return analytics.track("Script Error",{label:t,nonInteraction:1})},w=function(){var e,t,n,i;for(t=0,n=(i=window.__e&&window.__e.q||[]).length;t<n;t++)e=i[t],g(e.error);return window.removeEventListener("error",window.__e),window.addEventListener("error",function(e){return g(e.error)})},m=function(){var e,t,n,i,o,r,s,a,u,c,p,d,h,f;if(!l.random(9)&&window.performance&&window.performance.timing){if("complete"===document.readyState)return t=(i=performance.timing).navigationStart,h=Math.round(i.requestStart-t),f=Math.round(i.responseEnd-t),p=Math.round(i.domInteractive-t),c=Math.round(i.domContentLoadedEventStart-t),u=Math.round(i.domContentLoadedEventEnd-t),d=Math.round(i.loadEventStart-t),n=Math.round(i.fetchStart-i.navigationStart),r=Math.round(i.redirectEnd-i.redirectStart),s=Math.round(i.responseStart-i.requestStart),a=Math.round(i.responseEnd-i.responseStart),e=(e=>e.every(e=>e>0&&e<6e6)&&o.every(e=>e>=0)),o=[n,r,s,a],e([h,f,p,c,u,d])?analytics.track("Navigation Performance Timing",{nonInteraction:1,timeToRequestStart:h,timeToResponseEnd:f,timeToDomInteractive:p,timeToDomContentLoadedStart:c,timeToDomContentLoadedEnd:u,timeToLoadEventStart:d,navigationTime:n,redirectTime:r,requestToResponseFirstByteTime:s,responseTime:a}):void 0;window.addEventListener("load",m)}},u=function(e){return analytics.track("Outbound Link Clicked",{label:e.origin(),outboundUrl:e.toString()})},a=function(){var e,t,n;return(e="undefined"!=typeof window&&null!==window&&null!=(t=window.view)?t.model:void 0)instanceof i?null!=(n=e instanceof o?e:null!=e?e.getModel("question_id"):void 0)?n.getCollection("question_tag_ids").pluck("name").join():void 0:null!=(n=e instanceof r?e:null!=e?e.parents("topic"):void 0)?n.get("tags").pluck("name").join():void 0},f=function(e,t){var n,i,o,r,l,u,c,p;return i={path:t.path(),search:t.search(),url:t.clone().hash("").toString()},(r=a())&&(i.tags=r),null!=(null!=(o=new s(location.toString()).search(!0))?o.utm_campaign:void 0)&&(({utm_campaign:l,utm_source:p,utm_medium:c,utm_content:u}=o),n={name:l,source:p,medium:c,content:null!=u?u:null},i.context={campaign:n}),analytics.page(e,i)},p=function(e){return null==e&&(e=location.pathname),0===e.indexOf("/plugin/")||0===e.indexOf("/extension/")},h=null,y=function(e){var t;return(t=window.currentUser.getUserId())?h!==t&&(analytics.identify(t,e),h=t,env.PLUGIN_ID&&p())?chrome.runtime.sendMessage(env.PLUGIN_ID,{type:"set_authenticated_user_id",authID:t}):void 0:env.PLUGIN_ID&&p()?chrome.runtime.sendMessage(env.PLUGIN_ID,{type:"set_authenticated_user_id"},function(t){if(t.installID&&h!==t.installID)return analytics.identify(t.installID,e),h=t.installID}):(analytics.identify(null),h=null)},d=null,v=function(){var e,t,n;if("undefined"!=typeof window&&null!==window)return n={},t=!(e=window.currentUser).get("uuid")&&!e.get("id")||e.get("anonymous")?"Logged Out":"Logged In",d!==t?(d=t,n["User Authentication State"]=t,analytics.identify(n)):void 0},c=function(){var e;return e=window.analytics.track,window.analytics.track=function(t,n,i,o){var r,s,u;return n=l.defaults({},n,{name:null!=(r=window.view)?r.classID:void 0,path:window.location.pathname,url:window.location.href,search:window.location.search,category:null!=(s=window.view)?s.classID:void 0}),(u=a())&&(n.tags=u),i=l.defaults({},i,{integrations:{Mixpanel:!1}}),e(t,n,i,o)},analytics.ready(function(){var e,t,n;for(e in t=window.analytics)n=t[e],l.isFunction(n)&&function(e,t){window.analytics[e]=l.wrap(t,function(e,...t){if("true"!==window.env.ANALYTICS_DISABLED&&(!0!==window.currentUser.get("isModerator")||"production"!==window.env.NODE_ENV))return e(...t)})}(e,n);return w(),m()})},t.exports={initialize:c,isPluginPage:p,sendPageEvent:f,handleOutboundLinkClickEvent:u,updateUserIdentity:y,updateUserAuthenticationState:v}},{"../models":34,"../models/index":64,underscore:448,urijs:452}],84:[function(e,t,n){var i,o,r;o=function(){return"undefined"!=typeof window&&null!==window&&"production"!==("undefined"!=typeof window&&null!==window?window.env.NODE_ENV:void 0)},i=function(e){if(o())return console.info(e)},r=function(e){if(o())return console.warn(e)},t.exports={info:i,warn:r}},{}],85:[function(e,t,n){var i,o;i={best:"best",excellent:"excellent",uncertain:"uncertain",flagged:"flagged",none:"none"},o={VERY_NEGATIVE:0,NEGATIVE:1,MIXED:2,POSITIVE:3,VERY_POSITIVE:4},t.exports={BADGES:i,SENTIMENT_LABEL_VALUES:o,TRANSITION_END_EVENT:"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd transitionEnd"}},{}],86:[function(e,t,n){t.exports={tagData:[{class:"Tag",type:"Model",id:"development",name:"Development",count:2098},{class:"Tag",type:"Model",id:"gaming",name:"Gaming",count:660},{class:"Tag",type:"Model",id:"android",name:"Android",count:498},{class:"Tag",type:"Model",id:"ios",name:"iOS",count:154},{class:"Tag",type:"Model",id:"electronics",name:"Electronics",count:274},{class:"Tag",type:"Model",id:"web",name:"Web",count:266},{class:"Tag",type:"Model",id:"pc",name:"PC",count:234},{class:"Tag",type:"Model",id:"productivity",name:"Productivity",count:225},{class:"Tag",type:"Model",id:"backend",name:"Backend Development",count:216},{class:"Tag",type:"Model",id:"frontend",name:"Frontend Development",count:199},{class:"Tag",type:"Model",id:"linux",name:"Linux",count:172},{class:"Tag",type:"Model",id:"game-development",name:"Game Development",count:151},{class:"Tag",type:"Model",id:"osx",name:"OS X",count:140},{class:"Tag",type:"Model",id:"windows",name:"Windows",count:108},{class:"Tag",type:"Model",id:"learning-resources",name:"Learning Resources",count:364},{class:"Tag",type:"Model",id:"lifestyle",name:"Lifestyle",count:98},{class:"Tag",type:"Model",id:"design",name:"Design",count:84},{class:"Tag",type:"Model",id:"audio",name:"Audio",count:80},{class:"Tag",type:"Model",id:"headphones",name:"Headphones",count:4},{class:"Tag",type:"Model",id:"startup-resources",name:"Startup Resources",count:65},{class:"Tag",type:"Model",id:"sysadmin",name:"Sysadmin",count:61},{class:"Tag",type:"Model",id:"utilities",name:"Utilities & Tools",count:60},{class:"Tag",type:"Model",id:"female-fashion",name:"Female Fashion",count:515},{class:"Tag",type:"Model",id:"shoes",name:"Shoes",count:56},{class:"Tag",type:"Model",id:"photography",name:"Photography",count:54},{class:"Tag",type:"Model",id:"open-source",name:"Open Source",count:54},{class:"Tag",type:"Model",id:"accessories",name:"Accessories",count:52},{class:"Tag",type:"Model",id:"dresses",name:"Dresses",count:52},{class:"Tag",type:"Model",id:"tops",name:"Tops",count:51},{class:"Tag",type:"Model",id:"business",name:"Business",count:49},{class:"Tag",type:"Model",id:"outerwear",name:"Outerwear",count:42},{class:"Tag",type:"Model",id:"tabletop",name:"Tabletop",count:39},{class:"Tag",type:"Model",id:"android-wear",name:"Android Wear",count:35},{class:"Tag",type:"Model",id:"mobile",name:"Mobile Development",count:34},{class:"Tag",type:"Model",id:"analytics",name:"Analytics",count:30},{class:"Tag",type:"Model",id:"workout",name:"Workout",count:27},{class:"Tag",type:"Model",id:"skirts",name:"Skirts",count:25},{class:"Tag",type:"Model",id:"playstation",name:"Playstation",count:25},{class:"Tag",type:"Model",id:"pants",name:"Pants",count:24},{class:"Tag",type:"Model",id:"travel",name:"Travel",count:20},{class:"Tag",type:"Model",id:"fitness",name:"Fitness",count:20},{class:"Tag",type:"Model",id:"nintendo",name:"Nintendo",count:20},{class:"Tag",type:"Model",id:"xbox",name:"Xbox",count:19},{class:"Tag",type:"Model",id:"project-management",name:"Project Management",count:15},{class:"Tag",type:"Model",id:"quality-assurance",name:"Quality Assurance",count:15},{class:"Tag",type:"Model",id:"bags",name:"Bags",count:14},{class:"Tag",type:"Model",id:"music",name:"Music & Audio",count:12},{class:"Tag",type:"Model",id:"workwear",name:"Workwear",count:11},{class:"Tag",type:"Model",id:"furniture",name:"Furniture",count:11},{class:"Tag",type:"Model",id:"brands",name:"Brands",count:9},{class:"Tag",type:"Model",id:"full-stack",name:"FullStack Development",count:7},{class:"Tag",type:"Model",id:"health",name:"Health and Fitness",count:7},{class:"Tag",type:"Model",id:"casual",name:"Casual",count:6},{class:"Tag",type:"Model",id:"swimwear",name:"Swimwear",count:6},{class:"Tag",type:"Model",id:"shorts",name:"Shorts",count:4},{class:"Tag",type:"Model",id:"formal",name:"Formal",count:4},{class:"Tag",type:"Model",id:"beachwear",name:"Beachwear",count:4},{class:"Tag",type:"Model",id:"nighttime",name:"Nighttime",count:3},{class:"Tag",type:"Model",id:"infosec",name:"Infosec",count:3},{class:"Tag",type:"Model",id:"education",name:"Education",count:3},{class:"Tag",type:"Model",id:"communications",name:"Communications",count:1},{class:"Tag",type:"Model",id:"android-tv",name:"Android TV",count:1}],specKeys:["Weight","Publisher","Platforms","Required Android Version","File Size","Controller Support","License","MSRP","CPU","Immersive Mode","Content Rating","Ports","GPU","Display","Storage","Sensor","RAM","Cable","Dimensions","Co-Op","Languages","Desktop targets","Switches Right/Left","Shape","Scroll Wheel","CPI","Buttons","USB Mouse Polling","Max Speed","Lift-off Distance","Dev platforms","Microphone","Sensitivity","Impedance","Mobile targets","Co-op","Console targets","Wireless","Distributed targets","Webcam","Genre","Release Schedule","Processor","Default Desktop Environment","Based On","Max power","Inline controls","Warranty","Type","Battery","VoIP","Videoconferencing","Video recording","Messaging systems","Message history","Memory","Media","Locationsharing","Lens mount","Image stabilization","Groups","End-to-end encryption","Audio recording","Video","Trackpoint","SoC","Removable storage","Rear-facing camera","Max resolution","Front-facing camera","Collaborative","Aspect Ratio","API","Swappable Batteries","Regenerative braking","Proxy server","OS","Mobile App","Max range","IPv6","Features","Controller","Charge time","Available","Auto update","Screen size","Supported languages","Service integrations","Search","Screensharing","Native videoconferencing","Hosting options","DIY integrations","Card Reader","In App Purchase","Frequency range","Capacity","Sensor type","ISO Range","Continuous drive","AF points","Viewfinder magnification","Viewfinder coverage","Video resolution","Storage types","Shutter speed range","Screen dots","Crop factor","3D","Touchscreen","Exposure compensation","Built-in flash","Remote control","Environmentally sealed","WB Bracketing","Traditional code","Single Player","Play Time","Multi-Player","Logic model","External flash","Exchange Support","Behavior trigger","Age","2D","# Players","µTP","Web UI","Web seeding","VR targets","UPnP","UDP tracker","TV targets","Super-seeding","Size","Sequential downloading","Selective downloading","Screen","Prioritization","PEX","NAT-PMP","NAT traversal","MSE/PE","Magnet","LPD","Hard Drive","GUI","Embedded tracker","DHT","Daemon","CLI","Broadcatching","Battery Life","AE Bracketing","Wi-Fi","Unit Testing","Tracker Exchange","Supported remote file editing protocols","Source Control Integration","Multi Language Support","Integrated Debugger","Heart rate","Error Markup","Cross Platform","Collaborative editing","Code Templates","Bracket Matching","Auto Complete","Altimeter","Threaded","Revision tracking","FOV Diagonal","Power Handling","Number of Heroes","Noise reduction","Frequency Response","Driver Size","Available on Steam","Reports","Flash range","Display Resolution","Word processing","Widget","Tethered capture","Supported Calendars","Style","Stitched video","Spreadsheets","Push Notifications","Project management","Preset search modes","Presentations","Optics","Operating frequency","Notetaking","Multireddit","Multiple Accounts","Mod Tools","Lock App","Included accessories","IMAP","Formula editing","Export","Diagramming","Database management","Dark Theme","Coil type","Coil size","Battery type","UTF-8","URI scheme","Unified Inbox","TLS","Supported keybinding styles","Stitched image","SSL","Scripting language","SASL","RTL","Rich Media","POP3","PDF DRM","OTR","OSCP","OCR","Notes","Multi-server","ISO Compliancy","Interface","Hollywood formatting","Forms","Exports","e-Signatures","DCC","DANE","CTPC","CRL","Completely spherical image","Compatibility","Bidi","Available Switches","Auto-complete","Annotation","Accessibility Verification","VR Support","SVN","Size Range","Real-time collaboration","PHP version","Page lock","Outline view","Minimum System Specs","Mercurial","Index card view","GZipped size","Git","Developer","Developement Status","Default Template Engine","Default ORM","Column selection","Color coding","Campaign Length","Breakdown","Viewfinder","Task instruction style","Shutter speed","Resolution","Release Date","Processing method","Number of Plugins","Number of languages","LCD","Key backlighting","Flash X sync speed","Extension language","Continuous shooting","WYSIWYG Newsletter Editor","Video Codecs","USB Hub","Time model","Supported platforms","Supported notation","Snooze Emails","Preview","Output","Noise cancelation","Multifactor","Lincense","Kit lens","Keycap Material","Incoming email support","Included sounds","Full Media Controls","Free tier","Event API","Encryption methods","Driver size","Display Resolution Per Eye","Display Refresh Rate","Display Panel Type","Browser integration","Waterproof","Versioning","SD reader","Removable USB Cable","Processing type","Max number of tracks","Imaging sensor","Image formats","Video Formats","Upper materials","SSD","Screen resolution","Plugin Manager","Pixel density","Outsole materials","Max power input","Interpupillary distance","Internal storage","Head Tracking","Half Sizes","Facing camera","Est. battery life","Cord Length","Connectivity","Camera","Bluetooth version","Battery capacity","Android version","Waterproof rating","Virtualization","Torso Fit","Strap","Server locations","Sensors","Power source","Occupancy","NFC","Motion-to-Photon Latency","Machine washable","Lockable","ISOs","Inertial Tracking Refresh Rate","Incremental","Import video formats","Import image formats","Import audio formats","Export video formats","Custom ISO","Audio Codecs","Wireless charging","Wall-mount capability","Viewing angles","Touch ID compatible","Tilt","Swivel","Surface","Subpixel Layout","Snow proof","Refresh rate","Power consumption","Positional Tracking Refresh Rate","Pivot","Picture-by-Picture","Panel","Max brightness","Lens","Lamp","Keystone","Inputs","Export image formats","Export audio formats","Dust proof","Dust & water resistance","Drop proof","Display Type","Display Persistence","Display Panel Size","Dioptric adjustment","Differential","Contrast ratio","Contrast","Continuous","Backlight","ANSI Lumen","Tray","Supported input methods","Scheduled","Quoted max print speed","Positional Tracker FOV","Only When Idle","Integrations","Height adjustment","FOV Vertical","FOV Monocular Horizontal","Expandable storage","Duplex","De-duplication","Connections","Tracking Accuracy","Supported frameworks","Spell-checking","Multiplex video","Layout","FOV Binocular Horizontal","Compatible devices","Comparison highlights","Character name database","Built-in sensors","Built-in Microphone"],keyCodes:{UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13,ESC:27},sourceTagLines:{"thewirecutter.com":"Conducts deep research with well thought out testing methodologies, often consulting outside experts in order to make as informed suggestions as possible.","consumerreports.org":"Has been performing extensive testing in their lab, while remaining completely editorially independent, since 1936.","laptopmag.com":"Tests tablets and laptops with industry standard, self-developed, and real-world tests performed by in-house experts.","notebookcheck.net":"Extensive benchmarking, and deep comparative and data analysis of laptops, smartphones, tablets and pc components.","tomsguide.com":"In addition to running in-house benchmarks, tests, and reading user reviews, Tom’s Guide try to actually use the products they review for their intended purpose.","theverge.com":"Provides, for the most part, great high-level analysis of products by focusing on the major takeaways most people care for. All while taking extra steps to remain more editorially compared to most other outlets.","tomshardware.com":"Puts every review product through an extensive combination of industry standard and self-developed benchmark testing.","rtings.com":"Rtings is a very consistent, rigorous standardized testing- and data-driven (sometimes overly so) review site specializing in TVs, headphones, and monitors.","bestreviews.com":"Performs repeatable, reliable tests of most products they review, often interviewing outside experts. ","toptenreviews.com":"Does simple in-house tests to evaluate key criteria and understand how well the products will perform for their intended usecases.","lifewire.com":"While they rarely do their own in-house testing, they do good research. And the products they do test they buy with their own money to stay editorially independent.","techradar.com":"TechRadar does in-house reviews with industry standard testing, though testing sometimes lacks depth.","cnet.com":'Massive site that does a good job with reviews but their "best" pages can be unreliable.',"monitornerds.com":"Mostly focused on gaming monitors. Does good research but rarely buy their own products to test.","digitaltrends.com":"Typically buys their own products for the reviews. Does a decent job updating reviews with new information.","techgearlab.com":"Tests their own products and is timely with updates.","dpreview.com":"Great reviews and forum focused on photography.","tomsguide.com":"","techradar.com":"","reviewed.com":"","pcmag.com":"","expertreviews.co.uk":"","pcgamer.com":"","trustedreviews.com":"","ign.com":"","144hzmonitors.com":"","engadget.com":"","csgoguru.com":"","windowscentral.com":"","toptenreviews.com":"","techadvisor.co.uk":"","t3.com":"","tomshardware.com":"","pcworld.com":"","headphonereview.com":"","head-fi.org":"","whathifi.com":"","soundguys.com":"","businessinsider.com":"","androidauthority.com":"","androidcentral.com":"","pocket-lint.com":"","arstechnica.com":"","pcgamesn.com":"","gamesradar.com":"","phonearena.com":"","gadgetmatch.com":"","theverge.com":"","wired.co.uk":"","lifehacker.com":"","androidpit.com":"","reviews.com":"","gsmarena.com":"","macworld.com":"","gearpatrol.com":"","gottabemobile.com":"","techhive.com":"","consumersearch.com":"","hometheaterreview.com":"","gizmodo.com":"","runnerclick.com":"","projectorcentral.com":"","outdoorgearlab.com":"","makeuseof.com":"","opencritic.com":"","youtube.com":"","bikeradar.com":"","runningshoesguru.com":"","runrepeat.com'":"","youtu.be":"","imore.com":"","thenightlight.com":"","vg247.com":"","hdtvtest.co.uk":"","techspot.com":"","reddit.com":""}}},{}],87:[function(e,t,n){t.exports={YOUTUBE_LINK:/(?:youtu\.be|youtube\.com)(?:\/embed\/|\/vi|\/v\/|.*[?&]v=|\/)([^&\/]{11})(?:.*[?&\#]t=([^&]+))?/i,YOUTUBE_TIME:/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?/,VALID_URL:/^(https?:\/\/)?(([a-zA-Z0-9][a-zA-Z0-9.-]{0,61})?[a-zA-Z0-9]\.[a-zA-Z0-9][a-zA-Z0-9.-]{0,61}[a-zA-Z0-9])(\/.*)?$/,VALID_EMAIL:/^(?=.{1,64}@)([a-z0-9!#$%&*+\/=?^_`{|}~-]+[.])*([a-z0-9!#$%&*+\/=?^_`{|}~-]+)@(?=.{1,255}$)([a-z0-9-]{01,63}[.])+([a-z]{1,63})$/i,VALID_USERNAME:/^(?=.{2,32}$)([-.]?[a-z0-9]+)+[-.]?$/i,IOS_USER_AGENT:/iPad|iPhone|iPod/,URL_ITEM_ID:/\/\d+(\/|$)/g,OPTION_VOTE_URL:/\/(votes)\/[\w\d\-]{2,}(\/?)/g,TAG_FILTER_URL:/(users)\/[\w\d\-]{2,}\/(tagFilter)$/,TABLET_MAX_WIDTH_MEDIA_QUERY:"(max-width: 1024px)",MOBILE_MAX_WIDTH_MEDIA_QUERY:"(max-width: 767px)",MINIMUM_MAX_WIDTH_MEDIA_QUERY:"(max-width: 414px)",TRANSLATE_X_VALUE:/translateX\((-?[\d\.]+)(px)?/i,TRANSLATE_Y_VALUE:/translateY\((-?[\d\.]+)(px)?/i}},{}],88:[function(e,t,n){var i,o,r,s,l,a,u;i=e("underscore"),a=null,s=null,r={},u=function(e){var t,n,i,o;if("."!==e[0])return!1;for(i=n=0,o=(e=e.slice(1)).length;n<o;i=++n){if(" "===(t=e[i])||","===t||"["===t||"]"===t||"#"===t||"*"===t||":"===t||">"===t||"+"===t||"~"===t||"("===t||")"===t)return!1;"."===t&&(e=e.replace("."," "))}return e},o=function({bootstrap:e}={}){var t;return t=function(e){var t,n;return(n=document.implementation.createHTMLDocument("template").createElement("template")).innerHTML=e,a=(null!=(t=n.content)?t:n).childNodes[0]},s||(e?(t(e),s=$.Deferred().resolve()):s=$.get(`/${env.TEMPLATE_MD5}/templates`,"",t))},l=function(e){var t,n,o,s;if(!a)throw"TemplateError: Template not loaded";if((o=r[e])||(n=(s=u(e))?Array.prototype.slice.apply(a.getElementsByClassName(s)):Array.prototype.slice.apply(a.querySelectorAll(e)),t=Array.prototype.slice.apply(a.childNodes),o=i.find(n,function(e){return~t.indexOf(e)}),r[e]=o),!o)throw new Error(`TemplateError: Element '${e}' not found`);return"TEMPLATE"===o.tagName?o.content.firstChild:o},t.exports={template:l,load:o}},{underscore:448}],89:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q;({YOUTUBE_LINK:u,YOUTUBE_TIME:c,VALID_URL:a,URL_ITEM_ID:l,TAG_FILTER_URL:r,OPTION_VOTE_URL:o}=e("./patterns")),p=e("underscore"),s=e("urijs"),T=e("moment"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../server/compiled/templating/jquery"),S=new((P=e("marked")).Renderer),k=P.Renderer.prototype.strong,C=P.Renderer.prototype.link,p.extend(S,{heading:function(e,t,n){return k.call(this,e)},link:function(e,t,n){return C.call(this,e,t,n).replace(/^<a/,'<a rel="nofollow noopener" target="_blank"')},image:function(e,t,n){var i;return i=t||n||e,C.call(this,e,t,i).replace(/<\/a>/,' <i class="fa fa-picture-o"></i></a>')}}),P.setOptions({sanitize:!0,breaks:!0,renderer:S}),T.locale("en-abbr",{relativeTime:{future:"in %s",past:"%s ago",s:"%d secs",m:"1 min",mm:"%d mins",h:"1 hr",hh:"%d hrs",d:"1 day",dd:"%d days",M:"1 mon",MM:"%d mons",y:"1 yr",yy:"%d yrs"}}),T.locale("en",{calendar:{nextWeek:"[Next] dddd",nextDay:"[Tomorrow]",sameDay:"[Today]",lastDay:"[Yesterday]",lastWeek:"dddd",sameElse:"L"}}),B=function(e){var t,n,i,o;return n=c.exec(e),[t,i,o]=n.slice(1),(3600*t|0)+(60*i|0)+(0|o)},q=function(e,t,n){return e=(e=i(P(e)).text()).trim(),t&&(e=e.slice(0,+t+1||9e9)),(e=e.trim()).length<t||(e=e.slice(0,+-n.length+1||9e9).trim()+n),e},m=function(e){var t,n,i,o,r,s,l,a,c,p;if(p=null!=(r=this.model.get("revision"))&&null!=(s=r.get("image"))?s.source:void 0,[o,i,c]=null!=(l=u.exec(p))?l:[],i)return n=document.createElement("iframe"),a=`https://www.youtube.com/embed/${i}`,c&&(a+=`?start=${B(c)}`),n.setAttribute("src",a),n.setAttribute("width",420),n.setAttribute("height",315),n.setAttribute("frameBorder",0),(t=document.createElement("section")).appendChild(n),t.setAttribute("class","video"),t},h=function(e){return-1===(null!=e?e.indexOf("://"):void 0)?`https://${e}`:e},d=function(t){var n,i,o,r,s,l,a,c,d,h,m,f;return n=e("../model"),i=null!=this.model?this.model:this,p.isString(t)||(t=null!=(m=(o=i instanceof n?null!=(s=null!=(l=null!=(a=i.get("revision"))?a:i)?l.get("image"):void 0)?s:{}:null!=(c=(null!=(d=null!=(h=i.revision)?h:i)?d:{}).image)?c:{}).small)?m:o.source),(r=null!=(f=u.exec(t))?f[1]:void 0)?`https://img.youtube.com/vi/${r}/hqdefault.jpg`:t},$=function(e){var t,n,i;return(i={"amazon.com":"Amazon","play.google.com":"Google Play","itunes.apple.com":"the App Store","store.steampowered.com":"Steam","github.com":"GitHub","humblebundle.com":"the Humble Bundle","apps.samsung.com":"Samsung GALAXY Apps","f-droid.org":"F-Droid","gog.com":"GOG","origin.com":"Origin","indiegamestand.com":"IndieGameStand","barnesandnoble.com":"Barnes & Noble","store.kobobooks.com":"Kobo Books","packages.ubuntu.com":"Ubuntu Packages","aur.archlinux.org":"Arch User Repositories","ebay.com":"eBay","walmart.com":"Walmart","target.com":"Target","bestbuy.com":"BestBuy","homedepot.com":"HomeDepot","lowes.com":"Lowe's","toysrus.com":"ToysRUs","staples.com":"Staples","store.apple.com":"Apple","google.com":"Google","motorola.com":"Motorola","dell.com":"Dell","store.sony.com":"Sony","sonymobile.com":"Sony","store.acer.com":"Acer","toshiba.com":"Toshiba","nike.com":"Nike","newegg.com":"newegg","zappos.com":"Zappos","kohls.com":"Kohls","macys.com":"Macys","sears.com":"Sears","store.hp.com":"HP","asus.com":"ASUS","lenovo.com":"Lenovo","htc.com":"HTC","lg.com":"LG","shop.panasonic.com":"Panasonic","samsung.com":"Samsung  ","sharpusa.com":"Sharp","dyson.com":"Dyson","maytag.com":"Maytag","whirlpool.com":"Whirlpool","microsoft.com":"Microsoft","us.blackberry.com":"BlackBerry","cisco.com":"Cisco","huawei.com":"Huawei","usa.canon.com":"Canon","nikon.com":"Nikon","razerzone.com":"Razer","steelseries.com":"SteelSeries","logitech.com":"Logitech","zowiegear.com":"Zowie Gear","mionix.net":"Mionix","roccat.org":"Roccat","madcatz.com":"Mad Catz","corsair.com":"Corsair","kensington.com":"Kensington","shop.amd.com":"AMD","nvidia.com":"Nvidia","evga.com":"EVGA"})[t=null!=e&&null!=(n=e.match(/:\/\/(www\.)?([^\/]+)/))?n[2]:void 0]?`Get it from ${i[t]}`:"Get it here"},D=function(e){var t,n;return null!=(n={"amazon.com":"amazon","play.google.com":"google-play","itunes.apple.com":"app-store","store.steampowered.com":"steam","github.com":"github"}[null!=e&&null!=(t=e.match(/:\/\/(www\.)?([^\/]+)/))?t[2]:void 0])?n:""},f=function(e){return T.utc(new Date(e)).calendar().toString()},b=function(e){return a.test(e)},g=function(e){var t,n;return"undefined"!=typeof window&&null!==window?((n=document.createElement("span")).innerHTML=e,null!=(t=n.textContent)?t:e):e},L=function(e){return null!=e?e.replace(/\s([^\s]+$)/," $1"):void 0},E=function(e){var t,n;return n=Math.pow(10,Math.floor(Math.log10(e))-1),t=20<e&&e<100?5:n,Math.round(e/t)*t},O=function(e,t=1){var n,i,o,r;return null==e?"":(e<1e4&&0===t&&t++,e>999999?(n=1e6,r="M"):(n=1e3,r="K"),(o=(e/n*(i=Math.pow(10,t))>>0)/i)>=1?`${o}${r}`:e)},R=/^what (are|is) the best/i,A=function(e){return R.test(e)&&(e=e.replace(R,"Best").replace(/\?$/,".")),e},y=function(e){return null==e?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},U=function(e=""){var t,n,i,o;return[o,i]=null!=(t=null!=(n=e.toString().match(/([.\d]+)\s*(.*)/))?n.slice(1):void 0)?t:["",""],{value:o,unit:i}},_=function(e){var t,n,i,o;if(t=0,0===e.length)return t;for(n=i=0,o=e.length;0<=o?i<o:i>o;n=0<=o?++i:--i)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t<0&&(t=-t),t},w=function(e,t){var n,i,o;if(e.hasOwnProperty("constructor")&&e.constructor===Object)return{};if(n=w(Object.getPrototypeOf(e),t),e.hasOwnProperty(t))for(t in i=e[t])o=i[t],delete n[t],n[t]=o;return n},V=function(e,t){var n,i,o;return e?(i=null!=(n=e.parents("topic"))?n:e,o=new s(null!=t?t:e.url()),i.get("noindex")&&o.directory(`/improve${o.directory()}`),o.toString()):t},v=function(e){if(null!=e)return e.replace(/~.*$/,"").replace(l,"/id/").replace(o,"/$1/username$2").replace(r,"$1/id/$2")},M=function(e){var t;if(10<(t=Math.abs(e))&&t<20)return`${e}th`;switch(Math.abs(e)%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`;default:return`${e}th`}},x=function(e,t){var n;return t?((n=e.split(t))[1]&&(n[1]=i(`<em>${n[1]}</em>`)),n):e},I=function(e=""){var t,n,i,o,r;return t=(e=decodeURIComponent(null!=(o=null!=(r=e.match(/\?(.+)/))?r[1]:void 0)?o:"")).split("&"),n=p.compact(p.map(t,function(e){if(e)return e.split("=")})),i=p.groupBy(n,([e,t])=>e),p.mapObject(i,e=>p.pluck(e,1))},t.exports={convertImageURL:d,convertURL:h,convertVideoLinks:m,daysAgo:f,decodeHTMLEntities:g,flattenProperty:w,groupNumber:y,hashCode:_,improveURL:V,isURL:b,ordinalNumber:M,orphanBust:L,simplifyNumber:E,shortenNumber:O,shortenQuestionTitle:A,siteLinkIdentifier:D,siteLinkName:$,splitUnit:U,timeToSecs:B,trimText:q,highlightText:x,generalizeStringURL:v,parseQuery:I}},{"../../../../server/compiled/templating/jquery":461,"../model":33,"./patterns":87,jquery:438,marked:440,moment:441,underscore:448,urijs:452}],90:[function(e,t,n){(function(n){var i,o,r,s,l,a,u,c;"undefined"!=typeof window&&null!==window?(i=e("jquery"),o=e("backbone")):(i=e(`${c="../../../server/compiled/templating/"}jquery`),o=e(`${c}backbone`)),l=e("underscore"),e("./model"),e("./collection"),({flattenProperty:u}=e("./utils/transforms")),r=e("./utils/client-logger"),a=/^(\S+)\s*(.*)$/,s=class extends o.View{mixin(e){var t;t=l.difference(Object.getOwnPropertyNames(e.prototype),Object.getOwnPropertyNames(this)),l.extend(this,l.pick(e.prototype,...t))}initialize(e={}){var t,n,i,s,a,c,p;if(this.query=l.clone("undefined"!=typeof query&&null!==query?query:{}),this.rule=new(null!=(i=this.Rule)?i:this.rule),this.Model&&null==this.model&&(r.info(`Fallback View Model created in ${this.constructor.name}`),this.model=new this.Model),this.Collection&&null==this.collection&&(r.info(`Fallback View Collection created in ${this.constructor.name}`),this.collection=new this.Collection),!this.Model||null==this.model||this.model instanceof this.Model||r.warn(`View Model class mismatch in ${this.constructor.name}`),!this.Collection||null==this.collection||this.collection instanceof this.Collection||r.warn(`View Collection class mismatch in ${this.constructor.name}`),null!=this.model&&!(this.model instanceof o.Model))throw new Error("ViewError: View model provided is not an instance of Model");if(null!=this.collection&&!(this.collection instanceof o.Collection))throw new Error("ViewError: View collection provided is not an instance of Collection");return this.rule.view=this,this.children=[],this.events=u(this,"events"),this.options=l.defaults(e,u(this,"options")),this.parent=e.parent,null!=this.collection&&this.listenTo(this.collection,"add remove reset sort repaint",this.update),null!=this.model&&this.listenTo(this.model,{"change repaint":this.update,"saveError fetchError":this.error,highlight:this.highlight}),this.update(e),t=null!=(s=e.ajax)?s:this.$el.attr("data-ajax"),"undefined"!=typeof window&&null!==window&&t&&this.loadAjax(t),e.prerender?this:(n=null!=(a=null!=(c=this.model)?c.get("localID"):void 0)?a:null!=(p=this.collection)&&"function"==typeof p.meta?p.meta("localID"):void 0,Object.getPrototypeOf(this).hasOwnProperty("classID")||console.error(`ViewError: View ${this.constructor.name} is not exported`),this.$el.addClass("_View"),null!=n&&this.$el.attr("data-local-id",n),null!=this.model&&this.$el.attr("data-model-id",this.model.id),null!=this.collection&&(this.$el.attr("data-relation-id",this.collection.relationID),this.$el.attr("data-relation",this.collection.relation)),null!=this.classID&&this.$el.attr("data-view",this.classID),this.version&&this.$el.attr("data-view-version",this.version),null!=t?this.$el.attr("data-ajax",t):void 0)}title(e){var t;return t="true"===("undefined"!=typeof window&&null!==window?window:n).env.USE_AI_URLS?"Lustre.ai":"Slant",e?`${e} - ${t}`:`${t}`}prerender(){var t;return t=l.filter(this.el.getElementsByClassName("_View"),e=>{for(;e=e.parentElement;){if(e===this.el)return!0;if(e.hasAttribute("data-view"))return!1}return!1}),this.children=l.map(t,t=>{var n,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;if(x=t.getAttribute("data-view"),!(n="v2"===t.getAttribute("data-view-version")?e("./views-v2")[x]:e("./views")[x]))throw new Error(`ViewError: Prerender Child View ${x} not found`);return l={el:t,prerender:!0},o=t.getAttribute("data-local-id"),s=t.getAttribute("data-model-id"),y=t.getAttribute("data-relation-id"),v=t.getAttribute("data-relation"),o?(i=window.localCollections[o],r=window.localModels[o]):s?r=window.dataStore.getModel(s):y&&v&&(i=window.dataStore.getCollection(y,v)),i||r||!1===(null!=(a=n.prototype.options)?a.inferModel:void 0)||(null==(null!=(u=n.prototype.Collection)?u:n.prototype.collection)||l.collection||(i=null!=(c=this.model)?c.get(null!=(p=null!=(d=n.prototype.Collection)?d.prototype.key:void 0)?p:null!=(h=n.prototype.collection)?h.key:void 0):void 0),null==(null!=(m=n.prototype.Model)?m:n.prototype.model)||l.model||(r=null!=(f=this.model)?f.get(null!=(g=null!=(w=n.prototype.Model)?w.prototype.key:void 0)?g:n.prototype.model.key):void 0)),null!=i&&(l.collection=i),null!=r&&(l.model=r),(_=new n(l)).parent=this,_}),this}render(){var e,t,n,o,r,s,l;if(this.empty({remove:!1}),!this.removed){try{t=i(this.rule.render(this))}catch(e){return n=e,void console.error("RenderError: ",n,n.stack)}for(r=o=0,s=(l=this.el.attributes).length;o<s;r=++o)"class"!==(e=l[r]).name?null==t.attr(e.name)&&t.attr(e.name,e.value):e.value&&t.addClass(e.value);return this.$el.replaceWith(t),this.setElement(t),this}}empty(e={}){var t,n,i;for(t=0,n=(i=this.children).length;t<n;t++)i[t].remove(e);return this.children=[],this}remove(e={}){var t;return!1!==e.remove&&this.$el.remove(),this.stopListening(),this.undelegateEvents(),this.removed=!0,this.empty(e),(null!=(t=this.parent)?t.children:void 0)&&(this.parent.children=l.without(this.parent.children,this)),this}update(e,t){return e instanceof o.Model||e instanceof o.Collection||(t=e),null==t&&(t={}),t.prerender&&"false"!==this.$el.attr("data-prerender")?this.prerender():this.render(),this}loadAjax(e){var t,n,i,r;return e=encodeURI(e),this.$el.addClass("Loading"),(r=null!=(t=this.model)?t:this.collection)instanceof o.Model?null!=(n=this.model)?n.set("URL",e).fetch({success:()=>this.$el.removeClass("Loading")}):void 0:r instanceof o.Collection&&null!=(i=this.collection)?i.meta("URL",e).fetch({silent:!0,success:()=>(this.collection.trigger("reset"),this.$el.removeClass("Loading"))}):void 0}flattenChildren(){var e;return(e=function(t){return[t,...l.chain(t.children).map(e).flatten().value()]})(this)}getChildByModel(e){return l.find(this.flattenChildren(),function(t){var n;return(null!=(n=t.model)?n:t.collection)===e})}getChildByElement(e){return l.find(this.flattenChildren(),function(t){return i(e)[0]===t.el})}getChildren(e){return this.flattenChildren()}getChildrenByView(e){return l.filter(this.flattenChildren(),function(t){return t instanceof e})}getParentByView(e){if(this.parent)return this.parent instanceof e?this.parent:this.parent.getParentByView(e)}error(){return this.$el.removeClass("Loading")}highlight(e,t={}){var n,r;if(e instanceof o.Model||(t=e),null==t&&(t={}),l.defaults(t,{speed:10,scroll:!0,highlight:!0,padding:0,targetElement:this.$el}),(r=t.targetElement).removeClass("Loading"),n=0,t.scroll&&r.is(":visible")&&l.defer(()=>{var e,o,s;if(s=r.offset().top,e=r.outerHeight()+s,0!==s)return(!0===t.scroll&&e>window.scrollY+window.innerHeight||"bottom"===t.scroll)&&(o=e-window.innerHeight+t.padding),(!0===t.scroll&&s<window.scrollY||r.outerHeight()>window.innerHeight||"top"===t.scroll)&&(o=s-t.padding),"center"===t.scroll&&(o=s-(window.innerHeight-r.outerHeight())/2),n=Math.abs(window.scrollY-o)/t.speed,i("html, body").stop(!0),null!=o?i("html, body").animate({scrollTop:o},n):void 0}),t.highlight)return l.defer(function(){return r.removeClass("adding added"),r.addClass("adding"),requestAnimationFrame(function(){return r.removeClass("adding"),r.addClass("added")})})}delegateEvents(e){var t,n,o,r,s;if(a=/^(\S+)\s*(.*)$/,!e&&!(e=l.result(this,"events")))return this;for(n in this.undelegateEvents(),e)r=e[n],l.isFunction(r)||(r=this[r]),r&&(o=n.match(a),[t,s]=o.slice(1,3),r=l.bind(r,this),t+=`.delegateEvents${this.cid}`,"document"===s?(i(document).on(t,r),this._hasGlobalEvents=!0):"window"===s?"undefined"!=typeof window&&null!==window&&(this._hasGlobalEvents=!0,i(window).on(t,r)):""===s?this.$el.on(t,r):this.$el.on(t,s,r));return Object.keys(e).length&&(this._hasEvents=!0),this}undelegateEvents(){return this._hasGlobalEvents&&(this._hasGlobalEvents=!1,i(document).off(".delegateEvents"+this.cid),"undefined"!=typeof window&&null!==window&&i(window).off(".delegateEvents"+this.cid)),this._hasEvents&&(this._hasEvents=!1,this.$el.off(".delegateEvents"+this.cid)),this}setPermissions(){var e,t,n;if("undefined"!=typeof window&&null!==window)return e=(()=>window.currentUser&&!(null!=t?t.permissions(window.currentUser):void 0)?i("body").addClass("unauthorized"):i("body").removeClass("unauthorized")),null!=(null!=(t=null!=(n=this.model)?n:this.collection)?t.permissions:void 0)?(e(),window.currentUser&&this.listenTo(window.currentUser,"all",e),this.listenTo(t,"change",e)):void 0}},t.exports=s}).call(this,e("_process"))},{"./collection":1,"./model":33,"./utils/client-logger":84,"./utils/transforms":89,"./views":330,"./views-v2":169,_process:426,backbone:424,jquery:438,underscore:448}],91:[function(e,t,n){var i,o,r;o=e("../rule"),r=e("../view"),i=function(){class e extends r{loadLink(e,t){var n,i,o,r,s,l,a;if((a=e.currentTarget).href.replace(a.hash,"")!==location.href.replace(location.hash,""))return a.host===location.host&&!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||a.target)&&(e.preventDefault(),o=a.pathname,l=a.search,r=a.hash,null!=a.getAttribute("data-bootstrap")&&(i=null==(n=(null!=(s=this.model)?s:this.collection).clone({deep:!0}))),t=_.extend({trigger:!0,search:l,hash:r,bootstrap:n,fill:i},t),o)?this.navigate(o,t):void 0}navigate(e,t){return router.navigate(e,t)}}return e.prototype.Rule=class extends o{},e.prototype.version="v2",e}.call(this),t.exports={BaseView:i}},{"../rule":81,"../view":90}],92:[function(e,t,n){var i,o,r,s,l;({EventView:r}=e("../models/event-view")),({Event:o,Topic:s}=e("../../models")),({improveURL:l}=e("../../utils/transforms")),i=function(){class e extends r{getTopic(){var e;return(e=this.model.get("target"))instanceof s?e:this.model.get("target").collection.parents("topic")}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ActivityView")}}).prototype.rule={"._question-title=":function(){var e;return null!=(e=this.getTopic())?e.get("revision").get("title").trim():void 0},"._question-link@href":function(){var e;return e=this.getTopic(),l(e,e.get("communityURL"))},"._EventView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),t.exports={ActivityView:i}},{"../../models":34,"../../utils/transforms":89,"../models/event-view":192}],93:[function(e,t,n){(function(n){var i,o,r,s,l,a;({BaseView:l}=e("../base-view")),({TooltipView:a}=e("../components/tooltip-view")),s=function(){class e extends l{hasAds(){var e;return"true"===(e=("undefined"!=typeof window&&null!==window?window:n).env).ENABLE_PLAYWIRE_ADS&&null!=e.PLAYWIRE_ADS_CONFIG_URL&&!("undefined"!=typeof window&&null!==window&&window.currentUser.get("username")&&!window.currentUser.get("isModerator"))}openExplanationTooltip(e){var t;if(null==(t=this.explainTooltip)||!t.attached)return this.explainTooltip=new i({follows:e.currentTarget})}}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._has-ads=":function(){if(!this.hasAds())return""},"._tagged-ad@id":function(){return this.adId}},e}.call(this),e.prototype.events={"mouseover ._explain-ad-tooltip-link":function(e){return this.openExplanationTooltip(e)},"mouseenter ._explain-ad-tooltip-link":function(e){var t,n;return n=null!=(t=this.type)?t:"None",analytics.track("Ad Info Tooltip Opened",{label:n})}},e}.call(this),r=function(){class e extends s{}return e.prototype.type="sidebar",e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._AdSidebarAdView")}},e}.call(this),o=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._AdInArticleAdView")}},e}.call(this),i=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._AdExplanationTooltipView")}},e}.call(this),t.exports={AdView:s,AdSidebarAdView:r,AdInArticleAdView:o,AdExplanationTooltipView:i}}).call(this,e("_process"))},{"../base-view":91,"../components/tooltip-view":167,_process:426}],94:[function(e,t,n){var i,o,r,s,l,a,u;({ModalView:u}=e("./modal-view")),({ImageCarouselReadOnlyView:l,ImageCarouselItemView:s}=e("./image-carousel-view")),({ImageCollection:a}=e("../../collections")),r=function(){class e extends u{}return e.prototype.Collection=a,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._CarouselLightboxView")}}).prototype.rule={"._CarouselLightboxCarouselView=":function(){return new o({collection:this.collection})}},e}.call(this),e}.call(this),i=function(){class e extends s{update(){return super.update(...arguments),this.$("._image-item").on("load",()=>this.$("._image-cover").removeClass("Loading"))}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._CarouselLightboxCarouselItemView")}},e}.call(this),o=function(){class e extends l{}return e.prototype.ItemView=i,e.prototype.Rule=class extends l.prototype.Rule{},e}.call(this),t.exports={CarouselLightboxView:r,CarouselLightboxCarouselItemView:i,CarouselLightboxCarouselView:o}},{"../../collections":2,"./image-carousel-view":106,"./modal-view":122}],95:[function(e,t,n){var i,o,r,s,l,a,u;({BaseView:i}=e("../base-view")),({ListView:a}=e("../lists/list-view")),u=e("underscore"),s=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._CarouselItemView")}},e}.call(this),l=function(){class e extends a{initialize(){return this.currentIndex=0,super.initialize(...arguments)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return u.defer(()=>this.position())}orientationProperties(){var e;return"vertical"===(null!=(e=this.options)?e.orientation:void 0)?{position:"top",size:"height",scroll:"scrollHeight"}:{position:"left",size:"width",scroll:"scrollWidth"}}updateNav(e){var t,n;return n=this.orientationProperties(),(t=this.$(this.listSelector)).prop(n.scroll)<=Math.round(t[n.size]())?(this.$(this.previousLinkSelector).addClass("disabled"),void this.$(this.nextLinkSelector).addClass("disabled")):(this.$(this.previousLinkSelector).removeClass("disabled"),this.$(this.nextLinkSelector).removeClass("disabled"),0===this.currentIndex?this.$(this.previousLinkSelector).addClass("disabled"):this.$(this.previousLinkSelector).removeClass("disabled"),this.hasOverflow(e)?this.$(this.nextLinkSelector).removeClass("disabled"):this.$(this.nextLinkSelector).addClass("disabled"))}hasOverflow(e){var t,n,i;return n=this.orientationProperties(),t=this.$(this.listSelector),0===this.currentIndex&&(i=n.position,e=-parseFloat(t.css(`padding-${i}`)||0)),t.prop(n.scroll)>Math.ceil(t[n.size]()-(null!=e?e:parseInt(t.css(n.position))))}step(e){var t,n;if(t=this.currentIndex+e,0<=(n=this.currentIndex+e)&&n<this.$(`${this.itemSelector}:visible`).length)return this.position(t)}position(e){var t,n,i,o,r,s,l;return l=this.orientationProperties(),this.currentIndex=null!=e?e:this.currentIndex,n=this.$(this.listSelector),t=this.$(`${this.itemSelector}:visible`).eq(this.currentIndex),0===this.currentIndex?r=0:(o=this.$(this.offsetSelector)[l.size]()||0,r=t.position()[l.position]-o,(i=n.prop(l.scroll)-Math.round(n[l.size]()))<r&&(this.currentIndex-1==0?0:(null!=(s=this.$(`${this.itemSelector}:visible`).eq(this.currentIndex-1))?s.position()[l.position]:void 0)-o,r=i)),n.css(l.position,-r),this.updateNav(-r),this.updateCurrentIndexIndicators()}updateCurrentIndexIndicators(){var e,t,n;return(e=this.$("._index-indicator-item")).removeClass("selected"),null!=(t=e.eq(this.currentIndex))&&t.addClass("selected"),null!=(n=this.getChildrenByView(r)[0])?n.setActiveIndex(this.currentIndex):void 0}}return e.prototype.ItemView=s,e.prototype.listSelector="._carousel-list",e.prototype.itemSelector="._carousel-item",e.prototype.previousLinkSelector="._previous-item-link",e.prototype.nextLinkSelector="._next-item-link",e.prototype.offsetSelector="._carousel-offset",e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._CarouselView")}}).prototype.rule={"._index-indicator@data-total":function(){return this.collection.length||0}},e}.call(this),e.prototype.events={"resize window":function(e){return this.position()},"click ._previous-item-link":function(e){return this.step(-1)},"click ._next-item-link":function(e){return this.step(1)}},e}.call(this),o=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._indicator-item-active-class@class+":function(){if(this.options.isActive)return"active"}},e}.call(this),e.prototype.events={"click ._indicator-item-link":function(){var e,t,n;return n=this.getParentByView(r),e=this.getParentByView(l),t=n.collection.indexOf(this.model),null!=e&&e.position(t),"function"==typeof this.onClick?this.onClick():void 0}},e}.call(this),r=function(){class e extends a{initialize(){var e;return this.currentIndex=null!=(e=this.options.queryIndex)?e:0,super.initialize(...arguments)}setActiveIndex(e){return this.currentIndex=e,this.update()}createViewOptions(e,t,n){var i;return{isActive:t===(null!=(i=this.currentIndex)?i:this.options.queryIndex)}}}return e.prototype.ItemView=o,e.prototype.cached=!1,e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),t.exports={CarouselItemView:s,CarouselView:l,CarouselIndicatorItemView:o,CarouselIndicatorListView:r}},{"../base-view":91,"../lists/list-view":173,underscore:448}],96:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;({UserView:f}=e("../models/user-view")),({DropdownView:u}=e("./dropdown-view")),({LoginModalView:h,LoginModalContentView:p,LoginModalLoginContentView:d,LoginModalAnonymousRegisterContentView:c}=e("./login-modal-view")),({User:m}=e("../../models")),g=e("underscore"),i=function(){class e extends f{initialize(){return null==this.model&&(this.model="undefined"!=typeof window&&null!==window?window.currentUser:void 0),super.initialize(...arguments)}oAuthSignIn(e){return new h({ContentView:p,contentOptions:{method:e}})}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._ClaimBannerCardView")}}).prototype.rule={"._has-karma=":function(){if(!(this.model.get("karma").meta("total")>0))return""}},e}.call(this),e.prototype.events={"click ._claim-link":function(e){return e.preventDefault(),new h({ContentView:c,model:this.model.clone()})},"click ._facebook-claim-link":function(e){return this.oAuthSignIn("facebook")},"click ._google-claim-link":function(e){return this.oAuthSignIn("google")}},e}.call(this),l=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ClaimBannerMiniCardView")}},e}.call(this),a=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ClaimBannerSidebarCardView")}},e}.call(this),o=function(){class e extends u{initialize(){return super.initialize(...arguments),this.topOffset=parseInt(this.$el.css("top")),this.makeSticky()}makeSticky(){return $(window).scrollTop()>this.topOffset?this.$el.addClass("sticky"):this.$el.removeClass("sticky")}oAuthSignIn(...e){return i.prototype.oAuthSignIn.apply(this,e),this.close()}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ClaimBannerDropdownView")}}).prototype.rule={"._has-profile-link=":function(){if(!this.options.showProfileLink)return""}},e}.call(this),e.prototype.events=g.extend({},i.prototype.events,{"click ._signin-link":function(e){return e.preventDefault(),new h({ContentView:d}),analytics.track("Anonymous Clicked Already Have Account"),this.close()},"scroll window":function(){return this.makeSticky()}}),e}.call(this),r=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.$el.addClass("fixed")}makeSticky(){}}return e.prototype.closable=!1,e.prototype.Rule=class extends o.prototype.Rule{},e}.call(this),s=function(){class e extends o{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ClaimBannerKarmaDropdownView")}},e}.call(this),t.exports={ClaimBannerCardView:i,ClaimBannerMiniCardView:l,ClaimBannerSidebarCardView:a,ClaimBannerDropdownView:o,ClaimBannerFixedDropdownView:r,ClaimBannerKarmaDropdownView:s}},{"../../models":34,"../models/user-view":207,"./dropdown-view":101,"./login-modal-view":115,underscore:448}],97:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;f=e("underscore"),({shortenNumber:g}=e("../../utils/transforms")),({OptionView:d}=e("../models/option-view")),({ListView:u}=e("../lists/list-view")),({TooltipView:h}=e("./tooltip-view")),({MasterOption:c,Viewpoint:m}=e("../../models")),({MasterOptionList:p}=e("../../collections")),a=function(){class e extends d{}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._CommonlyComparedView")}}).prototype.rule={"._has-more=":function(){if(!(this.model.get("related").length>o.prototype.limit))return""},"._CommonlyComparedMasterView=":function(){return new i({model:this.model.get("source")})},"._CommonlyComparedOptionListView=":function(){return new o({collection:this.model.get("related")})},"._CommonlyComparedOptionMoreListView=":function(){return new r({collection:this.model.get("related")})}},e}.call(this),e.prototype.events={"click ._view-all-link":function(e){var t,n;return t=(n=this.$("._CommonlyComparedOptionMoreListView")).prop("scrollHeight"),n.css("max-height",t),this.$("._CommonlyComparedOptionListView").addClass("expanded"),this.$(".ExpandListButton._view-all-link").addClass("hidden"),this.$(".ExpandListButton._view-less-link").removeClass("hidden")},"click ._view-less-link":function(e){return this.$("._CommonlyComparedOptionMoreListView").css("max-height",0),this.$("._CommonlyComparedOptionListView").removeClass("expanded"),this.$(".ExpandListButton._view-less-link").addClass("hidden"),this.$(".ExpandListButton._view-all-link").removeClass("hidden")}},e}.call(this),i=function(){class e extends d{}return e.prototype.Model=m,e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._CommonlyComparedMasterView")}},e}.call(this),l=function(){class e extends d{}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._CommonlyComparedOptionView")}}).prototype.rule={"._option-upvote-count=":function(){return g(this.model.parent.get("votes").meta("upvotes")||0)},"._option-compare-link@href":function(){return this.model.parent.get("compareURL")}},e}.call(this),e.prototype.showTooltip=f.debounce(function(e){if(this.mouseover)return new s({model:this.model,triggers:e.currentTarget,follows:$(e.currentTarget).find("._tooltip-target")})},300),e.prototype.events={"mouseover ._option-compare-tooltip":function(e){return this.mouseover=!0,this.showTooltip.call(this,e)},"mouseout ._option-compare-tooltip":function(e){return this.mouseover=!1}},e}.call(this),o=function(){class e extends u{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=p,e.prototype.ItemView=l,e.prototype.limit=5,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._CommonlyComparedOptionListView")}},e}.call(this),r=function(){class e extends o{}return e.prototype.limit=12-o.prototype.limit,e.prototype.offset=o.prototype.limit,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._CommonlyComparedOptionMoreListView")}},e}.call(this),s=function(){class e extends h{}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._CommonlyComparedOptionTooltipView")}}).prototype.rule={"._master-option-title=":function(){return this.model.parent.parents("masterOption").get("source").get("revision").get("title")},"._compared-option-title=":function(){return this.model.get("revision").get("title")}},e}.call(this),e}.call(this),t.exports={CommonlyComparedView:a,CommonlyComparedMasterView:i,CommonlyComparedOptionView:l,CommonlyComparedOptionListView:o,CommonlyComparedOptionMoreListView:r,CommonlyComparedOptionTooltipView:s}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../lists/list-view":173,"../models/option-view":200,"./tooltip-view":167,underscore:448}],98:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O;O=e("moment"),I=e("marked"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({BaseView:o}=e("../base-view")),({RecommendationPanelView:P,RecommendationPanelHeaderView:b,RecommendationPanelUserView:k,RecommendationPanelContentView:R,RecommendationPanelHighlightView:C,RecommendationPanelSectionView:S}=e("../components/recommendation-panel-view")),({ListView:y}=e("../lists/list-view")),({ReactionTextButtonUsefulView:_}=e("../components/reaction-button-set-view")),({RecModel:x,UserModel:L,HighlightModel:v,SectionModel:M,RecPageQuery:V}=e("../../models/index")),({HighlightCollection:w,SectionCollection:T}=e("../../collections/index")),g=function(){class e extends P{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Recommendation Panel Opened",{label:"community"})}}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends P.prototype.Rule{}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new a({model:this.model})},"._RecommendationPanelContentView=":function(){return new s({model:this.model})}},e}.call(this),e}.call(this),a=function(){class e extends b{}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._CommunityRecommendationPanelHeaderView")}}).prototype.rule={"._owner-first-name=":function(){var e,t;return(null!=(t=(null!=(e=this.model.getModel("user_id"))?e.get("displayname"):void 0)||(null!=e?e.get("username"):void 0))?t.split(" ")[0]:void 0)||"User"},"._CommunityRecommendationPanelUserView=":function(){return new f({model:this.model.getModel("user_id")})}},e}.call(this),e}.call(this),f=function(){class e extends k{}return e.prototype.Model=L,e.prototype.Rule=class extends k.prototype.Rule{},e}.call(this),s=function(){class e extends R{}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._CommunityRecommendationPanelContentView")}}).prototype.rule={"._has-recommendation-body=":function(){if(!this.model.get("body").trim())return""},"._has-pros=":function(){if(!this.model.getCollection("rec_highlight_ids").any(function(e){return"Pro"===e.getModel("section_id").get("section_type")}))return""},"._has-cons=":function(){if(!this.model.getCollection("rec_highlight_ids").any(function(e){return"Con"===e.getModel("section_id").get("section_type")}))return""},"._rec-last-updated=":function(){return O(new Date(this.model.get("modified_timestamp"))).format("MMMM Do, YYYY")},"._recommendation-text=":function(){return i(I(this.model.get("body").trim()))},"._CommunityRecommendationPanelProsListView=":function(){return new p({collection:this.model.getCollection("rec_highlight_ids"),vote:this.model})},"._CommunityRecommendationPanelConsListView=":function(){return new r({collection:this.model.getCollection("rec_highlight_ids"),vote:this.model})},"._CommunityRecommendationPanelFooterView=":function(){return new l({model:this.model})}},e}.call(this),e}.call(this),l=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&!this.model.get("rec_reaction_ids"))return this.$el.addClass("Loading"),this.model.store.ensureQuery(V,{rec_id:this.model.get("rec_id")}).fetch({silent:!0,success:()=>(this.update(),this.$el.removeClass("Loading"))})}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._CommunityRecommendationPanelFooterView")}}).prototype.rule={"._CommunityRecommendationPanelReactionButtonSetView=":function(){return new d({collection:this.model.getCollection("rec_reaction_ids")})}},e}.call(this),e}.call(this),d=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._CommunityRecommendationPanelReactionButtonSetView")}}).prototype.rule={"._CommunityRecommendationPanelReactionButtonUsefulView=":function(){return new h({collection:this.collection})}},e}.call(this),e}.call(this),h=function(){class e extends _{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Panel")}}return e.prototype.Rule=class extends _.prototype.Rule{},e}.call(this),m=function(){class e extends S{}return e.prototype.Model=M,e.prototype.Rule=class extends S.prototype.Rule{template(){return template("._CommunityRecommendationPanelSectionView")}},e}.call(this),c=function(){class e extends C{}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._CommunityRecommendationPanelHighlightView")}}).prototype.rule={"._CommunityRecommendationPanelSectionView":function(){return new m({model:this.model.getModel("section_id")})}},e}.call(this),e}.call(this),u=function(){class e extends y{filter(e){var t;return t=e.getModel("section_id"),e.get("magnitude")>0&&!t.get("section_reaction_ids").length}}return e.prototype.Collection=w,e.prototype.ItemView=c,e.prototype.Rule=function(){var e;return(e=class extends y.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){if(!(this.collection.getParent().get("magnitude")>0))return""},"._is-downvote=":function(){if(!(this.collection.getParent().get("magnitude")<0))return""}},e}.call(this),e}.call(this),p=function(){class e extends u{filter(e){var t;return t=e.getModel("section_id"),super.filter(...arguments)&&"Pro"===t.get("section_type")}}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._CommunityRecommendationPanelProsListView")}},e.prototype.isCon=!1,e}.call(this),r=function(){class e extends u{filter(e){var t;return t=e.getModel("section_id"),super.filter(...arguments)&&"Con"===t.get("section_type")}}return e.prototype.Collection=T,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._CommunityRecommendationPanelConsListView")}},e.prototype.isCon=!0,e}.call(this),t.exports={CommunityRecommendationPanelView:g,CommunityRecommendationPanelHeaderView:a,CommunityRecommendationPanelUserView:f,CommunityRecommendationPanelContentView:s,CommunityRecommendationPanelFooterView:l,CommunityRecommendationPanelReactionButtonSetView:d,CommunityRecommendationPanelReactionButtonUsefulView:h,CommunityRecommendationPanelHighlightView:c,CommunityRecommendationPanelHighlightListView:u,CommunityRecommendationPanelProsListView:p,CommunityRecommendationPanelConsListView:r,CommunityRecommendationPanelSectionView:m}},{"../../../../../server/compiled/templating/jquery":461,"../../collections/index":7,"../../models/index":64,"../base-view":91,"../components/reaction-button-set-view":141,"../components/recommendation-panel-view":149,"../lists/list-view":173,jquery:438,marked:440,moment:441}],99:[function(e,t,n){var i,o,r,s;({BaseView:i}=e("../base-view")),r=e("underscore"),s=function(e,t){if(t&&e)return t=r.once(t.bind(e)),e?("TransitionEvent"in window&&e.$el.one("transitionend",t),window.setTimeout(t,1e3)):t()},o=function(){class e extends i{initialize(e={}){if(e.prerender&&"false"!==this.$el.attr("data-prerender")||(this.activeContentView=new e.ContentView(e.contentOptions)),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.activeContentView.$el.css("opacity",1),r.defer(()=>this.setHeight())}update(e={}){var t,n;if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.$el.height(null!=(t=e.previousHeight)?t:this.activeContentView.$el.outerHeight()),null!=(n=this.previousContentView)&&n.$el.css("opacity",1),this.activeContentView.$el.css("opacity",0)}setContent(e,t){var n,i,o;return this.transitioning?this:(this.transitioning=!0,this.previousContentView=this.activeContentView,n=null!=(o=this.previousContentView)?o.$el.outerHeight():void 0,i=this.$el.scrollTop(),this.activeContentView=e?new e(t):void 0,this.update({previousHeight:n}),this.$el.scrollTop(i),r.defer(()=>{var e;return this.$el.height(this.activeContentView.$el.outerHeight()),null!=(e=this.previousContentView)&&e.$el.css("opacity",0),s(this.previousContentView,()=>{var e;return null!=(e=this.previousContentView)&&e.remove(),delete this.previousContentView,this.activeContentView.$el.css("opacity",1),this.transitioning=!1})}),this)}setHeight(){var e,t;return this.transitioning?this:(t=this.$el.height(),this.$el.height(""),e=this.activeContentView.$el.outerHeight(),this.$el.height(t),r.defer(()=>this.$el.height(e)))}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ContentContainerView")}}).prototype.rule={"._activeContentView@style+":function(){if("undefined"==typeof window||null===window)return"opacity: 1;"},"._activeContentView=":function(){return this.activeContentView},"._previousContentView=":function(){return this.previousContentView}},e}.call(this),e.prototype.events={"resize window":function(e){return this.setHeight()}},e}.call(this),t.exports={ContentContainerView:o}},{"../base-view":91,underscore:448}],100:[function(e,t,n){var i,o,r,s,l,a,u;({UserListView:l}=e("../lists/user-list-view")),({TooltipUserView:s}=e("../components/tooltip-view")),({UserView:a}=e("../models/user-view")),({ImageLazyLoaderMixinView:r}=e("../mixins/image-lazy-loader-mixin-view")),({shortenNumber:u}=e("../../utils/transforms")),i=function(){class e extends a{}return e.prototype.mixin(r),e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._ContributorsUserView")}},e.prototype.events={"mouseover ._user-link":function(e){return new s({model:this.model,follows:e.currentTarget})}},e}.call(this),o=function(){class e extends l{}return e.prototype.limit=11,e.prototype.ItemView=i,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._ContributorsView")}}).prototype.rule={"._has-more-users=":function(){if(!(this.collection.length-this.limit>0))return""},"._more-users-count=":function(){return u(this.collection.length-this.limit)}},e}.call(this),e}.call(this),t.exports={ContributorsView:o,ContributorsUserView:i}},{"../../utils/transforms":89,"../components/tooltip-view":167,"../lists/user-list-view":183,"../mixins/image-lazy-loader-mixin-view":186,"../models/user-view":207}],101:[function(e,t,n){var i,o,r;({PopupView:o}=e("./popup-view")),({keyCodes:r}=e("../../utils/data")),i=function(){class e extends o{scrollTo(e){var t,n,i,o,r;return n=(t=this.$(".Dropdown-Content")).height(),i=t.scrollTop(),o=(r=e.position().top)+e.height(),r<0?t.scrollTop(i+r):o>n?t.scrollTop(i+o-n):void 0}step(e){var t,n;if(0!==(t=this.$("._dropdown-item")).length)return n=_.findIndex(t,function(e,t){return $(e).hasClass("focused")})+e,this.setSelectedItemByIndex(n)}getSelectedItem(){return this.el.getElementsByClassName("_dropdown-item focused")}setSelectedItemByIndex(e){var t,n;if(0!==(t=this.$("._dropdown-item")).length)return e%=t.length,n=t.eq(e),t.removeClass("focused"),(n=t.eq(e)).addClass("focused"),this.scrollTo(n)}}return e.prototype.options={anchor:"below",cover:!1},e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._DropdownView")}},e.prototype.events={"keydown document":function(e){var t;switch(e.keyCode){case r.UP:return e.preventDefault(),this.step(-1);case r.DOWN:return e.preventDefault(),this.step(1);case r.ENTER:if((t=this.getSelectedItem()).length&&(e.preventDefault(),e.stopImmediatePropagation(),t[0].click(),!this.isSelfClosing))return this.close();break;case r.ESC:return this.close()}}},e}.call(this),t.exports={DropdownView:i}},{"../../utils/data":86,"./popup-view":132}],102:[function(e,t,n){var i,o,r,s;({PopupView:s}=e("../components/popup-view")),({EditAvatarModalWebView:r,EditAvatarModalFileView:o}=e("../components/edit-avatar-modal-view")),i=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._EditAvatarDropdownView")}},e.prototype.events={"click ._edit-avatar-file-link":function(e){return new o({model:this.model}),this.close()},"click ._edit-avatar-web-link":function(e){return new r({model:this.model}),this.close()}},e}.call(this),t.exports={EditAvatarDropdownView:i}},{"../components/edit-avatar-modal-view":103,"../components/popup-view":132}],103:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;({ModalView:f}=e("./modal-view")),({BaseView:i}=e("../base-view")),({ImageView:m}=e("../models/image-view")),({User:g,Image:h}=e("../../models")),c=function(){class e extends f{initialize(){return this.activeStepView=this.makeDefaultStep(),super.initialize(...arguments),analytics.track("Update Avatar Modal Opened",{label:this.editAvatarModalType})}makeDefaultStep(){if(this.DefaultStepView)return new this.DefaultStepView({model:this.model,collection:this.collection})}setStep(e,t){return this.activeStepView=e?new e(t):this.makeDefaultStep(),this.update()}updating(){}highlight(){}}return e.prototype.Model=g,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._EditAvatarModalView")}}).prototype.rule={"._EditAvatarModalStepView=":function(){var e;return null!=(e=this.activeStepView)?e:""}},e}.call(this),e}.call(this),u=function(){class e extends i{}return e.prototype.Model=h,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._EditAvatarModalStepView")}},e}.call(this),s=function(){class e extends u{startHover(e){return e.preventDefault(),e.stopPropagation(),this.$(".EditAvatarModal-FileUploader").addClass("active")}stopHover(e){return e.preventDefault(),e.stopPropagation(),this.$(".EditAvatarModal-FileUploader").removeClass("active")}}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._EditAvatarModalFileStepView")}},e.prototype.events={"change ._user-image-file-input":function(e){var t,n,i,o,r;return e.preventDefault(),n=this.$("._user-image-file-input")[0],t=new h({source:null!=(i=null!=(o=n.files)?o[0]:void 0)?i:n}).upload(),null!=(r=this.getParentByView(c))?r.setStep(a,{model:t}):void 0},"dragenter ._add-image-form":e.prototype.startHover,"dragover ._add-image-form":e.prototype.startHover,"dragleave ._add-image-form":e.prototype.stopHover,"dragend ._add-image-form":e.prototype.stopHover,"drag ._add-image-form":function(e){return e.preventDefault(),e.stopPropagation()},"drop ._add-image-form":function(e){var t,n;return e.preventDefault(),e.stopPropagation(),this.stopHover(e),t=new h({source:e.originalEvent.dataTransfer.files[0]}).upload(),null!=(n=this.getParentByView(c))?n.setStep(a,{model:t}):void 0}},e}.call(this),p=function(){class e extends u{initialize(){return super.initialize(...arguments),_.defer(()=>this.$("._user-image-url-input").focus())}}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._EditAvatarModalWebStepView")}},e.prototype.events={"input ._user-image-url-input":function(e){return this.$("._user-image-url-input").val()?this.$("._input-submittable").prop("disabled",!1):this.$("._input-submittable").prop("disabled",!0)},"submit ._add-image-form":function(e){var t,n;return e.preventDefault(),t=new h({source:this.$("._user-image-url-input").val()}).upload(),null!=(n=this.getParentByView(c))?n.setStep(a,{model:t}):void 0}},e}.call(this),a=function(){class e extends u{initialize(){var e,t;return super.initialize(...arguments),t=(t=>{var n;return t.off("saveError",e),window.currentUser.set({image:{source:this.model.get("hosted")}}),null!=(n=this.getParentByView(c))&&n.setStep(o,{model:this.model}),analytics.track("Avatar Updated Successfully")}),e=(e=>{var n;return e.off("sync",t),null!=(n=this.getParentByView(c))?n.setStep(r,{model:this.model}):void 0}),this.listenTo(this.model,"progress",()=>this.update()),this.listenTo(this.model,"uploaded",()=>{var n,i;return(i=null!=(n=this.getParentByView(c))?n.model:void 0).save({picUrl:this.model.get("hosted")},{highlight:!1,scroll:!1}),i.once("sync",t),i.once("saveError",e)}),this.listenTo(this.model,"failed",e)}update(){return super.update(...arguments),this.draw(this.model.uploadProgress)}draw(e){var t,n,i;if(window)return n=(t=this.$("._progress-meter")[0]).getContext("2d"),i=Math.min(t.height,t.width),n.lineWidth=4,n.strokeStyle="#61a544",n.clearRect(0,0,t.width,t.height),n.beginPath(),n.arc(i/2,i/2,i/2-4,-Math.PI/2,-Math.PI/2+2*Math.PI*e,!1),n.stroke()}}return e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._EditAvatarModalProgressStepView")}}).prototype.rule={"._progress-percent=":function(){return Math.floor(100*this.model.uploadProgress||0)}},e}.call(this),e}.call(this),o=function(){class e extends u{}return e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._EditAvatarModalCompleteStepView")}}).prototype.rule={"._image-src@src":function(){return this.model.getImageURL({method:"scale_crop",width:200,height:200})}},e}.call(this),e}.call(this),r=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._EditAvatarModalErrorStepView")}},e.prototype.events={"click ._restart-link":function(e){var t;return null!=(t=this.getParentByView(c))?t.setStep():void 0}},e}.call(this),l=function(){class e extends c{}return e.prototype.DefaultStepView=s,e.prototype.editAvatarModalType="file",e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EditAvatarModalFileView")}},e}.call(this),d=function(){class e extends c{}return e.prototype.DefaultStepView=p,e.prototype.editAvatarModalType="web",e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EditAvatarModalWebView")}},e}.call(this),t.exports={EditAvatarModalView:c,EditAvatarModalStepView:u,EditAvatarModalFileStepView:s,EditAvatarModalWebStepView:p,EditAvatarModalProgressStepView:a,EditAvatarModalCompleteStepView:o,EditAvatarModalErrorStepView:r,EditAvatarModalFileView:l,EditAvatarModalWebView:d}},{"../../models":34,"../base-view":91,"../models/image-view":194,"./modal-view":122}],104:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_;_=e("underscore"),({BaseView:i}=e("../base-view")),({RecommendationDropdownView:w}=e("../components/recommendation-dropdown-view")),({SearchableDropdownView:v}=e("./searchable-dropdown-view")),({TooltipView:y}=e("../components/tooltip-view")),({QuestionLevelRecommendationFormView:f,QuestionLevelRecommendationDropdownView:m}=e("../components/question-level-recommendation-form-view")),({QuestionModel:g}=e("../../models/index")),({OptionCollection:h}=e("../../collections/index")),d=function(){class e extends i{handleClick(){return analytics.track("FAB Recommend Clicked",{label:this.fabType||null}),this.createDropdown()}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._FABView")}},e.prototype.showTooltip=_.debounce(function(){if(this.mouseover)return new p({follows:this})},150),e.prototype.events={click:function(e){return this.handleClick()},mouseover:function(e){return this.mouseover=!0,this.showTooltip.call(this)},mouseout:function(e){return this.mouseover=!1}},e}.call(this),a=function(){class e extends d{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.position(),_.delay(()=>this.$el.removeClass("shrink"),250)}position(){return window.requestAnimationFrame(()=>{var e,t,n,i;return e=$("._fab-container"),t=null!=(i=e.position())?i.left:void 0,n=e.width(),window.requestAnimationFrame(()=>this.$el.css({left:t+n/2}))})}createDropdown(){var e;return e=new u({collection:this.model.getCollection("question_option_ids"),follows:this,anchor:"above",cover:!0,fixed:!0}),this.$el.addClass("hidden"),this.listenTo(e,"dropdown-close",()=>this.$el.removeClass("hidden"))}}return e.prototype.fabType="Floating",e.prototype.Model=g,e.prototype.Rule=class extends e.prototype.Rule{template(){return template("._FABRecommendView")}},e.prototype.events={"resize window":function(){return this.position()}},e}.call(this),o=function(){class e extends d{createDropdown(){return new u({collection:this.model.getCollection("question_option_ids"),follows:this,anchor:"below",cover:!0})}}return e.prototype.fabType="Inline",e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._FABRecommendButtonView")}},e}.call(this),r=function(){class e extends o{}return e.prototype.fabType="Micro Inline",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._FABRecommendMicroButtonView")}},e}.call(this),p=function(){class e extends y{}return e.prototype.options={anchor:"above"},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._FABRecommendationTooltipView")}},e}.call(this),u=function(){class e extends w{}return e.prototype.options={align:"center"},e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._FABRecommendationDropdownView")}},e}.call(this),s=function(){class e extends o{createDropdown(){var e;return null!=this.popup&&this.stopListening(this.popup,"fetched",this.fetchDone),e=new c({collection:{collection:this.model.getCollection("question_option_ids"),follows:this,hasFetched:this.fetched,userChanged:this.userChanged,fixed:!1,anchor:"below",cover:!0}}),!this.userChanged&&this.fetched||this.listenTo(e,"fetched",this.fetchDone),e}}return e.prototype.fabType="Feed Inline",e.prototype.Rule=class extends o.prototype.Rule{},e.prototype.initialize=f.prototype.initialize,e.prototype.fetchDone=f.prototype.fetchDone,e}.call(this),l=function(){class e extends s{}return e.prototype.fabType="Feed Micro Inline",e.prototype.Rule=class extends r.prototype.Rule{},e}.call(this),c=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.initialize=m.prototype.initialize,e}.call(this),t.exports={FABView:d,FABRecommendView:a,FABRecommendButtonView:o,FABRecommendMicroButtonView:r,FABRecommendationTooltipView:p,FABRecommendationDropdownView:u,FABRecommendQuestionLevelButtonView:s,FABRecommendQuestionLevelMicroButtonView:l,FABRecommendationQuestionLevelDropdownView:c}},{"../../collections/index":7,"../../models/index":64,"../base-view":91,"../components/question-level-recommendation-form-view":138,"../components/recommendation-dropdown-view":146,"../components/tooltip-view":167,"./searchable-dropdown-view":154,underscore:448}],105:[function(e,t,n){var i,o,r;r=e("../../rule"),({BaseView:i}=e("../base-view")),o=function(){class e extends i{}return e.prototype.Rule=class extends r{template(){return template("section.feedback")}},e.prototype.events={"submit .feedback-form":function(e){var t;return e.preventDefault(),(t=$(e.currentTarget)).addClass("Loading"),$.post("/feedback",{text:$(e.currentTarget).find("[name=body]").val()}).done(function(){return t.text("Feedback successfully submitted")}).fail(function(){return t.find(".feedback-status").text("Feedback submission failed. Please contact us at founders@slant.co instead")}).always(function(){return $(e.currentTarget).removeClass("Loading")})}},e}.call(this),t.exports={FeedbackFormView:o}},{"../../rule":81,"../base-view":91}],106:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;({BaseView:i}=e("../base-view")),({CarouselView:r,CarouselItemView:o}=e("../components/carousel-view")),({ImageView:d}=e("../models/image-view")),({OptionView:h}=e("../models/option-view")),({ImageCollection:p}=e("../../collections/index")),l=function(){class e extends d{update(){return super.update(...arguments),this.$("._image-item").on("load",()=>{var e;return null!=(e=this.getParentByView(c))?e.position():void 0})}}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._ImageCarouselItemView")}},e}.call(this),s=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._ImageCarouselAddItemView")}},e}.call(this),c=function(){class e extends r{}return e.prototype.Collection=p,e.prototype.ItemView=l,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ImageCarouselView")}}).prototype.rule={"._not-max-images=":function(){if(this.collection.length>=5)return""},"._single-item-class@class+":function(){if(1===this.collection.length)return"singleItem"},"._ImageCarouselAddItemView=":function(){return new s({model:this.collection.getParent()})}},e}.call(this),e}.call(this),a=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ImageCarouselPlaceholderView")}},e}.call(this),u=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{}).prototype.rule={"._ImageCarouselAddItemView=":function(){return""}},e}.call(this),e}.call(this),t.exports={ImageCarouselItemView:l,ImageCarouselAddItemView:s,ImageCarouselView:c,ImageCarouselPlaceholderView:a,ImageCarouselReadOnlyView:u}},{"../../collections/index":7,"../base-view":91,"../components/carousel-view":95,"../models/image-view":194,"../models/option-view":200}],107:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({BaseView:i}=e("../base-view")),({ImageView:m}=e("../models/image-view")),({ImageCarouselView:r,ImageCarouselAddItemView:o}=e("../components/image-carousel-view")),({ImageCollection:s}=e("../../collections/image-collection")),({ImageModel:h}=e("../../models/index")),d=function(){class e extends i{setSelected(e){var t,n;if(0<=(n=this.collection.indexOf(e))&&n<this.collection.length)return null!=(t=this.getChildrenByView(a)[0])?t.position(n):void 0}setActiveImage(e){var t;return null!=(t=this.getChildrenByView(p)[0])?t.setActive(e):void 0}}return e.prototype.Collection=s,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ImageGalleryView")}}).prototype.rule={"._ImageGalleryMainCarouselView=":function(){return new a({collection:this.collection})},"._ImageGalleryThumbsCarouselView=":function(){return new p({collection:this.collection})}},e}.call(this),e}.call(this),l=function(){class e extends m{}return e.prototype.Model=h,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._ImageGalleryMainCarouselItemView")}},e}.call(this),a=function(){class e extends r{position(){var e;return super.position(...arguments),null!=(e=this.getParentByView(d))?e.setActiveImage(this.currentIndex):void 0}}return e.prototype.Collection=s,e.prototype.ItemView=l,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._ImageGalleryMainCarouselView")}},e}.call(this),c=function(){class e extends m{}return e.prototype.Model=h,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselItemView")}},e.prototype.events={click:function(e){var t;return null!=(t=this.getParentByView(d))?t.setSelected(this.model):void 0}},e}.call(this),p=function(){class e extends r{setActive(e){var t,n;if(0<=e&&e<this.collection.length)return(t=this.$("._carousel-item")).removeClass("active"),null!=(n=t.eq(e))?n.addClass("active"):void 0}}return e.prototype.Collection=s,e.prototype.ItemView=c,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselView")}}).prototype.rule={"._ImageGalleryThumbsCarouselAddItemView=":function(){return new u({model:this.collection.getParent()})}},e}.call(this),e}.call(this),u=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselAddItemView")}},e}.call(this),t.exports={ImageGalleryView:d,ImageGalleryMainCarouselItemView:l,ImageGalleryMainCarouselView:a,ImageGalleryThumbsCarouselItemView:c,ImageGalleryThumbsCarouselView:p,ImageGalleryThumbsCarouselAddItemView:u}},{"../../collections/image-collection":6,"../../models/index":64,"../base-view":91,"../components/image-carousel-view":106,"../models/image-view":194}],108:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./activity-view"),e("./ad-view"),e("./carousel-view"),e("./carousel-lightbox-view"),e("./claim-banner-view"),e("./content-container-view"),e("./commonly-compared-view"),e("./community-recommendation-panel-view"),e("./dropdown-view"),e("./edit-avatar-dropdown-view"),e("./edit-avatar-modal-view"),e("./fab-view"),e("./feedback-form-view"),e("./image-carousel-view"),e("./image-gallery-view"),e("./join-tag-banner-view"),e("./join-tag-sidebar-view"),e("./karma-dropdown-view"),e("./lazy-multi-user-view"),e("./lazy-image-carousel-view"),e("./lightbox-view"),e("./login-modal-view"),e("./lustre-ai-banner-view"),e("./lustre-ai-promote-footer-view"),e("./lustre-ai-promote-modal-view"),e("./main-header-view"),e("./master-option-card-view"),e("./master-option-dropdown-view"),e("./modal-view"),e("./more-dropdown-view"),e("./multi-user-view"),e("./my-recommendation-panel-view"),e("./notifications-dropdown-view"),e("./notification-view"),e("./notify-popup-view"),e("./option-dropdown-view"),e("./option-tabs-view"),e("./panel-view"),e("./popup-view"),e("./product-buy-buttons-view"),e("./promote-question-view"),e("./question-card-view"),e("./question-editor-view"),e("./question-header-view"),e("./question-level-recommendation-form-view"),e("./question-tag-selector-view"),e("./reaction-banner-view"),e("./reaction-button-set-view"),e("./reaction-menu-dropdown-view"),e("./reaction-tooltip-view"),e("./recommendation-card-view"),e("./recommendation-drawer-view"),e("./recommendation-dropdown-view"),e("./recommendation-form-view"),e("./recommendation-option-card-view"),e("./recommendation-panel-view"),e("./recommendation-view"),e("./related-product-list-view"),e("./search-dropdown-view"),e("./search-option-dropdown-view"),e("./searchable-dropdown-view"),e("./searchable-popup-invoker-view"),e("./sidebar-activity-view"),e("./slant-score-view"),e("./contributors-view"),e("./sidebar-tag-filter-view"),e("./sidebar-user-stats-view"),e("./spec-editor-modal-view"),e("./spec-list-view"),e("./spec-table-view"),e("./sticky-sidebar-panel-view"),e("./tag-dropdown-view"),e("./tag-selector-view"),e("./toaster-view"),e("./tooltip-view"),e("./watch-view"))},{"./activity-view":92,"./ad-view":93,"./carousel-lightbox-view":94,"./carousel-view":95,"./claim-banner-view":96,"./commonly-compared-view":97,"./community-recommendation-panel-view":98,"./content-container-view":99,"./contributors-view":100,"./dropdown-view":101,"./edit-avatar-dropdown-view":102,"./edit-avatar-modal-view":103,"./fab-view":104,"./feedback-form-view":105,"./image-carousel-view":106,"./image-gallery-view":107,"./join-tag-banner-view":109,"./join-tag-sidebar-view":110,"./karma-dropdown-view":111,"./lazy-image-carousel-view":112,"./lazy-multi-user-view":113,"./lightbox-view":114,"./login-modal-view":115,"./lustre-ai-banner-view":116,"./lustre-ai-promote-footer-view":117,"./lustre-ai-promote-modal-view":118,"./main-header-view":119,"./master-option-card-view":120,"./master-option-dropdown-view":121,"./modal-view":122,"./more-dropdown-view":123,"./multi-user-view":124,"./my-recommendation-panel-view":125,"./notification-view":126,"./notifications-dropdown-view":127,"./notify-popup-view":128,"./option-dropdown-view":129,"./option-tabs-view":130,"./panel-view":131,"./popup-view":132,"./product-buy-buttons-view":133,"./promote-question-view":134,"./question-card-view":135,"./question-editor-view":136,"./question-header-view":137,"./question-level-recommendation-form-view":138,"./question-tag-selector-view":139,"./reaction-banner-view":140,"./reaction-button-set-view":141,"./reaction-menu-dropdown-view":142,"./reaction-tooltip-view":143,"./recommendation-card-view":144,"./recommendation-drawer-view":145,"./recommendation-dropdown-view":146,"./recommendation-form-view":147,"./recommendation-option-card-view":148,"./recommendation-panel-view":149,"./recommendation-view":150,"./related-product-list-view":151,"./search-dropdown-view":152,"./search-option-dropdown-view":153,"./searchable-dropdown-view":154,"./searchable-popup-invoker-view":155,"./sidebar-activity-view":156,"./sidebar-tag-filter-view":157,"./sidebar-user-stats-view":158,"./slant-score-view":159,"./spec-editor-modal-view":160,"./spec-list-view":161,"./spec-table-view":162,"./sticky-sidebar-panel-view":163,"./tag-dropdown-view":164,"./tag-selector-view":165,"./toaster-view":166,"./tooltip-view":167,"./watch-view":168,underscore:448}],109:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k;({BaseView:i}=e("../base-view")),({TagView:C}=e("../models/tag-view")),({TagListView:x}=e("../lists/tag-list-view")),({SearchablePopupInvokerView:g}=e("../components/searchable-popup-invoker-view")),({TagSelectorDropdownView:V,TagSelectorTagListView:R,TagSelectorTagView:b}=e("../components/tag-selector-view")),({LoginModalView:f,LoginModalContentView:h,LoginModalRegisterContentView:m}=e("../components/login-modal-view")),({Tag:w,TagFilter:y}=e("../../models")),({TagList:_}=e("../../collections")),({TagCollection:v}=e("../../collections/index")),({tagData:k}=e("../../utils/data")),S=e("underscore"),d=function(){class e extends i{isGamingTag(){return this.collection.findWhere({token:"gaming"})&&!(this.collection.findWhere({token:"electronics"})||this.collection.findWhere({token:"software"}))}}return e.prototype.Collection=v,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._JoinTagBannerView")}}).prototype.rule={"._JoinTagBannerContentView=":function(){return this.isGamingTag()?new a:new r}},e}.call(this),e.prototype.events={"scroll document":function(e){var t;if(!this.scrollAnalyticsSent)return(t=$(window)).scrollTop()+(t.height()-($(".Toaster").height()||0))>=this.$("._join-link").offset().top?(this.scrollAnalyticsSent=!0,analytics.track("Join Tag Banner Footer In Viewport")):void 0}},e}.call(this),r=function(){class e extends g{initialize(){if(("undefined"!=typeof window&&null!==window?window._joinTags:void 0)?this.collection=window._joinTags:this.collection=new _([],{url:"/tags"}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&("undefined"==typeof window||null===window||!window._joinTags))return window._joinTags=this.collection,this.collection=window._joinTags,this.$el.addClass("Loading"),this.collection.fetch({silent:!0,success:()=>(this.collection.trigger("reset"),this.$el.removeClass("Loading")),error:()=>{var e;return this.collection=new _(function(){var t,n,i;for(i=[],t=0,n=k.length;t<n;t++)e=k[t],i.push(new w(e));return i}()),this.update(),this.$el.removeClass("Loading")}})}createPopupView(e){return new V({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}setAutoSelectedTags(){if(null!=this.autoSelectedTagIds)return S.forEach(this.autoSelectedTagIds,e=>{return this.collection.findWhere({id:e}).set({selected:!0,silent:!0})})}saveTags(){var e,t;return this.$el.addClass("Loading"),this.setAutoSelectedTags(),e=new _(this.collection.where({selected:!0})),(t=new y).url=function(){var e;return`/users/${null!=(e=window.currentUser.get("username"))?e:"_"}/tagFilter`},t.on("saveError",()=>this.$el.removeClass("Loading")),t.save({include:e},{success:(e,t)=>(window.localStorage.tagFilterData=JSON.stringify(t),this.loadFeed(e))})}loadFeed(e){var t,n;return"undefined"!=typeof window&&null!==window&&"/"!==new URI(window.location.href).path()?router.navigate("/",{trigger:!0}):($("body").scrollTop(0),t=this.getParentByView(Views.FrontPageView),null!=e&&null!=t&&null!=(n=t.model)&&n.set({include:e.get("include")},{silent:!0}),null!=t&&t.update(),null!=t&&t.fetchFeed(),this.$el.removeClass("Loading"))}emailSignIn(){var e;return e=new f({ContentView:m}),this.listenTo(e,"login",this.saveTags.bind(this))}thirdPartySignIn(e){var t;return t=new f({ContentView:h,contentOptions:{method:e}}),this.listenTo(t,"login",this.saveTags.bind(this))}}return e.prototype.Collection=_,e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._JoinTagBannerContentView")}}).prototype.rule={"._JoinTagBannerActiveTagListView=":function(){return new o({collection:this.collection})},"._JoinTagBannerDefaultTagListView=":function(){return new s({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._join-link":function(e){return analytics.track("Join Feed Email Button Clicked"),this.saveTags()}},e}.call(this),a=function(){class e extends r{createPopupView(e){var t;return t=new _(this.collection.reject(e=>"gaming"===e.get("id"))),new V({collection:t,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._JoinTagBannerGamingContentView")}}).prototype.rule={"._JoinTagBannerGamingActiveTagListView=":function(){return new l({collection:this.collection})},"._JoinTagBannerGamingTagListView=":function(){return new u({collection:this.collection})}},e}.call(this),e.prototype.autoSelectedTagIds=["gaming"],e}.call(this),p=function(){class e extends b{}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._JoinTagBannerTagView")}},e}.call(this),c=function(){class e extends R{filter(e,t){return"female-fashion"!==e.get("id")}sortBy(e){var t;if((t=this.priorityTags.indexOf(e.get("id")))>=0)return t}}return e.prototype.ItemView=p,e.prototype.priorityTags=["laptops","smartphone","tv","headphones","routers","speakers","pc-games","ps4","xbox-one","nintendo-switch"],e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._JoinTagBannerTagListView")}},e}.call(this),s=class extends c{filter(e,t){return t<30&&super.filter(...arguments)}},o=class extends s{filter(e,t){return e.get("selected")&&!super.filter(...arguments)}},u=function(){class e extends s{}return e.prototype.priorityTags=["pc-games","ps4","xbox-one","nintendo-switch","android-games","ios-games","osx-games","linux-games","3ds","electronics","multiplayer","rpg","tabletop","board-games","headphones","music","game-development","monitors","laptops","tv","vr","online-games","sports","local-multiplayer","single-player","hardware","ps3","xbox-360","game-engine","sega"],e}.call(this),l=class extends u{filter(e){return e.get("selected")&&!super.filter(...arguments)}},t.exports={JoinTagBannerView:d,JoinTagBannerContentView:r,JoinTagBannerGamingContentView:a,JoinTagBannerTagView:p,JoinTagBannerTagListView:c,JoinTagBannerActiveTagListView:o,JoinTagBannerDefaultTagListView:s,JoinTagBannerGamingTagListView:u,JoinTagBannerGamingActiveTagListView:l}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../utils/data":86,"../base-view":91,"../components/login-modal-view":115,"../components/searchable-popup-invoker-view":155,"../components/tag-selector-view":165,"../lists/tag-list-view":182,"../models/tag-view":206,underscore:448}],110:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R;({BaseView:i}=e("../base-view")),({JoinTagBannerView:u,JoinTagBannerContentView:r,JoinTagBannerTagView:a,JoinTagBannerTagListView:l,JoinTagBannerGamingTagListView:s}=e("../components/join-tag-banner-view")),({StickySidebarPanelView:y}=e("../components/sticky-sidebar-panel-view")),({LoginModalView:v,LoginModalContentView:g,LoginModalRegisterContentView:w}=e("../components/login-modal-view")),({TagSelectorDropdownView:V}=e("../components/tag-selector-view")),({ClaimBannerSidebarCardView:o}=e("../components/claim-banner-view")),({TagList:x}=e("../../collections")),({TagCollection:_}=e("../../collections/index")),R=e("underscore"),f=function(){class e extends u{}return e.prototype.Collection=_,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._JoinTagSidebarView")}}).prototype.rule={"@style+":function(){},"._JoinTagSidebarContentView=":function(){return this.isGamingTag()?new p:new c}},e}.call(this),e.prototype.initialize=y.prototype.initialize,e.prototype.events=R.extend({},y.prototype.events),e}.call(this),c=function(){class e extends r{createPopupView(e){return new V({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._JoinTagSidebarContentView")}}).prototype.rule={"._JoinTagSidebarTagListView=":function(){return new h({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._join-link":function(e){return analytics.track("Join Feed Sidebar Email Button Clicked"),this.saveTags()}},e}.call(this),p=function(){class e extends c{createPopupView(e){var t;return t=new x(this.collection.reject(e=>"gaming"===e.get("id"))),new V({collection:t,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._JoinTagSidebarGamingContentView")}}).prototype.rule={"._JoinTagSidebarTagListView=":function(){return new d({collection:this.collection})}},e}.call(this),e.prototype.autoSelectedTagIds=["gaming"],e}.call(this),m=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._JoinTagSidebarTagView")}},e}.call(this),h=function(){class e extends l{filter(e,t){return t<=12&&super.filter(...arguments)||e.get("selected")}}return e.prototype.ItemView=m,e}.call(this),d=function(){class e extends s{filter(e,t){return t<=12&&super.filter(...arguments)||e.get("selected")}}return e.prototype.ItemView=m,e}.call(this),t.exports={JoinTagSidebarView:f,JoinTagSidebarContentView:c,JoinTagSidebarGamingContentView:p,JoinTagSidebarTagView:m,JoinTagSidebarTagListView:h,JoinTagSidebarGamingTagListView:d}},{"../../collections":2,"../../collections/index":7,"../base-view":91,"../components/claim-banner-view":96,"../components/join-tag-banner-view":109,"../components/login-modal-view":115,"../components/sticky-sidebar-panel-view":163,"../components/tag-selector-view":165,underscore:448}],111:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;f=e("underscore"),({EventView:l,EventContentView:s}=e("../models/event-view")),({KarmaView:m}=e("../models/karma-view")),({DropdownView:o}=e("./dropdown-view")),({DropdownThreadView:i}=e("../threads/dropdown-thread-view")),({Event:r,KarmaBonus:a}=e("../../models")),({KarmaBonusList:u}=e("../../collections")),({shortenQuestionTitle:g}=e("../../utils/transforms")),h=function(){class e extends o{initialize(){return super.initialize(...arguments),this.stopListening(this.collection,"reset",this.update),this.listenTo(this.collection,"reset",this.position)}}return e.prototype.Collection=u,e.prototype.options={align:"right",anchor:"below"},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._KarmaDropdownView")}}).prototype.rule={"._has-items=":function(){if(!this.collection.length)return""},"._view-all-link@href":function(){return this.collection.url()},"._KarmaDropdownThreadView=":function(){return new d({collection:this.collection})}},e}.call(this),e}.call(this),c=function(){class e extends s{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._KarmaDropdownItemView")}}).prototype.rule={"._target-link@href":function(){var e;return null!=(e=l.prototype.actionToView[this.model.get("action")]())?e.prototype.getTargetLink.call(this):void 0},"._KarmaDropdownKarmaView=":function(){return new p({model:this.model.parents("karma")})}},e}.call(this),e}.call(this),d=function(){class e extends i{initialize(){var e,t;return super.initialize(...arguments),this.$el.addClass("Loading"),t=(e=>{if(this.collection.trigger("reset"),this.$el.removeClass("Loading"),this.hasUnread())return f.defer(()=>this.markAllAsRead())}),e=(()=>this.$el.removeClass("Loading")),this.collection.fetch({success:t,error:e,silent:!0,reset:!0,data:{cacheBust:Date.now()}})}hasUnread(){return!1===this.collection.meta("isread")}markAllAsRead(){var e;return e={data:"{}",success:e=>(this.collection.parse(e),this.collection.trigger("clear"))},this.collection.sync("update",this.collection,e)}getItems(){return super.getItems(...arguments).map(function(e){return e.get("event")})}}return e.prototype.Collection=u,e.prototype.ItemView=c,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._KarmaDropdownThreadView")}},e}.call(this),p=function(){class e extends m{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{}).prototype.rule={"._question-title=":function(){var e,t;return e=null!=(t=this.model.get("event").get("target").parents("topic"))?t.get("revision").get("title").trim():void 0,g(e)}},e}.call(this),e}.call(this),t.exports={KarmaDropdownView:h,KarmaDropdownItemView:c,KarmaDropdownThreadView:d,KarmaDropdownKarmaView:p}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../models/event-view":192,"../models/karma-view":196,"../threads/dropdown-thread-view":253,"./dropdown-view":101,underscore:448}],112:[function(e,t,n){var i,o,r,s,l;e("underscore"),({ImageCarouselView:i}=e("./image-carousel-view")),({LazyImageView:l}=e("../models/lazy-image-view")),({ImageLazyLoaderMixinView:o}=e("../mixins/image-lazy-loader-mixin-view")),r=function(){class e extends l{update(){return this.unobserveImages(),super.update(...arguments),this.$("._image-item").on("load",()=>{var e;return null!=(e=this.getParentByView(s))?e.position():void 0}),this.observeImages()}}return e.prototype.mixin(o),e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._ImageCarouselItemView")}},e}.call(this),s=function(){class e extends i{}return e.prototype.ItemView=r,e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={LazyImageCarouselItemView:r,LazyImageCarouselView:s}},{"../mixins/image-lazy-loader-mixin-view":186,"../models/lazy-image-view":197,"./image-carousel-view":106,underscore:448}],113:[function(e,t,n){var i,o,r;({MultiUserView:r}=e("./multi-user-view")),({ImageLazyLoaderMixinView:i}=e("../mixins/image-lazy-loader-mixin-view")),o=function(){class e extends r{}return e.prototype.mixin(i),e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._most-recent-user":function(){var e;return e=this.getUserAt(0),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._most-recent-user-image":function(){return{"@data-lazy-src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}},"._second-recent-user":function(){var e;return e=this.getUserAt(1),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._second-recent-user-image":function(){return{"@data-lazy-src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}},"._third-recent-user":function(){var e;return e=this.getUserAt(2),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._third-recent-user-image":function(){return{"@data-lazy-src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}}},e}.call(this),e}.call(this),t.exports={LazyMultiUserView:o}},{"../mixins/image-lazy-loader-mixin-view":186,"./multi-user-view":124}],114:[function(e,t,n){var i,o,r,s;({ImageView:o}=e("../models/image-view")),({ModalView:s}=e("./modal-view")),({ImageModel:i}=e("../../models/")),r=function(){class e extends s{update(){return super.update(...arguments),this.$("._image-full-src").on("load",()=>this.$("._modal-window").removeClass("Loading"))}}return e.prototype.Model=i,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._LightboxView")}},e}.call(this),t.exports={LightboxView:r}},{"../../models/":34,"../models/image-view":194,"./modal-view":122}],115:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O;({BaseView:i}=e("../base-view")),({ModalView:R}=e("../components/modal-view")),({ContentContainerView:o}=e("../components/content-container-view")),({FancyInputMixinView:r}=e("../mixins/fancy-input-mixin-view")),({User:C}=e("../../models")),({VALID_EMAIL:M,VALID_USERNAME:L}=e("../../utils/patterns")),({UserProfileUsernameInputMixinView:T,UserProfileEmailInputMixinView:k,UserProfilePasswordInputMixinView:P,UserProfileCurrentPasswordInputMixinView:S}=e("../mixins/user-profile-input-mixin-view")),({MOBILE_MAX_WIDTH_MEDIA_QUERY:V}=e("../../utils/patterns")),b=e("urijs"),I=e("underscore"),s="undefined"!=typeof window&&null!==window?e("fingerprintjs"):function(){},O=new s({canvas:!0}),x=function(){class e extends R{initialize(e={}){if(0===$("body > ._LoginModalView").length)return super.initialize(...arguments),"undefined"!=typeof window&&null!==window?analytics.track("Login Modal Presented"):void 0}remove(e={}){if(super.remove(...arguments),!e.silent)return this.trigger("loginRejection")}swapContent(...e){var t;return null!=(t=this.getChildrenByView(d)[0])?t.swapContent(...e):void 0}isFullscreen(){return window.matchMedia(V).matches}}return e.prototype.Model=C,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._LoginModalView")}}).prototype.rule={"._LoginModalContentContainerView=":function(){return new p(I.defaults({model:this.model,contentOptions:I.defaults({model:this.model},this.options.contentOptions)},this.options))}},e}.call(this),e}.call(this),p=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._LoginModalContentContainerView")}},e}.call(this),d=function(){class e extends r{initialize(){var e;if(super.initialize(...arguments),this.setInputText(),"undefined"!=typeof window&&null!==window&&(e=window.currentUser,this.listenTo(e,"login",()=>(analytics.track("Authenticated Login"),this.$el.removeClass("Loading"),this.getParentByView(x).trigger("login").remove({silent:!0}))),this.options.method))return this.loginOAuth(this.options.method)}setInputText(){}loginOAuth(e){var t,n,i,o;return this.$el.addClass("Loading"),i=window.currentUser.get("anonymous"),n=setInterval(()=>{if(t.closed&&(clearInterval(n),window.currentUser.login(),i))return analytics.track("Anonymous Account Claimed",{label:this.options.method})},250),o=`width=590, height=460, left=${window.screen.width/2-295}, top=${window.screen.height/2-230}`,t=window.open(`/login/${e}`,"_blank",o)}updateModel(){}swapContent(e,t){var n;return this.updateModel(),n=this.getParentByView(o),t=I.extend({},{model:this.model},t),n.setContent(e,t)}}return e.prototype.Model=C,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._LoginModalContentView")}}).prototype.rule={"._user-image":{"@src":function(){return this.model.getAvatarURL()},"@alt":function(){return this.model.get("displayName")||this.model.get("username")}}},e}.call(this),e.prototype.events={"click ._register-swap-link":function(e){return window.currentUser.get("anonymous")?this.swapContent(l,{model:window.currentUser.clone()}):this.swapContent(g)},"click ._login-swap-link":function(e){return this.swapContent(f)},"click ._facebook-login-link":function(e){return e.preventDefault(),analytics.track("Clicked Login with Facebook"),this.loginOAuth("facebook")},"click ._twitter-login-link":function(e){return e.preventDefault(),analytics.track("Clicked Login with Twitter"),this.loginOAuth("twitter")},"click ._google-login-link":function(e){return e.preventDefault(),analytics.track("Clicked Login with Google"),this.loginOAuth("google")}},e}.call(this),m=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalLoadingContentView")}},e}.call(this),f=function(){class e extends d{initialize(){var t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return t=window.currentUser,this.listenTo(t,"unauthorized",(t,n={})=>{var i,o,r,s;if(this.$el.removeClass("Loading"),(null!=(i=n.error)?i.login:void 0)&&this.setLoginErrorText(),(null!=(o=n.error)?o.password:void 0)&&this.setCurrentPasswordErrorText(),!(null!=(r=n.error)?r.login:void 0)&&!(null!=(s=n.error)?s.password:void 0))return this.swapContent(h,{PreviousContentView:e})})}setInputText(){return this.setLoginText(),this.setCurrentPasswordText()}resetLoginText(){return this.$("._login-field").removeClass("valid error checking"),this.$("._login-default-text").hide(),this.$("._login-invalid-text").hide(),this.$("._login-required-text").hide()}setLoginText(){return this.resetLoginText(),this.$("._login-default-text").show()}setLoginErrorText(){return this.resetLoginText(),this.$("._login-field").addClass("error"),this.$("._login-invalid-text").show()}setLoginRequiredText(){var e,t;if(this.setLoginText(),e=this.$("._login-field"),t=this.$("._login-required-text"),!this.$("._login-input").val())return this.resetLoginText(),e.addClass("error"),t.show()}isLoginRequiredError(){return""===this.$("._login-input").val()}isLoginError(){return this.isLoginRequiredError()}setRequiredText(){return this.setLoginRequiredText(),this.setCurrentPasswordRequiredText()}isError(){return this.isLoginError()||this.isCurrentPasswordError()}updateModel(){var e,t;return e=this.$("._login-input").val(),t=this.$("._current-password-input").val(),M.test(e)?this.model.set("email",e,{silent:!0}):this.model.set("username",e,{silent:!0}),this.model.set("password",t,{silent:!0})}}return e.prototype.mixin(S),e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._LoginModalLoginContentView")}}).prototype.rule={"._login-input@value":function(){return this.model.get("username")||this.model.get("email")},"._current-password-input@value":function(){return this.model.get("password")}},e}.call(this),e.prototype.events={"submit ._login-form":function(e){return e.preventDefault(),this.isError()?this.setRequiredText():(analytics.track("Submitted Sign In Form"),this.$el.addClass("Loading"),this.updateModel(),window.currentUser.get("anonymous")&&window.currentUser.once("login",function(){return analytics.track("Anonymous Account Claimed",{label:"existing email"})}),window.currentUser.loginEmail(this.model.pick("email","username","password")))},"input ._login-input":function(e){return this.setLoginText()},"input ._current-password-input":function(e){return this.setCurrentPasswordText()},"click ._reset-password-link":function(e){var t,n,i,o,r;return this.isLoginError()?this.setLoginRequiredText():(n=this.$("._login-input").val(),t=encodeURIComponent(n),r=M.test(n)?`/users?email=${t}&format=json`:`/users?username=${t}&format=json`,this.$el.addClass("Loading"),o=(()=>this.swapContent(y)),i=(()=>this.swapContent(v)),$.ajax({url:r,type:"GET",context:this,success:function(e){return 0===e.children.length?(this.$el.removeClass("Loading"),this.setLoginErrorText(),this.$("._login-input").get(0).focus()):(e=M.test(n)?{email:n}:{username:n},$.ajax({url:"/mgmt",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),success:o,error:i}))},error:i}))}},e}.call(this),g=function(){class e extends d{setInputText(){return this.setEmailText(),this.setUsernameText(),this.setPasswordText()}setRequiredText(){return this.setEmailRequiredText(),this.setUsernameRequiredText(),this.setPasswordRequiredText()}isError(){return this.isEmailError()||this.isUsernameError()||this.isPasswordError()}updateModel(){var e,t,n,i;return i=this.$("._username-input").val(),t=this.$("._email-input").val(),e=this.$("._display-name-input").val(),n=this.$("._password-input").val(),this.model.set({username:i,email:t,displayName:e,password:n},{silent:!0})}}return e.prototype.mixin(T),e.prototype.mixin(k),e.prototype.mixin(P),e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._LoginModalRegisterContentView")}}).prototype.rule={"._username-input@value":function(){return this.model.get("username")},"._email-input@value":function(){return this.model.get("email")},"._display-name-input@value":function(){return this.model.get("displayName")},"._password-input@value":function(){return this.model.get("password")}},e}.call(this),e.prototype.events={"submit ._login-form":function(t){return t.preventDefault(),this.isError()?this.setRequiredText():(analytics.track("Submitted Create Account Form"),this.$el.addClass("Loading"),this.updateModel(),$.ajax({url:"/users",type:"POST",contentType:"application/json; charset=utf-8",headers:{"X-Fingerprint":O.get()},data:JSON.stringify(this.model.pick("email","username","displayName","password")),context:this,success:function(e){return window.currentUser.loginEmail({username:e.username,password:this.model.get("password")}),window.currentUser.once("login",function(){return analytics.track("User Created")})},error:function(t,n,i){return this.swapContent(h,{PreviousContentView:e})}}))},"input ._username-input":function(e){return this.setUsernameText()},"input ._email-input":function(e){return this.setEmailText()},"input ._password-input":function(e){return this.setPasswordText()}},e}.call(this),l=function(){class e extends g{setRequiredText(){return this.setEmailRequiredText(),this.setPasswordRequiredText()}isError(){return this.isEmailError()||this.isPasswordError()}updateModel(){var e,t;return e=this.$("._email-input").val(),t=this.$("._password-input").val(),this.model.set({email:e,password:t},{silent:!0})}}return e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._LoginModalAnonymousRegisterContentView")}}).prototype.rule={"._user_image":{"@src":function(){return this.model.getAvatarThumbnailURL()},"@alt":function(){return this.model.get("displayName")||this.model.get("username")}}},e}.call(this),e.prototype.events={"click ._login-swap-link":function(e){return this.swapContent(f,{model:new C}),analytics.track("Anonymous Clicked Already Have Account")},"submit ._login-form":function(t){return t.preventDefault(),this.isError()?this.setRequiredText():(analytics.track("Submitted Create Account Form"),this.$el.addClass("Loading"),this.updateModel(),$.ajax({url:this.model.get("URL"),type:"PUT",contentType:"application/json; charset=utf-8",data:JSON.stringify(I.extend({claim:!0},this.model.pick("email","username","displayName","password"))),context:this,success:function(e){return window.currentUser.loginEmail({username:e.username,password:this.model.get("password")}),window.currentUser.once("login",function(){return analytics.track("User Created"),analytics.track("Anonymous Account Claimed",{label:"email"})})},error:function(t,n,i){return this.swapContent(h,{PreviousContentView:e})}}))}},e}.call(this),h=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalErrorContentView")}},e.prototype.events={"click ._return-link":function(e){return this.swapContent(this.options.PreviousContentView)}},e}.call(this),_=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalResetPasswordSuccessfulContentView")}},e.prototype.events={"click ._login-link":function(e){return window.currentUser.loginEmail(this.model.pick("email","username","password")),this.listenToOnce(window.currentUser,"login",function(){return this.model.navigate()})}},e}.call(this),v=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalResetPasswordErrorContentView")}},e}.call(this),y=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalResetPasswordSentContentView")}},e}.call(this),w=function(){class e extends d{isError(){return this.isPasswordError()}setInputText(){return this.setPasswordText()}}return e.prototype.mixin(P),e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._LoginModalResetPasswordContentView")}}).prototype.rule={"._token-input@value":function(){return(new b).query(!0).token}},e}.call(this),e.prototype.SuccessContentView=_,e.prototype.ErrorContentView=v,e.prototype.events={"submit ._login-form":function(e){var t,n;return e.preventDefault(),n=this.$("._token-input").val(),t=this.$("._password-input").val(),this.isError()?this.setRequiredText():(this.$el.addClass("Loading"),$.ajax({url:location.pathname,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({token:n,password:t}),context:this,success:function(){return this.model.set("password",t,{silent:!0}),this.swapContent(this.SuccessContentView)},error:function(){return this.swapContent(this.ErrorContentView)}}))},"input ._password-input":function(e){return this.setPasswordText()}},e}.call(this),c=function(){class e extends _{initialize(){return super.initialize(...arguments),analytics.track("Business Account Claimed")}}return e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._LoginModalClaimBusinessAccountSuccessfulContentView")}},e}.call(this),u=function(){class e extends d{initialize(){return super.initialize(...arguments),I.defer(()=>{var e;return null!=(e=this.getParentByView(x))?e.$el.removeClass("unclosable"):void 0})}}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._LoginModalClaimBusinessAccountErrorContentView")}},e}.call(this),a=function(){class e extends w{}return e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._LoginModalClaimBusinessAccountContentView")}},e.prototype.SuccessContentView=c,e.prototype.ErrorContentView=u,e}.call(this),t.exports={LoginModalView:x,LoginModalContentContainerView:p,LoginModalContentView:d,LoginModalLoadingContentView:m,LoginModalLoginContentView:f,LoginModalAnonymousRegisterContentView:l,LoginModalErrorContentView:h,LoginModalRegisterContentView:g,LoginModalResetPasswordContentView:w,LoginModalResetPasswordSuccessfulContentView:_,LoginModalResetPasswordErrorContentView:v,LoginModalResetPasswordSentContentView:y,LoginModalClaimBusinessAccountContentView:a,LoginModalClaimBusinessAccountSuccessfulContentView:c,LoginModalClaimBusinessAccountErrorContentView:u}},{"../../models":34,"../../utils/patterns":87,"../base-view":91,"../components/content-container-view":99,"../components/modal-view":122,"../mixins/fancy-input-mixin-view":185,"../mixins/user-profile-input-mixin-view":190,fingerprintjs:431,underscore:448,urijs:452}],116:[function(e,t,n){(function(n){var i,o,r;r=e("underscore"),({BaseView:i}=e("../base-view")),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return r.defer(()=>{if("true"!==window.localStorage.getItem("AIBannerCollapsed"))return r.delay(()=>requestAnimationFrame(()=>this.$el.removeClass("collapsed")),500)})}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._LustreAIBannerView")}}).prototype.rule={"._lustre-home-link@href":function(){return("undefined"!=typeof window&&null!==window?window:n).env.AI_HOSTNAME}},e}.call(this),e.prototype.events={"click ._collapse-banner-link":function(e){return this.$el.addClass("collapsed"),window.localStorage.setItem("AIBannerCollapsed",!0),analytics.track("Lustre Banner Collapsed")},"click ._expand-banner-link":function(e){return this.$el.removeClass("collapsed"),window.localStorage.setItem("AIBannerCollapsed",!1),analytics.track("Lustre Banner Expanded")},"click ._lustre-home-link":function(e){return analytics.track("Lustre Banner Home Page Link Clicked")},"click ._chrome-store-link":function(e){return analytics.track("Lustre Banner Chrome Store Link Clicked")}},e}.call(this),t.exports={LustreAIBannerView:o}}).call(this,e("_process"))},{"../base-view":91,_process:426,underscore:448}],117:[function(e,t,n){(function(n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._LustreAIPromoteFooterView")}}).prototype.rule={"._lustre-home-link@href":function(){return("undefined"!=typeof window&&null!==window?window:n).env.AI_HOSTNAME}},e}.call(this),e.prototype.events={"click ._lustre-home-link":function(e){return analytics.track("Lustre Promote Footer Home Page Link Clicked")},"click ._chrome-store-link":function(e){return analytics.track("Lustre Promote Footer Chrome Store Link Clicked")}},e}.call(this),t.exports={LustreAIPromoteFooterView:o}}).call(this,e("_process"))},{"../base-view":91,_process:426}],118:[function(e,t,n){(function(n){var i,o,r;({ModalView:o}=e("./modal-view")),({TABLET_MAX_WIDTH_MEDIA_QUERY:r}=e("../../utils/patterns")),i=function(){class e extends o{initialize(){if((!window||"true"!==window.localStorage.getItem("AIPromotePopupShown")&&!window.matchMedia(r).matches&&$("html").hasClass("show-ai-banner"))&&(super.initialize(...arguments),"undefined"!=typeof window&&null!==window))return window.localStorage.setItem("AIPromotePopupShown",!0),analytics.track("Lustre Promote Popup Opened")}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._LustreAIPromoteModalView")}}).prototype.rule={"._lustre-home-link@href":function(){return("undefined"!=typeof window&&null!==window?window:n).env.AI_HOSTNAME}},e}.call(this),e.prototype.events={"click ._lustre-home-link":function(e){return analytics.track("Lustre Promote Popup Home Page Link Clicked"),this.remove()},"click ._chrome-store-link":function(e){return analytics.track("Lustre Promote Popup Chrome Store Link Clicked"),this.remove()}},e}.call(this),t.exports={LustreAIPromoteModalView:i}}).call(this,e("_process"))},{"../../utils/patterns":87,"./modal-view":122,_process:426}],119:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;x=e("underscore"),e("../../utils/templating"),({UserView:_}=e("../models/user-view")),({DropdownView:o}=e("./dropdown-view")),({TagDropdownView:w,TagDropdownListView:g}=e("./tag-dropdown-view")),({SearchDropdownView:m}=e("./search-dropdown-view")),({NotificationsDropdownView:h}=e("./notifications-dropdown-view")),({KarmaDropdownView:r}=e("./karma-dropdown-view")),({ClaimBannerDropdownView:i}=e("./claim-banner-view")),({LoginModalView:a,LoginModalLoginContentView:s,LoginModalRegisterContentView:l}=e("./login-modal-view")),({LustreAIBannerView:u}=e("./lustre-ai-banner-view")),({User:y,Tag:f}=e("../../models")),({TagList:v}=e("../../collections")),d=function(){class e extends _{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"sync",this.update),this.listenTo(this.model.get("karma"),"clear",this.update),this.listenTo(this.model.get("notifications"),"clear",this.update)}update(){if(this.searchInteracted||(this.search=this.query.query||""),super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._main-header").hasClass("expanded")?this.expandSearch():this.collapseSearch(),this.$("._search-input").val(this.search)}setQuery(e,t){return this.searchInteracted||(this.searchInteracted=!0,this.sendAnalytics("Main Search Interacted")),this.$("._search-input").not(null!=t?t.target:void 0).val(e),this.search=e}submitSearch(){return this.$("._search-input").blur(),this.collapseSearch(),router.navigate("/search",{trigger:!0,search:`?query=${this.search}`})}expandSearch(e){return this.$("._main-header").addClass("expanded"),this.$("._toggle-search-link").addClass("selected"),this.expanded=!0}collapseSearch(e){var t;if(this.$("._main-header").removeClass("expanded"),this.$("._toggle-search-link").removeClass("selected"),this.expanded=!1,null!=(t=this.searchDropdown)?t.attached:void 0)return this.searchDropdown.remove()}sendAnalytics(e,t={}){if(null!=e)return null==t.label&&(t.label="Main Header"),analytics.track(e,t)}setPopup(e,t){var n;if(null==(n=this.userPopup)||!n.attached)return this.userPopup=new e(x.extend({model:this.model,align:"right",follows:this.$("._user-dropdown-link"),closeOnNavigate:!1},t))}}return e.prototype.Model=y,e.prototype.Rule=function(){var e;return(e=class extends _.prototype.Rule{template(){return template("._MainHeaderView")}}).prototype.rule={"._has-unread-karma-notification=":function(){if(this.model.get("karma").meta("isread")||null==this.model.get("karma").meta("isread"))return""},"._has-unread-notifications=":function(){if(!this.model.get("notifications").meta("unreadCount"))return""},"._has-extra-unread-notification=":function(){if(!(this.model.get("notifications").meta("unreadCount")>99))return""},"._no-extra-unread-notification=":function(){if(this.model.get("notifications").meta("unreadCount")>99)return""},"._has-notifications-count-icon@class+":function(){if(this.model.get("notifications").meta("unreadCount"))return".hasCount"},"._has-karma-count-icon@class+":function(){if(!this.model.get("karma").meta("isread"))return".hasCount"},"._LustreAIBannerView=":function(){return new u}},e}.call(this),e.prototype.events={"click ._signin-link":function(e){return e.preventDefault(),new a({ContentView:s}),this.sendAnalytics("Clicked Login Button")},"click ._signup-link":function(e){return e.preventDefault(),new a({ContentView:l}),this.sendAnalytics("Clicked Join Button")},"click ._user-dropdown-link":function(e){return this.model.get("anonymous")?this.setPopup(i,{showProfileLink:!0,follows:this.$(".MainHeader-Content")}):this.setPopup(p,{closeOnNavigate:!0})},"click ._header-nav-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new c({follows:e.currentTarget})},"input ._search-input":function(e){return this.setQuery($(e.target).val(),e),!this.searchDropdown||this.searchDropdown.removed?this.searchDropdown=new m({follows:$(e.currentTarget).closest("._search-form"),search:this.search,invokerView:this}):this.searchDropdown.setQuery(this.search)},"click ._search-input":function(e){if(this.search=$(e.target).val(),!this.searchDropdown||this.searchDropdown.removed)return this.searchDropdown=new m({follows:$(e.currentTarget).closest("._search-form"),search:this.search,invokerView:this})},"submit ._search-form":function(e){if(e.preventDefault(),this.search)return this.sendAnalytics("Search",{search:this.search}),this.submitSearch()},"click ._submit-search-link":function(e){return analytics.track("Clicked Search Icon"),this.search?(this.sendAnalytics("Search",{search:this.search}),this.submitSearch()):this.$("._search-input:visible").focus()},"click ._toggle-search-link":function(e){return this.expanded?this.collapseSearch():this.expandSearch()},"click ._add-question-link":function(e){return this.sendAnalytics("Clicked Ask Question")},"resize window":function(e){var t,n;if((null!=(n=this.searchDropdown)?n.attached:void 0)&&!this.searchDropdown.isFullscreen()&&!$(this.searchDropdown.follows).is(":visible"))return this.searchDropdown.remove(),this.expandSearch(),t=this.$("._search-form:visible")[0],this.searchDropdown=new m({follows:t,search:this.search,invokerView:this}),x.defer(()=>this.searchDropdown.position())},"click a[href]":function(e){return this.loadLink(e)},"click ._user-notification-dropdown-link":function(e){var t;if(null==(t=this.notificationsPopup)||!t.attached)return this.notificationsPopup=new h({collection:this.model.get("notifications"),follows:e.currentTarget}),analytics.track("Site Header Opened Notifications Dropdown")},"click ._user-karma-dropdown-link":function(e){var t;if(null==(t=this.karmaPopup)||!t.attached)return this.karmaPopup=new r({collection:this.model.get("karma"),follows:e.currentTarget}),analytics.track("Site Header Opened Karma Dropdown")}},e}.call(this),p=function(){class e extends o{}return e.prototype.options={align:"right",anchor:"below"},e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._MainHeaderUserDropdownView","header")}}).prototype.rule={"._has-unread-karma-notification=":function(){if(this.model.get("karma").meta("isread")||null==this.model.get("karma").meta("isread"))return""},"._has-unread-notifications=":function(){if(!this.model.get("notifications").meta("unreadCount"))return""},"._has-extra-unread-notification=":function(){if(!(this.model.get("notifications").meta("unreadCount")>99))return""},"._no-extra-unread-notification=":function(){if(this.model.get("notifications").meta("unreadCount")>99)return""},"._user-link@href":function(){return this.model.get("URL")}},e}.call(this),e.prototype.getUserDisplayName=d.prototype.getUserDisplayName,e.prototype.events={"click ._logout-link":function(e){return analytics.track("Clicked Logout Button"),e.stopImmediatePropagation(),e.preventDefault(),this.model.logout()},"click ._add-question-link":function(e){return analytics.track("Clicked Ask Question",{label:"User Dropdown - Mobile"})}},e}.call(this),c=function(){class e extends w{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.tagList=new v([],{url:"/tags"}),this.$el.addClass("Loading"),this.tagList.fetch({success:()=>(this.$el.removeClass("Loading"),this.update())}),analytics.track("Site Logo Dropdown Opened")}}return e.prototype.options={align:"left"},e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._MainHeaderDropdownView","header")}}).prototype.rule={"._TagDropdownListView=":function(){var e;return new g({collection:null!=(e=this.tagList)?e:new v([])})}},e}.call(this),e}.call(this),t.exports={MainHeaderView:d,MainHeaderUserDropdownView:p,MainHeaderDropdownView:c}},{"../../collections":2,"../../models":34,"../../utils/templating":88,"../models/user-view":207,"./claim-banner-view":96,"./dropdown-view":101,"./karma-dropdown-view":111,"./login-modal-view":115,"./lustre-ai-banner-view":116,"./notifications-dropdown-view":127,"./search-dropdown-view":152,"./tag-dropdown-view":164,underscore:448}],120:[function(e,t,n){var i,o,r,s,l,a,u,c;({MasterOptionView:l}=e("../models/master-option-view")),({OptionView:a}=e("../models/option-view")),({QuestionView:c}=e("../models/question-view")),({QuestionListView:u}=e("../lists/question-list-view")),s=function(){class e extends l{}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._MasterOptionCardView")}}).prototype.rule={"._option-title=":function(){var e;return e=this.model.get("source").get("revision").get("title"),"undefined"==typeof window||null===window?e:$(`<span>${e}</span>`)},"._MasterOptionCardOptionView=":function(){return new i({model:this.model.get("source")})},"._MasterOptionCardQuestionListView=":function(){return new o({collection:this.model.get("topics")})}},e}.call(this),e}.call(this),i=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._MasterOptionCardOptionView")}}).prototype.rule={"._master-option-link@href":function(){return this.model.parents("masterOption").url()}},e}.call(this),e}.call(this),r=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._MasterOptionCardQuestionView")}}).prototype.rule={"._option-rank-in-question=":function(){return this.model.get("ranking")}},e}.call(this),e}.call(this),o=function(){class e extends u{}return e.prototype.limit=3,e.prototype.ItemView=r,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterOptionCardQuestionListView")}},e}.call(this),t.exports={MasterOptionCardView:s,MasterOptionCardOptionView:i,MasterOptionCardQuestionView:r,MasterOptionCardQuestionListView:o}},{"../lists/question-list-view":176,"../models/master-option-view":198,"../models/option-view":200,"../models/question-view":201}],121:[function(e,t,n){var i,o,r,s,l,a,u,c;({DropdownView:i}=e("./dropdown-view")),({ListView:o}=e("../lists/list-view")),({MasterOptionView:c}=e("../models/master-option-view")),({MasterOption:r}=e("../../models")),({MasterOptionList:u}=e("../../collections")),a=function(){class e extends i{}return e.prototype.Collection=u,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MasterOptionDropdownView")}}).prototype.rule={"._MasterOptionDropdownListView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),s=function(){class e extends c{}return e.prototype.Model=r,e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._MasterOptionDropdownItemView")}},e}.call(this),l=function(){class e extends o{}return e.prototype.Collection=u,e.prototype.ItemView=s,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MasterOptionDropdownListView")}},e}.call(this),t.exports={MasterOptionDropdownView:a,MasterOptionDropdownItemView:s,MasterOptionDropdownListView:l}},{"../../collections":2,"../../models":34,"../lists/list-view":173,"../models/master-option-view":198,"./dropdown-view":101}],122:[function(e,t,n){var i,o,r,s,l;({BaseView:o}=e("../base-view")),({IOS_USER_AGENT:r,MINIMUM_MAX_WIDTH_MEDIA_QUERY:s}=e("../../utils/patterns")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),l=function(){class e extends o{initialize(e={}){var t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&(i(null!=(t=e.parentSelector)?t:"body").append(this.el),i("body").addClass("has-modal"),this.isIosDevice()&&this.isFullscreen()))return this.setFullscreenState(),this.wasFullscreen=!0}remove(e={}){if(super.remove(...arguments),0===i("body .Modal").length&&(i("body").removeClass("has-modal"),this.wasFullscreen))return this.wasFullscreen=!1,this.removeFullscreenState(e)}isFullscreen(){return window.matchMedia(s).matches&&this.$el.hasClass("fullMobile")}setFullscreenState(){return this.savedScrollPosition||(this.savedScrollPosition=i(window).scrollTop()),i("body").addClass("has-fullscreen-modal")}removeFullscreenState(e={}){if(i("body").removeClass("has-fullscreen-modal"),!1!==e.scroll)return requestAnimationFrame(()=>window.scrollTo(0,this.savedScrollPosition))}isIosDevice(){return r.test(window.navigator.userAgent)}}return e.prototype.options={parentSelector:null},e.prototype.events={"click ._soft-close-link":function(e){if(!1!==this.closable&&e.currentTarget===e.target)return this.remove()},"click ._close-link":function(e){return e.stopPropagation(),this.remove()},"keydown document":function(e){if(27===e.keyCode&&!1!==this.closable)return this.remove()},"click a[href]":function(e){return this.loadLink(e)}},e}.call(this),t.exports={ModalView:l}},{"../../../../../server/compiled/templating/jquery":461,"../../utils/patterns":87,"../base-view":91,jquery:438}],123:[function(e,t,n){var i,o,r,s,l,a;({DropdownView:o}=e("./dropdown-view")),({Comment:i}=e("../../models")),({ToasterView:l,ToastEditSectionView:s}=e("../components/toaster-view")),({improveURL:a}=e("../../utils/transforms")),r=function(){class e extends o{initialize(){return super.initialize(...arguments),this.follows.addClass("selected")}close(){return super.close(...arguments),this.follows.removeClass("selected")}}return e.prototype.options={align:"right",relative:!1},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._MoreDropdownView")}}).prototype.rule={"._no-comments=":function(){if(this.model.get("comments").count())return""},"._comment-link@href":function(){return a(this.model.get("comments"))},"._history-link@href":function(){return a(this.model.get("comments")).replace("/comments","/history")}},e}.call(this),e.prototype.events={"click ._edit-section-link":function(){var e;return null!=(e=window.view.getChildrenByView(l)[0])&&e.setToast(s,{section:this.model}),this.close()}},e}.call(this),t.exports={MoreDropdownView:r}},{"../../models":34,"../../utils/transforms":89,"../components/toaster-view":166,"./dropdown-view":101}],124:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({hashCode:m}=e("../../utils/transforms")),({BaseView:i}=e("../base-view")),({TooltipView:c}=e("./tooltip-view")),({UserView:h}=e("../models/user-view")),({ListView:o}=e("../lists/list-view")),({UserModel:d}=e("../../models/index")),({UserCollection:p}=e("../../collections/index")),u=function(){class e extends i{openMultiUserTooltip(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new a({collection:this.collection,follows:e.currentTarget})}getUserAt(e){return this.collection.at(e)}getUserInitials(e){return((null!=e?e.get("displayname"):void 0)||(null!=e?e.get("username"):void 0)||"").charAt(0).toLowerCase()}getUserBackgroundImageIndex(e){var t;return m(null!=(t=null!=e?e.get("username"):void 0)?t:"")%12+1}getUserDisplayName(e){return(null!=e?e.get("displayname"):void 0)||(null!=e?e.get("username"):void 0)}}return e.prototype.Collection=p,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MultiUserView")}}).prototype.rule={"._has-one-user@class+":function(){if(1===this.collection.length)return"singleImage"},"._has-two-users@class+":function(){if(2===this.collection.length)return"twoImages"},"._has-second-recent-user=":function(){if(!(this.collection.length>1))return""},"._has-third-recent-user=":function(){if(!(this.collection.length>2))return""},"._most-recent-user":function(){var e;return e=this.getUserAt(0),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._most-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}},"._second-recent-user":function(){var e;return e=this.getUserAt(1),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._second-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}},"._third-recent-user":function(){var e;return e=this.getUserAt(2),{"@data-initials":function(){return this.getUserInitials(e)},"@data-background":function(){return this.getUserBackgroundImageIndex(e)},"._third-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return this.getUserDisplayName(e)}}}}}},e}.call(this),e.prototype.events={"mouseover ._section-users-tooltip-link":function(e){return this.openMultiUserTooltip(e)},"click ._section-users-tooltip-link":function(e){return e.preventDefault(),e.stopPropagation(),this.openMultiUserTooltip(e)}},e}.call(this),a=function(){class e extends c{}return e.prototype.Collection=p,e.prototype.options={anchor:"above",interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._MultiUserTooltipView")}}).prototype.rule={"._MultiUserTooltipUserListView=":function(){return new l({collection:this.collection})},"._MultiUserTooltipContentView=":function(){return new r({collection:this.collection})}},e}.call(this),e}.call(this),s=function(){class e extends h{}return e.prototype.Model=d,e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._MultiUserTooltipUserItemView")}},e}.call(this),l=function(){class e extends o{}return e.prototype.Collection=p,e.prototype.ItemView=s,e.prototype.limit=3,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MultiUserTooltipUserListView")}},e}.call(this),r=function(){class e extends o{getUserAt(e){return this.collection.at(e)}}return e.prototype.Collection=p,e.prototype.limit=3,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._MultiUserTooltipContentView")}}).prototype.rule={"._has-two-users=":function(){if(2!==this.collection.length)return""},"._has-three-users=":function(){if(3!==this.collection.length)return""},"._most-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(0))?e.get("displayname").split(" ")[0]:void 0},"._second-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(1))?e.get("displayname").split(" ")[0]:void 0},"._third-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(2))?e.get("displayname").split(" ")[0]:void 0},"._has-multi-more-count=":function(){if(!(this.collection.length>this.limit+1))return""},"._most-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(0))?e.getProfilePageURL():void 0},"._second-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(1))?e.getProfilePageURL():void 0},"._third-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(2))?e.getProfilePageURL():void 0}},e}.call(this),e}.call(this),t.exports={MultiUserView:u,MultiUserTooltipView:a,MultiUserTooltipUserItemView:s,MultiUserTooltipUserListView:l,MultiUserTooltipContentView:r}},{"../../collections/index":7,"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../lists/list-view":173,"../models/user-view":207,"./tooltip-view":167}],125:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J;G=e("underscore"),({BaseView:i}=e("../base-view")),({SectionView:H}=e("../models/section-view")),({PanelView:I}=e("../components/panel-view")),({TooltipView:W}=e("../components/tooltip-view")),({RecommendationPanelView:F,RecommendationPanelHeaderView:B,RecommendationPanelUserView:N,RecommendationPanelContentView:U,RecommendationPanelSectionView:q}=e("../components/recommendation-panel-view")),({ReactionReadOnlyButtonUsefulView:A}=e("../components/reaction-button-set-view")),({ListView:s}=e("../lists/list-view")),({ExpandingTextareaMixinView:o}=e("../mixins/expanding-textarea-mixin-view")),({FancyInputMixinView:r}=e("../mixins/fancy-input-mixin-view")),({SectionEdit:z}=e("../../models")),({RecModel:E,UserModel:Y,OptionModel:L,SectionModel:Q,RecPageQuery:D}=e("../../models/index")),({SectionCollection:j,ReactionCollection:O}=e("../../collections/index")),K=function(e,t){return G.compact(e.getCollection("rec_highlight_ids").map(function(e){var n,i;if(n=(i=e.getModel("section_id")).getLegacyModel().get("reactionSet").get("useful"),(void 0===t||"Con"===i.get("section_type")===t)&&e.get("is_primary"))return n.react(!1)}))},J=function(e,t={}){var n;return n=function(){if(e.id)return e.off("sync",n),e.store.ensureQuery(D,{rec_id:e.get("rec_id")}).fetch({success:t.success,error:t.error})},e.id?n():e.on("sync",n)},M=function(){class e extends F{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Recommendation Panel Opened",{label:"edit"}),this.stopListening(this.model,"change")}}return e.prototype.Model=E,e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new h({model:this.model,parent:this})},"._RecommendationPanelContentView=":function(){return new p({model:this.model,parent:this})}},e}.call(this),e}.call(this),h=function(){class e extends B{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,{"change repaint":this.update})}}return e.prototype.Model=E,e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._MyRecommendationPanelHeaderView")}}).prototype.rule={"._MyRecommendationPanelUserView=":function(){return new T({model:this.model.getModel("user_id"),parent:this})}},e}.call(this),e}.call(this),T=function(){class e extends N{}return e.prototype.Model=Y,e.prototype.Rule=class extends N.prototype.Rule{},e}.call(this),p=function(){class e extends U{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return window.onbeforeunload=this.beforeunload.bind(this)}beforeunload(){if($.contains(document,this.el)&&this.hasUnsubmittedContent())return confirm("One sec! Are you sure that you want to abandon your hard work?")}hasUnsubmittedContent(){var e,t;return t=this.getChildrenByView(C),!!G.some(t,e=>e.isDirty())||(e=this.getChildrenByView(R),G.some(e,e=>e.isDirty()))}clearForms(){var e;return e=this.getChildrenByView(C),G.forEach(e,e=>e.clear())}closePanel(){return this.clearForms(),super.closePanel(...arguments)}remove(){return super.remove(...arguments),G.defer(()=>this.model.trigger("change"))}showCancelOverlay(){return this.$("._confirm-close").removeClass("hidden")}collapsePanel(){return this.hasUnsubmittedContent()?(this.isUnvoting=!1,this.showCancelOverlay()):this.closePanel()}}return e.prototype.Model=E,e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{template(){return template("._MyRecommendationPanelContentView")}}).prototype.rule={"._MyRecommendationPanelTestimonialView=":function(){return new S({model:this.model,parent:this})},"._MyRecommendationPanelSectionsView=":function(){return new b({model:this.model.getModel("option_id"),parent:this})},"._MyRecommendationPanelFooterView=":function(){return new d({model:this.model,parent:this})}},e}.call(this),e.prototype.events={"click ._unvote-link":function(e){var t,n,i;return analytics.track("Recommendation Panel Clicked Panel Remove Recommendation"),this.hasUnsubmittedContent()?(this.isUnvoting=!0,this.showCancelOverlay()):(i=this.model,n=this.model.getModel("option_id"),this.$el.addClass("Loading"),(t=n.getLegacyModel().get("votes")).vote(0),i.set({magnitude:0},{silent:!0}),t.once("voteSuccess",e=>window.currentUserV2.store.loadBundle("rec-page",e.rec_id,{silent:!0,success:(e,t)=>(this.$el.removeClass("Loading"),this.update(),window.currentUserV2.trigger("change sync"))})),window.currentUserV2.trigger("change sync"),this.closePanel())},"click ._submit-sections-link":function(e){var t,n,i;return analytics.track("Recommendation Panel Clicked Panel Main Submit"),i=this.getChildrenByView(C),t=0,n=(()=>{if(++t===i.length)return this.closePanel()}),G.forEach(i,e=>(this.listenToOnce(e,"doneSubmitting",n),e.submit()))},"click ._confirm-close-link":function(){var e;return this.isUnvoting&&(this.isUnvoting=!1,null!=(e=this.model.parents("votes"))&&e.vote(0)),this.$("._confirm-close").addClass("hidden"),this.closePanel()},"click ._close-overlay-link":function(){return this.$("._confirm-close").addClass("hidden")}},e}.call(this),C=function(){class e extends i{submit(){return this.trigger("doneSubmitting")}isDirty(){return!1}clear(){}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),S=function(){class e extends C{initialize(){var e,t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return(t=this.$("._testimonial-input")).val((null!=(e=this.model.get("body"))?e.trim():void 0)||""),this.setFancyInputClass(this.$(".FancyInput-Field")),G.defer(()=>this.adjustTextareaHeight(t))}update(){var e,t;if((t=this.$("._testimonial-input")).length&&(e=t.is(":focus"),t.val()),super.update(...arguments),t.length&&(t.val(t),e))return t.focus()}submit(){var e,t,n,i,o,r,s;return this.resetFormState(),this.isDirty()?(this.$el.addClass("Loading"),e=this.model.get("body").trim(),i=null!=(o=this.$("._testimonial-input").val())?o.trim():void 0,s=(n=!e&&i)?"new":i?"updated":"removed",analytics.track("Recommendation Panel Testimonial Text Changed",{label:s}),r=(()=>(this.$el.removeClass("Loading"),this.model.fetch({success:()=>(n&&this.model.trigger("newTestimonial"),this.trigger("doneSubmitting"))}))),t=(()=>(this.$el.removeClass("Loading"),this.setFormSaveErrorState(),G.defer(()=>(this.getParentByView(F).$el.animate({scrollTop:this.$el.position().top},300),this.$("._testimonial-input").focus())))),this.model.getLegacyModel().save("text",i,{success:r,error:t,silent:!0,wait:!0})):this.trigger("doneSubmitting")}isDirty(){var e;return this.$("._testimonial-input").val().trim()!==((null!=(e=this.model.get("body"))?e.trim():void 0)||"")}clear(){return this.$el.removeClass("Loading")}setFormSaveErrorState(){return this.$("._testimonial-input-label").addClass("error"),this.$("._testimonial-error-placeholder").removeClass("hidden")}resetFormState(){return this.$("._testimonial-input-label").removeClass("error"),this.$("._testimonial-error-placeholder").addClass("hidden")}}return e.prototype.Model=E,e.prototype.mixin(r),e.prototype.mixin(o),e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MyRecommendationPanelTestimonialView")}},e.prototype.events=G.assign({},r.prototype.events,o.prototype.events),e}.call(this),b=function(){class e extends i{isMasterOption(){var e;return(null!=(e=this.model.getModel("product_id"))?e.get("option_id"):void 0)===this.model.get("option_id")}}return e.prototype.Model=L,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MyRecommendationPanelSectionsView")}}).prototype.rule={"._MyRecommendationPanelProsListView=":function(){return new v({collection:this.model.getCollection("option_section_ids"),parent:this})},"._MyRecommendationPanelConsListView=":function(){return new c({collection:this.model.getCollection("option_section_ids"),parent:this})},"._MyRecommendationPanelMasterProsListView=":function(){return this.isMasterOption()?"":new f({collection:this.model.getModel("product_id").getCollection("product_section_ids"),originalOption:this.model,parent:this})},"._MyRecommendationPanelMasterConsListView=":function(){return this.isMasterOption()?"":new m({collection:this.model.getModel("product_id").getCollection("product_section_ids"),originalOption:this.model,parent:this})},"._MyRecommendationPanelAddProView=":function(){return new a({model:this.model,parent:this})},"._MyRecommendationPanelAddConView=":function(){return new l({model:this.model,parent:this})}},e}.call(this),e}.call(this),R=function(){var e,t;class n extends q{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"update-highlight",this.updateReactionState)}updateReactionState(){return this.isAgreed()&&this.isImportant()?this.markAsImportant():this.isAgreed()?this.markAsAgreed():this.clearMarks()}getRec(){return this.getParentByView(p).model}getHighlight(){var e,t;return null!=(e=this.getRec())&&null!=(t=e.getCollection("rec_highlight_ids"))?t.getSectionHighlight(this.model):void 0}isAgreed(){var e;return null!=(e=this.getHighlight())&&e.get("magnitude")>0}isImportant(){var e;return null!=(e=this.getHighlight())&&e.get("is_primary")}markAsImportant(){return this.$("._section-important-link").addClass("isImportant").removeClass("isBelow"),this.$("._section-agree-link").addClass("isAgreed isAlsoImportant")}markAsAgreed(){return this.$("._section-important-link").addClass("isBelow").removeClass("isImportant"),this.$("._section-agree-link").addClass("isAgreed").removeClass("isAlsoImportant")}clearMarks(){return this.$("._section-agree-link").removeClass("isAgreed isAlsoImportant"),this.$("._section-important-link").removeClass("isImportant isBelow")}toggleEditSectionForm(){return this.$(".RecommendationPanel-Section-Body").toggleClass("hidden"),this.$(".RecommendationPanel-Section-Edit").toggleClass("hidden"),this.togglePanelEditMode()}togglePanelEditMode(){var e;return null!=(e=this.getParentByView(U))&&e.$(".RecommendationPanel-Content").toggleClass("editingSection"),this.$el.toggleClass("active")}initializeSectionForm(){var e;return this.setEditSubmitState(),this.$("._section-edit-title-input").val(this.model.get("title").trim()),(e=this.$("._section-edit-description-input")).val(this.model.get("body").trim()),this.adjustTextareaHeight(e),this.setFancyInputClass(this.$(".FancyInput-Field")),this.resetEditFormState()}isDirty(){return!this.$(".RecommendationPanel-Section-Edit").hasClass("hidden")&&(this.$("._section-edit-title-input").val().trim()!==this.model.get("title").trim()||this.$("._section-edit-description-input").val().trim()!==this.model.get("body").trim())}setEditSubmitState(){return this.isDirty()&&this.$("._section-edit-title-input").val().trim()?this.$("._submit-section-edit-link").removeClass("disabled"):this.$("._submit-section-edit-link").addClass("disabled")}submitEdit(){var e,t,n,i,o,r,s,l,a;if(a=this.$("._section-edit-title-input").val().trim(),n=this.model.getLegacyModel(),a&&this.isDirty())return analytics.track("Recommendation Panel Submit Section Edit"),this.resetEditFormState(),o={revision:n.get("revision").clone({deep:!0})},r={collection:n.get("comments")},s=new z(o,r),e=this.$("._section-edit-description-input").val().trim(),(i={}).title=a,i.text=e,l=(()=>this.model.fetch({success:()=>(this.$el.removeClass("Loading"),this.setDescriptionExpansionDefaults(),this.togglePanelEditMode(),this.initializeSectionForm()),error:t})),t=(()=>(this.$el.removeClass("Loading"),this.setEditFormSaveErrorState())),this.$el.addClass("Loading"),s.get("revision").set(i,{silent:!0}),s.save(null,{success:l,error:t})}resetEditFormState(){return this.$("._edit-form-input").removeClass("error"),this.$("._section-edit-title-default-placeholder").removeClass("hidden"),this.$("._section-edit-error-placeholder").addClass("hidden")}setEditFormSaveErrorState(){return this.$("._edit-form-input").addClass("error"),this.$("._section-edit-title-default-placeholder").addClass("hidden"),this.$("._section-edit-error-placeholder").removeClass("hidden")}}return n.prototype.Model=Q,n.prototype.mixin(r),n.prototype.mixin(o),n.prototype.Rule=function(){var e;return(e=class extends q.prototype.Rule{template(){return template("._MyRecommendationPanelSectionView")}}).prototype.rule={"._section-agree-link@class+":function(){var e;return e=[],this.isAgreed()&&(e.push("isAgreed"),this.isImportant()&&e.push("isAlsoImportant")),e.join(" ")},"._section-important-link@class+":function(){if(this.isAgreed())return this.isImportant()?"isImportant":"isBelow"}},e}.call(this),e=G.debounce(function(e){if(this.mouseoverAgree)return this.agreePopup=new y({model:this.model,follows:e.currentTarget,parent:this})},800),t=G.debounce(function(e){if(this.mouseoverImportant)return this.importantPopup=new _({model:this.model,follows:e.currentTarget,parent:this})},800),n.prototype.events=G.assign({},r.prototype.events,o.prototype.events,{"click ._section-agree-link":function(e){var t,n,i,o,r;return e.stopPropagation(),e.preventDefault(),(null!=(n=this.agreePopup)?n.attached:void 0)&&this.agreePopup.close(),this.mouseoverAgree=!1,(t=null!=(i=null!=(o=this.getHighlight())?o.get("magnitude"):void 0)?i:0)<=0&&analytics.track("Recommendation Panel Agree",{isCon:"Con"===this.model.get("section_type")}),r=this.model.getLegacyModel().get("votes").vote(+!t),this.$el.addClass("Loading"),r.done(()=>J(this.getRec(),{success:()=>(this.$el.removeClass("Loading"),this.model.trigger("update-highlight")),error:()=>this.$el.removeClass("Loading")}))},"click ._section-important-link":function(e){var t,n,i,o,r,s,l;return e.stopPropagation(),e.preventDefault(),(null!=(r=this.importantPopup)?r.attached:void 0)&&this.importantPopup.close(),this.mouseoverImportant=!1,i=this.model.getLegacyModel().get("reactionSet").get("useful"),o=[],(n=!(null!=(s=null!=(l=this.getHighlight())?l.get("is_primary"):void 0)&&s))&&(t="Con"===this.model.get("section_type"),analytics.track("Recommendation Panel MostImportant",{isCon:t}),o=K(this.getRec(),t)),o=[...o,i.react(n)],this.$el.addClass("Loading"),$.when(...o).done(()=>J(this.getRec(),{success:()=>(this.$el.removeClass("Loading"),this.model.collection.each(function(e){return e.trigger("update-highlight")})),error:()=>this.$el.removeClass("Loading")}))},"mouseover ._section-agree-link":function(t){var n;if(t.stopPropagation(),t.preventDefault(),this.mouseoverAgree=!0,!(null!=(n=this.getHighlight())?n.get("magnitude"):void 0)>0&&this.mouseoverAgree)return e.call(this,t)},"mouseover ._section-important-link":function(e){var n;if(e.stopPropagation(),e.preventDefault(),this.mouseoverImportant=!0,!(null!=(n=this.getHighlight())?n.get("is_primary"):void 0))return t.call(this,e)},"mouseout ._section-agree-link":function(e){return this.mouseoverAgree=!1},"mouseout ._section-important-link":function(e){return this.mouseoverImportant=!1},"click ._section-inline-edit-link":function(e){return e.stopPropagation(),e.preventDefault(),analytics.track("Recommendation Panel Click Edit Section Link"),this.toggleEditSectionForm(),this.initializeSectionForm()},"click ._cancel-section-edit-link":function(e){return this.toggleEditSectionForm(),this.initializeSectionForm()},"click ._submit-section-edit-link":function(e){return this.submitEdit()},"input ._section-edit-title-input":G.debounce(function(e){return this.setEditSubmitState()},200),"input ._section-edit-description-input":G.debounce(function(e){return this.setEditSubmitState()},200)}),n}.call(this),x=function(){class e extends s{getRec(){return this.getParentByView(p).model}filter(e){return!e.isMarked()}}return e.prototype.Collection=j,e.prototype.ItemView=R,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){if(!(this.getRec().get("magnitude")>0))return""},"._is-downvote=":function(){if(!(this.getRec().get("magnitude")<0))return""}},e}.call(this),e}.call(this),v=function(){class e extends x{filter(e){return super.filter(e)&&"Pro"===e.get("section_type")}}return e.prototype.Collection=j,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._MyRecommendationPanelProsListView")}},e}.call(this),c=function(){class e extends x{filter(e){return super.filter(e)&&"Con"===e.get("section_type")}}return e.prototype.Collection=j,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._MyRecommendationPanelConsListView")}},e}.call(this),g=function(){class t extends R{isAgreed(){return!1}isImportant(){return!1}getRec(){return this.getParentByView(p).model}addMasterSectionSuccessCallback(e,t){return e.get("votes").vote(1).done(()=>J(this.getRec(),{success:()=>this.updateMasterSectionListView(),error:this.addMasterSectionErrorCallback}))}addMasterSectionErrorCallback(){return this.isAddingMaster=!1,this.$el.removeClass("Loading")}addSectionFromMaster(){var t,n,i,o,r,s,l,a,u,c;if(t=e("../../models").Section,n=e("../../collections").SectionList,u=this.options.originalOption.getCollection("option_section_ids").getSectionListPageURL(),(o=new n).meta({URL:u}),i=new t({},{collection:o}),a=this.model.get("t_id"),c=this.model.get("vp_id"),l=this.model.get("sp_id"),r=this.options.originalOption.getModel("product_id").get("m_vp_id"),l&&c&&a&&w.prototype.isNotDupe.call(this,this.model))return s={t_id:a,vp_id:c,sp_id:l,m_vp_id:r},i.save("source",s,{wait:!0,valid:!1,success:(e,t)=>this.addMasterSectionSuccessCallback(e,t),error:()=>this.addMasterSectionErrorCallback()}),analytics.track("Recommendation Panel Add Master Section Click");this.addMasterSectionErrorCallback()}updateMasterSectionListView(){var e,t,n;if(e=null!=(t=this.options.currentlyAddingList)?t.indexOf(this.model.id):void 0,null!=(n=this.options.currentlyAddingList)&&n.splice(e,1),0===this.options.currentlyAddingList.length)return this.options.originalOption.trigger("change")}}return t.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{}).prototype.rule={"._has-section-edit-link=":function(){return""}},e}.call(this),t.prototype.events={"click ._section-agree-link":function(e){var t,n;if(e.stopPropagation(),e.preventDefault(),!G.contains(this.options.currentlyAddingList,this.model.id))return null!=(t=this.options.currentlyAddingList)&&t.push(this.model.id),this.$el.addClass("Loading"),(null!=(n=this.agreePopup)?n.attached:void 0)&&this.agreePopup.close(),this.mouseoverAgree=!1,this.addSectionFromMaster()},"click ._section-important-link":function(e){}},t}.call(this),w=function(){class e extends x{initialize(){return this.currentlyAddingList=[],super.initialize(...arguments)}createViewOptions(){return{originalOption:this.options.originalOption,currentlyAddingList:this.currentlyAddingList}}filter(e){return super.filter(e)&&this.isNotDupe(e)}isNotDupe(e){var t;return null!=(t=this.options.originalOption.getCollection("option_section_ids"))?t.all(function(t){var n;return(null!=(n=t.get("title"))?n.trim():void 0)!==e.get("title").trim()}):void 0}}return e.prototype.Collection=j,e.prototype.ItemView=g,e.prototype.Rule=function(){var e;return(e=class extends x.prototype.Rule{}).prototype.rule={"._has-regular-pros=":function(){var e;if(!(null!=(e=this.options.originalOption.getCollection("option_section_ids"))?e.filter(v.prototype.filter.bind(this)).length:void 0))return""},"._has-regular-cons=":function(){var e;if(!(null!=(e=this.options.originalOption.getCollection("option_section_ids"))?e.filter(c.prototype.filter.bind(this)).length:void 0))return""}},e}.call(this),e}.call(this),f=function(){class e extends w{filter(e){return super.filter(e)&&"Pro"===e.get("section_type")}}return e.prototype.Collection=j,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._MyRecommendationPanelMasterProsListView")}},e}.call(this),m=function(){class e extends w{filter(e){return super.filter(e)&&"Con"===e.get("section_type")}}return e.prototype.Collection=j,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._MyRecommendationPanelMasterConsListView")}},e}.call(this),V=function(){class e extends W{}return e.prototype.Model=Q,e.prototype.options={anchor:"above"},e.prototype.Rule=class extends W.prototype.Rule{},e}.call(this),y=function(){class e extends V{}return e.prototype.Model=Q,e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._MyRecommendationPanelSectionAgreeTooltipView")}},e}.call(this),_=function(){class e extends V{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._MyRecommendationPanelSectionImportantTooltipView")}}).prototype.rule={"._is-pro=":function(){if("Pro"!==this.model.get("section_type"))return""},"._is-con=":function(){if("Con"!==this.model.get("section_type"))return""}},e}.call(this),e}.call(this),u=function(){class t extends C{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.isAgreed=!1,this.isImportant=!1,this.stopListening(this.collection,"add change")}update(){var e,t;return t=this.$("._section-title-input").val(),e=this.$("._section-description-input").val(),super.update(...arguments),this.$("._section-title-input").val(t),this.$("._section-description-input").val(e),this.setFancyInputClass(this.$(".FancyInput-Field")),this.updateReactionState(),t?(this.$("._add-section-link").removeClass("disabled"),this.$("._add-section-agree-link").removeClass("disabled")):(this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"))}getRec(){return this.getParentByView(p).model}hasTitle(){return this.$("._section-title-input").val()}isDirty(){return this.hasContent()}hasContent(){return this.$("._section-title-input").val()||this.$("._section-description-input").val()}submit(){var t,n,i,o,r,s,l;return t=e("../../models").Section,n=e("../../collections").SectionList,s=this.$("._section-title-input").val(),r=this.$("._section-description-input").val(),s?(analytics.track("Recommendation Panel Submit New Section",{isCon:this.isCon}),this.resetErrorState(),this.$el.addClass("Loading"),l=this.model.getCollection("option_section_ids").getSectionListPageURL(),(o=new n).meta({URL:l}),(i=new t({isCon:this.isCon},{collection:o})).get("revision").set({title:s,text:r}),i.save(null,{scroll:!1,highlight:!1}),i.once("saveError",()=>(this.$el.removeClass("Loading"),this.setErrorSubmitState(),this.getParentByView(F).$el.animate({scrollTop:this.$el.position().top},300),this.$("._section-title-input").focus())),i.once("sync",()=>{var e,t,n;return t=[],this.isAgreed&&(n=i.get("votes").vote(1),this.isImportant&&(t=K(this.getRec(),this.isCon),e=i.get("reactionSet").get("useful"),t=[...t,e.react(!0)])),$.when(n,...t).done(()=>J(this.getRec(),{success:()=>{var e;return(e=this.model.getCollection("option_section_ids")).each(function(e){return e.trigger("update-highlight")}),e.trigger("add"),this.clear(),this.trigger("doneSubmitting"),G.defer(()=>this.$("._section-title-input").focus())},error:()=>(this.$el.removeClass("Loading"),this.setErrorSubmitState(),this.getParentByView(F).$el.animate({scrollTop:this.$el.position().top},300),this.$("._section-title-input").focus())}))})):this.trigger("doneSubmitting")}clear(){return this.$el.removeClass("Loading"),this.$("._section-description-input").val(""),this.$("._section-title-input").val(""),this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"),this.isAgreed=!1,this.isImportant=!1,this.updateReactionState()}updateReactionState(){return this.isAgreed&&this.isImportant?this.markAsImportant():this.isAgreed?this.markAsAgreed():this.clearMarks()}markAsImportant(){return this.$("._add-section-important-link").addClass("isImportant").removeClass("isBelow"),this.$("._add-section-agree-link").addClass("isAgreed isAlsoImportant")}markAsAgreed(){return this.$("._add-section-important-link").addClass("isBelow").removeClass("isImportant"),this.$("._add-section-agree-link").addClass("isAgreed").removeClass("isAlsoImportant")}clearMarks(){return this.$("._add-section-agree-link").removeClass("isAgreed isAlsoImportant"),this.$("._add-section-important-link").removeClass("isImportant isBelow")}resetErrorState(){return this.$("._add-section-form-input").removeClass("error"),this.$("._add-section-title-default-placeholder").removeClass("hidden"),this.$("._add-section-error-placeholder").addClass("hidden")}setErrorSubmitState(){return this.$("._add-section-form-input").addClass("error"),this.$("._add-section-title-default-placeholder").addClass("hidden"),this.$("._add-section-error-placeholder").removeClass("hidden")}}return t.prototype.Model=L,t.prototype.mixin(r),t.prototype.mixin(o),t.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._MyRecommendationPanelAddSectionView")}}).prototype.rule={"._is-pro=":function(){if(this.isCon)return""},"._is-con=":function(){if(!this.isCon)return""}},e}.call(this),t.prototype.events=G.assign({},o.prototype.events,r.prototype.events,{"submit ._add-section-form":function(e){return e.preventDefault(),this.submit()},"input ._section-title-input":function(){return this.$("._section-title-input").val()?(this.$("._add-section-link").removeClass("disabled"),this.$("._add-section-agree-link").removeClass("disabled"),this.isAgreed=!0):(this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"),this.isAgreed=!1),this.updateReactionState()},"click ._add-section-link":function(){return this.submit()},"click ._add-section-agree-link":function(e){if(e.preventDefault(),e.stopPropagation(),this.hasTitle())return this.isAgreed=!this.isAgreed,this.updateReactionState()},"click ._add-section-important-link":function(e){if(e.preventDefault(),e.stopPropagation(),this.hasTitle())return this.isImportant=!this.isImportant,this.updateReactionState()}}),t}.call(this),a=function(){class e extends u{}return e.prototype.Collection=j,e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.isCon=!1,e}.call(this),l=function(){class e extends u{}return e.prototype.Collection=j,e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.isCon=!0,e}.call(this),d=function(){class e extends i{}return e.prototype.Model=E,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MyRecommendationPanelFooterView")}}).prototype.rule={"._remove-disabled@disabled":function(){if(!this.model.id)return"disabled"},"._submit-disabled@disabled":function(){if(!this.model.id)return"disabled"},"._MyRecommendationPanelUsefulView=":function(){return new P({collection:this.model.getCollection("rec_reaction_ids"),parent:this})}},e}.call(this),e}.call(this),k=function(){class e extends W{initialize(){return super.initialize(...arguments),analytics.track("My Recommendation Panel Useful Tooltip Shown")}}return e.prototype.Rule=class extends W.prototype.Rule{template(){return template("._MyRecommendationPanelUsefulTooltipView")}},e}.call(this),P=function(){class e extends A{}return e.prototype.Collection=O,e.prototype.Rule=class extends A.prototype.Rule{},e.prototype.events={mouseover:function(e){return new k({follows:e.currentTarget,anchor:"above",parent:this})}},e}.call(this),t.exports={MyRecommendationPanelView:M,MyRecommendationPanelHeaderView:h,MyRecommendationPanelUserView:T,MyRecommendationPanelContentView:p,MyRecommendationPanelSubmittableView:C,MyRecommendationPanelTestimonialView:S,MyRecommendationPanelSectionsView:b,MyRecommendationPanelSectionView:R,MyRecommendationPanelSectionListView:x,MyRecommendationPanelProsListView:v,MyRecommendationPanelConsListView:c,MyRecommendationPanelMasterSectionView:g,MyRecommendationPanelMasterSectionsListView:w,MyRecommendationPanelMasterProsListView:f,MyRecommendationPanelMasterConsListView:m,MyRecommendationPanelSectionTooltipView:V,MyRecommendationPanelSectionAgreeTooltipView:y,MyRecommendationPanelSectionImportantTooltipView:_,MyRecommendationPanelAddSectionView:u,MyRecommendationPanelAddProView:a,MyRecommendationPanelAddConView:l,MyRecommendationPanelFooterView:d,MyRecommendationPanelUsefulView:P,MyRecommendationPanelUsefulTooltipView:k}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../base-view":91,"../components/panel-view":131,"../components/reaction-button-set-view":141,"../components/recommendation-panel-view":149,"../components/tooltip-view":167,"../lists/list-view":173,"../mixins/expanding-textarea-mixin-view":184,"../mixins/fancy-input-mixin-view":185,"../models/section-view":204,underscore:448}],126:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R;V=e("underscore"),({EventView:d,EventEditContentView:o,EventSectionEditContentView:s,EventOptionRecommendationContentView:r,EventSectionRecommendationContentView:p,EventSectionReactionMostImportantContentView:a,EventSectionReactionNeedsClarificationContentView:u,EventSectionReactionOutOfDateContentView:c,EventSectionReactionFlagContentView:l}=e("../models/event-view")),({Event:i}=e("../../models")),({improveURL:R}=e("../../utils/transforms")),x=function(){class e extends d{}return e.prototype.Model=i,e.prototype.actionToView=V.assign({},d.prototype.actionToView,{"Opt.Revise":function(){return h},"Sec.Revise":function(){return f},"Opt.Vote:Up":function(){return m},"Sec.Vote:Up":function(){return _},"Reaction_Sec.Create:Useful":function(){return w},"Reaction_Sec.Create:NeedsImprovement":function(){return v},"Reaction_Sec.Create:OutOfDate":function(){return y},"Reaction_Sec.Create:Flag":function(){return g}}),e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._NotificationView")}}).prototype.rule={"._question-title=":function(){var e;return null!=(e=this.model.get("target").parents("topic"))?e.get("revision").get("title").trim():void 0},"._question-link@href":function(){return R(this.model.get("target").parents("topic"))}},e}.call(this),e}.call(this),h=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._NotificationOptionEditContentView")}},e}.call(this),f=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._NotificationSectionEditContentView")}},e}.call(this),m=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._NotificationOptionRecommendationContentView")}},e}.call(this),_=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._NotificationSectionRecommendationContentView")}},e}.call(this),w=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._NotificationSectionReactionMostImportantContentView")}},e}.call(this),v=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._NotificationSectionReactionNeedsClarificationContentView")}},e}.call(this),y=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._NotificationSectionReactionOutOfDateContentView")}},e}.call(this),g=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._NotificationSectionReactionFlagContentView")}},e}.call(this),t.exports={NotificationView:x,NotificationOptionEditContentView:h,NotificationSectionEditContentView:f,NotificationOptionRecommendationContentView:m,NotificationSectionRecommendationContentView:_,NotificationSectionReactionMostImportantContentView:w,NotificationSectionReactionNeedsClarificationContentView:v,NotificationSectionReactionOutOfDateContentView:y,NotificationSectionReactionFlagContentView:g}},{"../../models":34,"../../utils/transforms":89,"../models/event-view":192,underscore:448}],127:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w;({DropdownView:o}=e("../components/dropdown-view")),({NotificationView:p}=e("../components/notification-view")),({EventContentView:s}=e("../models/event-view")),({KarmaDropdownView:u,KarmaDropdownItemView:l,KarmaDropdownThreadView:a}=e("./karma-dropdown-view")),({Event:r}=e("../../models")),({NotificationList:c}=e("../../collections")),({shortenQuestionTitle:w}=e("../../utils/transforms")),i=["Comment_Rec.Create"],g=function(){class e extends u{}return e.prototype.Collection=c,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._NotificationsDropdownView")}}).prototype.rule={"._NotificationsDropdownThreadView=":function(){return new f({collection:this.collection})}},e}.call(this),e}.call(this),h=function(){class e extends l{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._NotificationsDropdownItemView")}}).prototype.rule={"._target-link@href":function(){var e;return null!=(e=p.prototype.actionToView[this.model.get("action")]())?e.prototype.getTargetLink.call(this):void 0},"._NotificationsDropdownNotificationView=":function(){return new m({model:this.model})}},e}.call(this),e}.call(this),d=function(){class e extends h{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{}).prototype.rule={"._target-link@href":function(){}},e}.call(this),e.prototype.events={"click ._target-link":function(e){var t,n;return null!=(t=(n=this.getChildrenByView(s))[0]===this?n[1]:n[0])&&"function"==typeof t.doAction&&t.doAction(),this.listenTo(t,"actionEnd",()=>{var e;return null!=(e=this.getParentByView(o))?e.close():void 0})}},e}.call(this),f=function(){class e extends a{getItemView(e){return this.isActionableEvent(e.get("action"))?d:h}isActionableEvent(e){return i.includes(e)}hasUnread(){return this.collection.meta("unreadCount")>0}}return e.prototype.Collection=c,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._NotificationsDropdownThreadView")}},e}.call(this),m=function(){class e extends p{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{}).prototype.rule={"._question-title=":function(){var e,t;return e=null!=(t=this.model.get("target").parents("topic"))?t.get("revision").get("title").trim():void 0,w(e)}},e}.call(this),e}.call(this),t.exports={NotificationsDropdownView:g,NotificationsDropdownItemView:h,NotificationsDropdownActionableItemView:d,NotificationsDropdownThreadView:f,NotificationsDropdownNotificationView:m}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../components/dropdown-view":101,"../components/notification-view":126,"../models/event-view":192,"./karma-dropdown-view":111}],128:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;d=e("../../rule"),({PopupView:p}=e("./popup-view")),({OptionModel:c,SectionModel:h}=e("../../models/index")),e("urijs"),u=function(){class e extends p{initialize(e){var t,n;if(super.initialize(...arguments),this.stopListening(),this.$el.addClass("shown"),t=null!=(n=null!=e?e.lifespan:void 0)?n:this.lifespan)return _.delay(this.remove.bind(this),t)}remove(){return this.$el.removeClass("shown"),_.delay(()=>super.remove(...arguments),1e3)}}return e.prototype.options={anchor:"above",relative:!0,enableBodyScroll:!0,align:"center"},e.prototype.Rule=function(){var e;return(e=class extends d{template(){return template("._NotifyPopupView")}}).prototype.rule={"._text=":function(){return this.options.text}},e}.call(this),e.prototype.lifespan=5e3,e.prototype.events={"click document":!1,"click ._close-link":e.prototype.remove},e}.call(this),s=function(){class e extends u{}return e.prototype.lifespan=0,e.prototype.Rule=class extends d{template(){return template("._NotifyPopupServerErrorView")}},e}.call(this),o=function(){class e extends u{}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends d{template(){return template("._NotifyPopupAddedOptionView")}}).prototype.rule={"._title=":function(){return this.model.get("title")},"._link@href":function(){return this.model.getViewpointPageURL()}},e}.call(this),e}.call(this),l=function(){class e extends u{}return e.prototype.Model=c,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._NotifyPopupUpdatedOptionView")}},e}.call(this),r=function(){class e extends u{}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends d{template(){return template("._NotifyPopupAddedSectionView")}}).prototype.rule={"._is-pro=":function(){if("Pro"!==this.model.get("section_type"))return""},"._is-con=":function(){if("Con"!==this.model.get("section_type"))return""},"._title=":function(){return this.model.get("title")},"._link@href":function(){return this.model.getSectionPageURL()}},e}.call(this),e}.call(this),a=function(){class e extends u{}return e.prototype.Model=h,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._NotifyPopupUpdatedSectionView")}},e}.call(this),i=function(){class e extends u{}return e.prototype.Model=h,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._NotifyPopupAddedCommentView")}},e}.call(this),t.exports={NotifyPopupView:u,NotifyPopupServerErrorView:s,NotifyPopupAddedOptionView:o,NotifyPopupUpdatedOptionView:l,NotifyPopupAddedSectionView:r,NotifyPopupUpdatedSectionView:a,NotifyPopupAddedCommentView:i}},{"../../models/index":64,"../../rule":81,"./popup-view":132,urijs:452}],129:[function(e,t,n){var i,o,r,s,l,a,u,c;({DropdownView:i}=e("./dropdown-view")),({OptionView:a}=e("../models/option-view")),({OptionListView:l}=e("../lists/option-list-view")),({SearchableListView:u}=e("../lists/searchable-list-view")),({highlightText:c}=e("../../utils/transforms")),s=function(){class e extends i{search(e){var t;return null!=(t=this.getChildrenByView(r)[0])?t.search(e):void 0}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._OptionDropdownView")}}).prototype.rule={"._OptionDropdownListView=":function(){return new r({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e}.call(this),o=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._OptionDropdownItemView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t,n;if(n=null!=(e=this.model.getCollection("option_image_ids"))&&null!=(t=e.at(0))?t.getImageThumbnailURL():void 0)return`background-image: URL('${n}');`},"._option-title-highlighted=":function(){var e;return e=this.model.get("title"),c(e,this.options.regex)}},e}.call(this),e}.call(this),r=function(){class e extends u{getSearchValue(e){return e.get("title")}filter(e){return super.filter(e)&&!e.get("selected")}}return e.prototype.mixin(l),e.prototype.ItemView=o,e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._OptionDropdownListView")}},e}.call(this),t.exports={OptionDropdownView:s,OptionDropdownItemView:o,OptionDropdownListView:r}},{"../../utils/transforms":89,"../lists/option-list-view":175,"../lists/searchable-list-view":178,"../models/option-view":200,"./dropdown-view":101}],130:[function(e,t,n){var i,o,r,s,l,a,u;({BaseView:i}=e("../base-view")),({ListView:o}=e("../lists/list-view")),({OptionModel:r,SectionModel:u,RecModel:a}=e("../../models/index")),l=function(){class e extends i{initialize(){if(this.activeTabId=this.options.activeTabId||"all",super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.activeTabId=this.options.activeTabId||this.$("._tab-link").first().data("tab-id"),this.listenTo(this.model.getCollection("option_section_ids"),"add",function(){return this.update()})}update(e={}){return"undefined"==typeof window||null===window?super.update(...arguments):(super.update(e),!1!==e.shouldUpdateSelected?this.updateSelectedTab():void 0)}hasItems(){return this.hasSpecs()||this.hasSections()||this.hasRecs()}hasSections(){return this.model.getCollection("option_section_ids").any(function(e){return!e.isMarked()})}getPros(){return this.model.getCollection("option_section_ids").filter(function(e){return"Pro"===e.get("section_type")&&!e.isMarked()})}getCons(){return this.model.getCollection("option_section_ids").filter(function(e){return"Con"===e.get("section_type")&&!e.isMarked()})}hasSpecs(){var e;return null!=(e=this.getSpecs())?e.length:void 0}getRecs(){return this.model.getCollection("option_body_rec_ids")}hasRecs(){return this.getRecs().some(function(e){return e.get("body")})}getSpecs(){return this.model.get("option_spec_set")}getTotalCount(){var e;return e=this.getPros().length+this.getCons().length,e+=this.getRecs().length,e+=this.hasSpecs()?1:0}updateSelectedTab(){return this.$("._tab-link").removeClass("selected"),this.$(`._tab-link[data-tab-id='${this.activeTabId}']`).addClass("selected")}onTabChange(e){var t;return(t=this.$(e.currentTarget).data("tabId"))&&(this.activeTabId=t,this.tabAnimating=!0,this.update(),this.tabAnimating=!1),t}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-items=":function(){if(!this.hasItems())return""},"._has-pros=":function(){if(!(this.getPros().length>0))return""},"._has-cons=":function(){if(!(this.getCons().length>0))return""},"._has-specs=":function(){if(!this.hasSpecs())return""},"._has-recs=":function(){if(!this.hasRecs())return""},"._has-more-items=":function(){var e;switch(this.activeTabId){case"pros":e=this.getPros().length;break;case"cons":e=this.getCons().length;break;case"specs":e=1;break;case"recs":e=this.getRecs().length;break;default:e=this.getTotalCount()}if(!(e>(this.model.isAP()?this.badgedItemLimit:this.itemLimit)))return""},"._is-pros-active=":function(){if("pros"!==this.activeTabId)return""},"._is-cons-active=":function(){if("cons"!==this.activeTabId)return""},"._is-recs-active=":function(){if("recs"!==this.activeTabId)return""},"._items-count=":function(){return this.getTotalCount()},"._pro-count=":function(){return this.getPros().length},"._con-count=":function(){return this.getCons().length},"._recs-count=":function(){return this.getRecs().length}},e}.call(this),e.prototype.events={"click ._tab-link":function(e){return this.onTabChange(e)}},e}.call(this),s=function(){class e extends o{initialize(){return this.sortCounts={},super.initialize(...arguments)}update(){return this.sortCounts={},super.update(...arguments)}getModels(){return this.model.getCollection("option_section_ids").models.concat(this.model.getCollection("option_body_rec_ids").models).concat(this.model)}filter(e){var t,n,i;return null==(t=null!=(n=this.filters[null!=(i=this.options)?i.activeTabId:void 0])?n.call(this,e):void 0)||t}sortBy(e){var t,n,i;return null==(t=null!=(n=this.sortBys[null!=(i=this.options)?i.activeTabId:void 0])?n.call(this,e):void 0)||t}isSection(e){return e instanceof u}isPro(e){return this.isSection(e)&&"Pro"===e.get("section_type")&&!e.isMarked()}isCon(e){return this.isSection(e)&&"Con"===e.get("section_type")&&!e.isMarked()}isRec(e){return e instanceof a}isSpecList(e){return e instanceof r}}return e.prototype.Model=r,e.prototype.Rule=class extends o.prototype.Rule{},e.prototype.filters={all:function(e){return this.isSection(e)?!e.isMarked():this.isRec(e)?null!=e.get("body"):this.isSpecList(e)?this.hasSpecs():void 0},pros:function(e){return this.isPro(e)},cons:function(e){return this.isCon(e)},recs:function(e){return this.isRec(e)},specs:function(e){return this.isSpecList(e)&&this.hasSpecs()}},e.prototype.sortBys={all:function(e){var t;return this.isSpecList(e)?t="specs":this.isPro(e)?t="pros":this.isCon(e)?t="cons":this.isRec(e)&&(t="recs"),null==this.sortCounts[t]&&(this.sortCounts[t]=Object.keys(this.sortCounts).length),this.sortCounts[t]+=4},pros:function(e){return!0},cons:function(e){return!0},recs:function(e){return!0},specs:function(e){return!0}},e.prototype.hasSpecs=l.prototype.hasSpecs,e.prototype.getSpecs=l.prototype.getSpecs,e}.call(this),t.exports={OptionTabsView:l,OptionTabsContentListView:s}},{"../../models/index":64,"../base-view":91,"../lists/list-view":173}],131:[function(e,t,n){var i,o,r,s,l,a,u;u=e("underscore"),({BaseView:i}=e("../base-view")),({ModalView:r}=e("../components/modal-view")),({TRANSITION_END_EVENT:a}=e("../../utils/constants")),({MINIMUM_MAX_WIDTH_MEDIA_QUERY:o}=e("../../utils/patterns")),l=function(){class e extends r{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.attached=!0,this.panelOpenedAnalytics()}setContent(e,t){var n,i,o;if((null!=(n=this.activePanelContent)?n.constructor:void 0)!==e||(null!=t?t.model:void 0)!==(null!=(i=this.activePanelContent)?i.model:void 0)||(null!=t?t.collection:void 0)!==(null!=(o=this.activePanelContent)?o.collection:void 0))return this.activePanelContent=new e(t),this.expand(),this.update()}collapse(e){return this.panelWasFullscreen&&this.removeFullscreenState(e),requestAnimationFrame(()=>{var e;return(e=this.$("._panel")).on(a,t=>{if(t.target===e.get(0))return this.remove(),this.trigger("panelHasCollapsed")}),e.addClass("collapsed")})}expand(){return requestAnimationFrame(()=>{var e;return(e=this.$("._panel")).one(a,()=>{if(this.expanded=!0,this.isIosDevice()&&this.isFullscreen())return this.setFullscreenState(),this.panelWasFullscreen=!0}),u.defer(()=>e.removeClass("collapsed"))})}triggerClosing(e){return null!=e&&e.preventDefault(),this.trigger("collapsePanel")}isFullscreen(){return window.matchMedia(o).matches&&this.expanded}remove(){return this.attached=!1,super.remove(...arguments)}panelOpenedAnalytics(){return analytics.track("Panel Opened")}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._PanelView")}}).prototype.rule={"._PanelContentView=":function(){var e;return null!=(e=this.activePanelContent)?e:""}},e}.call(this),e.prototype.events={click:function(e){return e.stopPropagation()},"click ._close-link":function(e){if(e.currentTarget===e.target)return this.triggerClosing(e)},"click ._close-panel-link":function(e){return this.triggerClosing(e)},"keydown document":function(e){if(27===e.keyCode)return this.triggerClosing(e)}},e}.call(this),s=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return u.defer(()=>this.listenTo(this.getParentByView(l),"collapsePanel",this.collapsePanel))}collapsePanel(){return this.closePanel()}closePanel(){var e;return null!=(e=this.getParentByView(l))?e.collapse():void 0}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={PanelView:l,PanelContentView:s}},{"../../utils/constants":85,"../../utils/patterns":87,"../base-view":91,"../components/modal-view":122,underscore:448}],132:[function(e,t,n){var i,o,r,s;s=e("underscore"),({BaseView:i}=e("../base-view")),({MINIMUM_MAX_WIDTH_MEDIA_QUERY:o}=e("../../utils/patterns")),r=function(){class e extends i{initialize(e){var t,n,i,o;return this.follows=$(null!=(n=e.follows.el)?n:e.follows),super.initialize(...arguments),0===(t=this.follows.parents(".Modal")).length&&(t=null),$(null!=(i=null!=(o=e.parentSelector)?o:t)?i:"#container").append(this.el),this.align=e.align,this.anchor=e.anchor,this.cover=e.cover,this.relative=e.relative,this.fixed=e.fixed,this.enableBodyScroll=e.enableBodyScroll,this.closeOnNavigate=e.closeOnNavigate,e.follows?(this.fixed&&this.$el.css("position","fixed"),this.position(),this.attached=!0,s.defer(()=>{if(null==this.closable)return this.closable=!0}),this.closeOnNavigate?this.listenTo(window.router,"navigate",()=>this.close()):void 0):(console.error("PopupView instantiated without a follows element"),this.close())}position(){var e,t,n,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;if(!this.isFullscreen()){if(this.wasFullscreen&&(this.wasFullscreen=!1,$("body").removeClass("has-fullscreen-dropdown"),requestAnimationFrame(()=>window.scrollTo(0,this.savedScrollPosition))),0===this.$el.parents("body").length)return;return 0===(s=this.follows).parents("body").length?(console.error("PopupView follows element not attached to document"),this.closeOnNavigate&&this.close(),this):s.is(":visible")?(y=this.$el.outerWidth(!0),p=this.$el.outerHeight(!0),u=parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom")),a=parseInt(s.css("margin-left"))+parseInt(s.css("margin-right")),c=s.outerWidth(!0),l=s.outerHeight(!0),n=this.$el.parent().offset(),o=this.$el.parent().prop("scrollTop"),i=this.$el.parent().prop("scrollLeft"),r=$(document).width(),h=0,this.cover&&(h=l),(f=this.relative?s.position():s.offset()).top+=o-n.top,f.left+=i-n.left,"center"===this.align?(f.left-=a/2,f.left=f.left-y/2+c/2):"right"===this.align&&(f.left-=a,f.left=f.left-y+c),f.top-=p,m=f.left+y-r,this.overflow=0,m>0&&(f.left-=m,this.overflow=m),f.left<0&&(this.overflow=f.left,f.left=0),x=(e=$(window)).scrollTop(),d=0,s.parents(".Modal").length&&(!0,d=s.parents(".Modal").scrollTop()+(null!=(g=null!=(w=s.parents(".Modal-Window"))&&null!=(v=w.position())?v.top:void 0)?g:0)),t=p+l-h,"below"===this.anchor?(f.top-=u,f.top+=t,_=x+e.height()+d,f.top+this.$el.prop("offsetHeight")>_&&f.top-t>x&&(f.top-=t)):(f.top+=h,f.top<d+($("header.main").height()||0)&&(f.top+=t)),this.fixed&&(f.top-=x),this.$el.css({top:f.top,left:f.left}),this.enableBodyScroll||"fixed"!==this.$el.css("position")?$("body").removeClass("has-popup"):$("body").addClass("has-popup")):(console.info("PopupView follows element not visible"),this.closeOnNavigate&&this.close(),this)}if(!this.wasFullscreen)return this.wasFullscreen=!0,this.savedScrollPosition=$(window).scrollTop(),$("body").addClass("has-fullscreen-dropdown"),requestAnimationFrame(function(){return window.scrollTo(0,0)})}update(){return super.update(...arguments),this.position()}close(e={}){return $("body").removeClass("has-fullscreen-dropdown"),this.isFullscreen()&&!1!==e.scroll&&requestAnimationFrame(()=>window.scrollTo(0,this.savedScrollPosition)),this.trigger("dropdown-close"),this.attached=!1,this.remove()}remove(){return $("body").removeClass("has-popup"),super.remove(...arguments)}isScrollOverflow(e,t){var n,i,o;if(e)return o=e.scrollHeight!==e.clientHeight,n=e.scrollTop===e.scrollHeight-e.clientHeight&&t>0,i=0===e.scrollTop&&t<0,o&&(n||i)}isFullscreen(){return window.matchMedia(o).matches&&this.$el.hasClass("full")}}return e.prototype.options={align:"left",anchor:"above",cover:!1,relative:!1,fixed:!1,enableBodyScroll:!1,follows:null,parentSelector:null,closeOnNavigate:!0},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"@class+":function(){if(this.follows.parents(".Modal").length)return"fromModal"}},e}.call(this),e.prototype.events={"resize window":function(){return this.position()},"click ._close-link":function(e){return this.close()},"click document":function(e){if(this.closable&&this.el!==e.target&&0===this.$(e.target).length&&("INPUT"!==e.target.tagName||this.follows[0]!==e.target&&0===this.follows.has(e.target).length))return this.close()},"keydown document":function(e){if(27===e.keyCode)return this.close()},"wheel .Dropdown-Content":function(e){if(this.isScrollOverflow(e.currentTarget,e.originalEvent.deltaY))return e.preventDefault()},"click a[href]":function(e){return this.loadLink(e)}},e}.call(this),t.exports={PopupView:r}},{"../../utils/patterns":87,"../base-view":91,underscore:448}],133:[function(e,t,n){var i,o,r,s,l,a,u,c;e("underscore"),u=e("urijs"),({BaseView:i}=e("../base-view")),({ListView:o}=e("../lists/list-view")),({StorePageModel:a}=e("../../models/")),({StorePageCollection:l}=e("../../collections/")),({groupNumber:c}=e("../../utils/transforms")),s=function(){class e extends i{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ProductBuyButtonsView")}}).prototype.rule={"._has-current-price=":function(){if(!this.model.get("store_page_current_price_info_obj"))return""},"._no-current-price=":function(){if(this.model.get("store_page_current_price_info_obj"))return""},"._has-store-icon=":function(){if(!this.model.getStoreIcon())return""},"._is-primary-class@class+":function(){if("amazon"===this.model.get("store"))return"primary"},"._store-icon@src":function(){return this.model.getStoreIcon()},"._store-link@href":function(){var e,t;return t=new u(this.model.get("url")),e={},this.options.categoryModel&&(e.category_name=this.options.categoryModel.get("url_slug")),this.options.priceIntent&&(e.price_intent=this.options.priceIntent),t.search(e),t},"._store-name=":function(){return this.model.get("store")},"._current-price=":function(){var e;return e=this.model.getPriceAsNumber(),c(e/100)},"._current-price-integer=":function(){var e;return e=this.model.getPriceAsNumber(),c(Math.floor(e/100))},"._current-price-decimal=":function(){var e;return e=this.model.getPriceAsNumber(),Math.floor(e%1*100).toString().padStart(2,"0")}},e}.call(this),e.prototype.events={"click ._store-link":function(e){return analytics.track("AI Buy Button Clicked Link",{label:this.model.get("store")})}},e}.call(this),r=function(){class e extends o{createViewOptions(){return{categoryModel:this.options.categoryModel,priceIntent:this.options.priceIntent}}initialize(){return this.setCheapestPricePerStore(),super.initialize(...arguments)}setCheapestPricePerStore(){return this.cheapestStorePerStoreName=this.collection.reduce((e,t)=>{var n,i,o;return e[o=t.get("store")]?(n=null!=(i=this.collection.store)?i.getModel(e[o]):void 0,t.getPriceAsNumber()<(null!=n?n.getPriceAsNumber():void 0)&&(e[o]=t.get("store_page_id"))):e[o]=t.get("store_page_id"),e},{})}sortBy(e){return"amazon"===e.get("store")?-1:e.getPriceAsNumber()||Infinity}filter(e,t,n){var i;return i=e.get("store"),this.cheapestStorePerStoreName[i]===e.get("store_page_id")}}return e.prototype.Collection=l,e.prototype.ItemView=s,e.prototype.limit=3,e.prototype.cheapestStorePerStoreName={},e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._ProductBuyButtonsListView")}},e}.call(this),t.exports={ProductBuyButtonsView:s,ProductBuyButtonsListView:r}},{"../../collections/":2,"../../models/":34,"../../utils/transforms":89,"../base-view":91,"../lists/list-view":173,underscore:448,urijs:452}],134:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_=[].indexOf;({BaseView:i}=e("../base-view")),({UserView:w}=e("../models/user-view")),({TooltipView:m}=e("./tooltip-view")),({ModalView:l}=e("./modal-view")),({LoginModalView:s,LoginModalLoginContentView:o,LoginModalRegisterContentView:r}=e("./login-modal-view")),({QuestionModel:h}=e("../../models/index")),({Topic:f,User:g}=e("../../models")),v=e("underscore"),({shortenNumber:y}=e("../../utils/transforms")),a=80,u=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,{"change repaint":this.update})}isPromoted(){var e,t;return e=this.model.get("question_id"),_.call(null!=(t="undefined"!=typeof window&&null!==window?window.currentUserV2.get("user_spons_question_ids"):void 0)?t:[],e)>=0}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._PromoteQuestionCardView")}}).prototype.rule={"._is-promoted=":function(){if(!this.isPromoted())return""},"._not-promoted=":function(){if(this.isPromoted())return""}},e}.call(this),e.prototype.events={"click ._promote-question-link":function(e){return new p({model:this.model})},"mouseover ._promote-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.tooltip=new d({follows:e.target})}},e}.call(this),p=function(){class e extends l{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,{"change repaint":this.update}),analytics.track("Promote Question Modal Opened")}isPromoted(){var e,t;return e=this.model.get("question_id"),_.call(null!=(t="undefined"!=typeof window&&null!==window?window.currentUserV2.get("user_spons_question_ids"):void 0)?t:[],e)>=0}isLoggedIn(){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2)?e.id:void 0}getAvailableKarma(){var e,t;return this.isLoggedIn()?(("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2.get("user_contribs_obj"))?e.karma_total:void 0)||0)-(("undefined"!=typeof window&&null!==window&&null!=(t=window.currentUser.get("user_contribs_obj"))?t.karma_spent_total:void 0)||0):0}hasSufficientKarma(){return this.getAvailableKarma()-this.getPromotionCost()>=0}getPromotionCost(){return this.model.get("promote_question_cost")||a}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._PromoteQuestionModalView")}}).prototype.rule={"._is-promoted=":function(){if(!this.isPromoted())return""},"._not-promoted=":function(){if(this.isPromoted())return""},"._is-logged-in=":function(){if(!this.isLoggedIn())return""},"._not-logged-in=":function(){if(this.isLoggedIn())return""},"._has-sufficient-karma=":function(){if(!this.hasSufficientKarma())return""},"._not-sufficient-karma=":function(){if(this.hasSufficientKarma())return""},"._is-promoted-or-insufficient-karma=":function(){if(!this.isPromoted()&&this.hasSufficientKarma())return""},"._user-available-karma=":function(){return y(this.getAvailableKarma())},"._promote-karma-cost=":function(){return this.getPromotionCost()},"._not-sufficient-karma-class@class+":function(){if(!this.hasSufficientKarma())return"insufficient"},"._PromoteQuestionModalUserView=":function(){return new c({model:"undefined"!=typeof window&&null!==window?window.currentUser:void 0})}},e}.call(this),e.prototype.events={"click ._promote-question-link":function(e){var t,n,i,o,r,s;if(s=("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)||!this.hasSufficientKarma())return this.$("._promote-question-link").addClass("loading"),this.$("._promote-error-message").addClass("hidden"),o=$.Deferred(),v.delay(()=>o.resolve(),2e3),r=`/topics/${this.model.get("t_id")}/promote/${s}`,n=$.ajax({url:r,type:"POST"}),i=(()=>{var e;return this.$("._promote-question-link").removeClass("loading"),this.model.set({promoted:!0},{silent:!0}),this.update(),this.model.trigger("questionPromoted"),"undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2)?e.fetch():void 0}),t=(()=>(this.$("._promote-question-link").removeClass("loading"),this.$("._promote-error-message").removeClass("hidden"))),$.when(n,o).then(i,t),analytics.track("Promote Question Requested")},"click ._login-link":function(e){var t;return e.preventDefault(),t=new s({ContentView:o}),this.listenToOnce(t,"login",this.update)},"click ._signup-link":function(e){var t;return e.preventDefault(),t=new s({ContentView:r}),this.listenToOnce(t,"login",this.update)}},e}.call(this),c=function(){class e extends w{isLoggedIn(){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2)?e.id:void 0}}return e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._PromoteQuestionModalUserView")}}).prototype.rule={"._is-logged-in=":function(){if(!this.isLoggedIn())return""},"._not-logged-in=":function(){if(this.isLoggedIn())return""}},e}.call(this),e}.call(this),d=function(){class e extends m{}return e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._PromoteQuestionTooltipView")}},e}.call(this),t.exports={PromoteQuestionCardView:u,PromoteQuestionModalView:p,PromoteQuestionModalUserView:c,PromoteQuestionTooltipView:d}},{"../../models":34,"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../models/user-view":207,"./login-modal-view":115,"./modal-view":122,"./tooltip-view":167,underscore:448}],135:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b;({QuestionThreadView:g}=e("../threads/question-thread-view")),({OptionListView:s}=e("../lists/option-list-view")),({TagListView:v}=e("../lists/tag-list-view")),({TooltipView:_}=e("../components/tooltip-view")),({FABRecommendQuestionLevelMicroButtonView:r}=e("../components/fab-view")),({QuestionView:w}=e("../models/question-view")),({OptionView:l}=e("../models/option-view")),({TagView:y}=e("../models/tag-view")),({EventView:o,EventUserView:i}=e("../models/event-view")),({UserView:V}=e("../models/user-view")),({Topic:x}=e("../../models")),({shortenNumber:b,improveURL:R}=e("../../utils/transforms")),e("urijs"),f=function(){class e extends w{}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._QuestionCardView")}}).prototype.rule={"._has-more-options=":function(){if(!(this.model.get("viewpoints").count()>=4))return""},"._has-multi-more-options=":function(){if(!(this.model.get("viewpoints").count()>4))return""},"._more-options-count=":function(){return this.model.get("viewpoints").count()-3},"._has-more-options-mobile=":function(){if(!(this.model.get("viewpoints").count()>=2))return""},"._has-multi-more-options-mobile=":function(){if(!(this.model.get("viewpoints").count()>2))return""},"._more-options-count-mobile=":function(){return this.model.get("viewpoints").count()-1},"._QuestionCardOptionListView=":function(){return new u({collection:this.model.get("viewpoints")})},"._QuestionCardStatsView=":function(){return new p({model:this.model})},"._FABRecommendQuestionLevelMicroButtonView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),a=function(){class e extends g{}return e.prototype.ItemView=f,e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._QuestionCardListView")}},e}.call(this),p=function(){class e extends w{}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._QuestionCardStatsView")}}).prototype.rule={"._has-recommendations=":function(){if(!this.model.get("optionsRecommendationCount"))return""},"._question-options-recommendation-count=":function(){return b(this.model.get("optionsRecommendationCount"))},"._QuestionCardTagListView=":function(){return new d({collection:this.model.get("tags")})}},e}.call(this),e}.call(this),c=function(){class e extends l{}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._QuestionCardOptionView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._is-trending=":function(){if(!this.model.get("isTrending"))return""}},e}.call(this),e.prototype.events={"mouseover ._is-trending":function(e){return new m({model:this.model,follows:e.currentTarget})}},e}.call(this),m=function(){class e extends _{}return e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._QuestionCardTooltipTrendingView")}},e}.call(this),u=function(){class e extends s{}return e.prototype.limit=3,e.prototype.ItemView=c,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._QuestionCardOptionListView")}}).prototype.rule={"._question-link@href":function(){var e;return e=this.collection.parents("topic"),R(e,null!=e?e.get("communityURL"):void 0)},"._needs-more-options=":function(){if(this.collection.count()>=3)return""}},e}.call(this),e.prototype.events={"click ._add-option-link":function(e){return e.preventDefault(),e.stopPropagation(),this.collection.parents("topic").navigate({viewOptions:{openToaster:!0}})}},e}.call(this),h=function(){class e extends y{}return e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._QuestionCardTagView")}},e}.call(this),d=function(){class e extends v{}return e.prototype.limit=3,e.prototype.ItemView=h,e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._QuestionCardTagListView")}}).prototype.rule={"._has-more-tags=":function(){if(!(this.collection.length>this.limit))return""},"._more-tags-count=":function(){return this.collection.length-this.limit}},e}.call(this),e}.call(this),t.exports={QuestionCardView:f,QuestionCardListView:a,QuestionCardStatsView:p,QuestionCardOptionView:c,QuestionCardTooltipTrendingView:m,QuestionCardOptionListView:u,QuestionCardTagView:h,QuestionCardTagListView:d}},{"../../models":34,"../../utils/transforms":89,"../components/fab-view":104,"../components/tooltip-view":167,"../lists/option-list-view":175,"../lists/tag-list-view":182,"../models/event-view":192,"../models/option-view":200,"../models/question-view":201,"../models/tag-view":206,"../models/user-view":207,"../threads/question-thread-view":257,urijs:452}],136:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f;({QuestionView:u}=e("../models/question-view")),({QuestionTagSelectorView:a}=e("../components/question-tag-selector-view")),({FancyInputMixinView:r}=e("../mixins/fancy-input-mixin-view")),({ExpandingTextareaMixinView:o}=e("../mixins/expanding-textarea-mixin-view")),({TagList:p,CommentList:i}=e("../../collections")),({Topic:d,TopicEdit:h,Tag:c}=e("../../models")),({tagData:f}=e("../../utils/data")),m=e("underscore"),l=function(){class e extends u{initialize(){var e,t,n;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return e=this.$("._question-title-input"),this.setFancyInputClass(e),m.defer(()=>this.adjustTextareaHeight(e)),(t=e.get(0)).focus(),n=t.value.length,t.setSelectionRange(n,n),this.listenTo(this.getChildrenByView(a)[0],"tagsChanged",this.setSubmittable)}isDirty(){return this.$("._question-title-input").val()!==this.model.get("revision").get("title")||!m.isEqual(this.model.get("tags").pluck("id").sort(),m.pluck(this.getCurrentlySelectedTags(),"id").sort())}setSubmittable(){return this.isDirty()?$("._submit-question-edit-link").prop("disabled",!1):$("._submit-question-edit-link").prop("disabled",!0)}getTags(){return this.model.get("tags")}getCurrentlySelectedTags(){var e;return null!=(e=this.getChildrenByView(a)[0])?e.getSelectedTags():void 0}}return e.prototype.Model=d,e.prototype.mixin(r),e.prototype.mixin(o),e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._QuestionEditorView")}}).prototype.rule={"._question-title-input":function(){return this.model.get("revision").get("title")},"._QuestionTagSelectorView=":function(){return new s}},e}.call(this),e.prototype.events=m.assign({},r.prototype.events,o.prototype.events,{"input ._question-title-input":function(){return this.setSubmittable()},"submit ._edit-question-form":function(e){var t,n,i,o,r,s;if(e.preventDefault(),this.isDirty())return analytics.track("Edit Question Form Submitted"),t={revision:this.model.get("revision").clone({deep:!0})},n={collection:this.model.get("comments")},(s=new h(t,n)).get("revision").set({title:this.$("._question-title-input").val()}),o=new p(null!=(i=this.getChildrenByView(a)[0])?i.getSelectedTags():void 0),s.set("tags",o,{silent:!0}),s.save(),(r=this.$("._submit-question-edit-link")).addClass("Loading"),s.once("sync",e=>e.parents("topic").navigate({callback:()=>r.removeClass("Loading")})),s.once("saveError",e=>r.removeClass("Loading"))},"keydown ._question-title-input":function(e){if(13===e.keyCode)return e.preventDefault()}}),e}.call(this),s=function(){class e extends a{doneFetch(){var e;return super.doneFetch(...arguments),e=this.getParentByView(l).getTags(),this.setSelectedTags(e)}}return e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),t.exports={QuestionEditorView:l,QuestionEditorTagSelectorView:s}},{"../../collections":2,"../../models":34,"../../utils/data":86,"../components/question-tag-selector-view":139,"../mixins/expanding-textarea-mixin-view":184,"../mixins/fancy-input-mixin-view":185,"../models/question-view":201,underscore:448}],137:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V;e("../../rule"),e("urijs"),_=e("moment"),({BaseView:o}=e("../base-view")),({QuestionView:d}=e("../models/question-view")),({TagView:w}=e("../models/tag-view")),({ListView:r}=e("../lists/list-view")),({TagListView:g}=e("../lists/tag-list-view")),({WatchView:v}=e("../components/watch-view")),({ReactionBannerQuestionNeedsClarificationView:m,ReactionBannerQuestionDuplicateView:h,ReactionBannerQuestionNotAFitView:f}=e("./reaction-banner-view")),({improveURL:y,splitUnit:V,shortenNumber:x}=e("../../utils/transforms")),({BADGES:i}=e("../../utils/constants")),c=function(){class e extends d{getFilteredOptions(){return this.model.getCollection("question_option_ids").filter(function(e){return e.get("badge")!==i.flagged})}}return e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._QuestionHeaderView")}}).prototype.rule={"._total-option-count=":function(){return V(x(this.getFilteredOptions().length,0)).value},"._total-option-count-unit=":function(){return V(x(this.getFilteredOptions().length,0)).unit},"._recs-count=":function(){return V(x(this.model.getOptionRecCount(),0)).value},"._recs-count-unit=":function(){return V(x(this.model.getOptionRecCount(),0)).unit},"._update-time-ago-value=":function(){var e;return(e=_(new Date(this.model.get("question_updated_obj").updated_timestamp),null,"en-abbr")).diff()<-864e5?e.format("MMM Do, YYYY"):e.fromNow(!0)},"._datetime@datetime":function(){if(null!=this.model.get("question_updated_obj"))return new Date(this.model.get("question_updated_obj").updated_timestamp).toISOString()},"._datetime@content":function(){if(null!=this.model.get("question_updated_obj"))return new Date(this.model.get("question_updated_obj").updated_timestamp).toISOString()},"._created-datetime@content":function(){return new Date(this.model.get("created_timestamp")).toISOString()},"._QuestionHeaderTagListView=":function(){return new a({collection:this.model.getCollection("question_tag_ids")})},"._QuestionHeaderWatchView=":function(){return new p({model:this.model})},"._QuestionHeaderSocialShareView=":function(){return new l({model:this.model})},"._ReactionBannerQuestionNeedsClarificationView=":function(){return new m({collection:this.model.getCollection("question_reaction_ids")})},"._ReactionBannerQuestionDuplicateView=":function(){return new h({collection:this.model.getCollection("question_reaction_ids")})},"._ReactionBannerQuestionNotAFitView=":function(){return new f({collection:this.model.getCollection("question_reaction_ids")})}},e}.call(this),e}.call(this),u=function(){class e extends w{}return e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._QuestionHeaderTagView")}},e}.call(this),a=function(){class e extends g{filter(e){return!e.get("isCommunity")}}return e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._QuestionHeaderTagListView")}}).prototype.rule={"._question-edit-link@href":function(){return this.collection.getParent().getTopicEditPageURL()}},e}.call(this),e.prototype.ItemView=u,e}.call(this),p=function(){class e extends v{}return e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._QuestionHeaderWatchView")}},e}.call(this),l=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._QuestionHeaderSocialShareView")}},e.prototype.events={"click ._share-google-link":function(e){return this.model.postToGoogle()},"click ._share-facebook-link":function(e){return this.model.postToFacebook()},"click ._share-twitter-link":function(e){return this.model.postToTwitter()}},e}.call(this),s=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._QuestionHeaderMinimalView")}},e}.call(this),function(){class e extends d{getCurrentOption(){return this.model.getCollectoin("question_option_ids").find(function(e){return e.get("option_section_ids")})}}return e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._QuestionHeaderMinimalNavigationView")}}).prototype.rule={"._is-question-page=":function(){if(this.getCurrentOption())return""},"._not-question-page=":function(){if(!this.getCurrentOption())return""},"._option-link@href":function(){var e;return null!=(e=this.getCurrentOption())?e.getViewpointPageURL():void 0},"._option-title=":function(){var e;return null!=(e=this.getCurrentOption())?e.get("title"):void 0}},e}.call(this),e}.call(this),t.exports={QuestionHeaderView:c,QuestionHeaderTagView:u,QuestionHeaderTagListView:a,QuestionHeaderWatchView:p,QuestionHeaderSocialShareView:l,QuestionHeaderMinimalView:s}},{"../../rule":81,"../../utils/constants":85,"../../utils/transforms":89,"../base-view":91,"../components/watch-view":168,"../lists/list-view":173,"../lists/tag-list-view":182,"../models/question-view":201,"../models/tag-view":206,"./reaction-banner-view":140,moment:441,urijs:452}],138:[function(e,t,n){var i,o,r,s,l,a,u,c,p;({RecommendationFormView:a,RecommendationFormUserView:l}=e("../components/recommendation-form-view")),({RecommendationDropdownView:s}=e("../components/recommendation-dropdown-view")),({Topic:c}=e("../../models")),({ViewpointList:p}=e("../../collections")),({RecommendationPanelManagerMixinView:u}=e("../mixins/recommendation-panel-manager-mixin-view")),r=function(){class e extends a{initialize(){if(super.initialize(...arguments),this.fetched=!1,this.userChanged=!0,"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"change",()=>(this.update(),this.userChanged=!0))}fetchDone(){return this.userChanged=!1,this.fetched||(this.model.get("viewpoints").each(e=>this.managePanelForOption(e)),this.model.get("viewpoints").each(e=>"function"==typeof this.onVoteListener?this.onVoteListener(e):void 0),this.model.get("viewpoints").on("add",e=>(this.managePanelForOption(e),"function"==typeof this.onVoteListener?this.onVoteListener(e):void 0))),this.fetched=!0}createPopupView(e){var t;return null!=this.popup&&this.stopListening(this.popup,"fetched",this.fetchDone),t=new(this.getPopupView())({collection:this.model.get("viewpoints"),follows:e,align:"left",searchQuery:e.val(),hasFetched:this.fetched,userChanged:this.userChanged}),!this.userChanged&&this.fetched||this.listenTo(t,"fetched",this.fetchDone),t}getPopupView(){return i}}return e.prototype.Model=c,e.prototype.Collection=null,e.prototype.mixin(u),e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._RecommendationFormUserView=":function(){return new o({model:"undefined"!=typeof window&&null!==window?window.currentUser:void 0})}},e}.call(this),e}.call(this),i=function(){class e extends s{initialize(e={},t="Question Feed Recommendation Vote"){var n,i,o,r;if(super.initialize(this.options,t),"undefined"!=typeof window&&null!==window)return!this.options.hasFetched||this.options.userChanged?(this.showLoadingState(),r=$.Deferred(),n=$.Deferred(),o=this.collection.parents("topic"),this.options.userChanged?window.currentUser.fill(o,{silent:!0,callback:r.resolve,errorCallback:r.reject}):r.resolve(),this.options.hasFetched?n.resolve():o.fetch({silent:!0,success:n.resolve,error:n.reject}),i=(()=>(this.update(),this.trigger("fetched"),this.hideLoadingState())),$.when(n,r).done(i).fail(function(e){return $.when(n).done(i)})):void 0}}return e.prototype.Collection=p,e.prototype.Rule=class extends s.prototype.Rule{},e}.call(this),o=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._QuestionLevelRecommendationFormUserView")}},e}.call(this),t.exports={QuestionLevelRecommendationFormView:r,QuestionLevelRecommendationDropdownView:i,QuestionLevelRecommendationFormUserView:o}},{"../../collections":2,"../../models":34,"../components/recommendation-dropdown-view":146,"../components/recommendation-form-view":147,"../mixins/recommendation-panel-manager-mixin-view":188}],139:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R;({BaseView:i}=e("../base-view")),({SearchablePopupInvokerView:m}=e("../components/searchable-popup-invoker-view")),({DropdownView:o}=e("../components/dropdown-view")),({SearchableDropdownView:h,SearchableDropdownListView:d}=e("../components/searchable-dropdown-view")),({TagSelectorActiveTagListView:w,TagSelectorDropdownItemView:v}=e("../components/tag-selector-view")),({TagView:y}=e("../models/tag-view")),({FancyInputMixinView:r}=e("../mixins/fancy-input-mixin-view")),({Tag:f}=e("../../models")),({TagList:g}=e("../../collections")),_=e("underscore"),({tagData:R,keyCodes:V}=e("../../utils/data")),({highlightText:x}=e("../../utils/transforms")),p=function(){class e extends i{initialize(e){if(this.collection=new g([],{url:"/tags"}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.fetchTagList()}fetchTagList(){return this.$el.addClass("Loading"),this.collection.fetch({silent:!0,success:()=>(this.$el.removeClass("Loading"),"function"==typeof this.doneFetch?this.doneFetch():void 0),error:()=>{var e;return this.collection=new g(function(){var t,n,i;for(i=[],t=0,n=R.length;t<n;t++)e=R[t],i.push(new f(e));return i}()),"function"==typeof this.doneFetch&&this.doneFetch(),this.update(),this.$el.removeClass("Loading")}})}doneFetch(){return this.collection.trigger("repaint"),this.listenTo(this.collection,"repaint add",this.trigger.bind(this,"tagsChanged"))}getSelectedTags(){return this.collection.filter(function(e){return e.get("selected")})}setSelectedTags(e){var t;if((t=e.clone()).count())return t.forEach(e=>{return this.collection.findWhere({id:e.get("id")}).set({selected:!0},{silent:!0})}),this.update()}}return e.prototype.Collection=g,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._QuestionTagSelectorView")}}).prototype.rule={"._QuestionTagSelectorSelectedTagListView=":function(){return new c({collection:this.collection})},"._QuestionTagSelectorSearchFormView=":function(){return new u({collection:this.collection})}},e}.call(this),e}.call(this),c=function(){class e extends w{}return e.prototype.Collection=g,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._QuestionTagSelectorSelectedTagListView")}},e}.call(this),u=function(){class e extends m{createPopupView(e){return new a({collection:this.collection,follows:e,searchQuery:e.val()})}}return e.prototype.Collection=g,e.prototype.mixin(r),e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._QuestionTagSelectorSearchFormView")}},e.prototype.events=_.assign({},r.prototype.events),e}.call(this),a=function(){class e extends h{position(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0)),super.position(...arguments)}updateSearch(e){var t;if(super.updateSearch(...arguments),"INPUT"===(null!=(t=this.follows.get(0))?t.tagName:void 0))return this.follows.trigger("input")}}return e.prototype.Collection=g,e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._QuestionTagSelectorDropdownView")}}).prototype.rule={"._QuestionTagSelectorDropdownListView=":function(){return new l({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e}.call(this),s=function(){class e extends v{}return e.prototype.Model=f,e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{}).prototype.rule={"._name=":function(){var e;return e=this.model.get("name"),x(e,this.options.regex)}},e}.call(this),e}.call(this),l=function(){class e extends d{initialize(){if(super.initialize(...arguments),this.options.searchQuery)return _.defer(()=>{var e;return null!=(e=this.getParentByView(o))?e.setSelectedItemByIndex(0):void 0})}filter(e){return!e.get("selected")&&super.filter(...arguments)}getSearchValue(e){return e.get("name")}createViewOptions(){return _.extend(super.createViewOptions(...arguments),{searchQuery:this.options.searchQuery})}search(){var e;return super.search(...arguments),null!=(e=this.getParentByView(o))?e.setSelectedItemByIndex(0):void 0}submitNewTag(){var e,t,n,i;if(this.options.searchQuery)return t=this.options.searchQuery,(e=this.collection.findWhere({name:t}))?(e.set({selected:!0},{silent:!0}),this.collection.trigger("repaint"),void(null!=(i=this.getParentByView(o))&&i.close())):(analytics.track("New Tag Created",{label:t}),n=new f({name:t},{collection:this.collection}),this.$el.addClass("Loading"),this.hideErrorState(),n.save(null,{silent:!0,add:!1,success:e=>{var t,n;return this.$el.removeClass("Loading"),e.set({selected:!0},{silent:!0}),t=this.collection.count(),this.collection.add(e,{merge:!0}),t===this.collection.count()&&this.collection.trigger("repaint"),null!=(n=this.getParentByView(o))?n.close():void 0},error:e=>(this.showErrorState(),this.$el.removeClass("Loading"))}))}showErrorState(){return this.$("._has-error").removeClass("hidden"),this.$("._no-error").addClass("hidden")}hideErrorState(){return this.$("._no-error").removeClass("hidden"),this.$("._has-error").addClass("hidden")}}return e.prototype.Collection=g,e.prototype.ItemView=s,e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._QuestionTagSelectorDropdownListView")}}).prototype.rule={"._has-search=":function(){if(!this.options.searchQuery)return""},"._new-tag-name=":function(){return this.options.searchQuery}},e}.call(this),e.prototype.events={"click ._add-new-tag-link":function(e){return this.submitNewTag()},"keydown document":function(e){var t;if(e.keyCode===V.ENTER&&(null==(t=this.getParentByView(o))||!t.getSelectedItem().length))return e.preventDefault(),e.stopImmediatePropagation(),analytics.track("Tag Creation On Enter Experiment",{label:this.options.searchQuery})}},e}.call(this),t.exports={QuestionTagSelectorView:p,QuestionTagSelectorSelectedTagListView:c,QuestionTagSelectorSearchFormView:u,QuestionTagSelectorDropdownView:a,QuestionTagSelectorDropdownItemView:s,QuestionTagSelectorDropdownListView:l}},{"../../collections":2,"../../models":34,"../../utils/data":86,"../../utils/transforms":89,"../base-view":91,"../components/dropdown-view":101,"../components/searchable-dropdown-view":154,"../components/searchable-popup-invoker-view":155,"../components/tag-selector-view":165,"../mixins/fancy-input-mixin-view":185,"../models/tag-view":206,underscore:448}],140:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;h=e("urijs"),e("../../rule"),({BaseView:i}=e("../base-view")),({ReactionCollection:d}=e("../../collections/index")),({improveURL:m}=e("../../utils/transforms")),p=function(){class e extends i{}return e.prototype.Collection=d,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionBannerView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.length)return""}},e}.call(this),e}.call(this),c=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionBannerQuestionView")}}).prototype.rule={"._comment-link@href":function(){var e,t;return t=this.collection.getParent(),e=this.collection.find(function(e){return e.get("comment_id")}),new h(t.getTopicCommentPageURL()).hash((null!=e?e.get("comment_id"):void 0)||"")}},e}.call(this),e}.call(this),a=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionNeedsClarificationView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.findWhere({reaction_type:"needs-improvement"}))return""}},e}.call(this),e}.call(this),l=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionDuplicateView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.findWhere({reaction_type:"duplicate"}))return""}},e}.call(this),e}.call(this),u=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionNotAFitView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.findWhere({reaction_type:"not-a-fit"}))return""}},e}.call(this),e}.call(this),s=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionBannerOptionView")}}).prototype.rule={"._comment-link@href":function(){var e,t;return t=this.collection.getParent(),e=this.collection.find(function(e){return e.get("comment_id")}),new h(t.getViewpointCommentPageURL()).hash((null!=e?e.get("comment_id"):void 0)||"")}},e}.call(this),e}.call(this),o=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._ReactionBannerOptionFlagView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.findWhere({reaction_type:"flag"}))return""}},e}.call(this),e}.call(this),r=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._ReactionBannerOptionOutOfDateView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.findWhere({reaction_type:"out-of-date"}))return""}},e}.call(this),e}.call(this),t.exports={ReactionBannerView:p,ReactionBannerQuestionView:c,ReactionBannerQuestionNeedsClarificationView:a,ReactionBannerQuestionDuplicateView:l,ReactionBannerQuestionNotAFitView:u,ReactionBannerOptionView:s,ReactionBannerOptionFlagView:o,ReactionBannerOptionOutOfDateView:r}},{"../../collections/index":7,"../../rule":81,"../../utils/transforms":89,"../base-view":91,urijs:452}],141:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C;({BaseView:i}=e("../base-view")),({ReactionTooltipView:V,ReactionTooltipAgreeView:_,ReactionTooltipDisagreeView:x}=e("./reaction-tooltip-view")),({ReactionMenuDropdownView:m,ReactionMenuSectionStepView:w,ReactionMenuNeedsImprovementStepView:g,ReactionMenuFlagStepView:f}=e("./reaction-menu-dropdown-view")),({ReactionCollection:h,RecCollection:R}=e("../../collections/index")),({Reaction:o,RecPageQuery:b}=e("../../models/index")),C=e("underscore"),c=function(){class e extends i{}return e.prototype.Collection=h,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionButtonSetView")}}).prototype.rule={"._ReactionButtonNeedsImprovementView=":function(){return new a({collection:this.collection})},"._ReactionButtonOutOfDateView=":function(){return new u({collection:this.collection})},"._ReactionButtonFlagView=":function(){return new l({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._reaction-button-set-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return $(e.currentTarget).addClass("selected"),this.popup=new(function(){var e;return(e=class extends m{}).prototype.DefaultStepView=w,e}.call(this))({model:this.model,follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return $(e.currentTarget).removeClass("selected")})}},e}.call(this),d=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change",this.update)}filter(e){return e.get("reaction_type")===this.type}isReacted(){return null!=this.collection.getUserReaction("undefined"!=typeof window&&null!==window?window.currentUserV2:void 0,this.type)}getLegacyModel(){var e;return e={duplicate:"duplicate",flag:"flag","needs-improvement":"needsImprovement","needs-more-info":"needsMoreInfo","not-a-fit":"notAFit","out-of-date":"outOfDate",useful:"useful",funny:"funny"},this.collection.getParent().getLegacyModel().get("reactionSet").get(e[this.type])}setReaction(e){var t;return t=this.getLegacyModel(),this.$el.addClass("Loading"),t.react(e).done(()=>{return this.collection.store.ensureQuery(b,{rec_id:this.collection.getParent("rec_id")}).fetch({success:()=>(this.update(),this.$el.removeClass("Loading"))})})}}return e.prototype.Collection=h,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionButtonView")}}).prototype.rule={"._has-items=":function(){if(!this.collection.filter(this.filter.bind(this)).length)return""},"._reaction-count=":function(){return this.collection.filter(this.filter.bind(this)).length||""},"._reacted-class@class+":function(){if(this.collection.filter(this.filter.bind(this)).find(function(e){return e.get("user_id")===("undefined"!=typeof window&&null!==window?window.currentUserV2.get("user_id"):void 0)}))return"reacted"}},e}.call(this),e.prototype.showTooltip=C.debounce(function(e){if(this.mouseover)return new V({collection:this.collection,type:this.type,follows:e.currentTarget})},300),e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){return this.showTooltip.call(this,e,this.collection)},"mouseout ._reaction-tooltip-link":function(e){return this.mouseover=!1},"click ._reaction-toggle-link":function(e){return this.setReaction(!this.isReacted()),"function"==typeof this.sendReactedAnalytics?this.sendReactedAnalytics():void 0}},e}.call(this),r=function(){var e;class t extends d{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"vote",()=>this.fetching=!1)}}return t.prototype.Collection=R,t.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._ReactionButtonAgreeView")}}).prototype.rule={"._reaction-count=":function(){return this.collection.meta("upvotes")},"._reacted-class@class+":function(){if(this.collection.meta("delta")>0)return"reacted"}},e}.call(this),e=C.debounce(function(e,t){if(this.mouseover)return new _({collection:t,follows:e.currentTarget})},300),t.prototype.events={"mouseover ._reaction-tooltip-link":function(t){var n;return this.mouseover=!0,n=this.collection.parent.get("reactionSet").get("upvote"),this.fetching||(n.fetch({silent:!0,success:()=>n.trigger("reset")}),this.fetching=!0),e.call(this,t,n)},"click ._reaction-toggle-link":function(e){return this.collection.meta("delta")>0?this.collection.vote(0):this.collection.vote(1)}},t}.call(this),s=function(){var e;class t extends d{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"vote",()=>this.fetching=!1)}}return t.prototype.Collection=R,t.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._ReactionButtonDisagreeView")}}).prototype.rule={"._reaction-count=":function(){return this.collection.meta("downvotes")},"._reacted-class@class+":function(){if(this.collection.meta("delta")<0)return"reacted"}},e}.call(this),e=C.debounce(function(e,t){if(this.mouseover)return new x({collection:t,follows:e.currentTarget})},300),t.prototype.events={"mouseover ._reaction-tooltip-link":function(t){var n;return this.mouseover=!0,n=this.collection.parent.get("reactionSet").get("downvote"),this.fetching||(n.fetch({silent:!0,success:()=>n.trigger("reset")}),this.fetching=!0),e.call(this,t,n)},"click ._reaction-toggle-link":function(e){return this.collection.meta("delta")<0?this.collection.vote(0):this.collection.vote(-1)}},t}.call(this),a=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._ReactionButtonNeedsImprovementView")}},e.prototype.type="needs-improvement",e.prototype.events={"click ._reaction-toggle-link":function(e){var t;return this.isReacted()?this.setReaction(!1):null!=(t=this.popup)&&t.attached?void 0:this.popup=new(function(){var e;return(e=class extends m{}).prototype.DefaultStepView=g,e}.call(this))({collection:this.collection,follows:this.$("._dropdown-target")})}},e}.call(this),u=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._ReactionButtonOutOfDateView")}},e.prototype.type="out-of-date",e}.call(this),l=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._ReactionButtonFlagView")}},e.prototype.type="flag",e.prototype.events={"click ._reaction-toggle-link":function(e){var t;return this.isReacted()?this.setReaction(!1):null!=(t=this.popup)&&t.attached?void 0:this.popup=new(function(){var e;return(e=class extends m{}).prototype.DefaultStepView=f,e}.call(this))({collection:this.collection,follows:this.$("._dropdown-target")})}},e}.call(this),p=function(){class e extends d{sendReactedAnalytics(e=""){var t;return t=e?{label:e}:{},analytics.track("Helpful Reaction Clicked",t)}}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._ReactionButtonUsefulView")}},e.prototype.type="useful",e}.call(this),y=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionTextButtonUsefulView")}},e.prototype.type="useful",e}.call(this),v=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionReadOnlyButtonUsefulView")}},e}.call(this),t.exports={ReactionButtonSetView:c,ReactionButtonView:d,ReactionButtonAgreeView:r,ReactionButtonDisagreeView:s,ReactionButtonNeedsImprovementView:a,ReactionButtonOutOfDateView:u,ReactionButtonFlagView:l,ReactionButtonUsefulView:p,ReactionTextButtonUsefulView:y,ReactionReadOnlyButtonUsefulView:v}},{"../../collections/index":7,"../../models/index":64,"../base-view":91,"./reaction-menu-dropdown-view":142,"./reaction-tooltip-view":143,underscore:448}],142:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y;({BaseView:i}=e("../base-view")),({DropdownView:o}=e("./dropdown-view")),({Reaction:p,ReactionSet:E,Section:D}=e("../../models")),({ReactionList:h,VoteList:Q}=e("../../collections")),({LoginModalView:l,LoginModalAnonymousRegisterContentView:r,LoginModalRegisterContentView:s}=e("./login-modal-view")),({NotifyPopupView:a}=e("./notify-popup-view")),({ToasterView:j,ToastEditOptionView:q,ToastSectionView:F,ToastEditSectionView:N}=e("../components/toaster-view")),({SpecEditorModalView:B}=e("../components/spec-editor-modal-view")),z=e("urijs"),H=e("clipboard-polyfill"),({improveURL:W,shortenNumber:Y}=e("../../utils/transforms")),({QuestionModel:c,OptionModel:u,SectionModel:U}=e("../../models/index")),({ReactionCollection:d}=e("../../collections/index")),m=function(){class e extends o{initialize(e){return(null!=e?e.DefaultStepView:void 0)&&(this.DefaultStepView=null!=e?e.DefaultStepView:void 0),this.activeStepView=this.makeDefaultStep(),super.initialize(...arguments)}makeDefaultStep(){if(this.DefaultStepView)return new this.DefaultStepView({model:this.model,collection:this.collection,containerView:this})}setStep(e,t){return t=_.extend({containerView:this},t),e&&analytics.track("Reaction Dropdown Modal Second Step",{reactionType:e.prototype.classID}),this.activeStepView=e?new e(t):this.makeDefaultStep(),this.closable=this.activeStepView.isClosable,this.update(),this.position()}}return e.prototype.options={align:"right"},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._ReactionMenuDropdownView")}}).prototype.rule={"._ReactionMenuStepView=":function(){var e;return null!=(e=this.activeStepView)?e:""}},e}.call(this),e.prototype.events={"click ._default-step-link":function(e){return e.stopImmediatePropagation(),this.setStep()}},e}.call(this),O=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionMenuStepView")}}).prototype.rule={"._not-default-step=":function(){if(this instanceof this.options.containerView.DefaultStepView)return""},"._is-registered=":function(){if(!window.currentUser.get("username")||window.currentUser.get("anonymous"))return""},"._not-registered=":function(){if(window.currentUser.get("username")&&!window.currentUser.get("anonymous"))return""}},e}.call(this),e.prototype.isClosable=!0,e.prototype.events={"click ._claim-link":function(e){return e.preventDefault(),new l({ContentView:r,model:window.currentUser})},"click ._register-link":function(e){return e.preventDefault(),new l({ContentView:s})}},e}.call(this),M=function(){class t extends O{}return t.prototype.Model=c,t.prototype.Rule=function(){var t;return(t=class extends O.prototype.Rule{template(){return template("._ReactionMenuQuestionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.getCollection("question_comment_ids").length)return""},"._summary-link@href":function(){return this.model.getTopicPageURL()},"._compare-link@href":function(){return this.model.getTopicComparePageURL()},"._edit-link@href":function(){return this.model.getTopicEditPageURL()},"._comment-link@href":function(){return this.model.getTopicCommentPageURL()},"._comment-count=":function(){return this.model.getCollection("question_comment_ids").length},"._history-link@href":function(){return this.model.getTopicHistoryPageURL()},"._ReactionMenuNeedsClarificationItemView=":function(){return new x({collection:this.model.getCollection("question_reaction_ids")})},"._ReactionMenuDuplicateItemView=":function(){return new f({collection:this.model.getCollection("question_reaction_ids")})},"._ReactionMenuNotAFitItemView=":function(){return new C({collection:this.model.getCollection("question_reaction_ids")})},"._QuestionHeaderWatchView=":function(){var t;return({QuestionHeaderWatchView:t}=e("./question-header-view")),new t({collection:this.model.getLegacyModel().get("subscriptions")})}},t}.call(this),t.prototype.events={"click ._share-google-link":function(e){return this.model.getLegacyModel().postToGoogle(),this.getParentByView(m).close()},"click ._share-facebook-link":function(e){return this.model.getLegacyModel().postToFacebook(),this.getParentByView(m).close()},"click ._share-twitter-link":function(e){return this.model.getLegacyModel().postToTwitter(),this.getParentByView(m).close()},"click ._copy-link":function(e){return H.writeText(location.origin+this.model.getPageURL("Topic")),new a({follows:$("._toaster"),text:"Link Copied!"}),this.getParentByView(m).close()},"click ._show-add-option-link":function(e){return $("._SummaryPageAddOptionView").removeClass("hidden")[0].scrollIntoView()}},t}.call(this),k=function(){class e extends O{}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends O.prototype.Rule{template(){return template("._ReactionMenuOptionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.get("option_comment_ids").length)return""},"._comment-link@href":function(){return this.model.getViewpointCommentPageURL()},"._comment-count=":function(){return Y(this.model.get("option_comment_ids").length)},"._history-link@href":function(){return this.model.getViewpointHistoryPageURL()},"._edit-specs-link@href":function(){var e;return null!=(e=new z(this.model.getViewpointPageURL()))?e.hash("specs").search({openSpecEditorModal:!0}):void 0},"._ReactionMenuOutOfDateItemView=":function(){return new P({collection:this.model.getCollection("option_reaction_ids")})},"._ReactionMenuFlagItemView=":function(){return new w({collection:this.model.getCollection("option_reaction_ids")})}},e}.call(this),e.prototype.events={"click ._edit-option-link":function(e){var t;return null!=(t=window.view.getChildrenByView(j)[0])&&t.setToast(q,{model:this.model.clone()}),this.getParentByView(m).close()},"click ._add-section-link":function(e){var t,n;return(n=new U({title:"",body:"",section_type:"Pro",option_id:this.model.id})).store=this.model.store,null!=(t=window.view.getChildrenByView(j)[0])&&t.setToast(F,{model:n}),this.getParentByView(m).close()},"click ._edit-specs-link":function(e){var t;if(t=new z(location.href).path(),this.model.parents("viewpoint"),t===new z(this.model.getViewpointPageURL()).path())return e.preventDefault(),e.stopPropagation(),new B({model:this.model.getModel("product_id")})}},e}.call(this),I=function(){class e extends O{}return e.prototype.Model=U,e.prototype.Rule=function(){var e;return(e=class extends O.prototype.Rule{template(){return template("._ReactionMenuSectionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.getCollection("section_comment_ids").length)return""},"._is-pro=":function(){if("Pro"!==this.model.get("section_type"))return""},"._is-con=":function(){if("Con"!==this.model.get("section_type"))return""},"._history-link@href":function(){return this.model.getSectionHistoryPageURL()},"._comment-link@href":function(){return this.model.getSectionCommentPageURL()},"._comment-count=":function(){return Y(this.model.getCollection("section_comment_ids").length)},"._ReactionMenuNeedsImprovementItemView=":function(){return new R({collection:this.model.getCollection("section_reaction_ids")})},"._ReactionMenuOutOfDateItemView=":function(){return new P({collection:this.model.getCollection("section_reaction_ids")})},"._ReactionMenuFlagItemView=":function(){return new w({collection:this.model.getCollection("section_reaction_ids")})}},e}.call(this),e.prototype.events={"click ._edit-section-link":function(){var e;return null!=(e=window.view.getChildrenByView(j)[0])&&e.setToast(N,{model:this.model.clone()}),this.getParentByView(m).close()}},e}.call(this),A=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{},e.prototype.Collection=d,e.prototype.isClosable=!1,e.prototype.events={"submit ._reaction-form":function(e){var t,n,i;return e.preventDefault(),t=this.getParentByView(m),i=this.$("._reaction-text-input").val(),n=null!=this.collection.getUserReaction(window.currentUserV2,this.reactionType),this.collection.setReaction(!n,this.reactionType,{text:i,success:function(){return t.close()}})}},e}.call(this),b=function(){class e extends A{}return e.prototype.reactionType="needs-improvement",e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._ReactionMenuNeedsImprovementStepView")}},e}.call(this),V=function(){class e extends A{}return e.prototype.reactionType="needs-improvement",e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._ReactionMenuNeedsClarificationStepView")}},e}.call(this),S=function(){class e extends A{}return e.prototype.reactionType="not-a-fit",e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._ReactionMenuNotAFitStepView")}},e}.call(this),L=function(){class e extends O{}return e.prototype.Collection=d,e.prototype.Rule=class extends O.prototype.Rule{},e.prototype.isClosable=!1,e.prototype.events={"input ._reaction-text-input":function(e){return $(e.currentTarget).val()?this.$("._input-submittable").prop("disabled",!1):this.$("._input-submittable").prop("disabled",!0)},"submit ._reaction-form":function(e){var t,n,i;if(t=this.getParentByView(m),this.$el.addClass("Loading"),e.preventDefault(),i=this.$("._reaction-text-input").val())return n=null!=this.collection.getUserReaction(window.currentUserV2,this.reactionType),this.collection.setReaction(!n,this.reactionType,{text:i,success:function(){return t.close()}})}},e}.call(this),v=function(){class e extends L{}return e.prototype.reactionType="flag",e.prototype.Collection=d,e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._ReactionMenuFlagStepView")}},e}.call(this),g=function(){class e extends L{}return e.prototype.reactionType="duplicate",e.prototype.Collection=d,e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._ReactionMenuDuplicateStepView")}},e}.call(this),T=function(){class e extends L{}return e.prototype.reactionType="out-of-date",e.prototype.Collection=d,e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._ReactionMenuOutOfDateStepView")}},e}.call(this),y=function(){class e extends i{handleReactedLinkClick(e,t,n){var i;return i=this.getParentByView(m),null!=this.collection.getUserReaction(window.currentUserV2,t)?(this.collection.setReaction(!1,t,{success:function(){return i.close()}}),this.getParentByView(O).$el.addClass("Loading")):(e.stopImmediatePropagation(),i.setStep(n,{collection:this.collection}))}}return e.prototype.Collection=d,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionMenuItemView")}}).prototype.rule={"._selected-class@class+":function(){if(this.collection.getUserReaction(window.currentUserV2,this.reactionType))return"selected"}},e}.call(this),e.prototype.events={"click ._reacted-link":function(e){var t,n;return e.preventDefault(),t=this.getParentByView(m),n=null!=this.collection.getUserReaction(window.currentUserV2,this.reactionType),this.collection.setReaction(!n,this.reactionType,{text:text,success:function(){return t.close()}})}},e}.call(this),R=function(){class e extends y{}return e.prototype.reactionType="needs-improvement",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,b)}},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._ReactionMenuNeedsImprovementItemView")}},e}.call(this),x=function(){class e extends R{}return e.prototype.reactionType="needs-improvement",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,V)}},e.prototype.Rule=class extends R.prototype.Rule{template(){return template("._ReactionMenuNeedsClarificationItemView")}},e}.call(this),P=function(){class e extends y{}return e.prototype.reactionType="out-of-date",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,T)}},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._ReactionMenuOutOfDateItemView")}},e}.call(this),w=function(){class e extends y{}return e.prototype.reactionType="flag",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,v)}},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._ReactionMenuFlagItemView")}},e}.call(this),f=function(){class e extends y{}return e.prototype.reactionType="duplicate",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,g)}},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._ReactionMenuDuplicateItemView")}},e}.call(this),C=function(){class e extends y{}return e.prototype.reactionType="not-a-fit",e.prototype.events={"click ._reacted-link":function(e){return this.handleReactedLinkClick(e,this.reactionType,S)}},e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._ReactionMenuNotAFitItemView")}},e}.call(this),t.exports={ReactionMenuDropdownView:m,ReactionMenuStepView:O,ReactionMenuQuestionStepView:M,ReactionMenuOptionStepView:k,ReactionMenuSectionStepView:I,ReactionMenuTextStepView:A,ReactionMenuNeedsImprovementStepView:b,ReactionMenuNeedsClarificationStepView:V,ReactionMenuNotAFitStepView:S,ReactionMenuRequiredTextStepView:L,ReactionMenuFlagStepView:v,ReactionMenuDuplicateStepView:g,ReactionMenuOutOfDateStepView:T,ReactionMenuItemView:y,ReactionMenuNeedsImprovementItemView:R,ReactionMenuNeedsClarificationItemView:x,ReactionMenuOutOfDateItemView:P,ReactionMenuFlagItemView:w,ReactionMenuDuplicateItemView:f,ReactionMenuNotAFitItemView:C}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../components/spec-editor-modal-view":160,"../components/toaster-view":166,"./dropdown-view":101,"./login-modal-view":115,"./notify-popup-view":128,"./question-header-view":137,"clipboard-polyfill":427,urijs:452}],143:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w;w=e("underscore"),({TooltipView:f}=e("./tooltip-view")),({ReactionListView:o}=e("../lists/reaction-list-view")),({UserView:g}=e("../models/user-view")),({BaseView:i}=e("../base-view")),d=function(){class e extends f{initialize(){return super.initialize(...arguments),this.collection.length?analytics.track("Reaction Tooltip Open",{reactionType:this.collection.key}):this.close()}}return e.prototype.options={anchor:"above",align:"center",interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._ReactionTooltipView")}}).prototype.rule={"._ReactionTooltipListView=":function(){return new c({collection:this.collection})}},e}.call(this),e}.call(this),m=function(){class e extends f{initialize(){return super.initialize(...arguments)}}return e.prototype.options={anchor:"above",align:"center",interactive:!0},e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._ReactionTooltipView")}},e}.call(this),s=function(){class e extends m{initialize(){var e;return super.initialize(...arguments),0===(null!=(e=this.collection.getParent().get("section_ranking_obj"))?e.highlight_count_up:void 0)?this.close():analytics.track("Reaction Tooltip Open",{reactionType:"agree"})}}return e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{}).prototype.rule={"._ReactionTooltipListView=":function(){return new r({collection:this.collection})}},e}.call(this),e}.call(this),a=function(){class e extends m{initialize(){var e;return super.initialize(...arguments),0===(null!=(e=this.collection.getParent().get("section_ranking_obj"))?e.highlight_count_down:void 0)?this.close():analytics.track("Reaction Tooltip Open",{reactionType:"disagree"})}}return e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{}).prototype.rule={"._ReactionTooltipListView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),p=function(){class e extends g{}return e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._ReactionTooltipUserView")}},e}.call(this),u=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionTooltipItemView")}}).prototype.rule={"._ReactionTooltipUserView=":function(){return new p({model:this.model.getModel("user_id")})}},e}.call(this),e}.call(this),c=function(){class e extends o{getItems(){var e,t,n;return n=super.getItems(...arguments),(e=window.currentUserV2.id)&&-1!==(t=w.findIndex(n,function(t){return t.getModel("user_id").id===e}))&&n.splice(0,0,n.splice(t,1)[0]),n}}return e.prototype.ItemView=u,e.prototype.limit=5,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._ReactionTooltipListView")}}).prototype.rule={"._is-pro=":function(){var e;if("Pro"!==(null!=(e=this.collection.getParent())?e.get("section_type"):void 0))return""},"._is-con=":function(){var e;if("Con"!==(null!=(e=this.collection.getParent())?e.get("section_type"):void 0))return""},"._has-others=":function(){if(!(this.collection.length>1))return""},"._has-multi-others=":function(){if(!(this.collection.length>2))return""},"._not-multi-others=":function(){if(this.collection.length>2)return""},"._has-multi=":function(){if(!(this.collection.length>1))return""},"._not-multi=":function(){if(this.collection.length>1)return""},"._other-count=":function(){return this.collection.length-1}},e}.call(this),e}.call(this),h=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionTooltipListView")}},e}.call(this),r=function(){class e extends h{}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{}).prototype.rule={"._is-reacted=":function(){if(!(this.collection.parents("section").get("votes").meta("delta")>0))return""},"._not-reacted=":function(){if(this.collection.parents("section").get("votes").meta("delta")>0)return""},"._has-others=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>1))return""},"._has-multi-others=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>2))return""},"._not-multi-others=":function(){if(this.collection.parents("section").get("votes").meta("upvotes")>2)return""},"._has-multi=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>1))return""},"._not-multi=":function(){if(this.collection.parents("section").get("votes").meta("upvotes")>1)return""},"._count=":function(){return this.collection.parents("section").get("votes").meta("upvotes")},"._other-count=":function(){return this.collection.parents("section").get("votes").meta("upvotes")-1},"._more-count=":function(){return Math.max((this.collection.parents("section").get("votes").meta("upvotes")||0)-this.limit,0)}},e}.call(this),e}.call(this),l=function(){class e extends h{}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{}).prototype.rule={"._is-reacted=":function(){if(!(this.collection.parents("section").get("votes").meta("delta")<0))return""},"._not-reacted=":function(){if(this.collection.parents("section").get("votes").meta("delta")<0)return""},"._has-others=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>1))return""},"._has-multi-others=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>2))return""},"._not-multi-others=":function(){if(this.collection.parents("section").get("votes").meta("downvotes")>2)return""},"._has-multi=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>1))return""},"._not-multi=":function(){if(this.collection.parents("section").get("votes").meta("downvotes")>1)return""},"._count=":function(){return this.collection.parents("section").get("votes").meta("downvotes")},"._other-count=":function(){return this.collection.parents("section").get("votes").meta("downvotes")-1},"._more-count=":function(){return Math.max((this.collection.parents("section").get("votes").meta("downvotes")||0)-this.limit,0)}},e}.call(this),e}.call(this),t.exports={ReactionTooltipView:d,ReactionTooltipVotesView:m,ReactionTooltipAgreeView:s,ReactionTooltipDisagreeView:a,ReactionTooltipUserView:p,ReactionTooltipItemView:u,ReactionTooltipListView:c,ReactionTooltipVotesListView:h,ReactionTooltipAgreeListView:r,ReactionTooltipDisagreeListView:l}},{"../base-view":91,"../lists/reaction-list-view":177,"../models/user-view":207,"./tooltip-view":167,underscore:448}],144:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v;({BaseView:i}=e("../base-view")),({ListView:a}=e("../lists/list-view")),({QuestionView:c}=e("../models/question-view")),({OptionView:u}=e("../models/option-view")),({EventView:s}=e("../models/event-view")),({Event:o,Viewpoint:g}=e("../../models")),({EventList:r}=e("../../collections")),({FABRecommendButtonView:l}=e("../components/fab-view")),({RecommendationPanelManagerMixinView:f}=e("../mixins/recommendation-panel-manager-mixin-view")),({improveURL:v}=e("../../utils/transforms")),w=e("underscore"),m=function(){class e extends i{}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationCardView")}}).prototype.rule={"._target-link":{"@href":function(){return v(this.model.get("target"))},"@rel":"nofollow"},"._RecommendationCardOptionView=":function(){return new h({model:this.model.get("target")})},"._EventView=":function(){return new s({model:this.model})}},e}.call(this),e}.call(this),p=function(){class e extends c{initialize(e){var t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return t=(()=>(this.$el.removeClass("Loading"),w.defer(()=>this.isFetchingModel=!1))),this.listenTo(this.model,"sync",()=>{if(!this.isFetchingModel)return this.model.get("viewpoints").each(e=>this.managePanelForOption(e,{voteSuccess:this.loadNext})),this.model.get("viewpoints").on("add",e=>this.managePanelForOption(e,{voteSuccess:this.loadNext})),this.$el.addClass("Loading"),this.isFetchingModel=!0,window.currentUser.fill(this.model,{callback:t,silent:!0})}),this.listenTo(window.currentUser,"change",()=>(this.$el.addClass("Loading"),this.isFetchingModel=!0,window.currentUser.fill(this.model,{callback:t,silent:!0})))}recPanelOpenedAnalytics(){return analytics.track("Random Topic Answer Card Voted")}loadNext(){return this.model.set("URL",this.$el.attr("data-ajax")),this.model.unset("viewpoints"),this.model.fetch()}}return e.prototype.mixin(f),e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._RecommendationCardAnswerView")}}).prototype.rule={"._FABRecommendButtonView=":function(){return new l({model:this.model})}},e}.call(this),e.prototype.events={"click ._skip-link":function(e){return analytics.track("Random Topic Answer Card Skipped"),this.loadNext()}},e}.call(this),d=function(){class e extends a{}return e.prototype.Collection=r,e.prototype.ItemView=m,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._RecommendationCardListView")}},e}.call(this),h=function(){class e extends u{}return e.prototype.Model=g,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._RecommendationCardOptionView")}},e}.call(this),t.exports={RecommendationCardView:m,RecommendationCardAnswerView:p,RecommendationCardListView:d,RecommendationCardOptionView:h}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/fab-view":104,"../lists/list-view":173,"../mixins/recommendation-panel-manager-mixin-view":188,"../models/event-view":192,"../models/option-view":200,"../models/question-view":201,underscore:448}],145:[function(e,t,n){var i,o,r,s,l,a,u;u=e("underscore"),e("../../rule"),({OptionView:o}=e("../models/option-view")),({PanelView:r}=e("../components/panel-view")),({MyRecommendationPanelView:i}=e("../components/my-recommendation-panel-view")),a=function(){class e extends o{initialize(){if(this.hidden=!this.isVoted(),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change",this.onVoteChange)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.hidden?u.defer(()=>this.hide()):u.defer(()=>this.collapse())}onVote(){return this.isVoted()?this.hidden?this.collapse():void 0:this.hide()}onVoteChange(){return this.isVoted()?this.collapse():this.hide()}onVoteError(){return this.isVoted()?this.collapse():this.hide()}hide(){return this.hidden=!0,this.$el.removeClass("collapsed"),this.$el.addClass("hidden")}collapse(){var e;return e=this.hidden,this.hidden=!1,e&&this.update(),this.$el.removeClass("hidden"),this.$el.addClass("collapsed")}isVoted(){var e,t;return 0!==(null!=(e="undefined"!=typeof window&&null!==window&&null!=(t=window.currentUserV2.getOptionRec(this.model))?t.get("magnitude"):void 0)?e:0)}openPanel(){var e,t;return t="undefined"!=typeof window&&null!==window?window.currentUserV2.getOptionRec(this.model):void 0,null!=(e=new r)?e.setContent(i,{model:t}):void 0}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._RecommendationDrawerView")}},e.prototype.events={"resize window":function(){if(!this.hidden)return this.collapse()},"click ._toggle-link":function(){return this.openPanel()}},e}.call(this),s=function(){class e extends a{isVoted(){var e;return("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2.getOptionRec(this.model))?e.get("magnitude"):void 0)>0}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._RecommendationDrawerAgreeView")}},e}.call(this),l=function(){class e extends a{isVoted(){var e;return("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2.getOptionRec(this.model))?e.get("magnitude"):void 0)<0}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._RecommendationDrawerDisagreeView")}},e}.call(this),t.exports={RecommendationDrawerView:a,RecommendationDrawerAgreeView:s,RecommendationDrawerDisagreeView:l}},{"../../rule":81,"../components/my-recommendation-panel-view":125,"../components/panel-view":131,"../models/option-view":200,underscore:448}],146:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};({ToasterView:R,ToastOptionView:V}=e("../components/toaster-view")),({SearchOptionDropdownView:x,SearchOptionDropdownOptionItemView:y,SearchOptionDropdownOptionListView:_,SearchOptionDropdownMasterOptionItemView:w,SearchOptionDropdownMasterOptionListView:v}=e("./search-option-dropdown-view")),({RecommendationPanelManagerMixinView:f}=e("../mixins/recommendation-panel-manager-mixin-view")),({OptionModel:s,RecPageQuery:a}=e("../../models/index")),({Viewpoint:b,MasterOption:i}=e("../../models")),({OptionCollection:r}=e("../../collections/index")),({ViewpointList:C,SearchList:g}=e("../../collections")),S=e("underscore"),({PanelView:l}=e("../components/panel-view")),({MyRecommendationPanelView:o}=e("../components/my-recommendation-panel-view")),m=function(){class e extends x{initialize(e={},t="Recommendation Vote"){return super.initialize(this.options,t)}}return e.prototype.Collection=r,e.prototype.Rule=function(){var e;return(e=class extends x.prototype.Rule{}).prototype.rule={"._SearchOptionDropdownOptionListView=":function(){return new d({collection:this.collection,searchQuery:this.options.searchQuery})},"._SearchOptionDropdownMasterOptionListView=":function(){return new c({searchQuery:this.options.searchQuery,optionCollection:this.collection})}},e}.call(this),e.prototype.events={"click ._add-option-link":function(){var e,t,n,i;return analytics.track("Recommendation Vote Dropdown Add Option Clicked"),t=(e=new s({title:"",body:"",site_url:"",price:"",question_id:this.collection.getParent().id})).toJSON({valid:!0}),e.set({title:null!=(n=this.options.searchQuery)?n:""}),e.store=this.collection.store,null!=(i=window.view.getChildrenByView(R)[0])?i.setToast(h,{model:e,originalAttributes:t}):void 0}},e}.call(this),p=function(){class e extends y{initialize(){return super.initialize(...arguments),this.managePanelForOption()}}return e.prototype.mixin(f),e.prototype.Rule=class extends y.prototype.Rule{},e.prototype.events={"click ._select-option-link":function(e){var t;return this.manageVote(1),this.model.trigger("scrollTo"),null!=(t=this.getParentByView(x))?t.clearSearch().close():void 0},"click ._option-analytics-link":function(e){return analytics.track("Recommendation Vote Dropdown Option Voted")}},e}.call(this),d=function(){class e extends _{filter(e){return super.filter(...arguments)&&!S.intersection(e.get("option_rec_ids"),window.currentUserV2.get("user_rec_ids")).length}}return e.prototype.ItemView=p,e.prototype.Rule=class extends _.prototype.Rule{},e}.call(this),u=function(){class e extends w{constructor(){super(...arguments),this.addMasterOptionSuccessCallback=this.addMasterOptionSuccessCallback.bind(this)}addMasterOptionSuccessCallback(t){return k(this,e),super.addMasterOptionSuccessCallback(...arguments),this.manageVote(1,t)}}return e.prototype.mixin(f),e.prototype.Model=i,e.prototype.Rule=class extends w.prototype.Rule{},e.prototype.events={"click ._option-analytics-link":function(e){return analytics.track("Recommendation Vote Dropdown Master Option Clicked")}},e}.call(this),c=function(){class e extends v{}return e.prototype.Collection=g,e.prototype.ItemView=u,e.prototype.Rule=class extends v.prototype.Rule{},e}.call(this),h=class extends V{submit(e){return super.submit(S.extend({scroll:!1},e))}sync(){var e;return analytics.track("Recommendation Vote Dropdown Option Submitted"),this.$el.addClass("Loading"),(e=this.model.getLegacyModel().get("votes")).vote(1),e.on("voteError",e=>this.$el.removeClass("Loading")),e.on("voteSuccess",e=>{return window.currentUserV2.store.ensureQuery(a,{rec_id:e.rec_id}).fetch({success:(t,n)=>{var i,r;return this.$el.removeClass("Loading"),this.getParentByView(R).setToast(),r=n.getModel(e.rec_id),null!=(i=new l)?i.setContent(o,{model:r}):void 0}})})}},t.exports={RecommendationDropdownView:m,RecommendationDropdownOptionItemView:p,RecommendationDropdownOptionListView:d,RecommendationDropdownMasterOptionItemView:u,RecommendationDropdownMasterOptionListView:c,RecommendationDropdownToastOptionView:h}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../components/my-recommendation-panel-view":125,"../components/panel-view":131,"../components/toaster-view":166,"../mixins/recommendation-panel-manager-mixin-view":188,"./search-option-dropdown-view":153,underscore:448}],147:[function(e,t,n){var i,o,r,s,l,a,u;({BaseView:i}=e("../base-view")),({UserView:a}=e("../models/user-view")),({RecommendationDropdownView:o}=e("./recommendation-dropdown-view")),({SearchablePopupInvokerView:l}=e("./searchable-popup-invoker-view")),({ViewpointList:u}=e("../../collections")),s=function(){class e extends l{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.stopListening(this.collection,"change",this.update)}createPopupView(e){return new o({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}search(e){var t;return null!=(t=this.popup)?t.search(e):void 0}}return e.prototype.Collection=u,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationFormView")}}).prototype.rule={"._RecommendationFormUserView=":function(){return new r({model:"undefined"!=typeof window&&null!==window?window.currentUser:void 0})}},e}.call(this),e}.call(this),r=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._RecommendationFormUserView")}}).prototype.rule={"._is-logged-in=":function(){if(!this.model.id)return""},"._not-logged-in=":function(){if(this.model.id)return""}},e}.call(this),e}.call(this),t.exports={RecommendationFormView:s,RecommendationFormUserView:r}},{"../../collections":2,"../base-view":91,"../models/user-view":207,"./recommendation-dropdown-view":146,"./searchable-popup-invoker-view":155}],148:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y;({BaseView:i}=e("../base-view")),({ThreadView:U}=e("../threads/thread-view")),({UserView:j}=e("../models/user-view")),({RecView:x}=e("../models/rec-view")),({QuestionLevelRecommendationFormView:w,QuestionLevelRecommendationDropdownView:g}=e("../components/question-level-recommendation-form-view")),({QuestionView:v}=e("../models/question-view")),({OptionView:h}=e("../models/option-view")),({QuestionCardStatsView:f}=e("../components/question-card-view")),({CommunityRecommendationHighlightListView:l}=e("../threads/community-recommendation-thread-view")),({PanelView:m}=e("../components/panel-view")),({CommunityRecommendationPanelView:a}=e("../components/community-recommendation-panel-view")),({ReactionTextButtonUsefulView:_}=e("../components/reaction-button-set-view")),({FABRecommendQuestionLevelMicroButtonView:c}=e("../components/fab-view")),({ToasterView:B}=e("../components/toaster-view")),({NotifyPopupServerErrorView:d,NotifyPopupAddedCommentView:p}=e("../components/notify-popup-view")),({CommentListAddCommentView:s}=e("../lists/comment-list-view")),({TopicList:N,ViewpointList:z,ReactionList:y,CommentList:r}=e("../../collections")),({ViewpointVote:Q,User:F,Topic:q,Comment:o}=e("../../models")),({improveURL:H,shortenNumber:Y}=e("../../utils/transforms")),e("underscore"),e("urijs"),W=e("moment"),({ExpandingTextareaMixinView:u}=e("../mixins/expanding-textarea-mixin-view")),V=function(){class e extends i{}return e.prototype.Collection=N,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardContainerView")}}).prototype.rule={"._RecommendationOptionCardTodayListView=":function(){return new M({collection:this.collection})},"._RecommendationOptionCardYesterdayListView=":function(){return new E({collection:this.collection})},"._RecommendationOptionCardWeekListView=":function(){return new A({collection:this.collection})},"._RecommendationOptionCardOlderListView=":function(){return new C({collection:this.collection})}},e}.call(this),e}.call(this),O=function(){class e extends i{getVote(){return this.model.get("communityRecommendations").at(0)}getOption(){var e;return null!=(e=this.getVote())?e.parents("viewpoint"):void 0}}return e.prototype.Model=q,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardView")}}).prototype.rule={"._option-link":function(){return{"@href":function(){return H(this.getOption())},"@title":function(){var e;return null!=(e=this.getOption())?e.get("revision").get("title"):void 0},"@rel":"nofollow"}},"._option-title=":function(){var e;return null!=(e=this.getOption())?e.get("revision").get("title"):void 0},"._option-image@style+":function(){var e,t,n;if(e=null!=(t=this.getOption())&&null!=(n=t.get("revision").get("images").at(0))?n.getImagePreviewURL():void 0)return`background-image: URL('${e}');`},"._RecommendationOptionCardQuestionHeaderView=":function(){return new S({model:this.model})},"._RecommendationOptionCardUserRecView=":function(){return new L({model:this.getVote()})},"._RecommendationOptionCardContentView=":function(){return new R({model:this.getVote()})}},e}.call(this),e}.call(this),D=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._RecommendationOptionImageCardView")}},e}.call(this),b=function(){class e extends U{getItemView(e){var t,n;return(null!=(t=this.getVoteFromQuestion(e))&&null!=(n=t.parents("viewpoint"))?n.get("revision").get("images").at(0):void 0)?D:O}getVoteFromQuestion(e){return e.get("communityRecommendations").at(0)}filter(e){var t,n;return null!=(n=this.getVoteFromQuestion(e))&&(t=W.utc(null!=n?n.get("created"):void 0),this.isInDateCategory(t)&&(null!=n?n.get("text").trim():void 0))}}return e.prototype.Collection=N,e.prototype.ItemView=O,e.prototype.options={infiniteScroll:!1},e.prototype.Rule=class extends U.prototype.Rule{},e}.call(this),M=function(){class e extends b{isInDateCategory(e){return 0===W().diff(e,"days")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardTodayListView")}},e}.call(this),E=function(){class e extends b{isInDateCategory(e){return 1===W().diff(e,"days")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardYesterdayListView")}},e}.call(this),A=function(){class e extends b{isInDateCategory(e){var t;return 1<(t=W().diff(e,"days"))&&t<7}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardWeekListView")}},e}.call(this),C=function(){class e extends b{filter(e){var t,n;return null!=(n=this.getVoteFromQuestion(e))&&(t=W.utc(null!=n?n.get("created"):void 0),W().diff(t,"days")>=7||!(null!=n?n.get("text").trim():void 0))}onMoreContentLoaded(){var e;return null!=(e=this.getParentByView(V))?e.update():void 0}}return e.prototype.options={infiniteScroll:!0},e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardOlderListView")}},e}.call(this),S=function(){class e extends v{}return e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._RecommendationOptionCardQuestionHeaderView")}}).prototype.rule={"._FABRecommendQuestionLevelMicroButtonView=":function(){return new c({model:this.model})},"._QuestionCardStatsView=":function(){return new f({model:this.model})}},e}.call(this),e}.call(this),L=function(){class e extends i{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardUserRecView")}}).prototype.rule={"._has-karma=":function(){if(!this.model.get("user").get("testimonial_karma"))return""},"._user-first-name=":function(){var e;return null!=(e=this.model.get("user").get("displayName")||this.model.get("user").get("username"))?e.split(" ")[0]:void 0},"._karma-total=":function(){return Y(this.model.get("user").get("testimonial_karma")||0)},"._option-title=":function(){var e;return null!=(e=this.model.parents("viewpoint"))?e.get("revision").get("title"):void 0},"._option-link":{"@href":function(){return H(this.model.parents("viewpoint"))},"@title":function(){var e;return null!=(e=this.model.parents("viewpoint"))?e.get("revision").get("title"):void 0}},"._RecommendationOptionCardUserView=":function(){return new I({model:this.model.get("user")})}},e}.call(this),e}.call(this),I=function(){class e extends j{}return e.prototype.Model=F,e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._RecommendationOptionCardUserView")}},e}.call(this),R=function(){class e extends x{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("comments"),"add",this.update)}loadUserReactionStateData(){var e,t;return t=$.Deferred(),e=this.getParentTopic(),("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&e?window.currentUser.fill(e,{success:t.resolve}):t.resolve(),t}openRecPanel(){var e;return null!=(e=new m)?e.setContent(a,{model:this.model}):void 0}getParentTopic(){var e;return null!=(e=this.getParentByView(O))?e.model:void 0}}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends x.prototype.Rule{template(){return template("._RecommendationOptionCardContentView")}}).prototype.rule={"._not-empty-recommendation=":function(){var e;if(!((null!=(e=this.model.get("text"))?e.trim():void 0)||this.hasSections()))return""},"._CommunityRecommendationHighlightListView=":function(){var e;return new l({collection:null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0})},"._RecommendationOptionCardReactionTextButtonUsefulView=":function(){return new k({collection:this.model.get("reactionSet").get("useful")})}},e}.call(this),e.prototype.events={"click ._full-recommendation-link":function(e){return analytics.track("Recs Feed Rec Expand Link Clicked"),this.loadUserReactionStateData().then(()=>this.openRecPanel())},"click ._recommendation-comments-link":function(){return this.loadUserReactionStateData().then(()=>{var e;return null!=(e=this.openRecPanel())?e.scrollTo("._comments-section"):void 0}),analytics.track("Recs Feed Rec Comments Link Clicked")}},e}.call(this),T=function(){class e extends w{getPopupView(){return P}onVoteListener(e){}}return e.prototype.Model=q,e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),P=function(){class e extends g{initialize(e={},t="Recs Feed Recommendation Vote"){return super.initialize(this.options,t)}}return e.prototype.Collection=z,e.prototype.Rule=class extends g.prototype.Rule{},e}.call(this),k=function(){class e extends _{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Option Card")}}return e.prototype.Rule=class extends _.prototype.Rule{},e}.call(this),t.exports={RecommendationOptionCardContainerView:V,RecommendationOptionCardListView:b,RecommendationOptionCardTodayListView:M,RecommendationOptionCardYesterdayListView:E,RecommendationOptionCardWeekListView:A,RecommendationOptionCardOlderListView:C,RecommendationOptionCardView:O,RecommendationOptionImageCardView:D,RecommendationOptionCardQuestionHeaderView:S,RecommendationOptionCardUserRecView:L,RecommendationOptionCardUserView:I,RecommendationOptionCardContentView:R,RecommendationOptionCardRecommendationFormView:T,RecommendationOptionCardRecommendationDropdownView:P,RecommendationOptionCardReactionTextButtonUsefulView:k}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/community-recommendation-panel-view":98,"../components/fab-view":104,"../components/notify-popup-view":128,"../components/panel-view":131,"../components/question-card-view":135,"../components/question-level-recommendation-form-view":138,"../components/reaction-button-set-view":141,"../components/toaster-view":166,"../lists/comment-list-view":170,"../mixins/expanding-textarea-mixin-view":184,"../models/option-view":200,"../models/question-view":201,"../models/rec-view":202,"../models/user-view":207,"../threads/community-recommendation-thread-view":252,"../threads/thread-view":258,moment:441,underscore:448,urijs:452}],149:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;_=e("underscore"),({BaseView:i}=e("../base-view")),({OptionView:s}=e("../models/option-view")),({UserView:y}=e("../models/user-view")),({SectionView:w}=e("../models/section-view")),({HighlightView:o}=e("../models/highlight-view")),({PanelView:a,PanelContentView:l}=e("../components/panel-view")),({RecModel:u,UserModel:v,OptionModel:r,SectionModel:g}=e("../../models/index")),({improveURL:x}=e("../../utils/transforms")),f=function(){class e extends i{}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationPanelView")}}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new p({model:this.model})},"._RecommendationPanelContentView=":function(){return new c({model:this.model})}},e}.call(this),e}.call(this),p=function(){class e extends i{getRandomImage(){var e,t,n,i,o;return null!=this.randomImage?this.randomImage:(e=(t=this.model.getModel("option_id")).getCollection("option_image_ids").length)?(n=Math.floor(Math.random()*e),this.randomImage=null!=(i=t.getCollection("option_image_ids"))&&null!=(o=i.at(n))?o.getImagePreviewURL():void 0):void 0}}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-image=":function(){var e;if(!((null!=(e=this.model.getModel("option_id").getCollection("option_image_ids"))?e.length:void 0)>0))return""},"._downvote-class@class+":function(){if(this.model.get("magnitude")<0)return"downvote"},"._option-title=":function(){return this.model.getModel("option_id").get("title")},"._option-image@src":function(){return this.getRandomImage()},"._option-link@href":function(){return this.model.getModel("option_id").getViewpointPageURL()},"._RecommendationPanelUserView=":function(){return new m({model:this.model.getModel("user_id")})}},e}.call(this),e.prototype.events={"click ._option-link":function(e){var t;return null!=(t=this.getParentByView(a))?t.trigger("collapsePanel"):void 0}},e}.call(this),m=function(){class e extends y{}return e.prototype.Model=v,e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._RecommendationPanelUserView")}},e}.call(this),c=function(){class e extends l{}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._downvote-class@class+":function(){if(this.model.get("magnitude")<0)return"downvote"}},e}.call(this),e}.call(this),h=function(){class e extends w{initialize(){if(this.isExpandable=!1,this.expanded=!1,super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _.defer(()=>this.setDescriptionExpansionDefaults())}setDescriptionExpansionDefaults(){var e,t;return e=this.$(".RecommendationPanel-Section-Body-Description"),this.originalHeight=e.height()||0,t=e.prop("scrollHeight")||0,this.originalHeight<t?(this.$("._expand-section-description-arrow").removeClass("hidden"),this.isExpandable=!0):(this.$("._expand-section-description-arrow").addClass("hidden"),this.isExpandable=!1),this.updateDescriptionExpansionState()}updateDescriptionExpansionState(){if(this.isExpandable)return this.expanded?this.expandDescription():this.collapseDescription()}expandDescription(){var e,t;return t=(e=this.$(".RecommendationPanel-Section-Body-Description")).prop("scrollHeight")||0,this.originalHeight<t&&(e.css("max-height",t),this.$("._expand-section-description-arrow").addClass("expanded")),this.expanded=!0}collapseDescription(){return this.$(".RecommendationPanel-Section-Body-Description").removeAttr("style"),this.$("._expand-section-description-arrow").removeClass("expanded"),this.expanded=!1}toggleDescriptionExpansion(){return this.expanded=!this.expanded,this.expanded&&analytics.track("Recommendation Panel Section Description Expanded"),this.updateDescriptionExpansionState()}}return e.prototype.Model=g,e.prototype.Rule=class extends w.prototype.Rule{},e.prototype.events={"resize window":function(){return this.setDescriptionExpansionDefaults()},"click ._expand-section-description":e.prototype.toggleDescriptionExpansion},e}.call(this),d=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{},e}.call(this),t.exports={RecommendationPanelView:f,RecommendationPanelHeaderView:p,RecommendationPanelUserView:m,RecommendationPanelContentView:c,RecommendationPanelSectionView:h,RecommendationPanelHighlightView:d}},{"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../components/panel-view":131,"../models/highlight-view":193,"../models/option-view":200,"../models/section-view":204,"../models/user-view":207,underscore:448}],150:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;p=e("../../rule"),({OptionModel:s,RecModel:a}=e("../../models/index")),({Viewpoint:d}=e("../../models")),({VoteList:h}=e("../../collections")),({BaseView:i}=e("../base-view")),({PanelView:l}=e("../components/panel-view")),({MyRecommendationPanelView:r,MyRecommendationPanelFooterView:o}=e("../components/my-recommendation-panel-view")),({RecommendationPanelManagerMixinView:u}=e("../mixins/recommendation-panel-manager-mixin-view")),c=function(){class e extends i{initialize(){return super.initialize(...arguments),this.managePanelForOption()}}return e.prototype.mixin(u),e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends p{template(){return template("._RecommendationView")}}).prototype.rule={"._upvote-selected@class+":function(){var e;if((null!=(e=this.getUserRec())?e.get("magnitude"):void 0)>=1)return"selected"},"._downvote-selected@class+":function(){var e;if((null!=(e=this.getUserRec())?e.get("magnitude"):void 0)<=-1)return"selected"},"._has-upvotes=":function(){if(!this.model.get("option_ranking_obj").rec_count_up)return""},"._no-upvotes=":function(){if(this.model.get("option_ranking_obj").rec_count_up)return""},"._has-downvotes=":function(){if(!this.model.get("option_ranking_obj").rec_count_down)return""},"._no-downvotes=":function(){if(this.model.get("option_ranking_obj").rec_count_down)return""},"._is-upvote=":function(){var e;if(!((null!=(e=this.getUserRec())?e.get("magnitude"):void 0)>0))return""},"._is-downvote=":function(){var e;if(!((null!=(e=this.getUserRec())?e.get("magnitude"):void 0)<0))return""},"._is-novote=":function(){var e;if(0!==(null!=(e=this.getUserRec())?e.get("magnitude"):void 0))return""},"._upvote-count=":function(){var e;return null!=(e=this.model.get("option_ranking_obj").rec_count_up)?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("option_ranking_obj").rec_count_down)?e:0}},e}.call(this),e.prototype.events={"click ._upvote-link":function(e){return this.manageVote(1)},"click ._downvote-link":function(e){return this.manageVote(-1)}},e}.call(this),t.exports={RecommendationView:c}},{"../../collections":2,"../../models":34,"../../models/index":64,"../../rule":81,"../base-view":91,"../components/my-recommendation-panel-view":125,"../components/panel-view":131,"../mixins/recommendation-panel-manager-mixin-view":188}],151:[function(e,t,n){var i,o,r,s,l,a;({OptionView:r}=e("../models/option-view")),({ListView:i}=e("../lists/list-view")),({Viewpoint:a}=e("../../models")),({MasterOptionList:o}=e("../../collections")),l=function(){class e extends r{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._RelatedProductView")}}).prototype.rule={"._option-link":{"@href":function(){return this.model.parent.url()},"@rel":"nofollow"},"._meta-rating-count@content":function(){var e;return(null!=(e=this.model.parent)?e.getVotesCount():void 0)||0},"._meta-rating-value@content":function(){var e;return(null!=(e=this.model.parent)?e.getRatingValue():void 0)||0}},e}.call(this),e}.call(this),s=function(){class e extends i{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=o,e.prototype.ItemView=l,e.prototype.limit=12,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._RelatedProductListView")}},e}.call(this),t.exports={RelatedProductView:l,RelatedProductListView:s}},{"../../collections":2,"../../models":34,"../lists/list-view":173,"../models/option-view":200}],152:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b;e("../../rule"),({BaseView:i}=e("../base-view")),({DropdownView:o}=e("./dropdown-view")),({ListView:r}=e("../lists/list-view")),({QuestionView:c}=e("../models/question-view")),({OptionView:u}=e("../models/option-view")),({MasterOptionView:a}=e("../models/master-option-view")),({Topic:R,MasterOption:s}=e("../../models")),({SearchList:V,TopicList:b,MasterOptionList:l}=e("../../collections")),x=function(){class e extends o{initialize(e){if(super.initialize(...arguments),this.setQuery(e.search),this.position(),this.stopListening(this.collection),window)return _.defer(()=>{var e,t;if((e=this.$("._search-input:visible")).length)return e.focus(),t=e.val().length,e.get(0).setSelectionRange(t,t)})}position(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0)),super.position(...arguments)}submitSearch(){var t;return this.$("._search-input").blur(),null!=(t=this.getParentByView(e).options.invokerView)&&t.collapseSearch(),router.navigate("/search",{trigger:!0,search:`?query=${this.options.search}`})}syncAndSetQuery(e=""){var t;return null!=(t=this.options.invokerView)&&t.setQuery(e),this.setQuery(e)}setQuery(e=""){var t,n;return(t=this.$("._search-input")).val()!==e&&t.val(e),this.options.search=e,n={hitsPerPage:20},""===this.options.search?(this.$el.addClass("noInput"),n.restrictSearchableAttributes="revision.title"):this.$el.removeClass("noInput"),this.collection.search(this.options.search,n,()=>(this.$el.removeClass("Loading"),this.collection.meta("search",this.options.search)))}}return e.prototype.Collection=V,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SearchDropdownView")}}).prototype.rule={"._search-input@value":function(){return this.options.search},"._SearchDropdownResultsView=":function(){return new y({collection:this.collection})},"._SearchDropdownFooterView=":function(){return new d({collection:this.collection})}},e}.call(this),e.prototype.events={"submit ._search-form":function(e){if(e.preventDefault(),this.search)return this.sendAnalytics("Search",{search:this.search}),this.submitSearch()},"resize window":function(e){return this.position()},"click ._search-clear-link":function(e){return this.syncAndSetQuery(""),this.$("._search-input:visible").focus()},"input ._search-input":function(e){return this.syncAndSetQuery($(e.target).val())}},e}.call(this),y=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SearchDropdownResultsView")}}).prototype.rule={"._has-results=":function(){if(0===this.collection.length)return""},"._no-results=":function(){if(0!==this.collection.length)return""},"._has-query=":function(){if(!this.collection.meta("search"))return""},"._no-query=":function(){if(this.collection.meta("search"))return""},"._add-question-link@href":function(){return`/topics/create?title=${this.collection.meta("search")}`},"._search-link@href":function(){return`/search?query=${this.collection.meta("search")}`},"._search-query=":function(){return this.collection.meta("search")},"._SearchDropdownQuestionListView=":function(){return new w({collection:this.collection})},"._SearchDropdownMasterOptionListView=":function(){return new h({collection:this.collection})},"._SearchDropdownOptionListView=":function(){return new f({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._search-dropdown-item":function(e){var t;return analytics.track("Site Search Dropdown Item Clicked"),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0},"click ._add-question-link":function(e){var t;return analytics.track("Clicked Ask Question",{label:"Search Dropdown"}),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0}},e}.call(this),d=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SearchDropdownFooterView")}}).prototype.rule={"._add-question-link@href":function(){return`/topics/create?title=${this.collection.meta("search")}`}},e}.call(this),e.prototype.events={"click ._add-question-link":function(e){var t;return analytics.track("Clicked Ask Question",{label:"Search Dropdown"}),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0}},e}.call(this),v=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._SearchDropdownQuestionView")}}).prototype.rule={"._no-image=":function(){var e,t;if(null!=(e=this.model.get("viewpoints").at(0))&&null!=(t=e.get("revision").get("images").at(0))?t.getImagePreviewURL():void 0)return""},"._first-option-background-image@style":function(){var e,t,n;if(n=null!=(e=this.model.get("viewpoints").at(0))&&null!=(t=e.get("revision").get("images").at(0))?t.getImagePreviewURL():void 0)return`background-image: URL('${n}');`},"._highlighted-question-title=":function(){var e,t,n,i;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.value:void 0)?$(`<span>${e}</span>`):this.model.get("title")}},e}.call(this),e}.call(this),m=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SearchDropdownMasterOptionView")}}).prototype.rule={"._no-image=":function(){var e;if(null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return""},"._option-background-image@style":function(){var e,t;if(t=null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._highlighted-option-title=":function(){var e,t,n,i,o;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.source)&&null!=(i=n.revision)&&null!=(o=i.title)?o.value:void 0)?$(`<span>${e}</span>`):this.model.get("source").get("revision").get("title")}},e}.call(this),e}.call(this),g=function(){class e extends v{}return e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._SearchDropdownOptionView")}}).prototype.rule={"._first-option-link@href":function(){var e;return null!=(e=this.model.get("viewpoints").at(0))?e.url():void 0},"._highlighted-option-title=":function(){var e,t,n,i,o,r,s,l;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.viewpoints)&&null!=(i=n.children)&&null!=(o=i[0])&&null!=(r=o.revision)&&null!=(s=r.title)?s.value:void 0)?$(`<span>${e}</span>`):null!=(l=this.model.get("viewpoints").at(0))?l.get("revision").get("title"):void 0}},e}.call(this),e}.call(this),w=function(){class e extends r{filter(e){var t,n,i;return e instanceof R&&(!this.collection.meta("query")||"none"!==(null!=(t=e.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.matchLevel:void 0))}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=v,e}.call(this),h=function(){class e extends r{filter(e){return e instanceof s}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=m,e}.call(this),f=function(){class e extends r{filter(e){var t,n,i;return e instanceof R&&this.collection.meta("query")&&"none"===(null!=(t=e.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.matchLevel:void 0)}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=g,e}.call(this),p=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SearchDropdownErrorView")}},e}.call(this),t.exports={SearchDropdownView:x,SearchDropdownResultsView:y,SearchDropdownQuestionView:v,SearchDropdownMasterOptionView:m,SearchDropdownFooterView:d,SearchDropdownOptionView:g,SearchDropdownQuestionListView:w,SearchDropdownMasterOptionListView:h,SearchDropdownOptionListView:f,SearchDropdownErrorView:p}},{"../../collections":2,"../../models":34,"../../rule":81,"../base-view":91,"../lists/list-view":173,"../models/master-option-view":198,"../models/option-view":200,"../models/question-view":201,"./dropdown-view":101}],153:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};e("underscore"),({convertURL:R,isURL:b}=e("../../utils/transforms")),({SearchableDropdownView:v,SearchableDropdownListView:w}=e("./searchable-dropdown-view")),({ToasterView:_,ToastOptionView:y}=e("./toaster-view")),({OptionDropdownItemView:a}=e("./option-dropdown-view")),r=e("../../views/components/search-option-dropdown-view").SearchOptionDropdownOptionItemView,({OptionModel:u,QuestionPageQuery:c}=e("../../models/index")),({MasterOption:s,Viewpoint:x,Image:i}=e("../../models")),({OptionCollection:l}=e("../../collections/index")),({ViewpointList:V,SearchList:p,ImageList:o}=e("../../collections")),g=function(){class e extends v{initialize(e={},t="Search Option"){return analytics.track("Search Option Dropdown Opened",{label:t}),super.initialize(...arguments),this.setWidth(),this.position()}showLoadingState(){return this.$("._load-spinner").removeClass("hidden"),this.closable=!1,this}showAddLoadingState(){return this.$("._add-spinner").removeClass("hidden"),this.closable=!1,this}hideLoadingState(){return this.$("._add-spinner").addClass("hidden"),this.$("._load-spinner").addClass("hidden"),this.closable=!0,this}showErrorState(){return this.$("._error-overlay").removeClass("hidden"),this}hideErrorState(){return this.$("._error-overlay").addClass("hidden"),this}setWidth(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0))}checkIsEmpty(){return this.getChildrenByView(f).some(function(e){return e.count()>0})?this.$(".Dropdown-Seperator").removeClass("hidden"):this.$(".Dropdown-Seperator").addClass("hidden")}}return e.prototype.Collection=l,e.prototype.isSelfClosing=!0,e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._SearchOptionDropdownView")}}).prototype.rule={"._SearchOptionDropdownOptionListView=":function(){return new f({collection:this.collection,searchQuery:this.options.searchQuery})},"._SearchOptionDropdownMasterOptionListView=":function(){return new h({searchQuery:this.options.searchQuery,optionCollection:this.collection})}},e}.call(this),e.prototype.events={"click ._add-option-link":function(e){var t,n,i,o,r;return analytics.track("Search Option Dropdown Add Option Button Clicked"),e.preventDefault(),n=new u({title:"",body:"",site_url:"",price:"",question_id:this.collection.getParent().id}),i=n.toJSON({valid:!0}),n.store=this.collection.store,t=this.options.searchQuery,o=(()=>{var e;return this.close(),null!=(e=window.view.getChildrenByView(_)[0])?e.setToast(y,{model:n,originalAttributes:i}):void 0}),b(t)?(this.showLoadingState(),r=R(t),n.set("site_url",r),$.ajax(`/seek?url=${r}`,{timeout:3e3,success:e=>(this.hideLoadingState(),null!=e.data&&n.set({title:e.data.product_name,price:e.data.product_price}),o()),error:e=>(this.hideLoadingState(),o())})):(t&&n.set("title",t),o())},"click ._focus-search-link":function(){return this.$("._dropdown-search-input").focus()},"resize window":function(e){return this.setWidth(),this.position()}},e}.call(this),m=function(){class e extends a{}return e.prototype.Model=u,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._SearchOptionDropdownOptionItemView")}},e.prototype.events={"click ._select-option-link":function(e){var t;return this.model.trigger("scrollTo"),null!=(t=this.getParentByView(g))?t.clearSearch().close():void 0},"click ._option-analytics-link":function(e){return analytics.track("Search Option Dropdown Option Clicked")}},e}.call(this),f=function(){class e extends w{getSearchValue(e){return e.get("title")}}return e.prototype.Collection=l,e.prototype.ItemView=m,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._SearchOptionDropdownOptionListView")}},e}.call(this),d=function(){class e extends r{constructor(){super(...arguments),this.addMasterOptionSuccessCallback=this.addMasterOptionSuccessCallback.bind(this),this.addMasterOptionErrorCallback=this.addMasterOptionErrorCallback.bind(this)}getOption(){return this.model.get("source")}addMasterOptionSuccessCallback(t){var n;return C(this,e),null!=(n=this.getParentByView(g))?n.clearSearch().close():void 0}addMasterOptionErrorCallback(){var t;return C(this,e),null!=(t=this.getParentByView(g))?t.hideLoadingState().showErrorState():void 0}}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._show-recs=":function(){return""},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"._option-title=":function(){var e;return e=this.model.get("source").get("revision").get("title"),$(`<span>${e}</span>`)}},e}.call(this),e.prototype.events={"click ._select-option-link":function(e){var t,n,i,o;return null!=(n=this.getParentByView(g))&&n.showAddLoadingState(),o=(t=this.options.optionCollection.getParent()).getLegacyModel().get("viewpoints"),i=new x({},{collection:o}),o.add(i,{silent:!0}),i.once("sync",()=>{return window.dataStore.ensureQuery(c,{question_id:t.get("question_id")}).fetch({silent:!0,success:(e,n)=>{var o;return o=n.getModel(i.get("option_id")),this.addMasterOptionSuccessCallback(o),t.trigger("change")}})}),i.once("saveError",()=>this.addMasterOptionErrorCallback()),i.save("masterOption",{id:this.model.get("id"),shallow:!0},{wait:!0,valid:!1})},"click ._option-analytics-link":function(e){return analytics.track("Search Option Dropdown Master Option Clicked")}},e}.call(this),h=function(){class e extends f{initialize(e){return super.initialize(...arguments),this.search(e.searchQuery)}createViewOptions(){return{optionCollection:this.options.optionCollection}}filter(e){return!this.options.optionCollection.some(t=>{var n;return(null!=(n=t.getModel("product_id"))?n.get("title"):void 0)===e.get("source").get("revision").get("title")})}search(e,t){var n,i;return this.options.query=e,i={filters:"class:MasterOption",hitsPerPage:5,exactOnSingleWordQuery:"attribute"},e?this.collection.search(this.options.query,i,()=>{var e;return this.update(),null!=(e=this.getParentByView(g))&&e.checkIsEmpty(),null!=e&&e.position(),"function"==typeof t?t():void 0}):(this.collection.reset(),this.update(),null!=(n=this.getParentByView(g))&&n.checkIsEmpty(),"function"==typeof t?t():void 0)}getSearchValue(e){return e.get("source").get("revision").get("title")}}return e.prototype.Collection=p,e.prototype.options={asyncSearch:!0},e.prototype.ItemView=d,e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._SearchOptionDropdownMasterOptionListView")}},e}.call(this),t.exports={SearchOptionDropdownView:g,SearchOptionDropdownOptionItemView:m,SearchOptionDropdownOptionListView:f,SearchOptionDropdownMasterOptionItemView:d,SearchOptionDropdownMasterOptionListView:h}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../../utils/transforms":89,"../../views/components/search-option-dropdown-view":314,"./option-dropdown-view":129,"./searchable-dropdown-view":154,"./toaster-view":166,underscore:448}],154:[function(e,t,n){var i,o,r,s;({DropdownView:i}=e("./dropdown-view")),({SearchableListView:s}=e("../lists/searchable-list-view")),r=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.restoreSearch(),this.$("._dropdown-search-input")}update(){var e;return e=this.$("._dropdown-search-input").val(),super.update(...arguments),this.restoreSearch(e)}search(e){var t,n,i,o;return this.showLoadingState(),this.options.searchQuery=e,o=this.getChildrenByView(s),n=o.length,t=0,i=(()=>{if(++t===n)return this.hideLoadingState()}),o.forEach(function(t){return t.search(e,i)}),this.updateSearchDependentState(),this.position()}restoreSearch(e){return null==e&&(e=this.options.searchQuery),e&&this.$("._dropdown-search-input").val(e),this.updateSearchDependentState()}updateSearchDependentState(){return this.options.searchQuery?(this.$("._has-search").css({display:""}),this.$("._no-search").css({display:"none"})):(this.$("._no-search").css({display:""}),this.$("._has-search").css({display:"none"}))}showLoadingState(){return this.$el.addClass("Loading"),this}hideLoadingState(){return this.$el.removeClass("Loading"),this}updateSearch(e){var t;return this.search(e),"INPUT"===(null!=(t=this.follows.get(0))?t.tagName:void 0)&&this.follows.val(e),this.$("._search-container").scrollTop(0)}clearSearch(){var e;return"INPUT"===(null!=(e=this.follows.get(0))?e.tagName:void 0)&&this.follows.val(""),this}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.events={"input ._dropdown-search-input":function(e){return this.updateSearch($(e.currentTarget).val())},"click ._dropdown-search-clear-link":function(e){return this.$("._dropdown-search-input").val(""),this.$("._dropdown-search-input").focus(),this.updateSearch("")}},e}.call(this),o=function(){class e extends s{search(e,t){if(super.search(...arguments),!this.options.asyncSearch)return"function"==typeof t?t():void 0}}return e.prototype.options={asyncSearch:!1},e.prototype.Rule=class extends s.prototype.Rule{},e}.call(this),t.exports={SearchableDropdownView:r,SearchableDropdownListView:o}},{"../lists/searchable-list-view":178,"./dropdown-view":101}],155:[function(e,t,n){var i,o,r,s;({BaseView:i}=e("../base-view")),({PopupView:o}=e("../components/popup-view")),({SearchableListView:r}=e("../lists/searchable-list-view")),s=function(){class e extends i{update(){var e;if("undefined"!=typeof window&&null!==window&&(e=this.$("._search-invoker-input").val()),super.update(...arguments),"undefined"!=typeof window&&null!==window)return null!=e?this.$("._search-invoker-input").val(e):void 0}createPopupView(e){return new o}ensurePopup(){var e,t;return(null!=(t=this.popup)?t.attached:void 0)?this.popup:(e=this.$("._search-invoker-input"),this.popup=this.createPopupView(e))}search(e){var t,n,i;return null!=(t=this.popup)&&null!=(n=t.getChildrenByView(r)[0])&&n.search(e),null!=(i=this.popup)?i.position():void 0}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SearchInvokerView")}},e.prototype.events={"click ._search-invoker-link":function(e){var t;if(this.ensurePopup(),"none"!==(t=this.$("._search-invoker-input")).css("pointer-events"))return t.focus()},"click ._search-invoker-input":function(e){return this.ensurePopup()},"focus ._search-invoker-input":function(e){return this.ensurePopup()},"input ._search-invoker-input":function(e){return this.ensurePopup(),this.search(this.$("._search-invoker-input").val())},"keydown ._search-invoker-input":function(e){var t;return 9===e.keyCode&&null!=(t=this.popup)&&t.close(),!0},"submit ._search-invoker-form":function(e){return e.preventDefault(),this.ensurePopup().step(1)}},e}.call(this),t.exports={SearchablePopupInvokerView:s}},{"../base-view":91,"../components/popup-view":132,"../lists/searchable-list-view":178}],156:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({BaseView:i}=e("../base-view")),({ListView:s}=e("../../views/lists/list-view")),({EventView:r}=e("../../views/models/event-view")),({OptionEventView:l}=e("../../views/models/option-event-view")),({QuestionModel:a}=e("../../models/index")),({EventList:o}=e("../../collections")),({shortenNumber:m,improveURL:h}=e("../../utils/transforms")),u=function(){class e extends s{}return e.prototype.Collection=o,e.prototype.limit=5,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._SidebarActivityView")}}).prototype.rule={"._question-activity-link@href":function(){return h(this.collection)}},e}.call(this),e}.call(this),d=function(){class e extends u{}return e.prototype.ItemView=l,e.prototype.Rule=class extends u.prototype.Rule{},e}.call(this),c=function(){class e extends i{initialize(){var e;if(e=`/topics/${this.model.get("t_id")}/activity?filter=bytime`,this.legacyCollection=new o,this.legacyCollection.meta("URL",e),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"change",this.fetchEvents),this.fetchEvents()}fetchEvents(){if(!this.hasFetched&&window.currentUser.get("username"))return this.$el.addClass("Loading"),this.legacyCollection.fetch({success:()=>(this.$el.removeClass("Loading"),this.hasFetched=!0,this.update())})}}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SidebarAsyncActivityView")}}).prototype.rule={"._SidebarActivityView=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?new u({collection:this.legacyCollection}):""}},e}.call(this),e.prototype.limit=null,e}.call(this),p=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{}).prototype.rule={"._SidebarActivityView=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?new d({collection:this.collection}):""}},e}.call(this),e}.call(this),t.exports={SidebarActivityView:u,SidebarOptionActivityView:d,SidebarAsyncActivityView:c,SidebarAsyncOptionActivityView:p}},{"../../collections":2,"../../models/index":64,"../../utils/transforms":89,"../../views/lists/list-view":334,"../../views/models/event-view":353,"../../views/models/option-event-view":358,"../base-view":91}],157:[function(e,t,n){var i,o,r,s,l,a;({TagListView:r}=e("../lists/tag-list-view")),({TagView:s}=e("../models/tag-view")),l=e("urijs"),a=e("underscore"),i=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._SidebarTagFilterItemView")}}).prototype.rule={"._is-selected=":function(){if(!this.model.get("isFilter"))return""},"._not-selected=":function(){if(this.model.get("isFilter"))return""},"._add-filter-link@href":function(){var e,t,n,i;return n=(n=null!=(e=null!=(t=(i=new l(this.model.parents("filter").url()).removeSearch("page")).search(!0).filter_tags)?t.split(","):void 0)?e:[]).concat(this.model.get("id")),i.setSearch("filter_tags",n.join(","))},"._remove-filter-link@href":function(){var e,t,n,i;return n=null!=(e=null!=(t=(i=new l(this.model.parents("filter").url()).removeSearch("page")).search(!0).filter_tags)?t.split(","):void 0)?e:[],(n=a.without(n,this.model.get("id"))).length?i.setSearch("filter_tags",n.join(",")):i.removeSearch("filter_tags")},"._question-count=":function(){return this.model.get("count")}},e}.call(this),e}.call(this),o=function(){class e extends r{}return e.prototype.ItemView=i,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._SidebarTagFilterView")}}).prototype.rule={"._clear-filter-link@href":function(){return new l(this.collection.parents("filter").url()).removeSearch("filter_tags")}},e}.call(this),e}.call(this),t.exports={SidebarTagFilterView:o,SidebarTagFilterItemView:i}},{"../lists/tag-list-view":182,"../models/tag-view":206,underscore:448,urijs:452}],158:[function(e,t,n){var i,o,r;({UserView:o}=e("../models/user-view")),r=e("underscore"),i=function(){class e extends o{initialize(e){return"undefined"!=typeof window&&null!==window&&(e=r.extend({ajax:`${window.currentUser.url()}/karma`},e)),super.initialize(e)}isComplete(){var e,t,n,i,o,r;return null!=(null!=(e=this.model.get("karma"))&&null!=(t=e.badges)?t.viewpointsAny:void 0)&&null!=(null!=(n=this.model.get("karma"))&&null!=(i=n.badges)?i.editsAny:void 0)&&this.model.get("comments").count()>0&&null!=(null!=(o=this.model.get("karma"))&&null!=(r=o.badges)?r.topicsAny:void 0)&&this.model.get("votes").count()>15}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SidebarUserStatsView")}}).prototype.rule={"._is-complete=":function(){if(!this.isComplete())return""},"._not-complete=":function(){if(this.isComplete())return""},"._first-option-complete@class+":function(){var e,t;if(null!=(e=this.model.get("karma"))&&null!=(t=e.badges)?t.viewpointsAny:void 0)return"complete"},"._first-edit-complete@class+":function(){var e,t;if(null!=(e=this.model.get("karma"))&&null!=(t=e.badges)?t.editsAny:void 0)return"complete"},"._first-comment-complete@class+":function(){if(this.model.get("comments").count())return"complete"},"._first-question-complete@class+":function(){var e,t;if(null!=(e=this.model.get("karma"))&&null!=(t=e.badges)?t.topicsAny:void 0)return"complete"},"._first-15-votes-complete@class+":function(){if(this.model.get("votes").count())return"complete"},"._vote-count=":function(){return this.model.get("votes").count()},"._edit-count=":function(){return this.model.get("contributions").count()},"._comment-count=":function(){return this.model.get("comments").count()}},e}.call(this),e}.call(this),t.exports={SidebarUserStatsView:i}},{"../models/user-view":207,underscore:448}],159:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;({BaseView:o}=e("../base-view")),({TooltipView:h}=e("../components/tooltip-view")),({OptionModel:r}=e("../../models/index")),({BADGES:i}=e("../../utils/constants")),m=e("underscore"),g=function(e){var t,n,o;return(t=null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)===i.best||t===i.excellent||(null!=(o=e.get("option_ranking_obj"))?o.rec_weight_up:void 0)>=10},f=function(e){return g(e)&&e.getSlantScore()<59},s=function(){class e extends o{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreBadgeView")}}).prototype.rule={"._SlantScoreBadgeContentView=":function(){var e;switch(null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0){case i.best:case i.excellent:return new d({model:this.model});default:return new u({model:this.model})}}},e}.call(this),e}.call(this),l=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SlantScoreInteractableBadgeView")}},e.prototype.showTooltip=m.debounce(function(e){var t;if((null==(t=this.tooltip)||!t.attached)&&this.mouseover)return this.tooltip=new p({model:this.model,follows:e.currentTarget})},200),e.prototype.events={"mouseenter ._explanation-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.mouseover=!0,this.showTooltip.call(this,e)},"mouseleave ._explanation-tooltip-link":function(e){if(this.mouseover=!1,this.tooltip)return this.tooltip.close()},"click ._explanation-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.tooltip=new p({model:this.model,follows:e.currentTarget})}},e}.call(this),u=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreSimpleBadgeView")}}).prototype.rule={"._is-confident-score=":function(){if(!g(this.model))return""},"._not-confident-score=":function(){if(g(this.model))return""},"._slant-score=":function(){return this.model.getSlantScore()},"._score-type@class+":function(){var e,t;switch(e=null!=(t=this.model.get("option_ranking_obj"))?t.badge:void 0){case i.best:case i.excellent:case i.flagged:return e;default:if(f(this.model))return"bad"}}},e}.call(this),e}.call(this),a=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._SlantScoreInteractableSimpleBadgeView")}},e.prototype.showTooltip=l.prototype.showTooltip,e.prototype.events=l.prototype.events,e}.call(this),d=function(){class e extends u{isGaming(){var e;return null!=(e=this.model.getModel("question_id"))?e.isGamingQuestion():void 0}}return e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._SlantScoreTopBadgeView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.isGaming())return""},"._not-gaming-question=":function(){if(this.isGaming())return""},"._is-best=":function(){var e;if((null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)!==i.best)return""},"._is-excellent=":function(){var e;if((null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)!==i.excellent)return""},"._gaming-type@class+":function(){if(this.isGaming())return"gaming"}},e}.call(this),e}.call(this),p=function(){class e extends h{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Slant Score Explanation Tooltip Opened")}}return e.prototype.options={align:"left"},e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._SlantScoreTooltipView")}}).prototype.rule={"._upvote-count=":function(){var e;return null!=(e=this.model.get("option_ranking_obj").rec_count_up)?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("option_ranking_obj").rec_count_down)?e:0},"._SlantScoreTooltipContentView=":function(){return new c({model:this.model})}},e}.call(this),e}.call(this),c=function(){class e extends o{isGaming(){var e;return null!=(e=this.model.getModel("question_id"))?e.isGamingQuestion():void 0}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreTooltipContentView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.isGaming())return""},"._not-gaming-question=":function(){if(this.isGaming())return""},"._is-best=":function(){var e;if((null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)!==i.best)return""},"._is-excellent=":function(){var e;if((null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)!==i.excellent)return""},"._is-flagged=":function(){var e;if((null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)!==i.flagged)return""},"._is-bad=":function(){if(!f(this.model))return""},"._is-contender=":function(){if(f(this.model))return""},"._is-confident-score=":function(){if(!g(this.model))return""},"._not-confident-score=":function(){if(g(this.model))return""},"._SlantScoreBadgeView=":function(){return new s({model:this.model})}},e}.call(this),e}.call(this),t.exports={SlantScoreBadgeView:s,SlantScoreInteractableBadgeView:l,SlantScoreSimpleBadgeView:u,SlantScoreInteractableSimpleBadgeView:a,SlantScoreTopBadgeView:d,SlantScoreTooltipView:p,SlantScoreTooltipContentView:c}},{"../../models/index":64,"../../utils/constants":85,"../base-view":91,"../components/tooltip-view":167,underscore:448}],160:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;({BaseView:i}=e("../base-view")),({ModalView:s}=e("../components/modal-view")),({OptionView:l}=e("../models/option-view")),({SpecView:y}=e("../models/spec-view")),({ListView:r}=e("../lists/list-view")),({SearchableListView:u}=e("../lists/searchable-list-view")),({SearchablePopupInvokerView:c}=e("../components/searchable-popup-invoker-view")),({DropdownView:o}=e("../components/dropdown-view")),({ProductModel:a}=e("../../models/index")),({Spec:p}=e("../../models")),({SpecList:v}=e("../../collections")),({specKeys:x}=e("../../utils/data")),_=e("underscore"),w=function(){class e extends s{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._SpecEditorModalView")}}).prototype.rule={"._option-title=":function(){return this.model.get("title")},"._SpecEditorModalSpecListView=":function(){var e,t,n,i,o,r,s,l,a;for(l=function(){var e,n,i,o,r;for(r=[],e=0,n=(o=null!=(i=this.options.defaultSpecs)?i:[]).length;e<n;e++)t=o[e],r.push(new p({key:t,value:""}));return r}.call(this),r=new v(l),e=0,n=(i=this.model.get("product_spec_set")).length;e<n;e++)o=i[e],({spec_key:t,spec_value:a}=o),(s=r.findWhere({key:t}))?s.set({value:a}):r.add(new p({key:t,value:a}));return r.add(new p({key:"",value:""})),new f({collection:r})}},e}.call(this),e.prototype.events={"submit ._spec-form":function(e){var t,n,i,o,r,s,l,a;return e.preventDefault(),this.$(".Modal-Window").addClass("Loading"),o=(o=this.getChildrenByView(f)[0].collection.toJSON()).filter(function(e){return e.value}),i=_.pluck(o,"key"),s=new v(this.model.get("product_spec_set").map(function(e){return new p({key:e.spec_key,value:e.spec_value})})).toJSON(),r=_.pluck(s,"key"),t=_.chain(r).difference(i).map(function(e){return{key:e,value:null}}).value(),n=o.concat(t),a=new v(function(){var e,t,i;for(i=[],e=0,t=n.length;e<t;e++)(l=n[e]).key&&i.push(new p(l));return i}()),this.model.getLegacyModel().save({specs:a},{highlight:!1,remove:!0,reset:!0,silent:!0,success:()=>this.model.fetch({success:(e,t)=>{var n,i,o;return this.remove(),(null!=(o=null!=(i=(n=this.model.getModel("option_id")).getModel("question_id"))?i:n)?o:this.model).trigger("change")},error:()=>this.$(".Modal-Window").removeClass("Loading")}),error:()=>this.$(".Modal-Window").removeClass("Loading")})}},e}.call(this),g=function(){class e extends c{createPopupView(e){var t;return new m({collection:new v(function(){var e,n,i;for(i=[],e=0,n=x.length;e<n;e++)t=x[e],i.push(new p({key:t}));return i}()),follows:e,align:"left",searchQuery:e.val(),sourceSpec:this.model})}}return e.prototype.Model=p,e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._SpecEditorModalSpecView")}}).prototype.rule={"._spec-key-input@value":function(){return this.model.get("key")},"._spec-value-input@value":function(){return this.model.get("value")}},e}.call(this),e.prototype.events={"click ._remove-spec-link":function(e){return this.model.collection.remove(this.model)},"input ._spec-key-input":function(e){return this.model.set("key",$(e.currentTarget).val(),{silent:!0})},"input ._spec-value-input":function(e){return this.model.set("value",$(e.currentTarget).val(),{silent:!0})},"blur ._spec-key-input":function(e){var t,n;if(n=$(e.currentTarget).val(),t=_.find(x,function(e){return e.toUpperCase()===n.toUpperCase()}))return this.model.set("key",t)}},e}.call(this),f=function(){class e extends r{}return e.prototype.ItemView=g,e.prototype.Collection=v,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SpecEditorModalSpecListView")}},e.prototype.events={"click ._add-spec-link":function(e){return this.collection.add(new p({key:"",value:""}))}},e}.call(this),m=function(){class e extends o{update(){var e;return super.update(...arguments),(null!=(e=this.getChildrenByView(u)[0])?e.count():void 0)?this.$el.show():this.$el.hide()}setSourceSpecKey(e){return this.follows.val(e),this.options.sourceSpec.set("key",e,{silent:!0})}}return e.prototype.options={parentSelector:"._SpecEditorModalView"},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownView")}}).prototype.rule={"._SpecEditorModalSpecKeyDropdownKeyListView=":function(){return new d({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e}.call(this),h=function(){class e extends y{}return e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownKeyView")}},e.prototype.events={"click ._spec-key-link":function(){var e;return(e=this.getParentByView(o)).setSourceSpecKey(this.model.get("key")),e.close()}},e}.call(this),d=function(){class e extends u{update(){var e,t;return super.update(...arguments),this.count()?null!=(e=this.getParentByView(o))?e.$el.show():void 0:null!=(t=this.getParentByView(o))?t.$el.hide():void 0}getSearchValue(e){return e.get("key")}filter(e){var t;return t=this.getSearchValue(e),super.filter(e)&&this.options.searchQuery!==t&&this.options.searchQuery.length}}return e.prototype.limit=5,e.prototype.ItemView=h,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownKeyListView")}},e}.call(this),t.exports={SpecEditorModalView:w,SpecEditorModalSpecView:g,SpecEditorModalSpecListView:f,SpecEditorModalSpecKeyDropdownView:m,SpecEditorModalSpecKeyDropdownKeyView:h,SpecEditorModalSpecKeyDropdownKeyListView:d}},{"../../collections":2,"../../models":34,"../../models/index":64,"../../utils/data":86,"../base-view":91,"../components/dropdown-view":101,"../components/modal-view":122,"../components/searchable-popup-invoker-view":155,"../lists/list-view":173,"../lists/searchable-list-view":178,"../models/option-view":200,"../models/spec-view":205,underscore:448}],161:[function(e,t,n){var i,o,r,s,l,a;({BaseView:i}=e("../base-view")),({SpecView:a}=e("../models/spec-view")),({Spec:r}=e("../../models")),({OptionModel:o}=e("../../models/index")),s=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._SpecListItemView")}},e}.call(this),l=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _.defer(()=>(this.setCollapsedHeight(),this.list=this.$("._expandable-list"),this.list.css("max-height",this.collapsedHeight)))}setCollapsedHeight(){var e,t;if(t=this.options.lastCollapsedItem||4,(e=this.$(`._spec-list-item:nth-child(${t})`)).length)return this.collapsedHeight=e.position().top+e.outerHeight()||""}}return e.prototype.Model=o,e.prototype.ItemView=s,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SpecListView")}}).prototype.rule={"._has-more-specs=":function(){if(!(this.model.get("option_spec_set").length>(this.options.lastCollapsedItem||4)))return""},"._list=":function(){var e,t,n,i,o,s;for(i=[],e=0,t=(n=this.model.get("option_spec_set")).length;e<t;e++)s={key:(o=n[e]).spec_key,value:o.spec_value},i.push(new this.ItemView({model:new r(s)}));return i}},e}.call(this),e.prototype.events={"click ._expand-specs-link":function(e){var t;return t=this.list.prop("scrollHeight"),this.list.css("max-height",t),this.$("._expand-specs-link").addClass("hidden"),this.$("._collapse-specs-link").removeClass("hidden"),this.expanded=!0},"click ._collapse-specs-link":function(e){return this.list.css("max-height",this.collapsedHeight),this.$("._expand-specs-link").removeClass("hidden"),this.$("._collapse-specs-link").addClass("hidden"),this.expanded=!1},"resize window":function(){var e,t,n;return this.setCollapsedHeight(),e=this.expanded?null!=(t=this.list)?t.prop("scrollHeight"):void 0:this.collapsedHeight,null!=(n=this.list)?n.css("max-height",e):void 0}},e}.call(this),t.exports={SpecListItemView:s,SpecListView:l}},{"../../models":34,"../../models/index":64,"../base-view":91,"../models/spec-view":205}],162:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A;({BaseView:o}=e("../base-view")),({QuestionView:m}=e("../models/question-view")),({OptionView:p}=e("../models/option-view")),({ListView:l}=e("../lists/list-view")),({CarouselView:r}=e("../components/carousel-view")),({TooltipSpecView:T,TooltipTitleView:M}=e("../components/tooltip-view")),({DropdownView:s}=e("./dropdown-view")),({SpecEditorModalView:v}=e("../components/spec-editor-modal-view")),({ModalView:a}=e("../components/modal-view")),({SlantScoreInteractableSimpleBadgeView:g}=e("../components/slant-score-view")),({OptionCollection:u,RecCollection:f}=e("../../collections/index")),({QuestionModel:d,OptionModel:c,QuestionPageQuery:h}=e("../../models/index")),({Spec:w}=e("../../models")),({BADGES:i}=e("../../utils/constants")),A=e("moment"),L=e("underscore"),O=function(e){return null!=e.get("option_spec_set")},I=function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)!==i.flagged},P=function(){class e extends m{initialize(e){var t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&null!=(t=this.model.getCollection("question_option_ids")))return this.listenTo(t,"sync",this.update)}getFilteredList(){return this.getNonFlaggedList().filter(O)}getNonFlaggedList(){return this.model.getCollection("question_option_ids").filter(I)}getSpecTableTitleRowView(){return S}hasMoreItems(){var e;return(null!=(e=this.options.limit)?e:Infinity)<this.getNonFlaggedList().length}hasMoreSpecs(){var e;return this.model.getSpecKeys().length>(null!=(e=this.options.specLimit)?e:Infinity)}}return e.prototype.Model=d,e.prototype.pageLength=20,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._SpecTableView")}}).prototype.rule={"._has-more-items=":function(){if(!this.hasMoreItems()&&!this.hasMoreSpecs())return""},"._load-more-count=":function(){return Math.min(this.pageLength,this.getNonFlaggedList().length-this.getFilteredList().length)},"._option-count=":function(){return this.getNonFlaggedList().length},"._spec-table-title-list=":function(){var e,t,n;return t=null!=(n=this.options.limit)?n:this.getFilteredList().length,e=this.getSpecTableTitleRowView(),this.model.getCollection("question_option_ids").slice(0,t).map(t=>new e({model:t}))},"._SpecTableCarouselView=":function(){return new y({model:this.model,limit:this.options.limit})}},e}.call(this),e.prototype.events={"click ._load-more-link":function(e){var t,n,i;return e.preventDefault(),e.stopPropagation(),i=this.model.getCollection("question_option_ids"),this.$("._load-more-link").addClass("Loading"),n=L.findLastIndex(i.models,completeOptionFilter)+1,t={question_id:this.model.get("question_id"),option_offset:n,option_limit:this.pageLength,rec_limit:0},this.model.store.ensureQuery(h,t).fetch(),this.listenToOnce(i,"sync error",()=>(i.trigger("moreViewpointsLoaded"),this.update()))}},e}.call(this),y=function(){class e extends r{getFilteredList(){return this.getNonFlaggedList().filter(O)}getNonFlaggedList(){return this.model.getCollection("question_option_ids").filter(I)}getSpecTableRowView(){return b}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._SpecTableCarouselView")}}).prototype.rule={"._spec-header-list=":function(){var e,t,n,i,o;for(o=[],e=0,n=(i=this.model.getSpecKeys().slice(0,this.options.specLimit)).length;e<n;e++)t=i[e],o.push(new x({model:new w({key:t})}));return o},"._spec-table-list=":function(){var e,t,n;return t=null!=(n=this.options.limit)?n:this.getFilteredList().length,e=this.getSpecTableRowView(),this.model.getCollection("question_option_ids").slice(0,t).map(t=>new e({model:t}))}},e}.call(this),e.prototype.events={"click ._previous-item-link":function(e){return e.preventDefault(),e.stopPropagation(),this.step(-1)},"click ._next-item-link":function(e){return e.preventDefault(),e.stopPropagation(),this.step(1)}},e}.call(this),S=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._SpecTableOptionTitleRowView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.getCollection("option_image_ids").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"@class+":function(){if(this.model.get("option_ranking_obj").badge===i.best||this.model.get("option_ranking_obj").badge===i.excellent)return"top"},"._SlantScoreInteractableSimpleBadgeView=":function(){return new g({model:this.model})}},e}.call(this),e.prototype.events={"click ._title-dropdown-link":function(e){var t,n;if(null!=(t=this.getParentByView(V))&&(t.closable=!1),null==(n=this.popup)||!n.attached)return this.popup=new R({model:this.model,follows:e.currentTarget}),L.delay(()=>null!=t?t.closable=!0:void 0,100)},"click ._option-link":function(e){var t;if(null!=(t=this.getParentByView(a)))return t.remove()},"mouseover .SpecTable-TitleCell":function(e){var t;if((t=e.currentTarget).scrollWidth>$(t).outerWidth())return new M({model:this.model,follows:t})}},e}.call(this),C=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._SpecTableOptionTitleListView")}},e}.call(this),R=function(){class e extends s{initialize(){return super.initialize(...arguments),this.follows.addClass("selected")}close(){return super.close(...arguments),this.follows.removeClass("selected")}getParentModel(){return this.model.getModel("question_id")}}return e.prototype.options={align:"right",relative:!1},e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SpecTableMoreDropdownView")}},e.prototype.events={"click ._edit-specs-link":function(e){return new v({model:this.model.getModel("product_id"),defaultSpecs:this.getParentModel().getSpecKeys()}),this.close()}},e}.call(this),b=function(){class e extends p{getParentModel(){return this.model.getModel("question_id")}}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._SpecTableOptionRowView")}}).prototype.rule={"@class+":function(){if(this.model.get("option_ranking_obj").badge===i.best||this.model.get("option_ranking_obj").badge===i.excellent)return"top"},"._option-last-modified=":function(){return A(new Date(this.model.get("option_updated_obj").updated_timestamp)).format("MMM D, YYYY")},"._spec-list=":function(){var e,t,n,i,o,r,s,l,a;for(s=[],e=0,n=(r=null!=(i=null!=(o=this.getParentModel())?o.getSpecKeys().slice(0,this.options.specLimit):void 0)?i:[]).length;e<n;e++)a={key:t=r[e],value:(l=L.findWhere(this.model.get("option_spec_set"),{spec_key:t}))?l.spec_value:"-"},s.push(new k({model:new w(a)}));return s}},e}.call(this),e.prototype.events={"click ._option-site-link":function(e){var t;return t={source:"spec table"},this.sendOptionSiteLinkAnalytics(t)}},e}.call(this),_=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._SpecTableCellView")}},e}.call(this),x=function(){class e extends _{}return e.prototype.Model=w,e.prototype.Rule=function(){var e;return(e=class extends _.prototype.Rule{template(){return template("._SpecTableHeaderCellView")}}).prototype.rule={"._spec-key=":function(){return this.model.get("key")}},e}.call(this),e}.call(this),k=function(){class e extends _{}return e.prototype.Model=w,e.prototype.Rule=function(){var e;return(e=class extends _.prototype.Rule{template(){return template("._SpecTableSpecCellView")}}).prototype.rule={"._no-spec-value=":function(){if(this.model.get("value"))return""},"._spec-value=":function(){var e;return null!=(e=this.model.get("value"))?e:""}},e}.call(this),e.prototype.events={mouseover:function(e){if(this.el.scrollWidth>this.$el.outerWidth())return new T({model:this.model,follows:this.el})}},e}.call(this),V=function(){class e extends a{initialize(){return super.initialize(...arguments),analytics.track("Spec Table Modal Opened")}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SpecTableModalView")}}).prototype.rule={"._SpecTableView=":function(){return new P({model:this.model})}},e}.call(this),e.prototype.events={click:function(e){if(!1!==this.closable)return this.remove()}},e}.call(this),t.exports={SpecTableView:P,SpecTableCarouselView:y,SpecTableOptionTitleRowView:S,SpecTableOptionTitleListView:C,SpecTableMoreDropdownView:R,SpecTableOptionRowView:b,SpecTableCellView:_,SpecTableHeaderCellView:x,SpecTableSpecCellView:k,SpecTableModalView:V}},{"../../collections/index":7,"../../models":34,"../../models/index":64,"../../utils/constants":85,"../base-view":91,"../components/carousel-view":95,"../components/modal-view":122,"../components/slant-score-view":159,"../components/spec-editor-modal-view":160,"../components/tooltip-view":167,"../lists/list-view":173,"../models/option-view":200,"../models/question-view":201,"./dropdown-view":101,moment:441,underscore:448}],163:[function(e,t,n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _.defer(()=>(this.isSticky=!1,this.isStickyStopped=!1,e.prototype.makeSticky.apply(this)))}makeSticky(){var e,t,n,i,o,r,s,l,a,u,c,p,d,h,m,f;if(0===(s=this.$el.parents(".StickySidebar")).length&&(s=this.$el),s.is(":visible"))return e=$(window),m=e.scrollTop(),h=e.height()-($(".Toaster").height()||0),d=m+h,i=$(".NavHeader:visible").height()||0,p=s.parent(),0===(l=s.find(".StickySidebar-Container")).length&&(l=s),a=s.find(".StickySidebar-Content"),(this.isStickyNeeded||(this.isStickyNeeded=l.offset().top+l.outerHeight()+a.outerHeight()<=p.offset().top+p.height()))&&(m+i>l.offset().top?this.isSticky||(s.addClass("sticky"),a.css({"padding-top":i}),this.isSticky=!0):this.isSticky&&(s.removeClass("sticky"),a.css({"padding-top":""}),this.isSticky=!1),this.isSticky&&(u=a.outerHeight(),c=parseInt(s.css("padding-top"),10)||0,r=p.offset().top+p.height(),m+c+u>r?this.isStickyStopped||(s.removeClass("sticky"),a.css({top:r-u-s.offset().top}),this.isStickyStopped=!0):this.isStickyStopped&&(s.addClass("sticky"),a.css({top:""}),this.isStickyStopped=!1))),n=s.find(".StickySidebar-Link").removeClass("selected"),f=$(),t=$(),n.each(function(){var e,n,i,o;if(!f.length)return e=(o=(i=$(this.hash)).offset().top)+(n=i.height()),o>=m&&e<=d||n>h&&o<=m&&e>=d?f=f.add(this):o<m?t=t.add(this):void 0}),(o=f.first()).length||(o=t.last()),o.addClass("selected")}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._StickySidebarPanelView")}},e.prototype.events={"scroll document":function(t){return e.prototype.makeSticky.apply(this)},"resize window":function(t){return this.isStickyStopped=!1,this.isStickyNeeded=null,e.prototype.makeSticky.apply(this)}},e}.call(this),t.exports={StickySidebarPanelView:o}},{"../base-view":91}],164:[function(e,t,n){var i,o,r,s,l,a;({DropdownView:i}=e("./dropdown-view")),({TagView:a}=e("../models/tag-view")),({TagListView:l}=e("../lists/tag-list-view")),o=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._TagDropdownItemView","header")}},e}.call(this),r=function(){class e extends l{filter(e){return parseInt(e.get("count"))&&"female-fashion"!==e.get("id")}}return e.prototype.ItemView=o,e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._TagDropdownListView","header")}},e}.call(this),s=function(){class e extends i{}return e.prototype.options={align:"right",anchor:"below",cover:!1,relative:!1},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._TagDropdownView","header")}}).prototype.rule={"._TagDropdownListView=":function(){return new r({collection:this.collection,offset:this.options.offset})}},e}.call(this),e.prototype.events={"click ._dropdown-item":function(e){return this.close()}},e}.call(this),t.exports={TagDropdownView:s,TagDropdownItemView:o,TagDropdownListView:r}},{"../lists/tag-list-view":182,"../models/tag-view":206,"./dropdown-view":101}],165:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T=[].indexOf;({BaseView:i}=e("../base-view")),({TagView:S}=e("../models/tag-view")),({TagListView:p}=e("../lists/tag-list-view")),({SearchableListView:s}=e("../lists/searchable-list-view")),({ContentContainerView:o}=e("../components/content-container-view")),({DropdownView:r}=e("../components/dropdown-view")),({SearchablePopupInvokerView:l}=e("../components/searchable-popup-invoker-view")),({Tag:a,TagFilter:u}=e("../../models")),({TagList:c}=e("../../collections")),({tagData:P}=e("../../utils/data")),k=e("underscore"),w=function(){class e extends o{initialize(e={}){var t;return"undefined"!=typeof window&&null!==window&&(this.allTagList=new c([],{url:"/tags"}),t=(()=>{var e;return e=this.model.get("include").pluck("id"),this.allTagList.each(function(t){var n;if(n=t.get("id"),T.call(e,n)>=0)return t.set("selected",!0)}),this.$el.removeClass("Loading")}),this.allTagList.fetch({silent:!0,success:()=>(this.allTagList.trigger("reset"),t()),error:()=>{var e;return this.allTagList=new c(function(){var t,n,i;for(i=[],t=0,n=P.length;t<n;t++)e=P[t],i.push(new a(e));return i}()),t()}})),null==e.ContentView&&(e.ContentView=x),null==e.contentOptions&&(e.contentOptions={model:this.model}),this.$el.addClass("Loading"),super.initialize(e),this.stopListening(this.model),this.listenToOnce(this.model,"sync",()=>(0===this.model.get("include").count()&&this.setContent(R,{model:this.model}),this.$el.removeClass("Loading")))}setContent(e,t){return t=k.extend({allTags:this.allTagList},t),super.setContent(e,t)}}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._TagSelectorHeaderView")}}).prototype.rule={"@class+":function(){if("undefined"==typeof window||null===window)return"Loading"}},e}.call(this),e}.call(this),h=function(){class e extends i{swapContent(e,t){var n;return n=this.getParentByView(o),t=k.extend({},{model:this.model},t),n.setContent(e,t)}}return e.prototype.Model=u,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._TagSelectorContentView")}},e}.call(this),x=function(){class e extends h{initialize(){return super.initialize(...arguments),this.listenTo(this.model,"sync",this.update.bind(this))}}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._TagSelectorTagBarView")}}).prototype.rule={"._TagSelectorTagBarTagListView=":function(){return new y({collection:this.model.get("include")})}},e}.call(this),e.prototype.events={"click ._swap-view-link":function(e){return analytics.track("Feed Subscription Editor Opened"),this.swapContent(R)}},e}.call(this),R=function(){class e extends h{initialize(e){var t;return this.newTags=e.allTags,t=e.model.get("include").pluck("id"),this.newTags.each(function(e){var n;if(n=e.get("id"),T.call(t,n)>=0)return e.set("selected",!0)}),super.initialize(...arguments),this.stopListening(this.model,"change",this.update),this.listenTo(this.newTags,"repaint",function(){return this.getParentByView(o).setHeight(),this.isDirty()?this.$("._save-link").prop("disabled",!1):this.$("._save-link").prop("disabled",!0)})}isDirty(){return!k.isEqual(k.pluck(this.getSelectedTags(),"id"),this.model.get("include").pluck("id"))}hasSelectedTags(){return this.getSelectedTags().length>0}getSelectedTags(){return this.newTags.where({selected:!0})}}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._TagSelectorTagBuilderView")}}).prototype.rule={"._TagSelectorTagBuilderSearchFormView=":function(){return new V({collection:this.newTags})},"._TagSelectorActiveTagListView=":function(){return new d({collection:this.newTags})},"._TagSelectorSuggestedTagListView=":function(){return new v({collection:this.newTags})}},e}.call(this),e.prototype.events={"click ._swap-view-link":function(e){return this.swapContent(x)},"click ._save-link":function(e){var t,n;return analytics.track("Feed Subscriptions Updated"),n=new c(this.getSelectedTags()),(t=this.getParentByView(o)).$el.addClass("Loading"),this.model.save({include:n},{success:(e,n)=>(window.localStorage.tagFilterData=JSON.stringify(n),t.$el.removeClass("Loading"),this.swapContent(x))})}},e}.call(this),V=function(){class e extends l{createPopupView(e){return new g({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._TagSelectorTagBuilderSearchFormView")}},e}.call(this),C=function(){class e extends S{}return e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{template(){return template("._TagSelectorTagView")}}).prototype.rule={"._selected-class@class+":function(){if(this.model.get("selected"))return"selected"}},e}.call(this),e.prototype.events={"click ._select-tag-link":function(e){return this.model.set("selected",!this.model.get("selected"),{silent:!0}),this.model.parents("tags").trigger("repaint")}},e}.call(this),b=function(){class e extends p{}return e.prototype.ItemView=C,e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._TagSelectorTagListView")}},e}.call(this),_=function(){class e extends C{}return e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._TagSelectorTagBarTagView")}},e}.call(this),y=function(){class e extends b{}return e.prototype.ItemView=_,e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._TagSelectorTagBarTagListView")}},e}.call(this),d=function(){class e extends b{filter(e,t){return e.get("selected")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._TagSelectorActiveTagListView")}},e}.call(this),v=function(){class e extends b{filter(e,t){return!e.get("selected")&&"female-fashion"!==e.get("id")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._TagSelectorSuggestedTagListView")}},e}.call(this),g=function(){class e extends r{position(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0)),super.position(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._TagSelectorDropdownView")}}).prototype.rule={"._TagSelectorDropdownListView=":function(){return new f({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e.prototype.events={"resize window":e.prototype.position,"scroll window":e.prototype.position},e}.call(this),m=function(){class e extends S{}return e.prototype.Rule=class extends S.prototype.Rule{template(){return template("._TagSelectorDropdownItemView")}},e.prototype.events={"click ._dropdown-item":function(e){var t;return this.model.unset("selected",{silent:!0}),this.model.set("selected",!0,{silent:!0}),null!=(t=this.getParentByView(r))&&t.close(),this.model.parents("tags").trigger("repaint")}},e}.call(this),f=function(){class e extends s{getSearchValue(e){return e.get("name")}}return e.prototype.ItemView=m,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._TagSelectorDropdownListView")}},e}.call(this),t.exports={TagSelectorHeaderView:w,TagSelectorContentView:h,TagSelectorTagBarView:x,TagSelectorTagBuilderView:R,TagSelectorTagBuilderSearchFormView:V,TagSelectorTagView:C,TagSelectorTagListView:b,TagSelectorTagBarTagView:_,TagSelectorTagBarTagListView:y,TagSelectorActiveTagListView:d,TagSelectorSuggestedTagListView:v,TagSelectorDropdownView:g,TagSelectorDropdownItemView:m,TagSelectorDropdownListView:f}},{"../../collections":2,"../../models":34,"../../utils/data":86,"../base-view":91,"../components/content-container-view":99,"../components/dropdown-view":101,"../components/searchable-popup-invoker-view":155,"../lists/searchable-list-view":178,"../lists/tag-list-view":182,"../models/tag-view":206,underscore:448}],166:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q;f=e("../../rule"),({BaseView:i}=e("../base-view")),({ListView:s}=e("../lists/list-view")),({NotifyPopupServerErrorView:u,NotifyPopupAddedOptionView:l,NotifyPopupUpdatedOptionView:c,NotifyPopupAddedSectionView:a,NotifyPopupUpdatedSectionView:p}=e("./notify-popup-view")),({OptionModel:h,SectionModel:y,ImageModel:r,QuestionPageQuery:m}=e("../../models/index")),({OptionCollection:d,SectionCollection:g,ImageCollection:o}=e("../../collections/index")),({ViewpointEdit:O,SectionEdit:w}=e("../../models")),({ViewpointList:A,SectionList:v}=e("../../collections")),({convertURL:E,isURL:U}=e("../../utils/transforms")),B=function(e){return function(t){var n,i;return $(t.currentTarget).removeClass("error").nextAll(".Toaster-Error").find(".Toaster-ErrorText").remove(),this.model.set(e,$(t.currentTarget).val(),{silent:!0}),(i=null!=(n=this.getParentByView(L))?n:this).isSubmittable()?i.$("._toast-submittable").prop("disabled",!1):i.$("._toast-submittable").prop("disabled",!0)}},q=function(e,t){if(t)return t=_.once(t.bind(e)),e?("TransitionEvent"in window&&e.$el.one("transitionend",t),window.setTimeout(t,1e3)):t()},D=function(e){return _.delay(function(){var t;if(e=$(e).get(0))return e.focus(),t=e.value.length,e.setSelectionRange(t,t)},200)},I=function(){class e extends i{initialize(e={}){if(this.previousHeight=0,e.prerender&&"false"!==this.$el.attr("data-prerender")||(this.activeToastView=this.makeDefaultToast()),super.initialize(...arguments),this.activeToastView=this.getChildrenByView(L)[0],this.stopListening(),"undefined"!=typeof window&&null!==window)return _.defer(()=>this.activeToastView.$el.css("opacity",1))}makeDefaultToast(){if(this.DefaultToastView)return new this.DefaultToastView({model:this.model,collection:this.collection})}resize(){var e,t,n,i;if(t=this.previousToastView.$el.outerHeight(),e=this.activeToastView.$el.outerHeight(),!this.resizing&&e!==t)return this.resizing=!0,(n=this.$("._toaster")).css("height",e),this.activeToastView.$el.hasClass("collapsed")?(n.removeClass("maximize-mobile"),$("body").removeClass("has-popup")):(n.addClass("maximize-mobile"),$("body").addClass("has-popup")),q(this,function(){return this.resizing=!1}),(i=(()=>{var e;if(null!=(e=this.activeNotifyPopupView)&&e.position(),this.resizing)return window.requestAnimationFrame(i)}))()}setToast(e,t){var n,i;return this.transitioning?this:(delete this.setPendingToast,!(null!=(n=this.activeToastView)?n.complete:void 0)&&(null!=(i=this.activeToastView)?i.isDirty():void 0)?(this.setPendingToast=this.setToast.bind(this,e,t),this.$("._confirm-close").removeClass("hidden"),this):(this.transitioning=!0,this.previousToastView=this.activeToastView,this.previousHeight=this.$("._toaster").outerHeight(),this.activeToastView=e?new e(t):this.makeDefaultToast(),e?this.$el.addClass("toasterVisible"):this.$el.removeClass("toasterVisible"),this.setNotifyPopup(),this.update(),_.defer(()=>{var e;return null!=(e=this.previousToastView)&&e.$el.css("opacity",0),q(this.previousToastView,()=>{var e;return null!=(e=this.previousToastView)&&e.remove(),delete this.previousToastView,this.activeToastView.$el.css("opacity",1),this.transitioning=!1}),this.resize()}),this))}setNotifyPopup(e,t){var n;if(null!=(n=this.activeNotifyPopupView)&&n.remove(),this.activeNotifyPopupView=null,e)return t=_.defaults({follows:this.$("._toaster")},t),this.activeNotifyPopupView=new e(t)}}return e.prototype.Rule=function(){var e;return(e=class extends f{template(){return template("._ToasterView")}}).prototype.rule={"._activeToastView=":function(){var e;return null!=(e=this.activeToastView)?e:""},"._previousToastView=":function(){var e;return null!=(e=this.previousToastView)?e:""},"._toaster@style":function(){return`height: ${this.previousHeight}px;`}},e}.call(this),e.prototype.events={"click ._confirm-close-link":function(e){var t;return analytics.track("Confirmed Close Toast"),null!=(t=this.activeToastView)&&t.remove(),this.activeToastView.complete=!0,this.setPendingToast()},"click ._close-overlay-link":function(e){return analytics.track("Undo Close Toast"),this.$("._confirm-close").addClass("hidden")}},e}.call(this),L=function(){class e extends i{initialize(){var e,t,n;if(this.track("Opened"),super.initialize(...arguments),null==(e=this.options).originalAttributes&&(e.originalAttributes=null!=(t=null!=(n=this.model)?n.toJSON({valid:!0}):void 0)?t:{}),this.model&&(this.listenTo(this.model,"sync",()=>(this.track("Saved"),this.complete=!0,this.$el.removeClass("Loading"),this.sync(),this.triggerNotifyPopup())),this.listenTo(this.model,"saveError",(e,t)=>{return this.getParentByView(I).setNotifyPopup(u)})),"undefined"!=typeof window&&null!==window)return window.router.onbeforeunload=this.beforeunload.bind(this)}track(e){if(e&&this.eventName)return analytics.track(`${e} ${this.eventName}`)}sync(){return this.getParentByView(I).setToast(),this}triggerNotifyPopup(){}submit(e){var t;if(e=_.extend({remove:!0,scroll:"top",padding:100},e),this.isSubmittable()&&this.validate())return this.normalize(),t=this.getLegacyModel(),this.$el.addClass("Loading"),t.once("sync",()=>(this.fetch(t),delete this.currentRequest)),t.once("saveError",()=>(this.$el.removeClass("Loading"),delete this.currentRequest)),this.currentRequest=t.save(null,e)}fetch(e){return this.model.fetch({success:(e,t)=>{var n;return(n=t.getModel(this.model.id)).trigger("change",n)}})}beforeunload(){if($.contains(document,this.el)&&this.isDirty())return"One sec! Are you sure that you want to abandon your hard work?"}isError(){return!1}isDirty(e){var t,n,i,o,r,s;return e=_.extend({valid:!0},e),this.model&&this.options.originalAttributes&&(s=_.omit(this.model.toJSON(e),e.omit),t=_.omit(this.options.originalAttributes,e.omit),r=!_.isEqual(s,t)),o=null!=(n=null!=(i=this.activeSidebarView)?i.isDirty():void 0)&&n,r||o}isSubmittable(){return this.isDirty()&&null==this.currentRequest}normalize(){}getLegacyModel(){return this.model.getLegacyModel()}validate(e){return this.submitted=!0,this.isError()?(this.update(),!1):(this.getParentByView(I).setNotifyPopup(),!0)}setSidebar(e,t){var n;return null!=(n=this.activeSidebarView)&&n.remove(),delete this.activeSidebarView,this.activeSidebarView=e?new e(t):void 0,this}}return e.prototype.Rule=function(){var e;return(e=class extends f{template(){return template("._ToastView")}}).prototype.rule={"._no-active-sidebar=":function(){if(this.activeSidebarView)return""},"._has-active-sidebar=":function(){if(!this.activeSidebarView)return""},"._question-title=":function(){var e,t;return null!=(e=(null!=(t=this.model.getModel("option_id"))?t:this.model).getModel("question_id"))?e.get("title"):void 0},"._option-title=":function(){var e;return null!=(e=this.model.getModel("option_id"))?e.get("title"):void 0},"._toast-submittable@disabled":function(){if(!this.isSubmittable())return"disabled"},"._ToastSidebarView=":function(){return this.activeSidebarView}},e}.call(this),e.prototype.events={"submit ._toast-form":function(e){return this.track("Submitted"),e.preventDefault(),e.stopPropagation(),this.submit()},"click ._submit-link":function(e){return this.track("Submitted"),this.submit()},"click ._close-link":function(e){return this.track("Closed"),this.getParentByView(I).setToast()},"beforeunload window":e.prototype.beforeunload},e}.call(this),M=function(){class e extends i{initialize(){var e,t,n;return super.initialize(...arguments),null==(e=this.options).originalAttributes&&(e.originalAttributes=null!=(t=null!=(n=this.model)?n.toJSON({valid:!0}):void 0)?t:{}),this.stopListening()}isDirty(e){if(e=_.extend({valid:!0},e),this.model&&this.options.originalAttributes)return!_.isEqual(this.model.toJSON(e),this.options.originalAttributes)}close(){var e;return(e=this.getParentByView(L)).setSidebar(),e.update()}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ToastSidebarView")}},e.prototype.isError=L.prototype.isError,e.prototype.validate=L.prototype.validate,e}.call(this),x=function(){class e extends L{}return e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._ToastCollapsedView")}},e}.call(this),P=function(){class e extends L{initialize(){var e,t,n;if(e=null!=(t=null!=(n=this.model.getCollection("option_image_ids"))?n.map(function(e){return e.clone()}):void 0)?t:[],this.imageCollection=new o(e),this.options.originalImageAttributes=this.imageCollection.toJSON({valid:!0}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.imageCollection.chain().filter(function(e){return!e.get("hosted_uri")}).each(function(e){return e.upload()}).value(),this.listenTo(this.imageCollection,"add remove reset sort change uploaded",()=>this.isSubmittable()?this.$("._toast-submittable").prop("disabled",!1):this.$("._toast-submittable").prop("disabled",!0)),D(this.$("._option-title-input"))}sync(){var e,t;return t=this.getParentByView(I),(e=new y({title:"",body:"",section_type:"Pro",option_id:this.model.id})).store=this.model.store,this.$(".Toaster-MobileHeader").is(":visible")?t.setToast():t.setToast(T,{model:e})}fetch(e){var t;return t={question_id:this.model.get("question_id"),option_id:e.get("option_id")},this.model.store.ensureQuery(m,t).fetch({silent:!0,success:(t,n)=>{var i;return(i=this.model.getModel("question_id").getCollection("question_option_ids")).trigger("add",this.model,i),this.model.set(n.getModel(e.get("option_id")).attributes,{silent:!0}),this.model.trigger("sync",this.model)}})}triggerNotifyPopup(){return this.getParentByView(I).setNotifyPopup(l,{model:this.model})}isTitleMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("title"))?e.trim():void 0)}isTitleExistingError(){var e,t,n;return n=this.model.get("title"),e=this.model.get("product_id"),this.submitted&&(null!=(t=this.model.getModel("question_id").getCollection("question_option_ids"))?t.any(function(t){return e!==t.get("product_id")&&n===t.get("title")}):void 0)}isTitleError(){return this.isTitleMissingError()||this.isTitleExistingError()}isSiteURLInvalidError(){var e;return e=this.model.get("site_url"),this.submitted&&e&&!U(e)}isSiteURLError(){return this.isSiteURLInvalidError()}isImagesUnhostedError(){return this.imageCollection.find(function(e){return!e.get("hosted_uri")})}isImagesError(){return this.submitted&&this.isImagesUnhostedError()}isError(){return this.isSiteURLError()||this.isTitleError()||this.isImagesError()}isDirty(e){return e=_.extend({valid:!0},e),!_.isEqual(this.imageCollection.toJSON(e),this.options.originalImageAttributes)||super.isDirty(...arguments)}isSubmittable(){return super.isSubmittable(...arguments)&&!this.isImagesUnhostedError()}normalize(){var e,t,n;return e={title:null!=(t=null!=(n=this.model.get("title"))?n.trim():void 0)?t:"",text:this.model.get("body"),site_url:this.model.get("site_url")?E(this.model.get("site_url")):this.model.get("site_url")},this.model.set(e,{silent:!0}),this.imageCollection.each(function(e){var t,n,i;return i=e.get("source_uri"),n=e.get("hosted_uri"),t={},i&&(t.source=E(i)),n&&(t.hosted=n),e.set(t,{silent:!0})})}getLegacyModel(){var e,t,n;return(t=new A).meta({URL:`/topics/${this.model.getModel("question_id").get("t_id")}/viewpoints`}),n=this.model.getLegacyModel(),t.add(n),e=this.imageCollection.map(function(e){return e.getLegacyModel()}),n.get("revision").get("images").set(e),n}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._ToastOptionView")}}).prototype.rule={"._option-title-input@value":function(){return this.model.get("title")},"._option-site-url-input@value":function(){return this.model.get("site_url")},"._option-price-input@value":function(){return this.model.get("price")},"._option-title-required=":function(){if(!this.isTitleMissingError())return""},"._option-title-existing=":function(){if(!this.isTitleExistingError())return""},"._option-site-url-invalid=":function(){if(!this.isSiteURLInvalidError())return""},"._option-title-input@class+":function(){if(this.isTitleError())return"error"},"._option-site-url-input@class+":function(){if(this.isSiteURLError())return"error"},"._max-image-disabled@class+":function(){if(this.imageCollection.length>=5)return"disabled"},"._ToastImageListView=":function(){return new C({collection:this.imageCollection})}},e}.call(this),e.prototype.eventName="Add Option Toast",e.prototype.events={"click ._show-image-sidebar-link":function(e){return this.setSidebar(S,{model:new r({source_uri:""},{collection:this.imageCollection})}),this.update()},"click ._show-description-sidebar-link":function(e){return this.setSidebar(V,{model:this.model}),this.update()},"input ._option-title-input":B("title"),"input ._option-site-url-input":B("site_url"),"input ._option-price-input":B("price")},e}.call(this),R=function(){class e extends P{fetch(e){var t;return t={question_id:this.model.get("question_id"),option_id:this.model.id},this.model.store.ensureQuery(m,t).fetch({silent:!0,success:(e,t)=>{var n;return(n=t.getModel(this.model.id)).trigger("change",this.model),this.model.set(n.attributes,{silent:!0}),this.model.trigger("sync",this.model)}})}getLegacyModel(){var e,t,n;return e={revision:(t=super.getLegacyModel(...arguments)).get("revision")},n={collection:t.get("comments")},new O(e,n)}triggerNotifyPopup(){return this.getParentByView(I).setNotifyPopup(c,{model:this.model})}}return e.prototype.Model=h,e.prototype.Rule=class extends P.prototype.Rule{template(){return template("._ToastEditOptionView")}},e.prototype.eventName="Edit Option Toast",e.prototype.sync=L.prototype.sync,e}.call(this),V=function(){class e extends M{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return D(this.$("._description-sidebar-input"))}submit(){if(this.validate())return this.close()}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ToastDescriptionSidebarView")}}).prototype.rule={"._description-sidebar-input":function(){return this.model.get("body")}},e}.call(this),e.prototype.events={"input ._description-sidebar-input":B("body"),"click ._add-description-link":e.prototype.submit,"click ._cancel-description-link":function(e){return this.model.set("body",this.options.originalAttributes.body,{silent:!0}),this.close()},"click ._remove-description-link":function(e){return this.model.set("body","",{silent:!0}),this.close()}},e}.call(this),k=function(){class e extends i{initialize(){return super.initialize(...arguments),this.listenTo(this.model,"uploaded progress failed",this.update)}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ToastImageView")}}).prototype.rule={"._is-uploading=":function(){if(null==this.model.uploadProgress)return""},"._not-uploading=":function(){if(null!=this.model.uploadProgress)return""},"._background-image@style+":function(){var e;if(e=this.model.getImageThumbnailURL())return`background-image: URL('${e}');`},"._width-percent@style+":function(){return`width: ${100*this.model.uploadProgress}%`},"._error-class@class+":function(){if(this.model.uploadError)return"error"},"._index=":function(){return this.model.collection.indexOf(this.model)+1}},e}.call(this),e.prototype.events={"click ._edit-image-link":function(e){var t;return(t=this.getParentByView(L)).setSidebar(S,{model:this.model}),t.update()}},e}.call(this),C=function(){class e extends s{}return e.prototype.Collection=o,e.prototype.ItemView=k,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ToastImageListView")}},e}.call(this),S=function(){class e extends M{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return D(this.$("._image-sidebar-url-input"))}update(){var e;return super.update(...arguments),this.loadedSourceURL=this.model.get("source_uri"),(e=this.$("._image-sidebar")).on("error",()=>(e.addClass("error"),e.removeClass("loaded"),this.$(".Toaster-ImagePreview").removeClass("Loading"),this.$("._image-sidebar-broken-image-error").removeClass("hidden"))),e.on("load",()=>(e.addClass("loaded"),e.removeClass("error"),this.$(".Toaster-ImagePreview").removeClass("Loading"),this.$("._image-sidebar-broken-image-error").addClass("hidden"))),this.$("._image-sidebar-url-input").on("blur",t=>{var n;if((n=this.model.get("source_uri"))!==this.loadedSourceURL)return this.loadedSourceURL=n,e.removeClass("error"),this.$("._image-sidebar-cloud-error").remove(),n?(this.$(".Toaster-ImagePreview").addClass("Loading"),e.attr("src",this.model.getImagePreviewURL())):(this.$(".Toaster-ImagePreview").removeClass("Loading"),e.removeAttr("src"))})}isImageURLMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("source_uri"))?e.trim():void 0)}isImageURLInvalidError(){var e;return e=this.model.get("source_uri"),this.submitted&&e&&!U(e)}isImageURLError(){return this.isImageURLInvalidError()||this.isImageURLMissingError()}isError(){return this.isImageURLError()}submit(){if(this.validate())return this.model.collection.add(this.model,{silent:!0}),this.model.upload(),this.close()}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ToastImageSidebarView")}}).prototype.rule={"._is-new=":function(){if(this.model.collection.contains(this.model))return""},"._is-edit=":function(){if(!this.model.collection.contains(this.model))return""},"._image-sidebar-url-input@value":function(){return this.model.get("source_uri")},"._image-sidebar@src":function(){return this.model.getImagePreviewURL()},"._image-sidebar-url-invalid=":function(){if(!this.isImageURLInvalidError())return""},"._image-sidebar-url-missing=":function(){if(!this.isImageURLMissingError())return""},"._image-sidebar-baddata-error=":function(){if("baddata"!==this.model.uploadError)return""},"._image-sidebar-size-error=":function(){if("size"!==this.model.uploadError)return""},"._image-sidebar-upload-error=":function(){if("upload"!==this.model.uploadError)return""},"._image-sidebar-user-error=":function(){if("user"!==this.model.uploadError)return""},"._image-sidebar-info-error=":function(){if("info"!==this.model.uploadError)return""},"._image-sidebar-deleted-error=":function(){if("deleted"!==this.model.uploadError)return""},"._image-sidebar-image-error=":function(){if("image"!==this.model.uploadError)return""},"._image-sidebar-url-input@class+":function(){if(this.isImageURLError())return"error"},"._image-sidebar-error-class@class+":function(){if(this.model.uploadError)return"error"}},e}.call(this),e.prototype.events={"input ._image-sidebar-url-input":function(e){var t,n,i;if(B("source_uri").call(this,e),null!=(t=this.options.originalAttributes)?t.hosted:void 0)return(null!=(n=this.options.originalAttributes)?n.source:void 0)===this.model.get("source_uri")?this.model.set("hosted_uri",null!=(i=this.options.originalAttributes)?i.hosted:void 0,{silent:!0}):this.model.unset("hosted_uri",{silent:!0})},"keydown ._image-sidebar-url-input":function(e){if(13===e.keyCode)return e.preventDefault(),this.update(),D(this.$("._image-sidebar-url-input"))},"click ._add-image-link":e.prototype.submit,"click ._cancel-image-link":function(e){return this.model.set(this.options.originalAttributes,{silent:!0}),this.close()},"click ._remove-image-link":function(e){return this.model.collection.remove(this.model),this.close()}},e}.call(this),T=function(){class e extends L{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return D(this.$("._section-title-input"))}sync(){var t;return this.$("._add-more-sections-input").prop("checked")&&this.$(".Toaster-Checkbox").is(":visible")?((t=new y({title:"",body:"",section_type:this.model.get("section_type"),option_id:this.model.get("option_id")})).store=this.model.store,this.getParentByView(I).setToast(e,{model:t})):super.sync(...arguments)}fetch(e){var t;return t={question_id:this.model.getModel("option_id").get("question_id"),option_id:this.model.get("option_id")},this.model.store.ensureQuery(m,t).fetch({silent:!0,success:(t,n)=>{var i;return(i=this.model.getModel("option_id").getCollection("option_section_ids")).trigger("add",this.model,i),this.model.set(n.getModel(e.get("section_id")).attributes,{silent:!0}),this.model.trigger("sync",this.model)}})}getLegacyModel(){var e,t,n,i;return i=(n=this.model.getModel("option_id")).getModel("question_id"),(e=new v).meta({URL:`/topics/${i.get("t_id")}/viewpoints/${n.get("vp_id")}/sections`}),t=this.model.getLegacyModel(),e.add(t),t}triggerNotifyPopup(){return this.getParentByView(I).setNotifyPopup(a,{model:this.model})}isTitleMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("title"))?e.trim():void 0)}isTitleError(){return this.isTitleMissingError()}isError(){return this.isTitleError()}isDirty(e){return e=_.extend({omit:["section_type"]},e),super.isDirty(e)}normalize(){var e,t,n;return e={title:null!=(t=null!=(n=this.model.get("title"))?n.trim():void 0)?t:"",text:this.model.get("body")},this.model.set(e,{silent:!0})}}return e.prototype.Model=y,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._ToastSectionView")}}).prototype.rule={"._is-pro=":function(){if("Pro"!==this.model.get("section_type"))return""},"._is-con=":function(){if("Con"!==this.model.get("section_type"))return""},"._set-pro-link@class+":function(){if("Pro"===this.model.get("section_type"))return"selected"},"._set-con-link@class+":function(){if("Con"===this.model.get("section_type"))return"selected"},"._section-title-input@value":function(){return this.model.get("title")},"._section-description-input":function(){return this.model.get("body")},"._add-more-sections-input@checked":function(){var e;if(null==(e=this.options.addMore)||e)return"checked"},"._section-title-required=":function(){if(!this.isTitleMissingError())return""},"._section-title-input@class+":function(){if(this.isTitleError())return"error"}},e}.call(this),e.prototype.eventName="Add Section Toast",e.prototype.events={"input ._section-title-input":B("title"),"input ._section-description-input":B("body"),"change ._add-more-sections-input":function(e){return this.options.addMore=e.currentTarget.checked},"click ._set-pro-link":function(e){return this.model.set("section_type","Pro"),this.update()},"click ._set-con-link":function(e){return this.model.set("section_type","Con"),this.update()}},e}.call(this),b=function(){class e extends T{getLegacyModel(){var e,t,n;return e={revision:(t=super.getLegacyModel(...arguments)).get("revision")},n={collection:t.get("comments")},new w(e,n)}triggerNotifyPopup(){return this.getParentByView(I).setNotifyPopup(p,{model:this.model})}}return e.prototype.Model=y,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ToastEditSectionView")}},e.prototype.eventName="Edit Section Toast",e.prototype.sync=L.prototype.sync,e.prototype.fetch=L.prototype.fetch,e}.call(this),t.exports={ToasterView:I,ToastView:L,ToastSidebarView:M,ToastCollapsedView:x,ToastOptionView:P,ToastEditOptionView:R,ToastDescriptionSidebarView:V,ToastImageSidebarView:S,ToastImageView:k,ToastImageListView:C,ToastSectionView:T,ToastEditSectionView:b}},{"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../../rule":81,"../../utils/transforms":89,"../base-view":91,"../lists/list-view":173,"./notify-popup-view":128}],167:[function(e,t,n){var i,o,r,s,l,a,u;({PopupView:i}=e("./popup-view")),({UserModel:u}=e("../../models/index")),({Spec:o}=e("../../models")),a=function(){class e extends i{initialize(e){var t,n;return super.initialize(...arguments),this.triggers=e.triggers?$(e.triggers):this.follows,t=(()=>(this.close(),delete this.timeoutId,this.options.interactive?this.triggers.off("mouseleave",n):this.triggers.off("mouseleave",t))),n=(()=>this.timeoutId=setTimeout(t,this.options.tooltipTimeout)),this.options.interactive?(this.triggers.on("mouseleave",n),this.triggers.on("mouseover",e=>{if(null!=this.timeoutId)return e.preventDefault(),e.stopPropagation(),clearTimeout(this.timeoutId),delete this.timeoutId}),this.$el.on("mouseover",()=>{if(null!=this.timeoutId)return clearTimeout(this.timeoutId),delete this.timeoutId,this.$el.on("mouseleave",n)})):this.triggers.on("mouseleave",t)}position(){var e,t,n,i;if(super.position(...arguments),0!==this.$el.parents("body").length)return this.$el.addClass(this.options.anchor),t=this.$("._tooltip-arrow"),this.overflow&&null!=t&&t.css({left:`calc(50% + ${this.overflow}px)`}),e=this.options.anchor,n=$(null!=(i=this.options.follows.el)?i:this.options.follows),"below"===e&&this.$el.offset().top<n.offset().top&&this.$el.addClass("above").removeClass("below"),"above"===e&&this.$el.offset().top+this.$el.prop("offsetHeight")>n.offset().top+n.prop("offsetHeight")?this.$el.addClass("below").removeClass("above"):void 0}}return e.prototype.options={align:"center",anchor:"below",cover:!1,relative:!1,interactive:!1,tooltipTimeout:200},e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._TooltipView")}},e}.call(this),s=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("title")}},e}.call(this),e}.call(this),l=function(){class e extends a{}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("displayName")||this.model.get("username")}},e}.call(this),e}.call(this),r=function(){class e extends a{}return e.prototype.options={tooltipTimeout:0},e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("value")}},e}.call(this),e}.call(this),t.exports={TooltipView:a,TooltipTitleView:s,TooltipUserView:l,TooltipSpecView:r}},{"../../models":34,"../../models/index":64,"./popup-view":132}],168:[function(e,t,n){var i,o,r,s,l=[].indexOf;r=e("../../rule"),({QuestionModel:o}=e("../../models/index")),({BaseView:i}=e("../base-view")),s=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,{"change repaint":this.update})}isSubscribed(){var e,t;return e=this.model.get("question_id"),l.call(null!=(t="undefined"!=typeof window&&null!==window?window.currentUserV2.get("user_sub_question_ids"):void 0)?t:[],e)>=0}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends r{template(){return template("._WatchView")}}).prototype.rule={"._is-watching=":function(){if(!this.isSubscribed())return""},"._not-watching=":function(){if(this.isSubscribed())return""},"._is-active@class+":function(){if(this.isSubscribed())return"active"}},e}.call(this),e.prototype.events={"click ._watch-link":function(e){return this.model.getLegacyModel().get("subscriptions").subscribe(!0)},"click ._unwatch-link":function(e){return this.model.getLegacyModel().get("subscriptions").subscribe(!1)}},e}.call(this),t.exports={WatchView:s}},{"../../models/index":64,"../../rule":81,"../base-view":91}],169:[function(e,t,n){var i,o,r;for(r in o=e("underscore"),i=t.exports=o.extend({},e("./components"),e("./lists"),e("./mixins"),e("./models"),e("./pages"),e("./threads")))i[r].prototype.classID=r},{"./components":108,"./lists":172,"./mixins":187,"./models":195,"./pages":232,"./threads":255,underscore:448}],170:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v;v=e("underscore"),({BaseView:i}=e("../base-view")),({ListView:g}=e("../lists/list-view")),({ExpandingTextareaMixinView:f}=e("../mixins/expanding-textarea-mixin-view")),({CommentView:d,CommentWithContextView:m,CommentReactionButtonMostImportantView:a,CommentReactionTooltipView:c,CommentReactionTooltipListView:u,CommentUserView:p}=e("../models/comment-view")),({Comment:o}=e("../../models")),({CommentList:r,ReactionList:w}=e("../../collections")),l=function(){class e extends g{initialize(){super.initialize(...arguments),"undefined"==typeof window||window}createViewOptions(){return{filterByDisplayed:this.options.filterByDisplayed}}isComment(e){return e.get("text")&&e.get("text").trim()&&null==e.get("revision").get("title")}filter(e){return this.options.filterByDisplayed?e.get("isDisplayed")&&this.isComment(e):this.isComment(e)}}return e.prototype.Collection=r,e.prototype.ItemView=d,e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._CommentListView")}},e}.call(this),h=function(){class e extends l{}return e.prototype.Collection=r,e.prototype.ItemView=m,e.prototype.Rule=class extends l.prototype.Rule{},e}.call(this),s=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"login logout",this.update)}submit(){var e,t;if(this.$("._add-comment-form").removeClass("hasError"),t=this.$("._comment-text-input").val().trim())return this.$el.addClass("Loading"),(e=new o({text:t},{collection:this.collection})).save(null,{highlight:!1,add:!1}),e.once("saveError",()=>(this.$("._add-comment-form").addClass("hasError"),this.$el.removeClass("Loading"))),e.once("sync",()=>(analytics.track("Submit Comment"),this.$el.removeClass("Loading"),e.set({isDisplayed:!0},{silent:!0}),this.collection.add(e,{at:0}),this.$("._comment-text-input").val("")))}triggerResize(){return this.collection.trigger("resizeComments")}}return e.prototype.Collection=r,e.prototype.mixin(f),e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommentListAddCommentView")}}).prototype.rule={"._has-user=":function(){var e;if(!("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUser)?e.get("username"):void 0))return""},"._has-display-name=":function(){if(!("undefined"!=typeof window&&null!==window?window.currentUser.get("displayName"):void 0))return""},"._display-name=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("displayName"):void 0)||("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)},"._username=":function(){return"undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0},"._comment-text-input":function(){return this.text},"._submit-comment-link@class+":function(){if(!this.text)return"disabled"},"._CommentUserView=":function(){var e;return("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUser)?e.get("username"):void 0)?new p({model:window.currentUser}):""}},e}.call(this),e.prototype.events=v.assign({},f.prototype.events,{"click ._submit-comment-link":function(e){return this.submit()},"input ._comment-text-input":function(e){return this.text=this.$("._comment-text-input").val().trim(),this.text?this.$("._submit-comment-link").removeClass("disabled"):this.$("._submit-comment-link").addClass("disabled")}}),e}.call(this),t.exports={CommentListView:l,CommentWithContextListView:h,CommentListAddCommentView:s}},{"../../collections":2,"../../models":34,"../base-view":91,"../lists/list-view":173,"../mixins/expanding-textarea-mixin-view":184,"../models/comment-view":191,underscore:448}],171:[function(e,t,n){var i,o,r,s;({ImageCollection:i}=e("../../collections/index")),({ListView:s}=e("../lists/list-view")),({ImageView:r}=e("../models/image-view")),o=function(){class e extends s{}return e.prototype.Collection=i,e.prototype.ItemView=r,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ImageListView")}},e}.call(this),t.exports={ImageListView:o}},{"../../collections/index":7,"../lists/list-view":173,"../models/image-view":194}],172:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./comment-list-view"),e("./image-list-view"),e("./list-view"),e("./my-recommendation-list-view"),e("./option-list-view"),e("./question-list-view"),e("./reaction-list-view"),e("./searchable-list-view"),e("./section-list-view"),e("./sidebar-tag-list-view"),e("./sidebar-related-question-list-view"),e("./tag-list-view"),e("./user-list-view"))},{"./comment-list-view":170,"./image-list-view":171,"./list-view":173,"./my-recommendation-list-view":174,"./option-list-view":175,"./question-list-view":176,"./reaction-list-view":177,"./searchable-list-view":178,"./section-list-view":179,"./sidebar-related-question-list-view":180,"./sidebar-tag-list-view":181,"./tag-list-view":182,"./user-list-view":183,underscore:448}],173:[function(e,t,n){var i,o,r,s;r=e("../../rule"),e("../../collection"),e("../../model"),({BaseView:i}=e("../base-view")),s=e("underscore"),o=function(){class e extends i{update(){if(super.update(...arguments),this.cached)return this.cachedViews=this.children}empty(e){if(!1!==e.remove)return super.empty(...arguments);this.children=[]}count(){return this.filter?s.filter(this.getModels(),this.filter,this).length:this.collection.length}getModels(){return this.collection.models}getItems(){var e;return e=this.getModels(),this.filter&&(e=s.filter(e,this.filter,this)),this.sortBy&&(e=Array.isArray(this.sortBy)?s.reduce(this.sortBy,(e,t)=>s.sortBy(e,t,this),e):s.sortBy(e,this.sortBy,this)),null!=this.offset&&(e=e.slice(this.offset)),null!=this.limit&&(e=e.slice(0,this.limit)),e}getCachedItemView(e,t,n){var i;return(i=s.find(this.cachedViews,function(t){return t.model===e||t.collection===e}))?i.delegateEvents():i=this.createItemView(e,t,n),i}getItemView(e,t,n){return this.ItemView}createItemView(e,t,n){var i,o;return o=this.createViewOptions(e,t,n),(i=this.getItemView(e,t,n)).prototype.Collection?o.collection=e:o.model=e,o.parent=this,new i(o)}createViewOptions(e,t,n){return{}}initialize(e={}){return e.filter&&(this.filter=e.filter),e.sortBy&&(this.sortBy=e.sortBy),e.limit&&(this.limit=e.limit),e.offset&&(this.offset=e.offset),e.cache&&(this.cache=e.cache),super.initialize(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends r{}).prototype.rule={"._has-items=":function(){if(!this.count())return""},"._no-items=":function(){if(this.count())return""},"._has-filtered-items=":function(){if(this.collection.find(e=>!this.filter(e)))return""},"._no-filtered-items=":function(){if(!this.collection.find(e=>!this.filter(e)))return""},"._has-more-count=":function(){if(!(null!=this.limit&&this.count()-this.limit>0))return""},"._count=":function(){return this.count()},"._more-count=":function(){return Math.max(this.count()-this.limit,0)},"._list=":function(){return this.getItems().map(this.getCachedItemView.bind(this))}},e}.call(this),e.prototype.filter=null,e.prototype.cached=!0,e}.call(this),t.exports={ListView:o}},{"../../collection":1,"../../model":33,"../../rule":81,"../base-view":91,underscore:448}],174:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;e("underscore"),({CommunityRecommendationItemView:o,CommunityRecommendationUserView:r,CommunityRecommendationHighlightListView:i}=e("../threads/community-recommendation-thread-view")),({ListView:s}=e("../lists/list-view")),({MyRecommendationPanelView:u}=e("../components/my-recommendation-panel-view")),({PanelView:c}=e("../components/panel-view")),({RecCollection:p}=e("../../collections/index")),({splitUnit:h,shortenNumber:d}=e("../../utils/transforms")),l=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"newTestimonial",this.onNewRecommedation)}openRecPanel(){var e;return null!=(e=new c({model:this.model}))?e.setContent(u,{model:this.model}):void 0}onNewRecommedation(){return this.highlight(this.model,{padding:40,speed:30}),analytics.track("My Rec New Testimonial Created")}getRecType(){return"My"}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MyRecommendationItemView")}},e.prototype.events={"click ._edit-recommendation-link":function(e){return analytics.track("My Rec Edit Link Clicked"),this.openRecPanel()}},e}.call(this),a=function(){class e extends s{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change repaint",this.update)}filter(e){return("undefined"!=typeof window&&null!==window?window.currentUserV2.id:void 0)===e.get("user_id")&&e.isVoted()}}return e.prototype.Collection=p,e.prototype.ItemView=l,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._MyRecommendationListView")}},e}.call(this),t.exports={MyRecommendationItemView:l,MyRecommendationListView:a}},{"../../collections/index":7,"../../utils/transforms":89,"../components/my-recommendation-panel-view":125,"../components/panel-view":131,"../lists/list-view":173,"../threads/community-recommendation-thread-view":252,underscore:448}],175:[function(e,t,n){var i,o,r,s,l,a,u;e("../../rule"),({ListView:i}=e("./list-view")),({OptionView:s}=e("../models/option-view")),({ToasterView:a,ToastOptionView:l}=e("../components/toaster-view")),({OptionCollection:o}=e("../../collections/index")),({Viewpoint:u}=e("../../models")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionListView")}},e.prototype.events={"click ._add-option-link":function(){var e,t;return t=new u({},{collection:this.collection}),null!=(e=window.view.getChildrenByView(a)[0])?e.setToast(l,{model:t}):void 0}},e}.call(this),t.exports={OptionListView:r}},{"../../collections/index":7,"../../models":34,"../../rule":81,"../components/toaster-view":166,"../models/option-view":200,"./list-view":173}],176:[function(e,t,n){var i,o,r,s;e("../../rule"),({ListView:i}=e("./list-view")),({QuestionView:s}=e("../models/question-view")),({QuestionCollection:o}=e("../../collections/index")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._QuestionListView")}},e.prototype.ItemView=s,e}.call(this),t.exports={QuestionListView:r}},{"../../collections/index":7,"../../rule":81,"../models/question-view":201,"./list-view":173}],177:[function(e,t,n){var i,o;({ListView:i}=e("./list-view")),o=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionListView")}}).prototype.rule={"._is-reacted=":function(){if(null==this.collection.getUserReaction("undefined"!=typeof window&&null!==window?window.currentUserV2:void 0,this.options.type))return""},"._not-reacted=":function(){if(null!=this.collection.getUserReaction("undefined"!=typeof window&&null!==window?window.currentUserV2:void 0,this.options.type))return""},"._is-agreed=":function(){if("upvote"!==this.collection.key)return""},"._is-disagreed=":function(){if("downvote"!==this.collection.key)return""},"._is-duplicate=":function(){if("duplicate"!==this.collection.key)return""},"._is-flagged=":function(){if("flag"!==this.options.type)return""},"._is-needs-improvement=":function(){if("needs-improvement"!==this.options.type)return""},"._is-needs-more-info=":function(){if("needs-more-info"!==this.options.type)return""},"._is-not-a-fit=":function(){if("not-a-fit"!==this.options.type)return""},"._is-out-of-date=":function(){if("out-of-date"!==this.options.type)return""},"._is-useful=":function(){if("useful"!==this.options.type)return""},"._is-funny=":function(){if("funny"!==this.options.type)return""}},e}.call(this),e}.call(this),t.exports={ReactionListView:o}},{"./list-view":173}],178:[function(e,t,n){var i,o;({ListView:i}=e("./list-view")),o=function(){class e extends i{update(){return this.options.searchQuery?(this.options.searchQuery=this.options.searchQuery.trim(),this.regex=new RegExp(`(${this.options.searchQuery.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s+/g,"\\s*")})`,"i")):delete this.regex,super.update(...arguments)}getSearchValue(e){}filter(e){var t,n;return null==(t=null!=(n=this.regex)?n.test(this.getSearchValue(e)):void 0)||t}sortBy(e){var t,n,i,o,r;return r=this.getSearchValue(e),t=null!=(i=this.regex)&&null!=(o=i.exec(r))?o[0]:void 0,-1===(n=r.indexOf(t))?Infinity:""!==r.charAt(n-1).replace(" ","")?n+100:n}createViewOptions(){return{regex:this.regex}}search(e){return this.options.searchQuery=e,this.cachedViews=[],this.update()}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SearchableListView")}},e}.call(this),t.exports={SearchableListView:o}},{"./list-view":173}],179:[function(e,t,n){var i,o,r,s,l,a,u;e("../../rule"),({SectionCollection:o}=e("../../collections/index")),({SectionModel:s}=e("../../models/index")),({ListView:i}=e("./list-view")),({SectionView:l}=e("../models/section-view")),({ToasterView:u,ToastSectionView:a}=e("../components/toaster-view")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=l,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SectionListView")}},e.prototype.events={"click ._add-pro-link":function(e){var t,n;return(n=new s({title:"",body:"",section_type:"Pro",option_id:this.collection.getParent().id})).store=this.collection.getParent().store,null!=(t=window.view.getChildrenByView(u)[0])?t.setToast(a,{model:n}):void 0},"click ._add-con-link":function(e){var t,n;return(n=new s({title:"",body:"",section_type:"Con",option_id:this.collection.getParent().id})).store=this.collection.getParent().store,null!=(t=window.view.getChildrenByView(u)[0])?t.setToast(a,{model:n}):void 0}},e}.call(this),t.exports={SectionListView:r}},{"../../collections/index":7,"../../models/index":64,"../../rule":81,"../components/toaster-view":166,"../models/section-view":204,"./list-view":173}],180:[function(e,t,n){var i,o,r,s,l,a,u;({QuestionView:o}=e("../models/question-view")),({QuestionListView:i}=e("./question-list-view")),({Topic:l}=e("../../models")),({TopicList:a}=e("../../collections")),({improveURL:u}=e("../../utils/transforms")),r=function(){class e extends o{}return e.prototype.Model=l,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SidebarRelatedQuestionListQuestionView")}}).prototype.rule={"._question-title=":function(){var e;return e=(e=this.model.get("revision").get("title")||"").replace(/^what (are|is) the best/i,"Best").replace(/\?$/,""),"undefined"==typeof window||null===window?e:$(`<span>${e}</span>`)},"._question-link@href":function(){return u(this.model,this.model.get("communityURL"))}},e}.call(this),e.prototype.events={"click ._question-link":function(e){return analytics.track("Clicked Related Question")}},e}.call(this),s=function(){class e extends i{initialize(e){return this.collection=new this.Collection(function(){var e,t,n;for(n=[],e=0,t=this.limit;0<=t?e<t:e>t;0<=t?e++:e--)n.push(new l);return n}.call(this)),super.initialize(...arguments)}}return e.prototype.Collection=a,e.prototype.limit=10,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SidebarRelatedQuestionListView")}}).prototype.rule={"@data-search":function(){return this.options.search}},e}.call(this),e}.call(this),t.exports={SidebarRelatedQuestionListQuestionView:r,SidebarRelatedQuestionListView:s}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../models/question-view":201,"./question-list-view":176}],181:[function(e,t,n){var i,o,r,s;e("../../rule"),({TagListView:r}=e("./tag-list-view")),({TagView:s}=e("../models/tag-view")),o=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SidebarTagView")}},e}.call(this),i=function(){class e extends r{}return e.prototype.ItemView=o,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SidebarTagListView")}},e}.call(this),t.exports={SidebarTagView:o,SidebarTagListView:i}},{"../../rule":81,"../models/tag-view":206,"./tag-list-view":182}],182:[function(e,t,n){var i,o,r,s;e("../../rule"),({TagCollection:o}=e("../../collections/index")),({ListView:i}=e("./list-view")),({TagView:s}=e("../models/tag-view")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._TagListView")}},e}.call(this),t.exports={TagListView:r}},{"../../collections/index":7,"../../rule":81,"../models/tag-view":206,"./list-view":173}],183:[function(e,t,n){var i,o,r,s;({UserCollection:o}=e("../../collections/index")),({ListView:i}=e("./list-view")),({UserView:s}=e("../models/user-view")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._UserListView")}},e}.call(this),t.exports={UserListView:r}},{"../../collections/index":7,"../models/user-view":207,"./list-view":173}],184:[function(e,t,n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{adjustTextareaHeight(e){var t,n,i,o;if((e=e||this.$("textarea._auto-expand")).is(":visible"))return t=parseInt(e.css("border-top-width")),i=parseInt(e.css("margin-bottom"))||0,o=e.prop("scrollHeight"),n=e.prop("clientHeight"),requestAnimationFrame(()=>(o===n&&(e.css({height:0,"margin-bottom":o+i}),o=e.prop("scrollHeight")),e.css({height:o+2*t,"margin-bottom":i}),"function"==typeof this.triggerResize?this.triggerResize():void 0))}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.events={"input textarea._auto-expand":function(e){return this.adjustTextareaHeight(this.$(e.currentTarget))},"resize window":function(e){return this.adjustTextareaHeight(this.$("textarea._auto-expand"))}},e}.call(this),t.exports={ExpandingTextareaMixinView:o}},{"../base-view":91}],185:[function(e,t,n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.initializeAllFancyInputs()}initializeAllFancyInputs(){return this.$(".FancyInput-Field").each((e,t)=>this.setFancyInputClass(t))}setFancyInputClass(e){return(e=$(e)).val()?e.addClass("hasText"):e.removeClass("hasText")}}return e.prototype.events={"input .FancyInput-Field":function(e){return this.setFancyInputClass(e.target)}},e}.call(this),t.exports={FancyInputMixinView:o}},{"../base-view":91}],186:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({PageView:r}=e("../pages/page-view")),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _.defer(()=>this.observeImages())}update(){return this.unobserveImages(),super.update(...arguments),this.observeImages()}remove(){return this.unobserveImages(),super.remove(...arguments)}observeImages(){var e,t;return null!=(e=null!=(t=this.getParentByView(r))?t.lazyImageObserver:void 0)?e.observe(this.el):void 0}unobserveImages(){var e,t;return null!=(e=null!=(t=this.getParentByView(r))?t.lazyImageObserver:void 0)?e.unobserve(this.el):void 0}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={ImageLazyLoaderMixinView:o}},{"../base-view":91,"../pages/page-view":241}],187:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./expanding-textarea-mixin-view"),e("./fancy-input-mixin-view"),e("./image-lazy-loader-mixin-view"),e("./recommendation-panel-manager-mixin-view"),e("./sticky-nav-mixin-view"),e("./user-profile-input-mixin-view"))},{"./expanding-textarea-mixin-view":184,"./fancy-input-mixin-view":185,"./image-lazy-loader-mixin-view":186,"./recommendation-panel-manager-mixin-view":188,"./sticky-nav-mixin-view":189,"./user-profile-input-mixin-view":190,underscore:448}],188:[function(e,t,n){var i,o,r,s,l,a,u,c;({BaseView:i}=e("../base-view")),({PanelView:l}=e("../components/panel-view")),({MyRecommendationPanelView:r,MyRecommendationPanelFooterView:o}=e("../components/my-recommendation-panel-view")),({OptionModel:s,RecModel:a,RecPageQuery:u}=e("../../models/index")),c=function(){class e extends i{managePanelForOption(e,t={}){if("undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change repaint",this.update)}manageVote(e,t){var n,i,o;return null==t&&(t=this.model),this.$el.addClass("Loading"),o=this.getUserRec(t),i=t.getLegacyModel().get("votes"),(null!=o?o.get("magnitude"):void 0)===e?i.vote(0):(i.vote(e),null!=o&&o.set({magnitude:e},{silent:!0}),n=this.openPanel(null!=o?o:this.makeRec(e,t))),i.once("voteSuccess",e=>{return window.currentUserV2.store.ensureQuery(u,{rec_id:e.rec_id}).fetch({silent:!0,success:(t,i)=>(this.$el.removeClass("Loading"),this.update(),"function"==typeof n&&n(e,i),window.currentUserV2.trigger("change sync"))})})}getUserRec(e){if(null==e&&(e=this.model),"undefined"!=typeof window&&null!==window?window.currentUserV2:void 0)return"undefined"!=typeof window&&null!==window?window.currentUserV2.getOptionRec(e):void 0}makeRec(e,t){var n;return null==t&&(t=this.model),(n=new a({user_id:"undefined"!=typeof window&&null!==window?window.currentUserV2.id:void 0,option_id:t.id,body:"",magnitude:e})).store=t.store,n}openPanel(e){if(0!==e.get("magnitude"))return this.panel=new l,this.panel.setContent(r,{model:e}),(t,n)=>{var i,s,a;if(0!==(e=n.getModel(t.rec_id)).get("magnitude"))return null==this.panel&&(this.panel=new l),(null!=(i=this.panel)?i.activePanelContent:void 0)?(this.panel.activePanelContent.model.set(e.attributes,{silent:!0}),this.panel.activePanelContent.model.trigger("sync"),null!=(s=this.panel.activePanelContent.getChildrenByView(o)[0])?s.update():void 0):null!=(a=this.panel)?a.setContent(r,{model:e}):void 0}}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={RecommendationPanelManagerMixinView:c}},{"../../models/index":64,"../base-view":91,"../components/my-recommendation-panel-view":125,"../components/panel-view":131}],189:[function(e,t,n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{initializeStickyNav(){if("undefined"!=typeof window&&null!==window)return this.isSticky=!1,_.defer(()=>this.makeSticky())}makeSticky(){if($(window).scrollTop()>this.$el.offset().top){if(!this.isSticky)return this.$("._sticky-nav").addClass("sticky"),this.isSticky=!0}else if(this.isSticky)return this.$("._sticky-nav").removeClass("sticky"),this.isSticky=!1}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._StickyNavMixinView")}},e.prototype.events={"scroll document":function(e){return this.makeSticky()},"resize window":function(e){return this.makeSticky()}},e}.call(this),t.exports={StickyNavMixinView:o}},{"../base-view":91}],190:[function(e,t,n){var i,o,r,s,l,a,u,c;c=e("underscore"),({BaseView:i}=e("../base-view")),({VALID_EMAIL:a,VALID_USERNAME:u}=e("../../utils/patterns")),l=function(){class e extends i{resetUsernameText(){return this.$("._username-field").removeClass("valid error checking"),this.$("._username-default-text").hide(),this.$("._username-checking-text").hide(),this.$("._username-too-short-text").hide(),this.$("._username-invalid-text").hide(),this.$("._username-unavailable-text").hide(),this.$("._username-required-text").hide(),this.$("._username-valid-text").hide()}setUsernameText(){var e,t,n,i,o,r;return this.resetUsernameText(),n=this.$("._username-field"),t=this.$("._username-default-text"),e=this.$("._username-checking-text"),o=this.$("._username-too-short-text"),i=this.$("._username-invalid-text"),(r=this.$("._username-input").val())&&this.isUsernameTooShortError()?(n.addClass("error"),o.show()):r&&this.isUsernameInvalidError()?(n.addClass("error"),i.show()):r?(this.checkUsernameText(),n.addClass("checking"),e.show()):t.show()}setUsernameRequiredText(){var e,t;if(this.setUsernameText(),e=this.$("._username-field"),t=this.$("._username-required-text"),!this.$("._username-input").val())return this.resetUsernameText(),e.addClass("error"),t.show()}isUsernameRequiredError(){return""===this.$("._username-input").val()}isUsernameTooShortError(){return this.$("._username-input").val().length<2}isUsernameInvalidError(){return!u.test(this.$("._username-input").val())}isUsernameAvailableError(){return!this.usernameAvailable}isUsernameError(){return this.isUsernameRequiredError()||this.isUsernameTooShortError()||this.isUsernameInvalidError()||this.isUsernameAvailableError()}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.checkUsernameText=c.debounce(function(){var e,t,n,i,o,r;return this.usernameAvailable=null,n=this.$("._username-field"),i=this.$("._username-unavailable-text"),o=this.$("._username-valid-text"),r=this.$("._username-input").val(),e=encodeURIComponent(r),null!=(t=this.checkUsernameRequest)&&t.abort(),this.checkUsernameRequest=$.ajax({url:`/users?username=${e}&format=json`,type:"GET",context:this,success:function(e){return this.resetUsernameText(),0!==e.children.length?(this.usernameAvailable=!1,n.addClass("error"),i.show()):(this.usernameAvailable=!0,n.addClass("valid"),o.show())}})},200),e.prototype.events={"input ._username-input":function(e){return this.setUsernameText()}},e}.call(this),r=function(){class e extends i{resetEmailText(){return this.$("._email-field").removeClass("valid error checking"),this.$("._email-default-text").hide(),this.$("._email-checking-text").hide(),this.$("._email-invalid-text").hide(),this.$("._email-unavailable-text").hide(),this.$("._email-required-text").hide(),this.$("._email-valid-text").hide()}setEmailText(){var e,t,n,i,o;return this.resetEmailText(),n=this.$("._email-field"),t=this.$("._email-default-text"),e=this.$("._email-checking-text"),i=this.$("._email-invalid-text"),(o=this.$("._email-input").val())&&this.isEmailInvalidError()?(n.addClass("error"),i.show()):o?(this.checkEmailText(),n.addClass("checking"),e.show()):t.show()}setEmailRequiredText(){var e,t;if(this.setEmailText(),e=this.$("._email-field"),t=this.$("._email-required-text"),!this.$("._email-input").val())return this.resetEmailText(),e.addClass("error"),t.show()}isEmailRequiredError(){return""===this.$("._email-input").val()}isEmailInvalidError(){return!a.test(this.$("._email-input").val())}isEmailAvailableError(){return!this.emailAvailable}isEmailError(){return this.isEmailRequiredError()||this.isEmailInvalidError()||this.isEmailAvailableError()}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.checkEmailText=c.debounce(function(){var e,t,n,i,o,r;return this.emailAvailable=null,e=this.$("._email-field"),t=this.$("._email-unavailable-text"),n=this.$("._email-valid-text"),i=this.$("._email-input").val(),o=encodeURIComponent(i),null!=(r=this.checkEmailRequest)&&r.abort(),this.checkEmailRequest=$.ajax({url:`/users?email=${o}&format=json`,type:"GET",context:this,success:function(i){return this.resetEmailText(),0!==i.children.length?(this.emailAvailable=!1,e.addClass("error"),t.show()):(this.emailAvailable=!0,e.addClass("valid"),n.show())}},200)}),e.prototype.events={"input ._email-input":function(e){return this.setEmailText()}},e}.call(this),s=function(){class e extends i{resetPasswordText(){return this.$("._password-field").removeClass("valid error checking"),this.$("._password-default-text").hide(),this.$("._password-too-short-text").hide(),this.$("._password-required-text").hide(),this.$("._password-valid-text").hide()}setPasswordText(){var e,t,n,i,o;return this.resetPasswordText(),t=this.$("._password-field"),e=this.$("._password-default-text"),n=this.$("._password-too-short-text"),i=this.$("._password-valid-text"),(o=this.$("._password-input").val())&&this.isPasswordTooShortError()?(t.addClass("error"),n.show()):o?(t.addClass("valid"),i.show()):e.show()}setPasswordRequiredText(){var e,t;if(this.setPasswordText(),e=this.$("._password-field"),t=this.$("._password-required-text"),!this.$("._password-input").val())return this.resetPasswordText(),e.addClass("error"),t.show()}isPasswordRequiredError(){return""===this.$("._password-input").val()}isPasswordTooShortError(){return this.$("._password-input").val().length<6}isPasswordError(){return this.isPasswordRequiredError()||this.isPasswordTooShortError()}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.events={"input ._password-input":function(e){return this.setPasswordText()}},e}.call(this),o=function(){class e extends i{resetCurrentPasswordText(){return this.$("._current-password-field").removeClass("valid error checking"),this.$("._current-password-default-text").hide(),this.$("._current-password-invalid-text").hide(),this.$("._current-password-required-text").hide()}setCurrentPasswordText(){return this.resetCurrentPasswordText(),this.$("._current-password-default-text").show()}setCurrentPasswordErrorText(){return this.resetCurrentPasswordText(),this.$("._current-password-field").addClass("error"),this.$("._current-password-invalid-text").show()}setCurrentPasswordRequiredText(){var e,t;if(this.setCurrentPasswordText(),e=this.$("._current-password-field"),t=this.$("._current-password-required-text"),!this.$("._current-password-input").val())return this.resetCurrentPasswordText(),e.addClass("error"),t.show()}isCurrentPasswordRequiredError(){return""===this.$("._current-password-input").val()}isCurrentPasswordError(){return this.isCurrentPasswordRequiredError()}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.events={"input ._current-password-input":function(e){return this.setCurrentPasswordText()}},e}.call(this),t.exports={UserProfileUsernameInputMixinView:l,UserProfileEmailInputMixinView:r,UserProfilePasswordInputMixinView:s,UserProfileCurrentPasswordInputMixinView:o}},{"../../utils/patterns":87,"../base-view":91,underscore:448}],191:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R;_=e("underscore"),R=e("moment"),V=e("marked"),v=e("urijs"),({improveURL:x}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({BaseView:o}=e("../base-view")),({UserView:y}=e("../models/user-view")),({ReactionButtonView:m}=e("../components/reaction-button-set-view")),({ReactionTooltipView:w,ReactionTooltipListView:g}=e("../components/reaction-tooltip-view")),({ExpandingTextareaMixinView:h}=e("../mixins/expanding-textarea-mixin-view")),({Comment:r}=e("../../models")),({CommentList:s,ReactionList:f}=e("../../collections")),p=function(){class t extends o{initialize(){var e;if(super.initialize(...arguments),this.isReplyFormExpanded=!1,this.isReplyFormDisabled=!0,this.isEditFormDisabled=!1,"undefined"!=typeof window&&null!==window)return this.stopListening(this.model,"highlight"),this.listenTo(this.model,"highlight",()=>this.highlight(this.model,{targetElement:this.$(".CommentList-Item-Comment").eq(0),padding:70})),e=(()=>this.model.get("user").get("username")===window.currentUser.get("username")?this.$("._edit-comment-link").eq(0).removeClass("hidden"):this.$("._edit-comment-link").eq(0).addClass("hidden")),this.listenTo(window.currentUser,"change",e),e()}update(){var e,t,n;if("undefined"!=typeof window&&null!==window&&(e=!this.$("._edit-comment-link").eq(0).hasClass("hidden")),super.update(...arguments),"undefined"!=typeof window&&null!==window)return e?null!=(t=this.$("._edit-comment-link").eq(0))?t.removeClass("hidden"):void 0:null!=(n=this.$("._edit-comment-link").eq(0))?n.addClass("hidden"):void 0}submitReply(){var e,t;if(this.$("._add-reply-form").eq(0).removeClass("hasError"),t=this.$("._reply-text-input").eq(0).val().trim())return this.$el.addClass("Loading"),(e=new r({text:t},{collection:this.model.get("comments")})).save(null,{highlight:!1}),e.once("saveError",()=>(this.$("._add-reply-form").eq(0).addClass("hasError"),this.$el.removeClass("Loading"))),e.once("sync",()=>(this.$el.removeClass("Loading"),e.set({isDisplayed:!0},{silent:!0}),this.model.get("comments").add(e),1===this.model.get("comments").count()&&this.update(),this.$("._reply-text-input").eq(0).val(""),this.isReplyFormDisabled=!0,this.toggleReplyForm(),analytics.track("Submit Comment Reply")))}submitCommentEdit(){var e;return this.$("._edit-comment-form").removeClass("hasError"),(e=this.$("._edit-comment-input").eq(0).val().trim())!==this.oldText?(this.$el.addClass("Loading"),this.model.set({text:e},{silent:!0}),this.model.once("sync",()=>(this.$el.removeClass("Loading"),this.hideEditCommentForm(),this.update(),this.triggerResize())),this.model.once("saveError",()=>(this.$el.removeClass("Loading"),this.$("._edit-comment-form").eq(0).addClass("hasError"),this.model.set({text:this.oldText},{silent:!0}))),this.model.save({text:e},{highlight:!1,silent:!0,remove:!0})):this.hideEditCommentForm()}toggleReplyForm(){return this.isReplyFormExpanded?(this.$("._add-reply-form").eq(0).addClass("hidden"),this.isReplyFormExpanded=!1):(this.$("._add-reply-form").eq(0).removeClass("hidden"),this.$("._reply-text-input").eq(0).focus(),this.isReplyFormExpanded=!0),this.triggerResize()}showEditCommentForm(){return this.$("._comment-body").eq(0).addClass("hidden"),this.$("._edit-comment-form").eq(0).removeClass("hidden"),this.triggerResize()}hideEditCommentForm(){return this.$("._comment-body").eq(0).removeClass("hidden"),this.$("._edit-comment-form").eq(0).addClass("hidden"),this.triggerResize()}triggerResize(){var e,t;for(t=this.model.parents("comments");e=null!=t?t.parents("comments"):void 0;)t=e;return null!=t?t.trigger("resizeComments"):void 0}}return t.prototype.Model=r,t.prototype.mixin(h),t.prototype.Rule=function(){var t;return(t=class extends o.prototype.Rule{template(){return template("._CommentView")}}).prototype.rule={"._has-display-name=":function(){if(!this.model.get("user").get("displayName"))return""},"._is-reply=":function(){if(!this.model.parents("comment"))return""},"._has-replies=":function(){if(!this.model.get("comments").count())return""},"._author=":function(){return this.model.get("user").get("displayName")||this.model.get("user").get("username")},"._username=":function(){return this.model.get("user").get("username")},"._comment-text=":function(){var e;return(null!=(e=this.model.get("text"))?e.trim():void 0)?i(V(this.model.get("text").trim())):""},"._time-ago=":function(){return R(new Date(this.model.get("timeCreated"))).fromNow()},"._user-link@href":function(){return this.model.get("user").url()},"._parent-user-link@href":function(){var e;return null!=(e=this.model.parents("comment"))?e.get("user").url():void 0},"._parent-username=":function(){var e;return null!=(e=this.model.parents("comment"))?e.get("user").get("username"):void 0},"._CommentUserView=":function(){return new c({model:this.model.get("user")})},"._CommentReactionButtonMostImportantView=":function(){return new l({collection:this.model.get("reactionSet").get("useful")})},"._CommentListView=":function(){var t;return this.model.get("comments").count()?new(e("../lists/comment-list-view").CommentListView)({collection:this.model.get("comments"),filterByDisplayed:null!=(t=this.options)?t.filterByDisplayed:void 0}):""}},t}.call(this),t.prototype.events=_.assign({},h.prototype.events,{"click ._parent-link":function(e){return e.stopPropagation(),this.model.parents("comment").trigger("highlight")},"click ._reply-link":function(e){return e.stopPropagation(),this.toggleReplyForm()},"click ._submit-reply-link":function(e){return e.stopPropagation(),this.submitReply()},"input ._reply-text-input":function(e){var t;return e.stopPropagation(),(t=this.$("._reply-text-input").eq(0).val().trim())&&this.isReplyFormDisabled?(this.$("._submit-reply-link").eq(0).removeClass("disabled"),this.isReplyFormDisabled=!1):t||this.isReplyFormDisabled?void 0:(this.$("._submit-reply-link").eq(0).addClass("disabled"),this.isReplyFormDisabled=!0)},"click ._cancel-reply-link":function(e){return e.stopPropagation(),this.toggleReplyForm(),this.$("._reply-text-input").eq(0).val(""),this.isReplyFormDisabled=!0},"click ._edit-comment-link":function(e){return e.stopPropagation(),this.showEditCommentForm(),this.oldText=this.model.get("text"),this.$("._edit-comment-input").eq(0).val(this.oldText).focus(),this.oldText?this.isEditFormDisabled=!1:this.isEditFormDisabled=!0},"click ._submit-edit-comment-link":function(e){return e.stopPropagation(),this.submitCommentEdit()},"click ._cancel-edit-comment-link":function(e){return e.stopPropagation(),this.hideEditCommentForm()},"input ._edit-comment-input":function(e){var t;return e.stopPropagation(),(t=this.$("._edit-comment-input").eq(0).val())&&this.isEditFormDisabled?(this.$("._submit-edit-comment-link").eq(0).removeClass("disabled"),this.isEditFormDisabled=!1):t||this.isEditFormDisabled?void 0:(this.$("._submit-edit-comment-link").eq(0).addClass("disabled"),this.isEditFormDisabled=!0)}}),t}.call(this),d=function(){class e extends p{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._CommentWithContextView")}}).prototype.rule={"._is-option-or-section-comment=":function(){if(!this.model.parents("viewpoint"))return""},"._is-section-comment=":function(){if(!this.model.parents("section"))return""},"._option-link":{"@href":function(){return x(this.model.parents("viewpoint"))},"@title":function(){var e;return null!=(e=this.model.parents("viewpoint").get("revision"))?e.get("title"):void 0},"@rel":"nofollow"},"._option-title=":function(){var e;return null!=(e=this.model.parents("viewpoint").get("revision"))?e.get("title"):void 0},"._section-link":{"@href":function(){return new v(x(this.model.parents("viewpoint"))).fragment(this.model.parents("section").get("id"))},"@title":function(){var e;return null!=(e=this.model.parents("section").get("revision"))?e.get("title"):void 0},"@rel":"nofollow"},"._section-title=":function(){var e;return null!=(e=this.model.parents("section").get("revision"))?e.get("title"):void 0}},e}.call(this),e}.call(this),l=function(){class e extends m{}return e.prototype.Collection=f,e.prototype.showTooltip=_.debounce(function(e){if(this.mouseover)return new u({collection:this.collection,follows:e.currentTarget})},300),e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._CommentReactionButtonMostImportantView")}},e.prototype.events={"click ._comment-reaction-link":function(e){return analytics.track("Clicked Comment Most Important")}},e}.call(this),u=function(){class e extends w{}return e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._CommentReactionTooltipView")}}).prototype.rule={"._CommentReactionTooltipListView=":function(){return new a({collection:this.collection})}},e}.call(this),e}.call(this),a=function(){class e extends g{}return e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._CommentReactionTooltipListView")}},e}.call(this),c=function(){class e extends y{}return e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._CommentUserView")}},e}.call(this),t.exports={CommentView:p,CommentWithContextView:d,CommentReactionButtonMostImportantView:l,CommentReactionTooltipView:u,CommentReactionTooltipListView:a,CommentUserView:c}},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/reaction-button-set-view":141,"../components/reaction-tooltip-view":143,"../lists/comment-list-view":170,"../mixins/expanding-textarea-mixin-view":184,"../models/user-view":207,jquery:438,marked:440,moment:441,underscore:448,urijs:452}],192:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K;({BaseView:i}=e("../base-view")),({UserView:H}=e("./user-view")),({TooltipView:j}=e("../components/tooltip-view")),({Event:r,Topic:z,Viewpoint:W,Section:F,Comment:o,Vote:Y}=e("../../models")),({improveURL:G}=e("../../utils/transforms")),K=e("moment"),Q=e("urijs"),N=function(){class e extends i{getContentViewByAction(){var e,t;return"function"==typeof(e=this.actionToView)[t=this.model.get("action")]?e[t]():void 0}}return e.prototype.Model=r,e.prototype.actionToView={"Qsn.Create":function(){return f},"Opt.Create":function(){return m},"Sec.Create":function(){return g},"Qsn.Revise":function(){return C},"Opt.Revise":function(){return y},"Sec.Revise":function(){return O},"Qsn.Promote_Karma":function(){return S},"Comment_Qsn.Create":function(){return b},"Comment_Opt.Create":function(){return v},"Comment_Sec.Create":function(){return I},"Opt.Vote:Up":function(){return V},"Sec.Vote:Up":function(){return B},"Sec.Vote:Down":function(){return B},"Reaction_Qsn.Create:NeedsImprovement":function(){return P},"Reaction_Qsn.Create:Duplicate":function(){return k},"Reaction_Qsn.Create:NotAFit":function(){return T},"Reaction_Opt.Create:OutOfDate":function(){return x},"Reaction_Opt.Create:Flag":function(){return _},"Reaction_Sec.Create:NeedsImprovement":function(){return $},"Reaction_Sec.Create:OutOfDate":function(){return U},"Reaction_Sec.Create:Flag":function(){return E},"Reaction_Sec.Create:Useful":function(){return D},"Rec.React:Useful":function(){return L},"Sec.React:Useful":function(){return D}},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._EventView")}}).prototype.rule={"._is-read=":function(){if(this.model.get("isread"))return""},"._EventUserView=":function(){return new q({model:this.model.get("user")})},"._EventContentView=":function(){var e;return"function"==typeof(e=this.getContentViewByAction())?new e({model:this.model}):void 0}},e}.call(this),e}.call(this),q=function(){class e extends H{}return e.prototype.Rule=class extends H.prototype.Rule{template(){return template("._EventUserView")}},e}.call(this),a=function(){class e extends i{getSectionLink(){return G(this.model.get("target").parents("viewpoint")).concat(`#${this.model.get("target").get("id")}`)}getTargetHistoryLink(){return G(this.model.get("target")).replace(/(~.*)$/,"").concat("history")}getTargetCommentsLink(){return G(this.model.get("target")).replace(/(\/)(?!.*\/)/,"#")}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._user-link@href":function(){return this.model.get("user").url()},"._first-name=":function(){var e;return null!=(e=this.model.get("user").get("displayName")||this.model.get("user").get("username"))?e.split(" ")[0]:void 0},"._target-title=":function(){var e;return null!=(e=this.model.get("target").get("revision").get("title"))?e.trim():void 0},"._target-link@rel":"nofollow","._target-link@href":function(){return this.getTargetLink()},"._time-ago=":function(){return K(new Date(this.model.get("time"))).fromNow()}},e}.call(this),e}.call(this),f=function(){class e extends a{getTargetLink(){return G(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventNewQuestionContentView")}},e}.call(this),m=function(){class e extends a{getTargetLink(){return G(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventNewOptionContentView")}},e}.call(this),g=function(){class e extends a{getTargetLink(){return this.getSectionLink()}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._EventNewSectionContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),c=function(){class e extends a{getTargetLink(){return this.getTargetHistoryLink()}}return e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),C=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EventQuestionEditContentView")}},e}.call(this),y=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EventOptionEditContentView")}},e}.call(this),O=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._EventSectionEditContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),S=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._EventQuestionPromoteContentView")}},e}.call(this),l=function(){class e extends a{getTargetLink(){return this.getTargetCommentsLink()}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._target-title=":function(){var e,t;return null!=(t=null!=(e=this.model.get("target").collection)?e.parent:void 0)?t.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),b=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._EventQuestionCommentContentView")}},e}.call(this),v=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._EventOptionCommentContentView")}},e}.call(this),I=function(){class e extends l{}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._EventSectionCommentContentView")}}).prototype.rule={"._is-pro=":function(){var e;if(null!=(e=this.model.get("target").parents("section"))?e.get("isCon"):void 0)return""},"._is-con=":function(){var e;if(!(null!=(e=this.model.get("target").parents("section"))?e.get("isCon"):void 0))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),V=function(){class e extends a{getTargetLink(){return G(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventOptionRecommendationContentView")}},e}.call(this),B=function(){class e extends a{getTargetLink(){return this.getSectionLink()}isAgree(){return"Up"===this.model.get("action").split(":")[1]}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._EventSectionRecommendationContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._is-agree=":function(){if(!this.isAgree())return""},"._is-disagree=":function(){if(this.isAgree())return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new s({isAgree:this.isAgree(),follows:e.target})}},e}.call(this),M=function(){class e extends a{getTargetLink(){return G(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{},e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=this.getEventReactionTooltip()}},e}.call(this),P=function(){class e extends M{getEventReactionTooltip(){return new h({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionNeedsClarificationContentView")}},e}.call(this),k=function(){class e extends M{getEventReactionTooltip(){return new u({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionDuplicateContentView")}},e}.call(this),T=function(){class e extends M{getEventReactionTooltip(){return new w({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionNotAFitContentView")}},e}.call(this),x=function(){class e extends M{getEventReactionTooltip(){return new R({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventOptionReactionOutOfDateContentView")}},e}.call(this),_=function(){class e extends M{getEventReactionTooltip(){return new p({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventOptionReactionFlagContentView")}},e}.call(this),A=function(){class e extends M{getTargetLink(){return this.getSectionLink()}}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),D=function(){class e extends A{getEventReactionTooltip(){return new d({follows:event.target})}}return e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._EventSectionReactionMostImportantContentView")}},e}.call(this),$=function(){class e extends A{getEventReactionTooltip(){return new h({follows:event.target})}}return e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._EventSectionReactionNeedsClarificationContentView")}},e}.call(this),U=function(){class e extends A{getEventReactionTooltip(){return new R({follows:event.target})}}return e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._EventSectionReactionOutOfDateContentView")}},e}.call(this),E=function(){class e extends A{getEventReactionTooltip(){return new p({follows:event.target})}}return e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._EventSectionReactionFlagContentView")}},e}.call(this),L=function(){class e extends M{getTargetLink(){return new Q(G(this.model.get("target"))).hash("recommendations")}}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._EventRecommendationReactionUsefulContentView")}}).prototype.rule={"._creator-first-name=":function(){var e,t;return null!=(t=(null!=(e=this.model.get("target").get("user"))?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0))?t.split(" ")[0]:void 0},"._option-title=":function(){return this.model.get("target").get("revision").get("title").trim()}},e}.call(this),e}.call(this),s=function(){class e extends j{}return e.prototype.Rule=function(){var e;return(e=class extends j.prototype.Rule{template(){return template("._EventAgreeTooltip")}}).prototype.rule={"._is-agree=":function(){if(!this.options.isAgree)return""},"._is-disagree=":function(){if(this.options.isAgree)return""}},e}.call(this),e}.call(this),h=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventNeedsClarificationTooltip")}},e}.call(this),u=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventDuplicateTooltip")}},e}.call(this),w=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventNotAFitTooltip")}},e}.call(this),R=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventOutOfDateTooltip")}},e}.call(this),p=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventFlagTooltip")}},e}.call(this),d=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._EventMostImportantTooltip")}},e}.call(this),t.exports={EventView:N,EventUserView:q,EventContentView:a,EventNewQuestionContentView:f,EventNewOptionContentView:m,EventNewSectionContentView:g,EventEditContentView:c,EventQuestionEditContentView:C,EventOptionEditContentView:y,EventSectionEditContentView:O,EventQuestionPromoteContentView:S,EventCommentContentView:l,EventQuestionCommentContentView:b,EventOptionCommentContentView:v,EventSectionCommentContentView:I,EventOptionRecommendationContentView:V,EventSectionRecommendationContentView:B,EventReactionContentView:M,EventQuestionReactionNeedsClarificationContentView:P,EventQuestionReactionDuplicateContentView:k,EventQuestionReactionNotAFitContentView:T,EventOptionReactionOutOfDateContentView:x,EventOptionReactionFlagContentView:_,EventSectionReactionContentView:A,EventSectionReactionMostImportantContentView:D,EventSectionReactionNeedsClarificationContentView:$,EventSectionReactionOutOfDateContentView:U,EventSectionReactionFlagContentView:E,EventRecommendationReactionUsefulContentView:L,EventAgreeTooltip:s,EventNeedsClarificationTooltip:h,EventDuplicateTooltip:u,EventNotAFitTooltip:w,EventOutOfDateTooltip:R,EventFlagTooltip:p,EventMostImportantTooltip:d}},{"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/tooltip-view":167,"./user-view":207,moment:441,urijs:452}],193:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({HighlightModel:o}=e("../../models/index")),r=function(){class e extends i{}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._is-agree=":function(){if(!(this.model.get("magnitude")>0))return""}},e}.call(this),e}.call(this),t.exports={HighlightView:r}},{"../../models/index":64,"../base-view":91}],194:[function(e,t,n){var i,o,r;({ImageModel:o}=e("../../models/index")),({BaseView:i}=e("../base-view")),r=function(){class t extends i{videoClickedAnalytics(){return analytics.track("Clicked Video")}}return t.prototype.Model=o,t.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ImageView")}}).prototype.rule={"._is-video=":function(){if(!this.model.isVideo())return""},"._not-video=":function(){if(this.model.isVideo())return""},"._video-embed=":function(){return this.model.createVideoEmbed()},"._image-src":function(){return{"@src":function(){return this.model.getImagePreviewURL()}}},"._image-full-src":function(){return{"@src":function(){return this.model.getImageURL()}}}},e}.call(this),t.prototype.events={"click ._lightbox-link":function(){var t;return({LightboxView:t}=e("../components/lightbox-view")),new t({model:this.model})},"click ._load-video-link":function(){var e;if(e=this.model.createVideoEmbed({isAutoplay:!0}))return this.$("._embed-target").replaceWith(e),this.$("._load-video-link").css({display:"none"}),this.videoClickedAnalytics()}},t}.call(this),t.exports={ImageView:r}},{"../../models/index":64,"../base-view":91,"../components/lightbox-view":114}],195:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./comment-view"),e("./event-view"),e("./highlight-view"),e("./image-view"),e("./karma-view"),e("./lazy-image-view"),e("./master-option-view"),e("./option-event-view"),e("./option-view"),e("./rec-view"),e("./question-view"),e("./section-event-view"),e("./section-view"),e("./spec-view"),e("./tag-view"),e("./user-view"))},{"./comment-view":191,"./event-view":192,"./highlight-view":193,"./image-view":194,"./karma-view":196,"./lazy-image-view":197,"./master-option-view":198,"./option-event-view":199,"./option-view":200,"./question-view":201,"./rec-view":202,"./section-event-view":203,"./section-view":204,"./spec-view":205,"./tag-view":206,"./user-view":207,underscore:448}],196:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S;({BaseView:i}=e("../base-view")),({EventView:h,EventEditContentView:r,EventSectionEditContentView:c,EventNewOptionContentView:s,EventNewSectionContentView:l,EventOptionRecommendationContentView:a,EventSectionRecommendationContentView:d,EventSectionReactionMostImportantContentView:p,EventRecommendationReactionUsefulContentView:u}=e("./event-view")),({KarmaBonus:m,Event:o}=e("../../models")),({improveURL:S}=e("../../utils/transforms")),C=function(){class e extends i{}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._KarmaView")}}).prototype.rule={"._bonus-count=":function(){return this.model.get("score")},"._question-title=":function(){var e;return null!=(e=this.model.get("event").get("target").parents("topic"))?e.get("revision").get("title").trim():void 0},"._question-link@href":function(){return S(this.model.get("event").get("target").parents("topic"))},"._KarmaEventView=":function(){var e;return(null!=(e=this.model.parents("user"))?e.get("username"):void 0)===this.model.get("event").get("user").get("username")?new b({model:this.model.get("event")}):new v({model:this.model.get("event")})}},e}.call(this),e}.call(this),b=function(){class e extends h{}return e.prototype.Model=o,e.prototype.actionToView={"Qsn.Revise":function(){return _},"Opt.Create":function(){return V},"Opt.Revise":function(){return y},"Sec.Create":function(){return R},"Sec.Revise":function(){return x}},e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._KarmaInternalEventView")}},e}.call(this),v=function(){class e extends h{}return e.prototype.Model=o,e.prototype.actionToView={"Opt.Vote:Up":function(){return f},"Sec.Vote:Up":function(){return w},"Sec.React:Useful":function(){return p},"Rec.React:Useful":function(){return g}},e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._KarmaExternalEventView")}},e}.call(this),_=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._KarmaInternalEventEditQuestionContentView")}},e}.call(this),V=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._KarmaInternalEventNewOptionContentView")}},e}.call(this),y=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._KarmaInternalEventEditOptionContentView")}},e}.call(this),R=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._KarmaInternalEventNewSectionContentView")}},e}.call(this),x=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._KarmaInternalEventEditSectionContentView")}},e}.call(this),f=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._KarmaExternalEventOptionRecommendationContentView")}},e}.call(this),w=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._KarmaExternalEventSectionAgreeContentView")}},e}.call(this),g=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._KarmaExternalEventRecommendationReactionUsefulContentView")}},e}.call(this),t.exports={KarmaView:C,KarmaInternalEventView:b,KarmaExternalEventView:v,KarmaInternalEventEditQuestionContentView:_,KarmaInternalEventNewOptionContentView:V,KarmaInternalEventEditOptionContentView:y,KarmaInternalEventNewSectionContentView:R,KarmaInternalEventEditSectionContentView:x,KarmaExternalEventOptionRecommendationContentView:f,KarmaExternalEventSectionAgreeContentView:w,KarmaExternalEventRecommendationReactionUsefulContentView:g}},{"../../models":34,"../../utils/transforms":89,"../base-view":91,"./event-view":192}],197:[function(e,t,n){var i,o,r;({ImageModel:i}=e("../../models/index")),({ImageView:o}=e("./image-view")),r=function(){class e extends o{}return e.prototype.Model=i,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{}).prototype.rule={"._image-src":function(){return{"@data-lazy-src":function(){return this.model.getImagePreviewURL()}}},"._image-full-src":function(){return{"@data-lazy-src":function(){return this.model.getImageURL()}}}},e}.call(this),e}.call(this),t.exports={LazyImageView:r}},{"../../models/index":64,"./image-view":194}],198:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({ProductModel:r}=e("../../models/index")),o=function(){class e extends i{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MasterOptionView")}}).prototype.rule={"._option-title=":function(){return this.model.get("title")},"._upvote-count=":function(){var e,t;return null!=(e=null!=(t=this.model.get("product_ranking_obj"))?t.global_rec_count_up:void 0)?e:0},"._downvote-count=":function(){var e,t;return null!=(e=null!=(t=this.model.get("product_ranking_obj"))?t.global_rec_count_down:void 0)?e:0},"._master-option-link@href":function(){return this.model.getMasterOptionPageURL()},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.getModel("option_id").getCollection("option_image_ids").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`}},e}.call(this),e}.call(this),t.exports={MasterOptionView:o}},{"../../models/index":64,"../base-view":91}],199:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I;({EventView:w,EventNewOptionContentView:i,EventNewSectionContentView:o,EventOptionEditContentView:s,EventSectionEditContentView:p,EventOptionCommentContentView:r,EventSectionCommentContentView:c,EventOptionRecommendationContentView:u,EventSectionRecommendationContentView:g,EventOptionReactionOutOfDateContentView:a,EventOptionReactionFlagContentView:l,EventSectionReactionMostImportantContentView:h,EventSectionReactionNeedsClarificationContentView:m,EventSectionReactionOutOfDateContentView:f,EventSectionReactionFlagContentView:d}=e("./event-view")),I=function(){class e extends w{}return e.prototype.actionToView={"Opt.Create":function(){return v},"Sec.Create":function(){return y},"Opt.Revise":function(){return x},"Sec.Revise":function(){return S},"Comment_Opt.Create":function(){return _},"Comment_Sec.Create":function(){return C},"Opt.Vote:Up":function(){return b},"Sec.Vote:Up":function(){return L},"Sec.Vote:Down":function(){return L},"Reaction_Opt.Create:OutOfDate":function(){return R},"Reaction_Opt.Create:Flag":function(){return V},"Reaction_Sec.Create:Useful":function(){return P},"Reaction_Sec.Create:NeedsImprovement":function(){return T},"Reaction_Sec.Create:OutOfDate":function(){return M},"Reaction_Sec.Create:Flag":function(){return k}},e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),v=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionEventNewOptionContentView")}},e}.call(this),y=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._OptionEventNewSectionContentView")}},e}.call(this),x=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._OptionEventOptionEditContentView")}},e}.call(this),S=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._OptionEventSectionEditContentView")}},e}.call(this),_=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._OptionEventOptionCommentContentView")}},e}.call(this),C=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._OptionEventSectionCommentContentView")}},e}.call(this),b=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._OptionEventOptionRecommendationContentView")}},e}.call(this),L=function(){class e extends g{}return e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._OptionEventSectionRecommendationContentView")}},e}.call(this),R=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._OptionEventOptionReactionOutOfDateContentView")}},e}.call(this),V=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._OptionEventOptionReactionFlagContentView")}},e}.call(this),P=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._OptionEventSectionReactionMostImportantContentView")}},e}.call(this),T=function(){class e extends m{}return e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._OptionEventSectionReactionNeedsClarificationContentView")}},e}.call(this),M=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._OptionEventSectionReactionOutOfDateContentView")}},e}.call(this),k=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._OptionEventSectionReactionFlagContentView")}},e}.call(this),t.exports={OptionEventView:I,OptionEventNewOptionContentView:v,OptionEventNewSectionContentView:y,OptionEventOptionEditContentView:x,OptionEventSectionEditContentView:S,OptionEventOptionCommentContentView:_,OptionEventSectionCommentContentView:C,OptionEventOptionRecommendationContentView:b,OptionEventSectionRecommendationContentView:L,OptionEventOptionReactionOutOfDateContentView:R,OptionEventOptionReactionFlagContentView:V,OptionEventSectionReactionMostImportantContentView:P,OptionEventSectionReactionNeedsClarificationContentView:T,OptionEventSectionReactionOutOfDateContentView:M,OptionEventSectionReactionFlagContentView:k}},{"./event-view":192}],200:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;c=e("../../rule"),({BaseView:o}=e("../base-view")),({ToasterView:m,ToastEditOptionView:d,ToastImageSidebarView:h,ToastDescriptionSidebarView:p}=e("../components/toaster-view")),({ReactionMenuOptionStepView:u,ReactionMenuDropdownView:a}=e("../components/reaction-menu-dropdown-view")),({ImageModel:r,OptionModel:s}=e("../../models/index")),f=e("underscore"),v=e("moment"),w=e("marked"),e("urijs"),({shortenNumber:y}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({improveURL:g}=e("../../utils/transforms")),l=function(){class e extends o{sendOptionSiteLinkAnalytics(e={}){var t,n,i;if(i=this.model.get("title"),n=this.model.get("site_url"),e=f.extend({},{label:i,optionTitle:i,destinationURL:n},e),analytics.track("Clicked Site Link",e),this.model.getModel("question_id").getCollection("question_option_ids"))return t=this.model.getModel("question_id").getCollection("question_option_ids").indexOf(this.model)+1,analytics.track(`Clicked Site Link Position ${t}`,e)}}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends c{template(){return template("._OptionView")}}).prototype.rule={"._has-site-link=":function(){if(!this.model.get("site_url"))return""},"._no-site-link=":function(){if(this.model.get("site_url"))return""},"._has-image=":function(){var e;if(!((null!=(e=this.model.getCollection("option_image_ids"))?e.length:void 0)>0))return""},"._no-image=":function(){var e;if((null!=(e=this.model.getCollection("option_image_ids"))?e.length:void 0)>0)return""},"._option-image-is-video=":function(){var e;if(!(null!=(e=this.model.getCollection("option_image_ids").at(0))?e.isVideo():void 0))return""},"._has-body=":function(){if(!this.model.get("body").trim())return""},"._no-body=":function(){if(this.model.get("body").trim())return""},"._has-price=":function(){if(!this.model.get("price"))return""},"._no-price=":function(){if(this.model.get("price"))return""},"._has-specs=":function(){if(!this.model.get("option_spec_set").length)return""},"._no-specs=":function(){if(this.model.get("option_spec_set").length)return""},"._has-comments=":function(){if(!this.model.getCollection("option_comment_ids").length)return""},"._has-flagged=":function(){if(!this.model.getCollection("option_section_ids").some(function(e){return e.get("section_reactions_obj").react_count_flag}))return""},"._has-out-of-date=":function(){if(!this.model.getCollection("option_section_ids").some(function(e){var t;return(t=e.get("section_reactions_obj")).react_count_not_a_fit&&!t.react_count_flag}))return""},"._has-master-page-url=":function(){if(!this.model.getModel("product_id").getMasterOptionPageURL())return""},"._has-badge=":function(){var e,t;if(null==(null!=(e=this.model.get("option_ranking_obj"))?e.badge:void 0)||"none"===(null!=(t=this.model.get("option_ranking_obj"))?t.badge:void 0))return""},"._meta-option-title@content":function(){return this.model.get("title")},"._option-title=":function(){return this.model.get("title")},"._option-body=":function(){if(this.model.get("body").trim())return i(w(this.model.get("body").trim()))},"._option-price=":function(){return this.model.get("price")},"._option-link":function(){return{"@href":function(){return this.model.getViewpointPageURL()},"@title":function(){return this.model.get("title")},"@rel":"nofollow"}},"._master-option-link@href":function(){return this.model.getModel("product_id").getMasterOptionPageURL()},"._option-site-link":{"@href":function(){return this.model.get("site_url")},"@target":"_blank","@rel":"nofollow noopener"},"._option-comment-link@href":function(){return this.model.getViewpointCommentPageURL},"._option-activity-link@href":function(){return this.model.getViewpointActivityPageURL},"._option-time-ago=":function(){return v(new Date(this.model.get("option_updated_obj").updated_timestamp)).fromNow()},"._option-image@src":function(){var e;return null!=(e=this.model.getCollection("option_image_ids").at(0))?e.getImagePreviewURL():void 0},"._option-background-image@style+":function(){var e,t,n;if(n=null!=(e=this.model.getCollection("option_image_ids"))&&null!=(t=e.at(0))?t.getImagePreviewURL():void 0)return`background-image: URL('${n}');`},"._meta-option-background-image-url@content":function(){var e;return null!=(e=this.model.getCollection("option_image_ids").at(0))?e.getImagePreviewURL():void 0},"._option-comment-count=":function(){return this.model.getCollection("option_comment_ids").length},"._option-vote-count=":function(){var e,t;return y(((null!=(e=this.model.get("option_ranking_obj"))?e.rec_count_up:void 0)||0)+((null!=(t=this.model.get("option_ranking_obj"))?t.rec_count_down:void 0)||0))},"._option-upvote-count=":function(){var e;return y((null!=(e=this.model.get("option_ranking_obj"))?e.rec_count_up:void 0)||0)},"._option-downvote-count=":function(){var e;return y((null!=(e=this.model.get("option_ranking_obj"))?e.rec_count_down:void 0)||0)},"._option-id@id":function(){return this.model.id},"._question-link@href":function(){return this.model.getModel("question_id").getTopicPageURL()}},e}.call(this),e.prototype.events={"click ._option-edit-link":function(e){var t;return null!=(t=window.view.getChildrenByView(m)[0])?t.setToast(d,{model:this.model.clone()}):void 0},"click ._option-edit-image-link":function(e){var t,n,i;return t=null!=(i=window.view.getChildrenByView(m)[0])?i.setToast(d,{model:this.model.clone()}).activeToastView:void 0,n=new r({source:""},{collection:t.imageCollection}),t.setSidebar(h,{model:n}).update()},"click ._option-edit-description-link":function(e){var t,n;return(t=null!=(n=window.view.getChildrenByView(m)[0])?n.setToast(d,{model:this.model.clone()}).activeToastView:void 0).setSidebar(p,{model:t.model}).update()},"click ._reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new(function(){var e;return(e=class extends a{}).prototype.DefaultStepView=u,e}.call(this))({model:this.model.getCollection("option_reaction_ids"),follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})},"click ._option-site-link":function(e){return this.sendOptionSiteLinkAnalytics()}},e}.call(this),t.exports={OptionView:l}},{"../../../../../server/compiled/templating/jquery":461,"../../models/index":64,"../../rule":81,"../../utils/transforms":89,"../base-view":91,"../components/reaction-menu-dropdown-view":142,"../components/toaster-view":166,jquery:438,marked:440,moment:441,underscore:448,urijs:452}],201:[function(e,t,n){var i,o,r,s,l,a,u,c,p;({BaseView:o}=e("../base-view")),({ReactionMenuDropdownView:l,ReactionMenuQuestionStepView:a}=e("../components/reaction-menu-dropdown-view")),({QuestionModel:r}=e("../../models/index")),e("underscore"),c=e("moment"),u=e("marked"),({shortenNumber:p}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),s=function(){class e extends o{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._QuestionView")}}).prototype.rule={"._has-options=":function(){if(!this.model.getCollection("question_option_ids").length)return""},"._no-options=":function(){if(this.model.getCollection("question_option_ids").length)return""},"._has-comments=":function(){if(!this.model.getCollection("question_comment_ids").length)return""},"._has-body=":function(){if(!this.model.get("body").trim())return""},"._no-body=":function(){if(this.model.get("body").trim())return""},"._has-tags=":function(){if(!this.model.getCollection("question_tag_ids").length)return""},"._no-tags=":function(){if(this.model.getCollection("question_tag_ids").length)return""},"._question-title=":function(){return this.model.get("title")},"._question-title-short=":function(){return this.model.get("title").replace(/what (are|is) the best/i,"Best").replace(/\?$/,"")},"._question-title-subject":function(){return this.model.get("title").replace(/what (are|is) the best/i,"").replace(/\?$/,"")},"._question-body=":function(){var e,t;if(e=this.model.get("body").trim(),t=u(e),e)return i(t)},"._question-link@href":function(){return this.model.getTopicPageURL()},"._question-compare-link@href":function(){return this.model.getTopicComparePageURL()},"._question-edit-link@href":function(){return this.model.getTopicEditPageURL()},"._question-comment-link@href":function(){return this.model.getTopicCommentPageURL()},"._question-comment-count=":function(){return p(this.model.getCollection("question_comment_ids").length)},"._question-time-ago=":function(){return c(new Date(this.model.get("question_updated_obj").updated_timestamp)).fromNow()}},e}.call(this),e.prototype.events={"click ._question-more-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new l({model:this.model,follows:e.currentTarget,DefaultStepView:a}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})}},e}.call(this),t.exports={QuestionView:s}},{"../../../../../server/compiled/templating/jquery":461,"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../components/reaction-menu-dropdown-view":142,jquery:438,marked:440,moment:441,underscore:448}],202:[function(e,t,n){var i,o,r,s,l,a,u,c;({BaseView:i}=e("../base-view")),({RecModel:o}=e("../../models/index")),a=e("marked"),u=new(e("marked-plaintext"))({spaces:!0}),({improveURL:l,decodeHTMLEntities:s,trimText:c}=e("../../utils/transforms")),r=function(){class e extends i{getPlainTextBody(){var e;if(e=this.model.get("body").trim())return s(a(e,{renderer:u}))}}return e.prototype.Model=o,e.prototype.trimmedTextLength=310,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){if(!(this.model.get("magnitude")>0))return""},"._is-downvote=":function(){if(!(this.model.get("magnitude")<0))return""},"._has-recommendation-body=":function(){var e;if(!(null!=(e=this.model.get("body"))?e.trim():void 0))return""},"._has-pros-cons=":function(){var e;if(!(null!=(e=this.model.getCollection("rec_highlight_ids"))?e.length:void 0))return""},"._option-title=":function(){var e;return null!=(e=this.model.getModel("option_id"))?e.get("title"):void 0},"._option-link":function(){return{"@href":function(){var e;return null!=(e=this.model.getModel("option_id"))?e.getViewpointPageURL():void 0},"@title":function(){var e;return null!=(e=this.model.getModel("option_id"))?e.get("title"):void 0},"@rel":"nofollow"}},"._recommendation-body-plain=":function(){var e;if(e=this.getPlainTextBody())return c(e,this.trimmedTextLength,"...")}},e}.call(this),e}.call(this),t.exports={RecView:r}},{"../../models/index":64,"../../utils/transforms":89,"../base-view":91,marked:440,"marked-plaintext":439}],203:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_;({EventView:p,EventNewSectionContentView:i,EventSectionEditContentView:r,EventSectionCommentContentView:o,EventSectionRecommendationContentView:c,EventSectionReactionMostImportantContentView:l,EventSectionReactionNeedsClarificationContentView:a,EventSectionReactionOutOfDateContentView:u,EventSectionReactionFlagContentView:s}=e("./event-view")),_=function(){class e extends p{}return e.prototype.actionToView={"Sec.Create":function(){return m},"Sec.Revise":function(){return h},"Comment_Sec.Create":function(){return d},"Sec.Vote:Up":function(){return y},"Sec.Vote:Down":function(){return y},"Reaction_Sec.Create:Useful":function(){return g},"Reaction_Sec.Create:NeedsImprovement":function(){return w},"Reaction_Sec.Create:OutOfDate":function(){return v},"Reaction_Sec.Create:Flag":function(){return f}},e.prototype.Rule=class extends p.prototype.Rule{},e}.call(this),m=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SectionEventNewSectionContentView")}},e}.call(this),h=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SectionEventEditContentView")}},e}.call(this),d=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._SectionEventCommentContentView")}},e}.call(this),y=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._SectionEventRecommendationContentView")}},e}.call(this),g=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._SectionEventReactionMostImportantContentView")}},e}.call(this),w=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._SectionEventReactionNeedsClarificationContentView")}},e}.call(this),v=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._SectionEventReactionOutOfDateContentView")}},e}.call(this),f=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SectionEventReactionFlagContentView")}},e}.call(this),t.exports={SectionEventView:_,SectionEventNewSectionContentView:m,SectionEventEditContentView:h,SectionEventCommentContentView:d,SectionEventRecommendationContentView:y,SectionEventReactionMostImportantContentView:g,SectionEventReactionNeedsClarificationContentView:w,SectionEventReactionOutOfDateContentView:v,SectionEventReactionFlagContentView:f}},{"./event-view":192}],204:[function(e,t,n){var i,o,r,s,l,a,u,c;({BaseView:o}=e("../base-view")),({ToasterView:u,ToastEditSectionView:a}=e("../components/toaster-view")),({MoreDropdownView:r}=e("../components/more-dropdown-view")),({SectionModel:s}=e("../../models/index")),e("moment"),c=e("marked"),e("urijs"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),l=function(){class e extends o{}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SectionView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.getCollection("section_comment_ids").length)return""},"._has-votes=":function(){if(!(this.model.get("section_ranking_obj").rec_count_up+this.model.get("section_ranking_obj").rec_count_down))return""},"._has-upvotes=":function(){if(!this.model.get("section_ranking_obj").rec_count_up)return""},"._has-downvotes=":function(){if(!this.model.get("section_ranking_obj").vote_down_up)return""},"._has-body=":function(){var e;if(!(null!=(e=this.model.get("body"))?e.trim():void 0))return""},"._no-body=":function(){var e;if(null!=(e=this.model.get("body"))?e.trim():void 0)return""},"._no-votes=":function(){if(this.model.get("section_ranking_obj").rec_count_up+this.model.get("section_ranking_obj").rec_count_down)return""},"._is-pro=":function(){if("Pro"!==this.model.get("section_type"))return""},"._is-con=":function(){if("Con"!==this.model.get("section_type"))return""},"._section-link":{"@href":function(){return this.model.getSectionPageURL()},"@rel":"nofollow"},"._section-comment-link@href":function(){return this.model.getSectionCommentPageURL()},"._section-id@id":function(){return this.model.get("sp_id")},"._section-title=":function(){return this.model.get("title")},"._section-body=":function(){if(this.model.get("body").trim())return i(c(this.model.get("body").trim()))},"._section-comment-count=":function(){return this.model.getCollection("section_comment_ids").length}},e}.call(this),e.prototype.events={"click ._section-edit-link":function(e){var t;return null!=(t=window.view.getChildrenByView(u)[0])?t.setToast(a,{section:this.model}):void 0},"click ._section-description-edit-link":function(e){var t,n;return t=null!=(n=window.view.getChildrenByView(u)[0])?n.setToast(a,{section:this.model}).activeToastView:void 0,_.defer(function(){return t.$("._section-description-input").focus()})},"click ._section-more-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new r({model:this.model,follows:e.currentTarget})}},e}.call(this),t.exports={SectionView:l}},{"../../../../../server/compiled/templating/jquery":461,"../../models/index":64,"../base-view":91,"../components/more-dropdown-view":123,"../components/toaster-view":166,jquery:438,marked:440,moment:441,urijs:452}],205:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({Spec:o}=e("../../models")),r=function(){class e extends i{}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SpecView")}}).prototype.rule={"._spec-key=":function(){return this.model.get("key")},"._spec-value=":function(){return this.model.get("value")}},e}.call(this),e}.call(this),t.exports={SpecView:r}},{"../../models":34,"../base-view":91}],206:[function(e,t,n){var i,o,r,s,l;o=e("../../rule"),({TagModel:r}=e("../../models/index")),({BaseView:i}=e("../base-view")),e("moment"),({groupNumber:l}=e("../../utils/transforms")),s=function(){class e extends i{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o{template(){return template("._TagView")}}).prototype.rule={"._has-count=":function(){var e;if(!(null!=(e=this.model.get("tag_usage_obj"))?e.question_count:void 0))return""},"._tag-link@href":function(){return this.model.getTagPageURL()},"._name=":function(){return this.model.get("name")},"._id=":function(){return this.model.get("token")},"._tag-count=":function(){var e;return l(null!=(e=this.model.get("tag_usage_obj"))?e.question_count:void 0)}},e}.call(this),e}.call(this),t.exports={TagView:s}},{"../../models/index":64,"../../rule":81,"../../utils/transforms":89,"../base-view":91,moment:441}],207:[function(e,t,n){var i,o,r,s,l,a;o=e("../../rule"),({UserModel:r}=e("../../models/index")),({BaseView:i}=e("../base-view")),({hashCode:l,shortenNumber:a}=e("../../utils/transforms")),s=function(){class e extends i{getUserDisplayName(){return this.model.get("displayname")||this.model.get("username")}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o{template(){return template("._UserView")}}).prototype.rule={"._user-image":{"@src":function(){return this.model.getAvatarThumbnailURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-huge-image":{"@src":function(){return this.model.getAvatarPreviewURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-lazy-image":{"@data-lazy-src":function(){return this.model.getAvatarThumbnailURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-lazy-huge-image":{"@data-lazy-src":function(){return this.model.getAvatarPreviewURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-initials":{"@data-initials":function(){return(this.model.get("displayname")||this.model.get("username")||"").charAt(0).toLowerCase()},"@data-background":function(){var e;return l(null!=(e=this.model.get("username"))?e:"")%12+1}},"._user-link@href":function(){return this.model.getProfilePageURL()},"._user-name=":function(){return this.model.get("displayname")||this.model.get("username")},"._user-notification-link@href":function(){return this.model.getProfileNotificationsPageURL()},"._user-karma-link@href":function(){return this.model.getProfileKarmaPageURL()},"._karma-count=":function(){var e;return a((null!=(e=this.model.get("user_contribs_obj"))?e.karma_total:void 0)||0)}},e}.call(this),e}.call(this),t.exports={UserView:s}},{"../../models/index":64,"../../rule":81,"../../utils/transforms":89,"../base-view":91}],208:[function(e,t,n){var i,o,r,s,l,a,u;({PageView:l}=e("./page-view")),({ActivityThreadView:r}=e("../threads/activity-thread-view")),({RecommendationCardListView:a}=e("../components/recommendation-card-view")),({EventList:s}=e("../../collections")),u=e("urijs"),e("underscore"),o=function(){class e extends l{title(){return super.title("Activity Feed")}}return e.prototype.Collection=s,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._ActivityPageView")}}).prototype.rule={"._has-tags=":function(){var e;if(0===(null!=(e=this.collection.meta("properties"))?e.tags.length:void 0))return""},"._no-tags=":function(){var e;if(0!==(null!=(e=this.collection.meta("properties"))?e.tags.length:void 0))return""},"._tag-name=":function(){var e,t;return null!=(e=this.collection.meta("properties"))&&null!=(t=e.tags[0])?t.name:void 0},"._activity-link@href":function(){return new u("/activity")},"._RecommendationCardListView=":function(){var e;return e=new u(this.collection.meta("URL")).path("/activity").search({filter:"recommended"}).toString(),new i({ajax:e})},"._ActivityThreadView=":function(){return new r({collection:this.collection})}},e}.call(this),e}.call(this),i=function(){class e extends a{}return e.prototype.limit=3,e}.call(this),t.exports={ActivityPageView:o,ActivityPageRecommendationCardListView:i}},{"../../collections":2,"../components/recommendation-card-view":144,"../threads/activity-thread-view":251,"./page-view":241,underscore:448,urijs:452}],209:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;e("../../rule"),({PageView:u}=e("./page-view")),({QuestionView:p}=e("../models/question-view")),({ListView:a}=e("../lists/list-view")),({QuestionTagSelectorView:c}=e("../components/question-tag-selector-view")),({FancyInputMixinView:l}=e("../mixins/fancy-input-mixin-view")),({ExpandingTextareaMixinView:s}=e("../mixins/expanding-textarea-mixin-view")),({SearchList:d,TopicList:g,TagList:m}=e("../../collections")),({Topic:f,Tag:h}=e("../../models")),w=e("underscore"),({tagData:y}=e("../../utils/data")),v=function(e=""){return"What are the best "+e.replace(/^(what )?((are|is) )?(the )?(best )?/i,"").replace("?","")+"?"},r=function(){class e extends u{title(){return super.title("Add Question")}initialize(){var e,t,n,i;if((i=query.title||("function"==typeof $?$("._MainHeaderView ._search-input").val():void 0))&&(this.options.title=v(decodeURIComponent(i))),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return i&&this.autocomplete(),e=this.$("[name=title]"),w.defer(()=>this.adjustTextareaHeight(e)),(t=e.get(0)).focus(),n=t.value.length,t.setSelectionRange(n,n),this.setFancyInputClass("._question-title-input")}autocomplete(){var e,t;return(t=this.$("[name=title]").val()).trim()?this.$("[type=submit]").prop("disabled",!1):this.$("[type=submit]").prop("disabled",!0),null!=(e=this.getChildrenByView(i)[0])?e.collection.autocomplete(t,function(t){return e.$el.removeAttr("style")}):void 0}}return e.prototype.Collection=g,e.prototype.mixin(l),e.prototype.mixin(s),e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._AddQuestionPageView")}}).prototype.rule={"._question-title-input":function(){if(this.options.title)return decodeURIComponent(this.options.title)},"._AddQuestionPageSimilarQuestionListView=":function(){return new i},"._QuestionTagSelectorView=":function(){return new c}},e}.call(this),e.prototype.events=w.assign({},l.prototype.events,s.prototype.events,{"keydown ._question-title-input":function(e){if(13===e.keyCode)return e.preventDefault()},"submit ._add-question-form":function(e){var t,n,o,r,s,l,a;return e.preventDefault(),analytics.track("Submit Topic"),s=this.$("._question-title-input").val(),null!=(l=null!=(t=this.getChildrenByView(i)[0])?t.collection.at(0):void 0)&&v(null!=l?l.get("revision").get("title"):void 0).replace(/\W|s\b/g,"").toLowerCase()===v(s).replace(/\W|s\b/g,"").toLowerCase()?l.navigate():(r=new m(null!=(n=this.getChildrenByView(c)[0])?n.getSelectedTags():void 0),a=new f({tags:r},{collection:this.collection}),(o=this.$("._question-submit")).addClass("Loading"),a.get("revision").set({title:s}),a.save(),a.once("sync",()=>a.navigate({callback:()=>o.removeClass("Loading")})),a.once("saveError",()=>o.removeClass("Loading")))},"input [name=title]":function(e){return this.autocomplete()}}),e}.call(this),o=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._AddQuestionPageSimilarQuestionView")}},e}.call(this),i=function(){class e extends a{}return e.prototype.Collection=d,e.prototype.ItemView=o,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._AddQuestionPageSimilarQuestionListView")}},e}.call(this),t.exports={AddQuestionPageView:r,AddQuestionPageSimilarQuestionView:o,AddQuestionPageSimilarQuestionListView:i}},{"../../collections":2,"../../models":34,"../../rule":81,"../../utils/data":86,"../components/question-tag-selector-view":139,"../lists/list-view":173,"../mixins/expanding-textarea-mixin-view":184,"../mixins/fancy-input-mixin-view":185,"../models/question-view":201,"./page-view":241,underscore:448}],210:[function(e,t,n){(function(n){var i,o;e("underscore"),({PageView:o}=e("./page-view")),i=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._AdsTestPageView")}}).prototype.rule={"._has-ads=":function(){var e;if("true"!==(e=("undefined"!=typeof window&&null!==window?window:n).env).ENABLE_PLAYWIRE_ADS_TEST||null==e.PLAYWIRE_ADS_CONFIG_URL)return""}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard_atf",type:"leaderboard_atf"},{selectorId:"leaderboard_btf",type:"leaderboard_btf"},{selectorId:"med_rect_atf",type:"med_rect_atf"},{selectorId:"med_rect_btf",type:"med_rect_btf"},{selectorId:"sky_atf",type:"sky_atf"},{selectorId:"sky_btf",type:"sky_btf"},{type:"left_rail"},{type:"right_rail"}],e.prototype.conditionalAdUnits=[{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e}.call(this),t.exports={AdsTestPageView:i}}).call(this,e("_process"))},{"./page-view":241,_process:426,underscore:448}],211:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N;q=e("underscore"),N=e("moment"),({BaseView:L}=e("../base-view")),({PageView:U}=e("./page-view")),({ModalView:D}=e("../components/modal-view")),({PanelContentView:B}=e("../components/panel-view")),({ListView:O}=e("../lists/list-view")),({AIPluginCategoryPageBudgetTitleView:_,AIPluginCategoryPageProductView:b,AIPluginCategoryPageMenuView:x,AIPluginCategoryPageProductCrawlItemView:V,AIPluginCategoryPageProductCrawlListView:R,AIPluginFeedbackPanelContentView:k,AIPluginInfographicPanelContentView:P,AIPluginPanelView:M}=e("../pages/ai-plugin-category-page-view")),({AIPluginDetailsPageContentView:C,AIPluginDetailsPageNavigationButtonsView:S}=e("../pages/ai-plugin-details-page-view")),({AIPluginMainPopupPageCategoryListView:T}=e("../pages/ai-plugin-main-popup-page-view")),({MLCrawlCollection:A}=e("../../collections/index")),({CategoryPageQuery:I,MLProductModel:E}=e("../../models/index")),y=function(){class e extends U{title(){var e;return e=this.model.get("name"),super.title(`Best ${e} as of ${N().format("YYYY")}`)}initialize(){if(this.queryIndex=this.getQueryIndex(),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return q.defer(()=>this.setQueryIndex(this.queryIndex,{replace:!0}))}getQueryIndex(){var e,t,n,i;return e=parseInt(this.model.get("price_intent"))/100,(t=null!=(n=this.model.get("prices"))&&null!=(i=n.main_price_points)?i.indexOf(e):void 0)>=0?t:0}getQuery(e){return this.model.getCollection("category_page_ml_query_ids").at(e)}setQueryIndex(e,t={}){var n,i,o,r,s;return s=`/${this.model.getModel("ml_category_id").get("url_slug")}`,r=this.title(),o="",(i=this.getQuery(e).get("price_intent").price.amount)&&(o=`?price_intent=${i}`),n=(()=>{if(this.queryIndex!==e)return window.scrollTo(0,0),this.queryIndex=e,this.update()}),this.navigate(s,q.extend({title:r,search:o,override:n,trigger:!0,replace:t.replace},t))}}return e.prototype.Model=I,e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{template(){return template("._AICategoryPageView")}}).prototype.rule={"._AIPluginCategoryPageMenuView=":function(){return new u({collection:this.model.getCollection(`${this.model.key}_category_ids`)})},"._AICategoryPageHeaderMobileView=":function(){return new l({model:this.model})},"._AICategoryPageBudgetTitleView=":function(){return new i({model:this.model,queryIndex:this.queryIndex})},"._AICategoryPagePriceSelectorListView=":function(){return new m({model:this.model,queryIndex:this.queryIndex})},"._AICategoryPageProductView=":function(){var e;return e=this.getQuery(this.queryIndex).getCollection("ml_query_product_type_ids").first(),new v({model:e})},"._AICategoryPageDetailsContainerView=":function(){return new r({model:this.model,queryIndex:this.queryIndex})},"._AICategoryPageNavigationButtonsView=":function(){return new d({model:this.model,queryIndex:this.queryIndex})}},e}.call(this),e.prototype.events={"click ._see-analysis-link":function(e){var t;return t=$("#analysis"),$("html, body").animate({scrollTop:t.position().top},300)}},e}.call(this),r=function(){class e extends L{initialize(){var e,t,n,i;if(super.initialize(...arguments),null==(e=this.options).queryIndex&&(e.queryIndex=parseInt(this.$el.attr("data-query-index"))),"undefined"!=typeof window&&null!==window)return n=null!=(i=this.options.queryIndex)?i:0,t=this.model.getCollection(`${this.model.key}_ml_query_ids`).at(n),this.detailQuery=this.model.store.ensureQuery(I,{category_name:this.model.getModel("ml_category_id").get("url_slug"),price_intent:t.get("price_intent").price.amount}),this.detailQuery.fetch({silent:!0,success:()=>this.update()})}}return e.prototype.Model=I,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._AICategoryPageDetailsContainerView")}}).prototype.rule={"@data-query-index=":function(){return this.options.queryIndex},"._AIPluginDetailsPageContentView=":function(){return new C({model:this.detailQuery})}},e}.call(this),e}.call(this),u=function(){class e extends x{}return e.prototype.useLink=!0,e}.call(this),l=function(){class e extends L{}return e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._AICategoryPageHeaderMobileView")}}).prototype.rule={"._AIPluginCategoryPageMenuView=":function(){return new u({collection:this.model.getCollection(`${this.model.key}_category_ids`)})}},e}.call(this),e.prototype.events={"click ._mobile-menu-link":function(e){return this.panel=new M({parentSelector:"#main"}),this.panel.setContent(c,{model:this.model})}},e}.call(this),c=function(){class e extends B{openModal(e,t){return new e(t),this.collapsePanel()}}return e.prototype.Rule=class extends B.prototype.Rule{template(){return template("._AICategoryPageMobileMenuPanelContentView")}},e.prototype.events={"click ._categories-modal-link":function(e){return this.openModal(o,{model:this.model})},"click ._infographic-modal-link":function(e){return this.openModal(a)},"click ._feedback-modal-link":function(e){return this.openModal(s)}},e}.call(this),p=function(){class e extends D{}return e.prototype.Rule=class extends D.prototype.Rule{template(){return template("._AICategoryPageModalView")}},e}.call(this),o=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{}).prototype.rule={"._AICategoryPageModalContentView=":function(){return new T({collection:this.model.getCollection(`${this.model.key}_category_ids`),useLink:!0})}},e}.call(this),e}.call(this),a=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{}).prototype.rule={"._AICategoryPageModalContentView=":function(){return new P}},e}.call(this),e}.call(this),s=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{}).prototype.rule={"._AICategoryPageModalContentView=":function(){return new k}},e}.call(this),e}.call(this),i=function(){class e extends _{getQuery(){var e;return this.model.getCollection("category_page_ml_query_ids").at(null!=(e=this.options.queryIndex)?e:0)}}return e.prototype.Rule=class extends _.prototype.Rule{},e}.call(this),h=function(){class e extends L{initialize(){var e;return super.initialize(...arguments),null!=(e=this.options).price?e.price:e.price=this.$el.attr("data-price")}getQueryIndex(){var e;return e=this.model.getCollection("category_page_ml_query_ids"),q.findIndex(e.models,e=>e.get("price_intent").price.amount===(100*this.options.price).toString())}}return e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._AICategoryPagePriceSelectorItemView")}}).prototype.rule={"@data-price=":function(){return this.options.price},"._price=":function(){return this.options.price},"@class+":function(){var e,t;if(e=this.model.getCollection("category_page_ml_query_ids").at(this.options.queryIndex),parseInt(null!=(t=e.get("price_intent").price)?t.amount:void 0)/100===this.options.price)return"selected"}},e}.call(this),e.prototype.events={click:function(e){return analytics.track("AI Category Price Selector Clicked"),this.getParentByView(y).setQueryIndex(this.getQueryIndex())}},e}.call(this),m=function(){class e extends L{}return e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._AICategoryPagePriceSelectorListView")}}).prototype.rule={"._list=":function(){return this.model.get("prices").main_price_points.map(e=>new h({model:this.model,price:e,queryIndex:this.options.queryIndex}))}},e}.call(this),e}.call(this),v=function(){class e extends b{}return e.prototype.Model=E,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._AICategoryPageProductView")}}).prototype.rule={"._has-roundups=":function(){if(!this.getRoundups().length)return""},"._has-review=":function(){if(!this.getReviewScores().length)return""},"._AICategoryPageProductRoundupsListView=":function(){var e;return(e=new A(this.getRoundups())).store=this.model.store,new w({collection:e,product:this.model,limit:3})},"._AICategoryPageProductReviewsListView=":function(){var e;return(e=new A(this.getReviewScores())).store=this.model.store,new g({collection:e,productType:this.model})}},e}.call(this),e}.call(this),w=function(){class e extends R{}return e.prototype.Rule=class extends R.prototype.Rule{template(){return template("._AICategoryPageProductRoundupsListView")}},e}.call(this),f=function(){class e extends V{getNormalizedScore(){var e;return null!=(e=this.model.getCollection("crawl_rating_ids").find(function(e){return"score"===e.get("rating_type")&&""===e.get("value").in}).getNormalizedScore())?e.toFixed(1):void 0}}return e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._AICategoryPageProductReviewsItemView")}}).prototype.rule={"._score=":function(){return this.getNormalizedScore()}},e}.call(this),e}.call(this),g=function(){class e extends O{getItems(){var e;return e=super.getItems(...arguments),q.unique(e,e=>e.get("source_id"))}sortBySource(e){return-(e.getModel("source_id").get("trust_score")||0)}sortByScore(e){return-e.getCollection("crawl_rating_ids").find(function(e){return"score"===e.get("rating_type")&&""===e.get("value").in}).getNormalizedScore()}}return e.prototype.ItemView=f,e.prototype.limit=3,e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._AICategoryPageProductReviewsListView")}},e.prototype.sortBy=[e.prototype.sortByScore,e.prototype.sortBySource],e}.call(this),d=function(){class e extends S{initialize(){var e;return super.initialize(...arguments),null!=(e=this.options).queryIndex?e.queryIndex:e.queryIndex=parseInt(this.$el.attr("data-query-index"))}getUrlForBudget(e){return`/${this.model.getModel("ml_category_id").get("url_slug")}?price_intent=${100*e}`}getCurrentPriceSortedIndex(){return this.options.queryIndex}}return e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{}).prototype.rule={"@data-query-index=":function(){return this.options.queryIndex},"._lower-budget-link@href":function(){},"._higher-budget-link@href":function(){}},e}.call(this),e.prototype.events={"click ._lower-budget-link":function(e){var t;return analytics.track("AI Analysis Clicked Lower Budget Button"),this.getParentByView(y).setQueryIndex((null!=(t=this.options.queryIndex)?t:0)-1)},"click ._higher-budget-link":function(e){var t;return analytics.track("AI Analysis Clicked Higher Budget Button"),this.getParentByView(y).setQueryIndex((null!=(t=this.options.queryIndex)?t:0)+1)}},e}.call(this),t.exports={AICategoryPageView:y,AICategoryPageMenuView:u,AICategoryPageDetailsContainerView:r,AICategoryPageHeaderMobileView:l,AICategoryPageMobileMenuPanelContentView:c,AICategoryPageModalView:p,AICategoryPageCategoriesModalView:o,AICategoryPageInfographicModalView:a,AICategoryPageFeedbackModalView:s,AICategoryPageBudgetTitleView:i,AICategoryPagePriceSelectorItemView:h,AICategoryPagePriceSelectorListView:m,AICategoryPageProductView:v,AICategoryPageProductRoundupsListView:w,AICategoryPageProductReviewsItemView:f,AICategoryPageProductReviewsListView:g,AICategoryPageNavigationButtonsView:d}},{"../../collections/index":7,"../../models/index":64,"../base-view":91,"../components/modal-view":122,"../components/panel-view":131,"../lists/list-view":173,"../pages/ai-plugin-category-page-view":214,"../pages/ai-plugin-details-page-view":215,"../pages/ai-plugin-main-popup-page-view":217,"./page-view":241,moment:441,underscore:448}],212:[function(e,t,n){var i,o,r,s,l,a,u,c;c=e("underscore"),({PageView:u}=e("./page-view")),({AICategoryPageHeaderMobileView:o,AICategoryPageCategoriesModalView:i}=e("../pages/ai-category-page-view")),({AIPluginCategoryPageMenuView:l}=e("../pages/ai-plugin-category-page-view")),({CategoryListPageQuery:a}=e("../../models/index")),s=function(){class e extends u{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._AIHomePageView")}}).prototype.rule={"._chrome-store-link@href=":function(){var e;return(e=c.chain(this.query).pick("utm_source","utm_medium","utm_campaign","utm_term","utm_content").mapObject(function(e,t){var n;return`${t}=${null!=(n=null!=e&&"function"==typeof e.shift?e.shift():void 0)?n:e}`}).values().value().join("&"))&&(e=`?${e}`),"cjmfiochlaffhnellbhffgnjocahinnh",`https://chrome.google.com/webstore/detail/lustreai/cjmfiochlaffhnellbhffgnjocahinnh${e}`},"._AIPluginCategoryPageMenuView=":function(){return new r({collection:this.model.getCollection(`${this.model.key}_category_ids`)})},"._AICategoryPageHeaderMobileView=":function(){return new o({model:this.model})}},e}.call(this),e.prototype.events={"click ._categories-dropdown-link":function(e){return new i({model:this.model})},"click ._scroll-down-link":function(e){var t;return t=$("#content-section"),$("html, body").animate({scrollTop:t.position().top},300)}},e}.call(this),r=function(){class e extends l{}return e.prototype.useLink=!0,e}.call(this),t.exports={AIHomePageView:s,AIHomePageMenuView:r}},{"../../models/index":64,"../pages/ai-category-page-view":211,"../pages/ai-plugin-category-page-view":214,"./page-view":241,underscore:448}],213:[function(e,t,n){var i,o,r,s,l,a,u;u=e("moment"),({PageView:l}=e("./page-view")),({AICategoryPageMenuView:o,AICategoryPageHeaderMobileView:i}=e("./ai-category-page-view")),({AIPluginParentCategoryPageSubCategoryCarouselView:s}=e("./ai-plugin-parent-category-page-view")),({ParentCategoryPageQuery:a}=e("../../models/index")),r=function(){class e extends l{title(){var e;return e=this.model.getModel("category_id").get("name"),super.title(`Best ${e} as of ${u().format("YYYY")}`)}}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._AIParentCategoryPageView")}}).prototype.rule={"._category-name=":function(){return this.model.getModel("category_id").get("name")},"._AIPluginCategoryPageMenuView=":function(){return new o({collection:this.model.getCollection(`${this.model.key}_category_ids`)})},"._AICategoryPageHeaderMobileView=":function(){return new i({model:this.model})},"._AIPluginParentCategoryPageSubCategoryCarouselView=":function(){return new s({collection:this.model.getModel("category_id").getCollection("ml_category_sub_category_ids"),useLink:!0})}},e}.call(this),e}.call(this),t.exports={AIParentCategoryPageView:r}},{"../../models/index":64,"./ai-category-page-view":211,"./ai-plugin-parent-category-page-view":220,"./page-view":241,moment:441}],214:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie;te=e("underscore"),({BaseView:P}=e("../base-view")),({PageView:Y}=e("./page-view")),({ListView:A}=e("../lists/list-view")),({CarouselView:L,CarouselIndicatorItemView:T,CarouselIndicatorListView:M}=e("../components/carousel-view")),({PanelView:K,PanelContentView:G}=e("../components/panel-view")),({ProductBuyButtonsListView:J}=e("../components/product-buy-buttons-view")),({AIPluginMainPopupPageCategoryListView:b}=e("../pages/ai-plugin-main-popup-page-view")),({AIPluginDetailsPageBudgetTitleView:w,AIPluginDetailsPageCrawlItemView:v,AIPluginDetailsPageCrawlListView:y,AIPluginDetailsPageProductView:_,AIPluginDetailsPageSpecItemView:x}=e("./ai-plugin-details-page-view")),({BaseModel:k,MLCategoryModel:D,CategoryPageQuery:I,MLQuery:F,MLRatingModel:Q,MLCrawlModel:B,MLProductModel:N,MLSourceModel:W,SpecModel:Z}=e("../../models/index")),({BaseCollection:S,MLCategoryCollection:E,MLQueryCollection:j,MLSourceCollection:H,MLCrawlCollection:U,MLRatingCollection:z,MLProductCollection:q,SpecCollection:X}=e("../../collections/index")),({FancyInputMixinView:O}=e("../mixins/fancy-input-mixin-view")),({groupNumber:ne,simplifyNumber:ie}=e("../../utils/transforms")),({VALID_EMAIL:ee}=e("../../utils/patterns")),d=function(){class e extends Y{initialize(){if(this.model.getCollection("category_page_ml_query_ids"),this.queryIndex=0,super.initialize(...arguments),"undefined"!=typeof chrome&&null!==chrome&&env.PLUGIN_ID)return chrome.runtime.sendMessage(env.PLUGIN_ID,{type:"set_predictions",predictions:this.getPredictions()})}title(){return super.title(this.model.get("name"))}getPredictions(){var e,t;return t=Date.now(),e=((e,n)=>{var i,o,r,s,l;return o=null!=(i=(s=n.getCollection("ml_query_product_type_ids").first()).getCollection("product_type_store_page_ids").find(e=>"amazon"===e.get("store")))&&null!=(l=i.get("url").match(/dp\/([^\/]+)/))?l[1]:void 0,r=n.store.getModel(n.get("context").ml_category_ids[0]).get("url_slug"),e[s.id]={product_type_id:s.id,prediction_time:t,category_name:r},o&&(e[s.id].asin=o),e}),this.model.getCollection("category_page_ml_query_ids").reduce(e,{})}setQueryIndex(e){var t;return this.queryIndex=e,null!=(t=this.getChildrenByView(o)[0])?t.onQueryIndexChange(e):void 0}openMenu(e){var t,n,i;if((t=this.$("._menu")).hasClass("hidden")&&(t.removeClass("hidden"),null!=(n=this.getChildrenByView(s)[0])))return null!=(i="feedback"===e?n.openFeebackView:n.openCategoriesView)&&i.call(n),n.gutterPanel?this.listenToOnce(n.gutterPanel,"panelHasCollapsed",()=>t.addClass("hidden")):void 0}}return e.prototype.Model=I,e.prototype.Rule=function(){var e;return(e=class extends Y.prototype.Rule{template(){return template("._AIPluginCategoryPageView")}}).prototype.rule={"._AIPluginCategoryPageMenuView=":function(){return new s({collection:this.model.getCollection("category_page_category_ids")})},"._AIPluginCategoryPageBudgetTitleView=":function(){return new o({model:this.model,queryIndex:this.queryIndex})},"._AIPluginCategoryPageWinnersCarouselView=":function(){return new g({collection:this.model.getCollection("category_page_ml_query_ids"),categoryPageQuery:this.model})}},e}.call(this),e.prototype.events={"click ._main-menu-link":function(){return this.openMenu("categories")},"click ._feedback-menu-link":function(){return this.openMenu("feedback"),analytics.track("AI Categories Feedback Link Clicked")}},e}.call(this),s=function(){class e extends P{toggleGutterPanel(e,t){var n,i,o;if(null==(n=this.gutterPanel)||!n.attached||e!==(null!=(i=this.gutterPanel.activePanelContent)?i.constructor:void 0))return(null!=(o=this.gutterPanel)?o.attached:void 0)||(this.gutterPanel=new C({parentSelector:"#main"}),this.listenTo(this.gutterPanel,"panelHasCollapsed",()=>(this.resetGutterItemActiveState(),this.stopListening(this.gutterPanel,"panelHasCollapsed")))),this.gutterPanel.setContent(e,t);this.gutterPanel.triggerClosing()}setGutterItemActiveState(e){var t;if(t=this.$("._gutter-item.active")[0],$(t).removeClass("active"),t!==e)return $(e).addClass("active")}resetGutterItemActiveState(){return this.$("._gutter-item.active").removeClass("active")}openCategoriesView(){var e;return e=this.$("._gutter-item._categories-list-link")[0],this.setGutterItemActiveState(e),this.toggleGutterPanel(i,{collection:this.collection,useLink:this.useLink})}openFeebackView(){var e;return e=this.$("._gutter-item._feedback-link")[0],this.setGutterItemActiveState(e),this.toggleGutterPanel(V)}openInfographicView(){var e;return e=this.$("._gutter-item._lustre-infographic-link")[0],this.setGutterItemActiveState(e),this.toggleGutterPanel(R)}}return e.prototype.Rule=class extends P.prototype.Rule{template(){return template("._AIPluginCategoryPageMenuView")}},e.prototype.events={"click ._categories-list-link":function(e){return this.openCategoriesView(e)},"click ._feedback-link":function(e){return this.openFeebackView(e)},"click ._lustre-infographic-link":function(e){return this.openInfographicView(e)}},e}.call(this),o=function(){class e extends w{getQuery(e){return this.model.getCollection("category_page_ml_query_ids").at(e)}onQueryIndexChange(e){return this.queryIndex=e,this.update()}}return e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),p=function(){class e extends _{}return e.prototype.Model=N,e.prototype.supportedRatingTypes=["top_pick","runner_up","rank","score"],e.prototype.Rule=function(){var e;return(e=class extends _.prototype.Rule{template(){return template("._AIPluginCategoryPageProductView")}}).prototype.rule={"._has-specs=":function(){if(!this.model.get("product_type_spec_ids").length)return""},"@data-price-intent":function(){var e,t,n;return null!=(e=this.options.mlQuery)&&null!=(t=e.get("price_intent"))&&null!=(n=t.price)?n.amount:void 0},"._product-name=":function(){return this.model.get("name")},"._query-price=":function(){var e,t,n;return e=null!=(t=this.options.mlQuery.get("price_intent"))&&null!=(n=t.price)?n.amount:void 0,parseInt(e)/100},"._media-image@src":function(){var e;return null!=(e=this.model.getCollection("product_type_media_ids").find(function(e){return!e.isVideo()}))?e.getImageURL():void 0},"._ProductBuyButtonsListView=":function(){var e,t;return new J({collection:this.model.getCollection("product_type_store_page_ids"),categoryModel:this.options.categoryPageQuery.getModel("ml_category_id"),priceIntent:null!=(e=this.options.mlQuery.get("price_intent"))&&null!=(t=e.price)?t.amount:void 0})},"._AIPluginCategoryPageProductSpecListView=":function(){return new c({collection:this.model.getCollection("product_type_spec_ids")})},"._AIPluginCategoryPageProductCrawlListView=":function(){var e;return e=this.getRoundups().concat(this.getReviewScores()),new a({collection:new U(e),product:this.model})}},e}.call(this),e.prototype.events={"click ._details-link":function(e){var t,n;return t=this.getParentByView(d).model.getModel("ml_category_id"),n=this.el.getAttribute("data-price-intent"),analytics.track("AI Categories Clicked Analysis Button"),window.parent.postMessage({type:"attachModal",url:`${location.origin}/plugin/details?category_name=${t.get("url_slug")}&price_intent=${n}`},"*")}},e}.call(this),h=function(){class e extends T{onClick(){return analytics.track("AI Categories Clicked Budget Indicator Button")}}return e.prototype.Model=F,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._AIPluginCategoryPageWinnersCarouselIndicatorItemView")}},e}.call(this),m=function(){class e extends M{}return e.prototype.ItemView=h,e.prototype.Collection=j,e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._AIPluginCategoryPageWinnersCarouselIndicatorListView")}},e}.call(this),f=function(){class e extends P{getTopProduct(){return this.model.getCollection("ml_query_product_type_ids").at(0)}}return e.prototype.Rule=function(){var e;return(e=class extends P.prototype.Rule{template(){return template("._AIPluginCategoryPageWinnersCarouselItemView")}}).prototype.rule={"@data-index":function(){return this.options.index},"@class+":function(){var e;if(this.options.index===(null!=(e=this.currentIndex)?e:0))return"active"},"._AIPluginCategoryPageProductView=":function(){return new p({model:this.getTopProduct(),categoryPageQuery:this.options.categoryPageQuery,mlQuery:this.model})}},e}.call(this),e.prototype.events={"click ._select-item-link":function(e){var t;return null!=(t=this.getParentByView(g))?t.position(this.$el.data("index")):void 0}},e}.call(this),g=function(){class e extends L{createViewOptions(e,t,n){return{categoryPageQuery:this.options.categoryPageQuery,index:t}}position(e){var t,n;return(t=this.$(`${this.itemSelector}:visible`)).removeClass("active"),super.position(...arguments),t.eq(this.currentIndex).addClass("active"),null!=(n=this.getParentByView(d))?n.setQueryIndex(this.currentIndex):void 0}}return e.prototype.ItemView=f,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._AIPluginCategoryPageWinnersCarouselView")}}).prototype.rule={"@data-price-points-count":function(){var e,t,n;return null!=(e=this.options.categoryPageQuery)&&null!=(t=e.get("prices"))&&null!=(n=t.main_price_points)?n.length:void 0},"._option-count=":function(){var e,t,n;return null!=(e=null!=(t=this.collection.at(0))&&null!=(n=t.get("label_set"))?n.length:void 0)?e:0},"._price-point-count=":function(){var e,t,n;return null!=(e=this.options.categoryPageQuery)&&null!=(t=e.get("prices"))&&null!=(n=t.main_price_points)?n.length:void 0},"._AIPluginCategoryPageWinnersCarouselIndicatorListView=":function(){var e;return new m({collection:this.collection,queryIndex:null!=(e=this.currentIndex)?e:0})}},e}.call(this),e.prototype.events={"click ._open-deets-link":function(){if("function"!=typeof this.panel||!this.panel(attached))return this.panel=new C({className:"fullscreen"}),this.panel.setContent(r,{collection:this.collection,pricePointCount:this.$el.data("price-points-count")}),analytics.track("AI Categories Details Opened")}},e}.call(this),u=function(){class e extends x{}return e.prototype.Model=Z,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._AIPluginCategoryPageProductSpecItemView")}},e}.call(this),c=function(){class e extends A{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return te.defer(()=>(this.setExpandedState(),this.setExpansionDefaults()))}sortBy(e){return e.get("spec_type_id")}setExpandedState(){var e,t;return t=this.$("._spec-list-container"),e=this.$("._spec-list-item"),t.prop("clientHeight")<t.prop("scrollHeight")-(parseInt(e.css("margin-bottom"))||0)?t.addClass("expandable"):t.removeClass("expandable")}setExpansionDefaults(){var e;return e=this.$("._spec-list-container"),this.collapsedHeight=e.prop("clientHeight")}expand(){var e,t,n,i;return t=this.$("._spec-list-container"),e=this.$("._spec-list-item"),i=t.prop("scrollHeight"),n=parseInt(e.css("margin-bottom"))||0,t.css("max-height",`${i-n}px`),analytics.track("AI Categories Specs Expanded")}collapse(){return this.$("._spec-list-container").css("max-height",`${this.collapsedHeight}px`)}}return e.prototype.Collection=X,e.prototype.ItemView=u,e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._AIPluginCategoryPageProductSpecListView")}},e.prototype.debouncedExpand=te.debounce(function(){if(this.mouseover)return this.expand()},200),e.prototype.events={"mouseenter ._spec-list-container.expandable":function(e){return this.mouseover=!0,this.debouncedExpand.call(this)},"mouseleave ._spec-list-container.expandable":function(){return this.mouseover=!1,this.collapse()},"resize window":function(){return this.setExpandedState()}},e}.call(this),l=function(){class e extends v{}return e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._AIPluginCategoryPageProductCrawlItemView")}},e}.call(this),a=function(){class e extends y{getItems(){var e;return e=super.getItems(...arguments),te.uniq(e,e=>e.get("source_id"))}}return e.prototype.ItemView=l,e.prototype.limit=3,e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._AIPluginCategoryPageProductCrawlListView")}},e}.call(this),C=function(){class e extends K{panelOpenedAnalytics(){return analytics.track("AI Categories Side Panel Opened")}}return e.prototype.Rule=function(){var e;return(e=class extends K.prototype.Rule{template(){return template("._AIPluginPanelView")}}).prototype.rule={"@class+":function(){var e;return null!=(e=this.options.className)?e:""}},e}.call(this),e}.call(this),i=function(){class e extends G{}return e.prototype.Rule=function(){var e;return(e=class extends G.prototype.Rule{template(){return template("._AIPluginCategoriesPanelContentView")}}).prototype.rule={"._AIPluginMainPopupPageCategoryListView=":function(){return new b({collection:this.collection,useLink:this.options.useLink})}},e}.call(this),e}.call(this),R=function(){class e extends G{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return te.delay(()=>this.$("._infographic-image").removeClass("hidden"),300)}}return e.prototype.Rule=class extends G.prototype.Rule{template(){return template("._AIPluginInfographicPanelContentView")}},e}.call(this),V=function(){class e extends G{initialize(){return super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&this.initializeAllFancyInputs(),this.initializeContent()}initializeContent(){return this.initializeForm(),this.$("._success-form-content").hide(),this.$("._loading-button-state").hide()}initializeForm(){return this.setFeedbackState(),this.setEmailState(),this.$("._submit-error").hide()}resetFeedbackField(){return this.$("._feedback-field").removeClass("error"),this.$("._feedback-default-text").hide(),this.$("._feedback-required-text").hide()}setFeedbackState(){return this.resetFeedbackField(),this.$("._feedback-default-text").show()}setFeedbackErrorState(){return this.resetFeedbackField(),this.$("._feedback-field").addClass("error"),this.$("._feedback-required-text").show()}resetEmailField(){return this.$("._email-field").removeClass("error"),this.$("._email-default-text").hide(),this.$("._email-invalid-text").hide()}setEmailState(){return this.resetEmailField(),this.$("._email-default-text").show()}setEmailErrorState(){return this.resetEmailField(),this.$("._email-field").addClass("error"),this.$("._email-invalid-text").show()}showLoadingState(){return this.$("._default-button-state").hide(),this.$("._loading-button-state").show()}hideLoadingState(){return this.$("._default-button-state").show(),this.$("._loading-button-state").hide()}}return e.prototype.mixin(O),e.prototype.Rule=class extends G.prototype.Rule{template(){return template("._AIPluginFeedbackPanelContentView")}},e.prototype.events=te.assign({},O.prototype.events,{"input ._feedback-input":function(e){var t,n;return t=this.$("._feedback-input").val().trim(),n=this.$('form button[type="submit"]'),t?n.attr("disabled",!1):n.attr("disabled",!0)},"submit ._feedback-form":function(e){var t,n,i,o;if(e.preventDefault(),!this.isSubmitting){if(this.isSubmitting=!0,this.showLoadingState(),this.initializeForm(),t=this.$("._email-input").val(),n=this.$("._feedback-input").val().trim().replace(/\r?\n/g,"<br>"),""===t||ee.test(t)||(this.setEmailErrorState(),i=!0),n||(this.setFeedbackErrorState(),i=!0),!i)return o=`${n}\n<br><br>\nEmail: ${t||"Not provided"}`,$.post("/feedback",{text:o,tag:"ai"}).done(()=>(this.$("._default-form-content").hide(),this.$("._success-form-content").show(),te.delay(()=>this.collapsePanel(),2e3))).fail(()=>this.$("._submit-error").show()).always(()=>(this.isSubmitting=!1,this.hideLoadingState())),analytics.track("AI Feedback Submitted");this.hideLoadingState()}}}),e}.call(this),r=function(){class e extends G{}return e.prototype.Rule=function(){var e;return(e=class extends G.prototype.Rule{template(){return template("._AIPluginCategoryPageDeetsPanelContentView")}}).prototype.rule={"._option-count=":function(){var e,t,n;return null!=(e=null!=(t=this.collection.at(0))&&null!=(n=t.get("label_set"))?n.length:void 0)?e:0},"._price-point-count=":function(){return this.options.pricePointCount}},e}.call(this),e}.call(this),t.exports={AIPluginCategoryPageView:d,AIPluginCategoryPageMenuView:s,AIPluginCategoryPageBudgetTitleView:o,AIPluginCategoryPageWinnersCarouselIndicatorItemView:h,AIPluginCategoryPageWinnersCarouselIndicatorListView:m,AIPluginCategoryPageProductView:p,AIPluginCategoryPageWinnersCarouselItemView:f,AIPluginCategoryPageWinnersCarouselView:g,AIPluginCategoryPageProductSpecItemView:u,AIPluginCategoryPageProductSpecListView:c,AIPluginCategoryPageProductCrawlItemView:l,AIPluginCategoryPageProductCrawlListView:a,AIPluginPanelView:C,AIPluginCategoriesPanelContentView:i,AIPluginInfographicPanelContentView:R,AIPluginFeedbackPanelContentView:V,AIPluginCategoryPageDeetsPanelContentView:r}},{"../../collections/index":7,"../../models/index":64,"../../utils/patterns":87,"../../utils/transforms":89,"../base-view":91,"../components/carousel-view":95,"../components/panel-view":131,"../components/product-buy-buttons-view":133,"../lists/list-view":173,"../mixins/fancy-input-mixin-view":185,"../pages/ai-plugin-main-popup-page-view":217,"./ai-plugin-details-page-view":215,"./page-view":241,underscore:448}],215:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de;ae=e("underscore"),ce=e("moment"),({BaseView:D}=e("../base-view")),({PageView:ee}=e("./page-view")),({ListView:U}=e("../lists/list-view")),({ProductBuyButtonsListView:te}=e("../components/product-buy-buttons-view")),({TooltipView:se}=e("../components/tooltip-view")),({sourceTagLines:de}=e("../../utils/data")),({BaseModel:E,MLCategoryModel:q,MediaModel:X,CategoryPageQuery:$,OptionPageQuery:Z,MLQuery:Q,MLRatingModel:Y,MLCrawlModel:F,MLProductTypeModel:z,MLSourceModel:K,SpecModel:oe,SpecTypeModel:re}=e("../../models/index")),({BaseCollection:A,MediaCollection:J,MLCategoryCollection:B,MLQueryCollection:H,MLSourceCollection:G,MLCrawlCollection:N,MLRatingCollection:W,MLProductTypeCollection:j,SpecCollection:ie}=e("../../collections/index")),({groupNumber:ue,simplifyNumber:pe}=e("../../utils/transforms")),({SENTIMENT_LABEL_VALUES:ne}=e("../../utils/constants")),({YOUTUBE_LINK:le}=e("../../utils/patterns")),O=function(){class e extends ee{title(){var e;return e=this.model.getCollection("category_page_ml_query_ids").first().getCollection("ml_query_product_type_ids").first(),super.title(`${e.get("name")} Analysis`)}remove(){return"undefined"!=typeof window&&null!==window?window.parent.postMessage({type:"removeModal"},"*"):void 0}}return e.prototype.Model=$,e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._AIPluginDetailsPageView")}}).prototype.rule={"._AIPluginDetailsPageContentView=":function(){return new o({model:this.model})},"._AIPluginDetailsPageNavigationButtonsView=":function(){return new y({model:this.model})}},e}.call(this),e.prototype.events={"click ._close-link":function(e){return analytics.track("AI Analysis Clicked Close Button"),this.remove()},"click ._soft-close-link":function(e){if(analytics.track("AI Analysis Clicked Background Close"),e.currentTarget===e.target)return this.remove()}},e}.call(this),o=function(){class e extends D{getQueryIndex(){var e,t,n,i;return t=this.model.getCollection("category_page_ml_query_ids").first(),e=parseInt(null!=(n=t.get("price_intent").price)?n.amount:void 0)/100,null!=(i=this.model.get("prices").main_price_points)?i.indexOf(e):void 0}getAllProducts(){var e,t;return t=this.model.getCollection("category_page_ml_query_ids").first(),e=ae.sortBy(t.get("label_set"),function(e){return-e.value}),ae.compact(e.map(e=>this.model.store.getModel(e.node_id)))}}return e.prototype.Model=$,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageContentView")}}).prototype.rule={"._is-lower-budget=":function(){if(!(this.getQueryIndex()<=1))return""},"@class+":function(){if(!this.model.get("category_page_ml_query_ids"))return"loading"},"._category-name=":function(){return this.model.getModel("ml_category_id").get("name")},"._top-product-name=":function(){return this.model.getCollection("category_page_ml_query_ids").first().getCollection("ml_query_product_type_ids").first().get("name")},"._product-count=":function(){return this.model.getCollection("category_page_ml_query_ids").first().get("label_set").length},"._query-price=":function(){var e,t;return e=null!=(t=this.model.getCollection("category_page_ml_query_ids").first().get("price_intent").price)?t.amount:void 0,ue(pe(Math.floor(parseInt(e)/100)))},"._AIPluginDetailsPageBudgetTitleView=":function(){var e;return e=this.getQueryIndex(),new i({model:this.model,queryIndex:e})},"._AIPluginDetailsPageQueryView=":function(){return new b({model:this.model.getCollection("category_page_ml_query_ids").first(),categoryPageQuery:this.model})},"._AIPluginDetailsPageGraphView=":function(){return new w({model:this.model.getCollection("category_page_ml_query_ids").first()})},"._AIPluginDetailsPageProductListView=":function(){var e;return e=this.getAllProducts(),new V({collection:new j(e),categoryPageQuery:this.model})},"._ProductBuyButtonsListView=":function(){var e,t;return e=(t=this.model.getCollection("category_page_ml_query_ids").first()).getCollection("ml_query_product_type_ids").first(),new te({collection:e.getCollection("product_type_store_page_ids"),categoryModel:this.model.getModel("ml_category_id"),priceIntent:t.get("price_intent")})}},e}.call(this),e}.call(this),i=function(){class e extends D{initialize(){var e;return this.queryIndex=null!=(e=this.queryIndex)?e:this.options.queryIndex,super.initialize(...arguments)}getQuery(){return this.model.getCollection("category_page_ml_query_ids").first()}}return e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageBudgetTitleView")}}).prototype.rule={"._is-bottom-query=":function(){if(0!==this.queryIndex)return""},"._not-bottom-query=":function(){if(0===this.queryIndex)return""},"._not-lower-query=":function(){if(this.queryIndex<=1)return""},"._category-name=":function(){return this.model.get("name")},"._main-price=":function(){var e,t;return e=null!=(t=this.getQuery(this.queryIndex).get("price_intent").price)?t.amount:void 0,Math.floor(parseInt(e)/100).toString()}},e}.call(this),e}.call(this),y=function(){class e extends D{getCurrentMLQuery(){return this.model.getCollection("category_page_ml_query_ids").first()}getPriceBuckets(){var e;return null!=(e=this.model.get("prices"))?e.main_price_points:void 0}getCurrentPrice(){var e,t,n,i;return e=null!=(t=this.getCurrentMLQuery())&&null!=(n=t.get("price_intent"))&&null!=(i=n.price)?i.amount:void 0,parseInt(e,10)/100}getCurrentPriceSortedIndex(){var e,t;return e=this.getPriceBuckets(),t=this.getCurrentPrice(),ae.sortedIndex(e,t)}getUrlForBudget(e){return`/plugin/details?category_name=${this.model.getModel("ml_category_id").get("url_slug")}&price_intent=${100*e}`}}return e.prototype.Model=$,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageNavigationButtonsView")}}).prototype.rule={"._has-lower-budget=":function(){if(0===this.getCurrentPriceSortedIndex())return""},"._has-higher-budget=":function(){if(this.getCurrentPriceSortedIndex()===this.getPriceBuckets().length-1)return""},"._is-second-to-lowest-budget=":function(){if(1!==this.getCurrentPriceSortedIndex())return""},"._not-second-to-lowest-budget=":function(){if(1===this.getCurrentPriceSortedIndex())return""},"._is-second-to-highest-budget=":function(){if(this.getCurrentPriceSortedIndex()!==this.getPriceBuckets().length-2)return""},"._lower-budget=":function(){var e;return e=this.getCurrentPriceSortedIndex(),this.getPriceBuckets()[e-1]},"._higher-budget=":function(){var e;return e=this.getCurrentPriceSortedIndex(),this.getPriceBuckets()[e+1]},"._lower-budget-link@href":function(){var e,t;return e=this.getCurrentPriceSortedIndex(),t=this.getPriceBuckets()[e-1],this.getUrlForBudget(t)},"._higher-budget-link@href":function(){var e,t;return e=this.getCurrentPriceSortedIndex(),t=this.getPriceBuckets()[e+1],this.getUrlForBudget(t)}},e}.call(this),e.prototype.events={"click ._lower-budget-link":function(e){return analytics.track("AI Analysis Clicked Lower Budget Button")},"click ._higher-budget-link":function(e){return analytics.track("AI Analysis Clicked Higher Budget Button")},"click ._lower-budget-link,._higher-budget-link":function(e){var t;return null!=(t=this.getParentByView(O))?t.$el.addClass("loading"):void 0}},e}.call(this),w=function(){class e extends D{getSortedLabels(){return ae.sortBy(this.model.get("label_set"),function(e){return-e.value})}getProducts(){var e;return e=this.getSortedLabels(),ae.compact(e.filter(e=>e.value>=this.minScore).map(e=>this.model.store.getModel(e.node_id))).slice(0,this.limit)}getProductStats(){var e,t,n,i;return this.productStats?this.productStats:(n=this.getPriceBuckets(5),(t=null!=(i=(e=this.getSortedLabels().filter(e=>e.value>=this.minScore&&this.model.store.getModel(e.node_id)).slice(0,this.limit))[e.length-1])?i.value:void 0)&&(t=this.floorToClosestIncrement(t,10)),this.productStats={prices:n,scores:[t,100]})}getPriceBuckets(e){var t,n,i,o,r,s;return s=this.getProducts().map(function(e){var t;return Math.floor(parseInt(null!=(t=e.get("product_type_price_obj"))?t.amount:void 0)/100)}),r=ae.min(s),r=this.floorToClosestIncrement(r,10),n=ae.max(s),n=10*Math.ceil(n/10),t=n-r,i=Math.ceil(t/(e-1)),o=ae.range(r,n-1,i).map(n=>t>=10*e?this.floorToClosestIncrement(n,10):n),[...o,n]}floorToClosestIncrement(e,t){return Math.floor(e/t)*t}}return e.prototype.Model=Q,e.prototype.limit=15,e.prototype.minScore=30,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphView")}}).prototype.rule={"._has-graph=":function(){if(!this.getProducts().length)return""},"._lowest-score=":function(){var e;return null!=(e=this.getProductStats())?e.scores[0]:void 0},"._prices=":function(){var e,t;return null!=(e=this.getProductStats())&&null!=(t=e.prices)?t.map(function(e){return new d({price:e})}):void 0},"._AIPluginDetailsPageGraphTopProductView=":function(){return new g({model:this.getProducts()[0],mlQuery:this.model,productStats:this.getProductStats()})},"._AIPluginDetailsPageGraphProductListView=":function(){return new m({collection:new j(this.getProducts()),mlQuery:this.model,productStats:this.getProductStats()})}},e}.call(this),e}.call(this),d=function(){class e extends D{}return e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphPriceView")}}).prototype.rule={"._price=":function(){var e;return null!=(e=this.options)?e.price:void 0}},e}.call(this),e}.call(this),h=function(){class e extends D{getRelativePricePercentage(){var e,t,n;return 100*(this.getProductPrice()-(e=(t=null!=(n=this.options.productStats)?n.prices:void 0)[0]))/(t[t.length-1]-e)}getRelativeScorePercentage(){var e,t,n,i,o;return n=null!=(i=this.getProductLabel())?i.value:void 0,[t,e]=null!=(o=this.options.productStats)?o.scores:void 0,100*(n-t)/(e-t)}getProductLabel(){return ae.find(this.options.mlQuery.get("label_set"),e=>e.node_id===this.model.id)}getProductPrice(){var e;return parseInt(null!=(e=this.model.get("product_type_price_obj"))?e.amount:void 0)/100}getProductRank(){var e;return e=this.getProductLabel(),ae.sortBy(this.options.mlQuery.get("label_set"),function(e){return-e.value}).indexOf(e)+1}}return e.prototype.Model=z,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphProductItemView")}}).prototype.rule={"@style":function(){return`top: ${100-this.getRelativeScorePercentage()}%; left: ${this.getRelativePricePercentage()}%`},"@data-score":function(){var e;return null!=(e=this.getProductLabel())?e.value:void 0},"@data-rank":function(){return this.getProductRank()}},e}.call(this),e.prototype.showTooltip=ae.debounce(function(e){var t;if((null==(t=this.tooltip)||!t.attached)&&this.mouseover)return this.tooltip=new f({model:this.model,follows:e.currentTarget,price:this.getProductPrice(),score:this.el.getAttribute("data-score"),rank:this.el.getAttribute("data-rank")})},100),e.prototype.events={mouseover:function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.mouseover=!0,this.showTooltip.call(this,e)},mouseleave:function(e){if(this.mouseover=!1,this.tooltip)return this.tooltip.close()},click:function(e){var t;null!=(t=this.tooltip)&&t.attached}},e}.call(this),g=function(){class e extends h{}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphTopProductView")}}).prototype.rule={"._media-image@src":function(){var e;return null!=(e=this.model.getCollection("product_type_media_ids").find(function(e){return!e.isVideo()}))?e.getImagePreviewURL():void 0}},e}.call(this),e}.call(this),m=function(){class e extends U{createViewOptions(){return{mlQuery:this.options.mlQuery,productStats:this.options.productStats}}}return e.prototype.offset=1,e.prototype.ItemView=h,e.prototype.Rule=class extends U.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphProductListView")}},e}.call(this),f=function(){class e extends se{}return e.prototype.Model=z,e.prototype.Rule=function(){var e;return(e=class extends se.prototype.Rule{template(){return template("._AIPluginDetailsPageGraphProductTooltipView")}}).prototype.rule={"._rank=":function(){return this.options.rank},"._name=":function(){return this.model.get("name")},"._price=":function(){return this.options.price},"._score=":function(){return Math.round(this.options.score)}},e}.call(this),e}.call(this),b=function(){class e extends D{getTopProduct(){return this.model.getCollection("ml_query_product_type_ids").first()}getAllProducts(){var e;return e=ae.sortBy(this.model.get("label_set"),function(e){return-e.value}),ae.compact(e.map(e=>this.model.store.getModel(e.node_id)))}}return e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._AIPluginDetailsPageQueryView")}}).prototype.rule={"._category-name=":function(){return this.options.categoryPageQuery.getModel("ml_category_id").get("name")},"._product-count=":function(){return this.getAllProducts().length-1},"._query-price=":function(){var e,t;return e=null!=(t=this.model.get("price_intent").price)?t.amount:void 0,ue(pe(Math.floor(parseInt(e)/100)))},"._top-product-name=":function(){return this.getTopProduct().get("name")},"._AIPluginDetailsPageProductView=":function(){return new R({model:this.getTopProduct(),categoryPageQuery:this.options.categoryPageQuery})}},e}.call(this),e}.call(this),R=function(){class e extends D{getCrawls(){var e,t;return e=this.model.getProductSiblings(),t=ae.flatten(e.map(e=>e.getCollection(`${e.key}_latest_rating_ids`).models)),ae.unique(t.map(function(e){return e.getModel("crawl_id")}))}getReviewScores(){return this.getCrawls().filter(e=>"review"===e.get("crawl_type")&&e.getCollection("crawl_rating_ids").find(e=>"score"===e.get("rating_type")&&""===e.get("value").in&&this.model.hasRating(e)))}getRoundups(){return this.getCrawls().filter(e=>"roundup"===e.get("crawl_type")&&e.getCollection("crawl_rating_ids").find(e=>this.supportedRatingTypes.includes(e.get("rating_type"))&&this.model.hasRating(e)))}getVideoCrawls(){return this.getCrawls().filter(e=>"youtube.com"===e.getModel("source_id").get("host")&&"review"===e.get("crawl_type")&&e.getCollection("crawl_rating_ids").find(e=>"sentiment_label"===e.get("rating_type")&&this.model.hasRating(e)))}}return e.prototype.Model=z,e.prototype.supportedRatingTypes=["top_pick","runner_up","rank","score","on_list","mentioned","considered"],e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageProductView")}}).prototype.rule={"._has-specs=":function(){if(!this.model.getCollection("product_type_spec_ids").length)return""},"._has-roundup-list=":function(){if(!this.getRoundups().length)return""},"._has-review-scores=":function(){if(!this.getReviewScores().length)return""},"._has-videos=":function(){if(!this.getVideoCrawls().length)return""},"._product-name=":function(){return this.model.get("name")},"._product-price=":function(){var e,t;return e=parseInt(null!=(t=this.model.get("product_type_price_obj"))?t.amount:void 0),ue(Math.floor(e/100))},"._media-image@src":function(){var e;return null!=(e=this.model.getCollection("product_type_media_ids").find(function(e){return!e.isVideo()}))?e.getImagePreviewURL():void 0},"._AIPluginDetailsPageSpecListView=":function(){return new P({collection:this.model.getCollection("product_type_spec_ids")})},"._AIPluginDetailsPageRecommendationsView=":function(){return new C({collection:new N(this.getCrawls()),product:this.model})},"._AIPluginDetailsPageVideoReviewsView=":function(){return new I({collection:new N(this.getVideoCrawls())})},"._AIPluginDetailsPageExternalReviewsView=":function(){var e;return(e=new N(this.getReviewScores())).store=this.model.store,new p({collection:e,productType:this.model,categoryQuery:this.options.categoryPageQuery})},"._ProductBuyButtonsListView=":function(){return new te({collection:this.model.getCollection("product_type_store_page_ids"),categoryModel:this.options.categoryPageQuery.getModel("ml_category_id"),priceIntent:this.options.categoryPageQuery.get("price_intent")})}},e}.call(this),e}.call(this),k=function(){class e extends D{}return e.prototype.Model=oe,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageSpecItemView")}}).prototype.rule={"._spec-key=":function(){return this.model.getModel("spec_type_id").get("name")},"._spec-value=":function(){return this.model.getDisplayValue()}},e}.call(this),e}.call(this),P=function(){class e extends U{filter(e){return e.isSupportedType()}}return e.prototype.ItemView=k,e.prototype.Collection=ie,e.prototype.Rule=class extends U.prototype.Rule{template(){return template("._AIPluginDetailsPageSpecListView")}},e}.call(this),C=function(){class e extends D{getRoundups(){return this.collection.filter(e=>"roundup"===e.get("crawl_type")&&e.getCollection("crawl_rating_ids").find(e=>R.prototype.supportedRatingTypes.includes(e.get("rating_type"))&&this.options.product.hasRating(e)))}toggleCrawlListExpansion(){return this.expanded?this.collapseCrawlList():this.expandCrawlList()}collapseCrawlList(){return this.expanded=!1,this.$("._expandable-list-container").removeClass("expanded"),this.$("._expandable-list").css({maxHeight:0})}expandCrawlList(){var e,t;return this.expanded=!0,this.$("._expandable-list-container").addClass("expanded"),t=(e=this.$("._expandable-list")).prop("scrollHeight"),e.css({maxHeight:t})}}return e.prototype.Collection=N,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageRecommendationsView")}}).prototype.rule={"._count=":function(){return this.getRoundups().length},"._source-count=":function(){return ae.unique(this.getRoundups().map(function(e){return e.getModel("source_id")})).length},"._has-more-roundups=":function(){if(!(this.getRoundups().length>T.prototype.limit))return""},"._AIPluginDetailsPageTopCrawlListView=":function(){return new T({collection:new N(this.getRoundups()),product:this.options.product})},"._AIPluginDetailsPageRestCrawlListView=":function(){return new S({collection:new N(this.getRoundups()),product:this.options.product})}},e}.call(this),e.prototype.events={"click ._toggle-roundups-expansion-link":function(e){return this.toggleCrawlListExpansion()}},e}.call(this),l=function(){class e extends D{getRankRatingContent(){var e;return null!=(e=this.model.getRankRatings(this.options.productId)[0])?e.get("value"):void 0}getScoreRatingContent(){var e;return null!=(e=this.model.getScoreRatings(this.options.productId)[0])?e.get("value"):void 0}getUpdateTime(){return this.model.get("updated_at")||this.model.get("published_at")}getNormalizedScore(){return this.model.getCollection("crawl_rating_ids").find(function(e){return"score"===e.get("rating_type")&&""===e.get("value").in}).getNormalizedScore()}}return e.prototype.Model=F,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageCrawlItemView")}}).prototype.rule={"._trust-class@class+":function(){var e;switch(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.trust_score:void 0){case 0:return"low-trust";case 1:return"medium-trust";case 2:return"high-trust";case 3:return"very-high-trust"}},"._has-trust-score=":function(){var e;if(!(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.trust_score:void 0))return""},"._has-very-high-trust-score=":function(){var e;if(3!==(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.trust_score:void 0))return""},"._has-testing=":function(){var e;if(!(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.does_testing:void 0))return""},"._not-testing=":function(){var e;if(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.does_testing:void 0)return""},"._has-context-rating=":function(){if(!this.model.getContextRatings(this.options.productId).length)return""},"._not-context-rating=":function(){if(this.model.getContextRatings(this.options.productId).length)return""},"._is-review=":function(){if("review"!==this.model.get("crawl_type"))return""},"._is-roundup=":function(){if("roundup"!==this.model.get("crawl_type"))return""},"._is-top-pick=":function(){if(!this.model.getTopPicks(this.options.productId).length)return""},"._not-top-pick=":function(){if(this.model.getTopPicks(this.options.productId).length)return""},"._is-contextual-winner=":function(){if(!this.model.getContextualWinners(this.options.productId).length)return""},"._not-contextual-winner=":function(){if(this.model.getContextualWinners(this.options.productId).length)return""},"._is-runner-up=":function(){if(!this.model.getRunnerUps(this.options.productId).length)return""},"._not-runner-up=":function(){if(this.model.getRunnerUps(this.options.productId).length)return""},"._is-contextual-runner-up=":function(){if(!this.model.getContextualRunnerUps(this.options.productId).length)return""},"._has-rank=":function(){if(!this.model.getRankRatings(this.options.productId).length)return""},"._no-rank=":function(){if(this.model.getRankRatings(this.options.productId).length)return""},"._has-score=":function(){if(!this.model.getScoreRatings(this.options.productId).length)return""},"._no-score=":function(){if(this.model.getScoreRatings(this.options.productId).length)return""},"._has-source-description=":function(){if(!de[this.model.getModel("source_id").get("host")])return""},"._is-high-score=":function(){var e;if((null!=(e=this.getScoreRatingContent())?e.rating:void 0)/(null!=e?e.max:void 0)<.7)return""},"._not-high-score=":function(){var e;if(!((null!=(e=this.getScoreRatingContent())?e.rating:void 0)/(null!=e?e.max:void 0)<.7))return""},"._is-high-rank=":function(){var e;if(!((null!=(e=this.getRankRatingContent())?e.position:void 0)<4))return""},"._not-high-rank=":function(){var e;if((null!=(e=this.getRankRatingContent())?e.position:void 0)<4)return""},"._has-crawl-time-ago=":function(){if(!this.getUpdateTime())return""},"._has-crawl-source-favicon=":function(){if(!this.model.getModel("source_id").get("favicon_url"))return""},"._not-crawl-source-favicon=":function(){if(this.model.getModel("source_id").get("favicon_url"))return""},"._context=":function(){var e,t;return null!=(e=this.model.getContextualWinners(this.options.productId)[0])&&null!=(t=e.get("value"))?t.in:void 0},"._context-runner-up=":function(){var e,t;return null!=(e=this.model.getContextualRunnerUps(this.options.productId)[0])&&null!=(t=e.get("value"))?t.in:void 0},"._rank=":function(){var e;return null!=(e=this.getRankRatingContent())?e.position:void 0},"._rank-max=":function(){var e;return null!=(e=this.getRankRatingContent())?e.out_of:void 0},"._score=":function(){var e,t;return null!=(e=this.getScoreRatingContent())&&null!=(t=e.rating)?t.toFixed(1):void 0},"._score-max=":function(){var e;return null!=(e=this.getScoreRatingContent())?e.max:void 0},"._normalized-score=":function(){return this.getNormalizedScore().toFixed(1)},"._crawl-title=":function(){return this.model.get("title")},"._crawl-time-ago=":function(){var e;return e=ce.unix(this.getUpdateTime()),ce(new Date).diff(e,"days")<30?e.fromNow():e.format("D MMM YYYY")},"._crawl-link@href":function(){return this.model.get("url")},"._crawl-source-name=":function(){var e;return(e=this.model.getModel("source_id")).get("name")||e.get("host")},"._crawl-source-favicon@src":function(){return this.model.getModel("source_id").get("favicon_url")},"@data-product-id":function(){return this.options.productId}},e}.call(this),e.prototype.events={"click ._crawl-link":function(){return analytics.track("AI Analysis Clicked Crawl Link")}},e}.call(this),r=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._AIPluginDetailsPageCrawlItemHighlightView")}},e}.call(this),a=function(){class e extends U{createViewOptions(){return{productId:this.options.product.id}}sortByRating(e){return e.getTopPicks(this.options.product.id).length?0:e.getRunnerUps(this.options.product.id).length?1:e.getContextualWinners(this.options.product.id).length?2:e.getContextualRunnerUps(this.options.product.id).length?4:e.getScoreRatings(this.options.product.id).length?5:e.getRankRatings(this.options.product.id).length?6:10}sortBySpecificity(e){return this.model.get("url").length}sortByDate(e){return-(e.get("updated_at")||e.get("published_at")||e.get("accessed_at")/1e3)}sortBySourceTrustScore(e){var t,n;return-(null!=(t=null!=(n=e.getModel("source_id").get("source_trust_obj"))?n.trust_score:void 0)?t:0)}sortBySourceUniqueness(e,t,n){return-1===(t=n.filter(t=>t.getModel("source_id").id===e.getModel("source_id").id).indexOf(e))?n.length:t}isHighlightCrawl(e){var t;return(null!=(t=e.getModel("source_id").get("source_trust_obj"))?t.trust_score:void 0)>=2}}return e.prototype.Collection=N,e.prototype.ItemView=l,e.prototype.Rule=class extends U.prototype.Rule{template(){return template("._AIPluginDetailsPageCrawlListView")}},e.prototype.sortBy=[e.prototype.sortByDate,e.prototype.sortByRating,e.prototype.sortBySourceTrustScore,e.prototype.sortBySourceUniqueness],e}.call(this),T=function(){class e extends a{getItemView(e,t,n){return this.isHighlightCrawl(e)&&t<2?this.HighlightItemView:this.ItemView}}return e.prototype.limit=8,e.prototype.HighlightItemView=r,e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),S=function(){class e extends a{}return e.prototype.offset=T.prototype.limit,e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),I=function(){class e extends C{}return e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._AIPluginDetailsPageVideoReviewsView")}}).prototype.rule={"._has-more=":function(){if(!(this.collection.length>L.prototype.limit))return""},"._AIPluginDetailsPageVideoCrawlListView=":function(){return new L({collection:this.collection})},"._AIPluginDetailsPageMoreVideoCrawlListView=":function(){return new v({collection:this.collection})}},e}.call(this),e}.call(this),M=function(){class t extends D{getSentimentRatingValue(){var e;return null!=(e=this.model.getCollection("crawl_rating_ids").find(e=>"sentiment_label"===e.get("rating_type")))?e.get("value").rating:void 0}getVideoThumbnailUrl(){var e,t,n;if(t=this.model.get("url"),n=null!=(e=le.exec(t))?e[1]:void 0)return`https://img.youtube.com/vi/${n}/hqdefault.jpg`}loadVideoEmbed(){var e;if(e=this.createVideoEmbed({isAutoplay:!0}))return this.$("._embed-target").replaceWith(e),this.$("._load-video-link").css({display:"none"})}createVideoEmbed(t={}){var n,i,o,r,s,l,a,u;if(({timeToSecs:l}=e("../../utils/transforms")),a=this.model.get("url"),[o,i,s]=null!=(r=le.exec(a))?r:[],i)return n=document.createElement("iframe"),u=`https://www.youtube.com/embed/${i}?showinfo=0`,s&&(u+=`&start=${l(s)}`),t.isAutoplay&&(u+="&autoplay=1"),n.setAttribute("src",u),n.setAttribute("frameBorder",0),n.setAttribute("allowfullscreen","allowfullscreen"),n}getUpdateTime(){return this.model.get("updated_at")||this.model.get("published_at")}}return t.prototype.Model=F,t.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageVideoCrawlItemView")}}).prototype.rule={"._is-very-positive=":function(){if(this.getSentimentRatingValue()!==ne.VERY_POSITIVE)return""},"._is-positive=":function(){if(this.getSentimentRatingValue()!==ne.POSITIVE)return""},"._is-mixed=":function(){if(this.getSentimentRatingValue()!==ne.MIXED)return""},"._is-negative=":function(){if(this.getSentimentRatingValue()!==ne.NEGATIVE)return""},"._is-very-negative=":function(){if(this.getSentimentRatingValue()!==ne.VERY_NEGATIVE)return""},"._has-crawl-source-favicon=":function(){if(!this.model.getModel("source_id").get("favicon_url"))return""},"._not-crawl-source-favicon=":function(){if(this.model.getModel("source_id").get("favicon_url"))return""},"@data-host":function(){return this.model.getModel("source_id").get("host")},"._crawl-video-img-src@src":function(){return this.getVideoThumbnailUrl()},"._crawl-title=":function(){return this.model.get("title")},"._crawl-time-ago=":function(){var e;return e=ce.unix(this.getUpdateTime()),ce(new Date).diff(e,"days")<30?e.fromNow():e.format("D MMM YYYY")},"._crawl-link@href":function(){return this.model.get("url")},"._crawl-source-name=":function(){var e;return(e=this.model.getModel("source_id")).get("name")||e.get("host")},"._crawl-source-favicon@src":function(){return this.model.getModel("source_id").get("favicon_url")}},e}.call(this),t.prototype.events={"click ._load-video-link":function(e){return analytics.track("AI Analysis Clicked Video Button"),e.preventDefault(),e.stopPropagation(),this.loadVideoEmbed()}},t}.call(this),L=function(){class e extends U{sortBy(e){var t;return-1*(null!=(t=e.getCollection("crawl_rating_ids").find(e=>"sentiment_label"===e.get("rating_type")))?t.get("value").rating:void 0)}}return e.prototype.limit=3,e.prototype.ItemView=M,e.prototype.Rule=class extends U.prototype.Rule{template(){return template("._AIPluginDetailsPageVideoCrawlListView")}},e}.call(this),v=function(){class e extends L{}return e.prototype.offset=L.prototype.limit,e.prototype.limit=null,e.prototype.Rule=class extends L.prototype.Rule{},e}.call(this),s=function(){class e extends se{getUpdateTime(){return this.model.get("updated_at")||this.model.get("published_at")}}return e.prototype.options={interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._AIPluginDetailsPageCrawlItemTooltipView")}}).prototype.rule={"._has-context-rating=":function(){if(!this.model.getContextRatings(this.options.productId).length)return""},"._not-context-rating=":function(){if(this.model.getContextRatings(this.options.productId).length)return""},"._has-trust-score=":function(){var e;if(!(null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.trust_score:void 0))return""},"._is-top-pick=":function(){if(!this.model.getTopPicks(this.options.productId).length)return""},"._not-top-pick=":function(){if(this.model.getTopPicks(this.options.productId).length)return""},"._is-contextual-winner=":function(){if(!this.model.getContextualWinners(this.options.productId).length)return""},"._not-contextual-winner=":function(){if(this.model.getContextualWinners(this.options.productId).length)return""},"._is-runner-up=":function(){if(!this.model.getRunnerUps(this.options.productId).length)return""},"._not-runner-up=":function(){if(this.model.getRunnerUps(this.options.productId).length)return""},"._is-contextual-runner-up=":function(){if(!this.model.getContextualRunnerUps(this.options.productId).length)return""},"._not-contextual-runner-up=":function(){if(this.model.getContextualRunnerUps(this.options.productId).length)return""},"._has-rank=":function(){if(!this.model.getRankRatings(this.options.productId).length)return""},"._not-rank=":function(){if(this.model.getRankRatings(this.options.productId).length)return""},"._has-score=":function(){if(!this.model.getScoreRatings(this.options.productId).length)return""},"._has-source-description=":function(){if(!de[this.model.getModel("source_id").get("host")])return""},"._context=":function(){var e,t;return null!=(e=this.model.getContextualWinners(this.options.productId)[0])&&null!=(t=e.get("value"))?t.in:void 0},"._context-runner-up=":function(){var e,t;return null!=(e=this.model.getContextualRunnerUps(this.options.productId)[0])&&null!=(t=e.get("value"))?t.in:void 0},"._rank=":function(){var e,t;return null!=(e=this.model.getRankRatings(this.options.productId)[0])&&null!=(t=e.get("value"))?t.position:void 0},"._rank-max=":function(){var e,t;return null!=(e=this.model.getRankRatings(this.options.productId)[0])&&null!=(t=e.get("value"))?t.out_of:void 0},"._score=":function(){var e,t;return null!=(e=this.model.getScoreRatings(this.options.productId)[0])&&null!=(t=e.get("value").rating)?t.toFixed(1):void 0},"._score-max=":function(){var e;return null!=(e=this.model.getScoreRatings(this.options.productId)[0])?e.get("value").max:void 0},"._crawl-title=":function(){return this.model.get("title")},"._crawl-link@href":function(){return this.model.get("url")},"._source-trust-score=":function(){var e;return null!=(e=this.model.getModel("source_id").get("source_trust_obj"))?e.trust_score:void 0},"._source-description=":function(){return de[this.model.getModel("source_id").get("host")]}},e}.call(this),e}.call(this),_=function(){class e extends D{getUpdateTime(){return this.model.get("updated_at")||this.model.get("published_at")||this.model.get("accessed_at")}}return e.prototype.Model=z,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageProductItemView")}}).prototype.rule={"._media-image@src":function(){var e;return null!=(e=this.model.getCollection("product_type_media_ids").find(function(e){return!e.isVideo()}))?e.getImageThumbnailURL():void 0},"._product-name=":function(){return this.model.get("name")},"._product-price=":function(){var e,t;return e=parseInt(null!=(t=this.model.get("product_type_price_obj"))?t.amount:void 0),ue(Math.floor(e/100))},"._position=":function(){return this.options.position}},e}.call(this),e}.call(this),V=function(){class e extends U{filter(e){return this.getTopProduct()!==e}getTopProduct(){return this.options.categoryPageQuery.getCollection("category_page_ml_query_ids").first().getCollection("ml_query_product_type_ids").first()}createViewOptions(e){return{position:this.collection.indexOf(e)+1}}toggleExpansion(){return this.expanded?this.collapse():this.expand()}collapse(){return this.expanded=!1,this.$("._expandable-list-container").removeClass("expanded"),this.$("._expandable-list").css({maxHeight:0})}expand(){var e,t;return this.expanded=!0,this.$("._expandable-list-container").addClass("expanded"),t=(e=this.$("._expandable-list")).prop("scrollHeight"),e.css({maxHeight:t})}}return e.prototype.Collection=j,e.prototype.ItemView=_,e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{template(){return template("._AIPluginDetailsPageProductListView")}}).prototype.rule={"._AIPluginDetailsPageProductListTopProductView=":function(){return new x({model:this.getTopProduct(),categoryPageQuery:this.options.categoryPageQuery})}},e}.call(this),e.prototype.limit=6,e.prototype.events={"click ._toggle-expansion-link":function(e){return this.toggleExpansion()}},e}.call(this),x=function(){class e extends R{}return e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._AIPluginDetailsPageProductListTopProductView")}}).prototype.rule={"._query-price=":function(){var e,t;return e=null!=(t=this.options.categoryPageQuery.getCollection("category_page_ml_query_ids").first().get("price_intent").price)?t.amount:void 0,ue(pe(Math.floor(parseInt(e)/100)))},"._product-name=":function(){return this.model.get("name")}},e}.call(this),e}.call(this),u=function(){class e extends D{getNormalizedScore(){return this.model.getCollection("crawl_rating_ids").find(function(e){return"score"===e.get("rating_type")&&""===e.get("value").in}).getNormalizedScore()}getCompareScore(){var e,t,n,i,o;if(t=`${null!=(n=this.options.categoryQuery)?n.get("ml_category_id"):void 0}-${this.model.getModel("crawl_id").get("source_id")}`,o=10*(null!=(e=this.model.store.getModel(t))&&null!=(i=e.get("feature"))?i.value:void 0),e&&o)return o}}return e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageExternalReviewsItemView")}}).prototype.rule={"._has-compare-score=":function(){if(!this.getCompareScore())return""},"@href":function(){return this.model.get("url")},"._score=":function(){return this.getNormalizedScore().toFixed(1)},"._host-icon@src=":function(){return this.model.getModel("source_id").getSourceFaviconURL()},"._host-name=":function(){return this.model.getModel("source_id").getName()},"._compare-score=":function(){return this.getCompareScore().toFixed(1)},"._score-type@class+":function(){var e;if((e=this.getCompareScore())&&this.getNormalizedScore()-e>1)return"higher"},"._score-indicator@style":function(){return`width: ${10*this.getNormalizedScore()}%`},"._compare-indicator@style":function(){var e;if(e=this.getCompareScore())return`width: ${10*e}%`}},e}.call(this),e}.call(this),p=function(){class e extends D{avgDelta(){return this.getAverageScore()-this.getCategoryAverageScore()}getAverageScore(){var e;return(e=this.getReviewsWithScores().map(e=>{return this.getScoreRatingFromCrawl(e).getNormalizedScore()})).reduce((e,t)=>e+t,0)/e.length}getCategoryAverageScore(){var e,t,n;return t=this.options.categoryQuery.get("ml_category_id"),10*(null!=(e=this.collection.store.getModel(t))&&null!=(n=e.get("ml_category_avg_score_obj"))?n.avg_reviews_score:void 0)}getScoreRatingFromCrawl(e){return e.getCollection("crawl_rating_ids").find(e=>"score"===e.get("rating_type")&&""===e.get("value").in&&this.options.productType.hasRating(e))}getReviewsWithScores(){return this.collection.models}isAverageScoreInRange({min:e=0,max:t=10.01}){var n;return e<=(n=this.getAverageScore())&&n<t}}return e.prototype.Collection=N,e.prototype.limit=12,e.prototype.ItemView=u,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._AIPluginDetailsPageExternalReviewsView")}}).prototype.rule={"._has-overall-score=":function(){if(!this.getCategoryAverageScore())return""},"._no-overall-score=":function(){if(this.getCategoryAverageScore())return""},"._is-top-score=":function(){if(!this.isAverageScoreInRange({min:9}))return""},"._is-high-score=":function(){if(!this.isAverageScoreInRange({min:8.5,max:9}))return""},"._is-good-score=":function(){if(!this.isAverageScoreInRange({min:8,max:8.5}))return""},"._is-decent-score=":function(){if(!this.isAverageScoreInRange({min:7,max:8}))return""},"._is-low-score=":function(){if(!this.isAverageScoreInRange({max:7}))return""},"._is-high-average=":function(){if(!(Math.round(this.avgDelta())>=2))return""},"._is-above-average=":function(){if(1!==Math.round(this.avgDelta()))return""},"._is-average=":function(){if(0!==Math.round(this.avgDelta()))return""},"._is-below-average=":function(){if(!(Math.round(this.avgDelta())<0))return""},"._category-name=":function(){return this.options.categoryQuery.get("name")},"._avg-product-score=":function(){var e;return null!=(e=this.getAverageScore())?e.toFixed(1):void 0},"._avg-product-score-indicator@style":function(){var e;if(e=this.getAverageScore())return`width:${10*e}%;`},"._avg-overall-score=":function(){return this.getCategoryAverageScore().toFixed(1)},"._avg-overall-score-indicator@style":function(){return`width:${10*this.getCategoryAverageScore()}%;`},"._list=":function(){return ae.chain(this.getReviewsWithScores()).sortBy(e=>{var t;return-1*(null!=(t=e.getModel("source_id").get("source_trust_obj"))?t.trust_score:void 0)||0}).unique(e=>e.get("source_id")).value().slice(0,this.limit).map(e=>new this.ItemView({model:e,categoryQuery:this.options.categoryQuery}))}},e}.call(this),e.prototype.showCompareTooltip=ae.debounce(function(e){if(this.mouseover)return new c({collection:this.collection,follows:e.currentTarget})},200),e.prototype.events={"mouseover ._compare-tooltip-link":function(e){return this.mouseover=!0,this.showCompareTooltip.call(this,e)},"mouseout ._compare-tooltip-link":function(e){return this.mouseover=!1}},e}.call(this),c=function(){class e extends se{}return e.prototype.Rule=class extends se.prototype.Rule{template(){return template("._AIPluginDetailsPageExternalReviewsTooltipView")}},e}.call(this),t.exports={AIPluginDetailsPageView:O,AIPluginDetailsPageContentView:o,AIPluginDetailsPageBudgetTitleView:i,AIPluginDetailsPageNavigationButtonsView:y,AIPluginDetailsPageGraphView:w,AIPluginDetailsPageGraphPriceView:d,AIPluginDetailsPageGraphProductItemView:h,AIPluginDetailsPageGraphTopProductView:g,AIPluginDetailsPageGraphProductListView:m,AIPluginDetailsPageGraphProductTooltipView:f,AIPluginDetailsPageQueryView:b,AIPluginDetailsPageProductView:R,AIPluginDetailsPageSpecItemView:k,AIPluginDetailsPageSpecListView:P,AIPluginDetailsPageRecommendationsView:C,AIPluginDetailsPageCrawlItemView:l,AIPluginDetailsPageCrawlItemHighlightView:r,AIPluginDetailsPageCrawlListView:a,AIPluginDetailsPageTopCrawlListView:T,AIPluginDetailsPageRestCrawlListView:S,AIPluginDetailsPageVideoReviewsView:I,AIPluginDetailsPageVideoCrawlItemView:M,AIPluginDetailsPageVideoCrawlListView:L,AIPluginDetailsPageMoreVideoCrawlListView:v,AIPluginDetailsPageCrawlItemTooltipView:s,AIPluginDetailsPageProductItemView:_,AIPluginDetailsPageProductListView:V,AIPluginDetailsPageProductListTopProductView:x,AIPluginDetailsPageExternalReviewsItemView:u,AIPluginDetailsPageExternalReviewsView:p,AIPluginDetailsPageExternalReviewsTooltipView:c}},{"../../collections/index":7,"../../models/index":64,"../../utils/constants":85,"../../utils/data":86,"../../utils/patterns":87,"../../utils/transforms":89,"../base-view":91,"../components/product-buy-buttons-view":133,"../components/tooltip-view":167,"../lists/list-view":173,"./page-view":241,moment:441,underscore:448}],216:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("500 - Internal Server Error")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._AIPluginErrorPageView")}},e}.call(this),t.exports={AIPluginErrorPageView:i}},{"./page-view":241}],217:[function(e,t,n){var i,o,r,s,l,a,u,c;c=e("underscore"),({BaseView:s}=e("../base-view")),({PageView:a}=e("../pages/page-view")),({SearchableListView:u}=e("../lists/searchable-list-view")),({CategoryListPageQuery:l}=e("../../models/index")),r=function(){class e extends a{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return c.defer(()=>this.$el.removeClass("hidden"))}}return e.prototype.Model=l,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._AIPluginMainPopupPageView")}}).prototype.rule={"._AIPluginMainPopupPageCategoryListView=":function(){return new o({collection:this.model.getCollection("category_list_page_category_ids")})}},e}.call(this),e}.call(this),i=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._AIPluginMainPopupPageCategoryItemView")}}).prototype.rule={"@href":function(){if(this.options.useLink)return`${this.model.hasSubCategories()?"/parent":""}/${this.model.get("url_slug")}`},"._category-name=":function(){return this.model.get("name")}},e}.call(this),e.prototype.events={click:function(e){var t,n;return this.options.useLink?(null!=(t=this.getParentByView(ViewsV2.AIPluginPanelView))&&t.triggerClosing(),null!=(n=this.getParentByView(ViewsV2.ModalView))?n.remove():void 0):window.parent.postMessage({type:"navigateToAmazonSearch",query:this.model.get("name")},"*")}},e}.call(this),o=function(){class e extends u{createViewOptions(e,t,n){return{useLink:this.options.useLink}}getSearchValue(e){return e.get("name")}update(){var e;if(e=this.options.searchQuery||"",super.update(...arguments),e)return this.$("._search-input").val(e)}setClearButtonState(e){var t;return t=this.$("._clear-search-button"),e?t.removeClass("hidden"):t.addClass("hidden")}}return e.prototype.ItemView=i,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._AIPluginMainPopupPageCategoryListView")}},e.prototype.events={"input ._search-input":function(e){var t;return t=this.$("._search-input").val(),this.search(t),this.setClearButtonState(t),this.$("._search-input").focus()},"click ._clear-search-button":function(e){return this.$("._search-input").val(""),this.search(""),this.$("._search-input").focus()}},e}.call(this),t.exports={AIPluginMainPopupPageView:r,AIPluginMainPopupPageCategoryItemView:i,AIPluginMainPopupPageCategoryListView:o}},{"../../models/index":64,"../base-view":91,"../lists/searchable-list-view":178,"../pages/page-view":241,underscore:448}],218:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("503 - Under Maintenance")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._AIPluginMaintenancePageView")}},e}.call(this),t.exports={AIPluginMaintenancePageView:i}},{"./page-view":241}],219:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("404 - Page Not Found")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._AIPluginNotFoundPageView")}},e}.call(this),t.exports={AIPluginNotFoundPageView:i}},{"./page-view":241}],220:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d;({BaseView:l}=e("../base-view")),({PageView:p}=e("./page-view")),({CarouselView:a}=e("../components/carousel-view")),({AIPluginMainPopupPageCategoryItemView:i}=e("../pages/ai-plugin-main-popup-page-view")),({MLCategoryCollection:u}=e("../../collections/index")),({MLCategoryModel:c,ParentCategoryPageQuery:d}=e("../../models/index")),s=function(){class e extends p{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._AIPluginParentCategoryPageView")}}).prototype.rule={"._category-name=":function(){return this.model.getModel("category_id").get("name")},"._AIPluginParentCategoryPageSubCategoryCarouselView=":function(){return new r({collection:this.model.getModel("category_id").getCollection("ml_category_sub_category_ids")})}},e}.call(this),e}.call(this),o=function(){class e extends i{}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._AIPluginParentCategoryPageSubCategoryCarouselItemView")}}).prototype.rule={"@href":function(){if(this.options.useLink)return`/${this.model.get("url_slug")}`},"._product-image@src":function(){var e,t,n,i;return e=this.model.getCollection("ml_category_product_type_ids").find(e=>{var t;return null!=e&&null!=(t=e.get("product_type_media_ids"))?t.length:void 0}),null!=(t=null!=e&&null!=(n=e.getCollection("product_type_media_ids"))&&null!=(i=n.find(e=>!e.isVideo()))?i.getImagePreviewURL():void 0)?t:""}},e}.call(this),e}.call(this),r=function(){class e extends a{createViewOptions(){return{useLink:this.options.useLink}}}return e.prototype.Collection=u,e.prototype.ItemView=o,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._AIPluginParentCategoryPageSubCategoryCarouselView")}}).prototype.rule={"@data-use-link":function(){return this.options.useLink}},e}.call(this),e.prototype.events={"click a._carousel-item":function(){if(this.$el.data("use-link"))return this.$el.addClass("loading"),this.listenTo(window.router,"navigate",()=>this.$el.removeClass("loading"))}},e}.call(this),t.exports={AIPluginParentCategoryPageView:s,AIPluginParentCategoryPageSubCategoryCarouselItemView:o,AIPluginParentCategoryPageSubCategoryCarouselView:r}},{"../../collections/index":7,"../../models/index":64,"../base-view":91,"../components/carousel-view":95,"../pages/ai-plugin-main-popup-page-view":217,"./page-view":241}],221:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E;e("underscore"),e("moment"),({BaseView:p}=e("../base-view")),({PageView:I}=e("./page-view")),({ListView:f}=e("../lists/list-view")),({OptionView:L}=e("../models/option-view")),({AIPluginCategoryPageProductView:o,AIPluginCategoryPageProductCrawlListView:i}=e("../pages/ai-plugin-category-page-view")),({ProductBuyButtonsListView:O}=e("../components/product-buy-buttons-view")),({BaseModel:c,MLCategoryModel:w,OptionModel:T,SectionModel:E,ImageModel:m,CategorySnippetPageQuery:d,OptionPageQuery:M,MLQuery:V,MLRatingModel:C,MLCrawlModel:y,MLProductModel:x,MLSourceModel:k}=e("../../models/index")),({BaseCollection:u,OptionCollection:P,SectionCollection:A,ImageCollection:h,MLCategoryCollection:g,MLQueryCollection:R,MLSourceCollection:S,MLCrawlCollection:v,MLRatingCollection:b,MLProductCollection:_}=e("../../collections/index")),l=function(){class e extends I{title(){var e,t,n;return e=this.model.getModel("target_product_node_id"),t=(n=this.model.getModel("winner_product_type_id")).get("name"),e.id!==n.id&&(t+=` vs ${e.get("name")}`),super.title(`${t} Summary`)}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._AIPluginProductPageView")}}).prototype.rule={"._not-winner=":function(){if(this.model.get("target_product_node_id")===this.model.get("winner_product_type_id"))return""},"._AIPluginProductPageTargetProductView=":function(){return new s({model:this.model.getModel("target_product_node_id"),categorySnippetPageQuery:this.model})},"._AIPluginProductPageWinnerProductView=":function(){return new a({model:this.model.getModel("winner_product_type_id"),categorySnippetPageQuery:this.model})}},e}.call(this),e}.call(this),r=function(){class e extends o{getTargetScore(){return this.options.categorySnippetPageQuery.getModel("target_ml_query_id").get("label_set")[0].value}isTargetProduct(){return!1}}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{}).prototype.rule={"._is-null=":function(){if(null!==this.getTargetScore()||this.isTargetProduct())return""},"._is-neutral=":function(){if(!(this.getTargetScore()&&this.getTargetScore()<=70)||this.isTargetProduct())return""},"._is-positive=":function(){var e;if(!(this.getTargetScore()&&70<(e=this.getTargetScore())&&e<=80)||this.isTargetProduct())return""},"._is-very-positive=":function(){if(!(this.getTargetScore()&&this.getTargetScore()>80)||this.isTargetProduct())return""},"._is-most-positive=":function(){if(!this.isTargetProduct())return""}},e}.call(this),e}.call(this),s=function(){class e extends r{getRoundups(){return super.getRoundups(...arguments).filter(function(e){var t;return(null!=(t=e.getModel("source_id").get("source_trust_obj"))?t.trust_score:void 0)>=2})}}return e.prototype.supportedRatingTypes=["top_pick","runner_up"],e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._AIPluginProductPageTargetProductView")}}).prototype.rule={"._has-trusted-sources=":function(){if(!this.getRoundups().length)return""},"._no-trusted-sources=":function(){if(this.getRoundups().length)return""}},e}.call(this),e}.call(this),a=function(){class e extends r{isTargetProduct(){return this.options.categorySnippetPageQuery.get("target_product_node_id")===this.model.id}}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._AIPluginProductPageWinnerProductView")}}).prototype.rule={"._winning-budget-price=":function(){return this.options.categorySnippetPageQuery.get("winner_budget_price")},"._ProductBuyButtonsListView=":function(){return new O({collection:this.model.getCollection("product_type_store_page_ids"),categoryModel:this.options.categorySnippetPageQuery.getModel("ml_category_id"),priceIntent:100*this.options.categorySnippetPageQuery.get("winner_budget_price")})}},e}.call(this),e.prototype.events={"click ._details-link":function(e){var t,n,i;return t=(i=this.getParentByView(l).model).getModel("ml_category_id"),n=100*i.get("winner_budget_price"),analytics.track("AI Product Popup Clicked Analysis Button"),window.parent.postMessage({type:"attachModal",url:`${location.origin}/plugin/details?category_name=${t.get("url_slug")}&price_intent=${n}`},"*")}},e}.call(this),t.exports={AIPluginProductPageView:l,AIPluginProductPageProductView:r,AIPluginProductPageTargetProductView:s,AIPluginProductPageWinnerProductView:a}},{"../../collections/index":7,"../../models/index":64,"../base-view":91,"../components/product-buy-buttons-view":133,"../lists/list-view":173,"../models/option-view":200,"../pages/ai-plugin-category-page-view":214,"./page-view":241,moment:441,underscore:448}],222:[function(e,t,n){var i,o;({AIHomePageView:i}=e("./ai-home-page-view")),o=function(){class e extends i{title(){return super.title("Uninstall")}isFormDisabled(){var e,t;return e=this.$('._form-input[type="checkbox"]:checked'),t=this.$("._form-textarea").val(),!(e.length||t)}onFormStateChanged(e){return this.isFormDisabled()?this.$("._submit-button").prop("disabled",!0):this.$("._submit-button").prop("disabled",!1)}}return e.prototype.Model=null,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._AIUninstallPageView")}},e.prototype.events={"change ._form-input":function(e){return this.onFormStateChanged(e)},"input ._form-textarea":function(e){var t,n;return this.onFormStateChanged(e),n=this.$("._form-textarea").val(),t=this.$("input._form-other-input"),n?t.prop("checked",!0):t.prop("checked",!1)},"submit ._uninstall-feedback-form":function(e){var t,n,i,o;if(e.preventDefault(),!this.isFormDisabled())return t=this.$('._form-input[type="checkbox"]:checked'),i=this.$("._form-textarea").val(),o=`${t.toArray().map(e=>{return e.parentNode.textContent}).join("<br>")}\n<br>\n${i?"Other: "+i:""}`,$.post("/feedback",{text:o,tag:"ai+uninstall+feedback"}),n=o.replace(/<br>/g," | "),analytics.track("Lustre Uninstall Feedback Submitted",{label:n}),router.navigate("/",{trigger:!0})}},e}.call(this),t.exports={AIUninstallPageView:o}},{"./ai-home-page-view":212}],223:[function(e,t,n){var i,o,r,s,l,a,u;({AIHomePageView:i}=e("./ai-home-page-view")),({AIPluginMainPopupPageCategoryItemView:o,AIPluginMainPopupPageCategoryListView:r}=e("./ai-plugin-main-popup-page-view")),({CategoryListPageQuery:u}=e("../../models/index")),a=function(){class e extends i{title(){return super.title("Welcome")}}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._AIWelcomePageView")}}).prototype.rule={"._AIWelcomePageCategoryListView=":function(){return new l({collection:this.model.getCollection(`${this.model.key}_category_ids`)})}},e}.call(this),e}.call(this),s=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{}).prototype.rule={"@href":function(){return`https://www.amazon.com/s?k=${this.model.get("name").replace(/\s+/g,"+")}`},"@target":function(){return"_blank"},"@rel":function(){return"noopener noreferrer"}},e}.call(this),e}.call(this),l=function(){class e extends r{}return e.prototype.ItemView=s,e.prototype.useLink=!0,e.prototype.Rule=class extends r.prototype.Rule{},e}.call(this),t.exports={AIWelcomePageView:a,AIWelcomePageCategoryItemView:s,AIWelcomePageCategoryListView:l}},{"../../models/index":64,"./ai-home-page-view":212,"./ai-plugin-main-popup-page-view":217}],224:[function(e,t,n){var i,o,r,s,l;({PageView:l}=e("./page-view")),({LoginModalView:s,LoginModalClaimBusinessAccountContentView:r}=e("../components/login-modal-view")),i=class extends s{initialize(){return super.initialize(...arguments),this.$el.addClass("unclosable")}},o=function(){class e extends l{title(){return super.title("Claim Your Business Account")}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return new i({ContentView:r,model:this.model})}}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._ClaimBusinessAccountPageView")}},e}.call(this),t.exports={ClaimBusinessAccountPageView:o,ClaimBusinessAccountPageLoginModalView:i}},{"../components/login-modal-view":115,"./page-view":241}],225:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;d=e("underscore"),p=e("urijs"),m=e("marked"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({PostInfoPageView:u}=e("./post-page-view")),({CommentListAddCommentView:o,CommentListView:r,CommentWithContextListView:s}=e("../lists/comment-list-view")),({improveURL:h}=e("../../utils/transforms")),({Topic:c}=e("../../models")),l=function(){class e extends u{initialize(){var e,t,n,i,o,r,s;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window?window.location.hash:void 0)return t=parseInt(window.location.hash.replace("#","")),n=null!=(r=null!=(s=(n=null!=(i=null!=(o=(n=this.model).get("viewpoints"))?o.findWhere({selected:!0}):void 0)?i:n).get("sections"))?s.findWhere({selected:!0}):void 0)?r:n,e=function(n,i){return null!=n?n:i.get("id")===t?i:i.get("comments").reduce(e,null)},n.get("comments").reduce(e,null).trigger("highlight",{scroll:"top"})}title(e="Comments"){var t,n;return t=null!=(n=this.model.get("viewpoints").findWhere({selected:!0}))?n.get("sections").findWhere({selected:!0}):void 0,super.title(d.compact([e,null!=t?t.get("revision").get("title"):void 0,null!=n?n.get("revision").get("title"):void 0,this.model.get("revision").get("title")]).join(" - "))}getModel(){var e,t,n;return null!=(e=null!=(t=null!=(n=this.model.get("viewpoints").findWhere({selected:!0}))?n.get("sections").findWhere({selected:!0}):void 0)?t:n)?e:this.model}getSection(){var e;return null!=(e=this.model.get("viewpoints").findWhere({selected:!0}))?e.get("sections").findWhere({selected:!0}):void 0}}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._CommentsPageView")}}).prototype.rule={"._is-section=":function(){if(!this.getSection())return""},"._section-title=":function(){return this.getSection().get("revision").get("title")},"._section-link=":function(){return{"@href":function(){var e;return null!=(e=new p(h(this.model.get("viewpoints").findWhere({selected:!0}))))?e.fragment(this.getSection().get("id")):void 0},"@rel":"nofollow"}},"._section-description=":function(){if(this.getSection().get("revision").get("text").trim())return i(m(this.getSection().get("revision").get("text").trim()))},"._main-page-title=":function(){var e;return null!=(e=this.model.get("viewpoints").findWhere({selected:!0}))?e.get("revision").get("title"):void 0},"._main-page-link":{"@href":function(){return h(this.model.get("viewpoints").findWhere({selected:!0}))},"@rel":"nofollow"},"._CommentListAddCommentView=":function(){return new o({collection:this.getModel().get("comments")})},"._CommentListView=":function(){return new r({collection:this.getModel().get("comments")})}},e}.call(this),e}.call(this),a=function(){class e extends l{}return e.prototype.Model=c,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._CommentListView=":function(){return new s({collection:this.getModel().get("comments")})}},e}.call(this),e}.call(this),t.exports={CommentsPageView:l,CommentsTopicPageView:a}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../lists/comment-list-view":170,"./post-page-view":244,jquery:438,marked:440,underscore:448,urijs:452}],226:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J;({BaseView:i}=e("../base-view")),({PostPageView:L}=e("../pages/post-page-view")),({QuestionView:O}=e("../models/question-view")),({OptionView:M}=e("../models/option-view")),({SectionView:B}=e("../models/section-view")),({SpecView:F}=e("../models/spec-view")),({ListView:k}=e("../lists/list-view")),({SectionListView:U}=e("../lists/section-list-view")),({OptionListView:T}=e("../lists/option-list-view")),({QuestionHeaderView:I}=e("../components/question-header-view")),({RecommendationView:D}=e("../components/recommendation-view")),({ReactionButtonSetView:A}=e("../components/reaction-button-set-view")),({ToasterView:z,ToastCollapsedView:j}=e("../components/toaster-view")),({TooltipTitleView:Q}=e("../components/tooltip-view")),P=e("../../model"),({Spec:q,Viewpoint:H}=e("../../models")),({ViewpointList:W,SpecList:N}=e("../../collections")),({RecommendationPanelManagerMixinView:E}=e("../mixins/recommendation-panel-manager-mixin-view")),({decodeHTMLEntities:Y}=e("../../utils/transforms")),({keyCodes:G}=e("../../utils/data")),K=e("marked"),J=new(e("marked-plaintext")),S=function(){class e extends L{initialize(){var e;if(this.currentIndex=0,super.initialize(...arguments),this.model.get("viewpoints").each(e=>this.listenTo(e,"select",this.jump)),"undefined"!=typeof window&&null!==window)return this.originalHeight=null!=(e=this.getChildrenByView(m)[0])?e.$el.css("max-height"):void 0}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.position({transition:!1})}title(){return super.title(_.map(this.model.get("viewpoints").slice(0,3),function(e){return e.get("revision").get("title")}).join(" vs "))}position(e={}){var t,n,i,o,r,s;return i=this.model.get("viewpoints"),o=this.currentIndex,r=(n=this.getChildrenByView(g)).slice(-1)[0].$el,s=this.$("._carousel-list"),t=n[o].$el,!1===e.transition&&s.css("transition-property","none"),s.css("left",-t.position().left),0===o?this.$("._previous-item-link").addClass("disabled"):(this.$("._previous-item-link").removeClass("disabled"),this.$(".QuestionCompare-ControlStepper.previous").css("visibility","visible")),parseInt(r.position().left)+r.width()<=Math.abs(parseInt(s.prop("style").left)-s.width())?this.$("._next-item-link").addClass("disabled"):this.$("._next-item-link").removeClass("disabled"),s.css("transition-property","left, max-height"),i.trigger("position",_.extend(e,{index:o,width:Math.round(s.width()/r.outerWidth())}))}jump(e,t={}){var n,i,o,r;if(e instanceof P&&(e=this.model.get("viewpoints").indexOf(e)),n=this.model.get("viewpoints"),i=this.getChildrenByView(x).slice(-1)[0].$el,o=this.$("._carousel-list"),r=Math.round(o.width()/i.outerWidth()),t.center&&(e-=Math.floor((r-1)/2)),e<0&&(e=0),e>n.length-r&&(e=n.length-r),e!==this.currentIndex)return this.currentIndex=e,this.position(t)}step(e,t){return this.jump(this.currentIndex+e,t)}}return e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._ComparePageView")}}).prototype.rule={"._QuestionHeaderView=":function(){return new I({model:this.model})},"._ComparePageCarouselView=":function(){return new o({model:this.model})},"._ComparePageOptionPreviousSliderView=":function(){return new u({collection:this.model.get("viewpoints")})},"._ComparePageOptionNextSliderView=":function(){return new a({collection:this.model.get("viewpoints")})},"._ComparePageToasterView=":function(){return new C}},e}.call(this),e.prototype.events={"resize window":function(){return this.position({transition:!1})},"click ._next-item-link":function(e){return this.step(1)},"click ._previous-item-link":function(e){return this.step(-1)},"keydown document":function(e){var t;if(!((t=e.keyCode)!==G.LEFT&&t!==G.RIGHT||e.ctrlKey||e.shiftKey||e.altKey))switch(e.preventDefault(),t){case G.LEFT:return this.step(-1);case G.RIGHT:return this.step(1)}},"click ._expand-specs-link":function(e){var t,n,i;return t=(n=null!=(i=this.getChildrenByView(m)[0])?i.$el:void 0).prop("scrollHeight"),n.css("max-height",t),this.$("._expand-specs-link").addClass("hidden"),this.$("._collapse-specs-link").removeClass("hidden")},"click ._collapse-specs-link":function(e){var t,n,i;return n=null!=(i=this.getChildrenByView(m)[0])?i.$el:void 0,t=this.originalHeight,n.css("max-height",t),this.$("._expand-specs-link").removeClass("hidden"),this.$("._collapse-specs-link").addClass("hidden")}},e}.call(this),o=function(){class e extends O{}return e.prototype.Rule=function(){var e;return(e=class extends O.prototype.Rule{template(){return template("._ComparePageCarouselView")}}).prototype.rule={"._has-sections=":function(){if(!this.model.get("viewpoints").find(function(e){return e.get("sections").count()>0}))return""},"._has-specs=":function(){if(!this.model.getSpecKeys().length)return""},"._ComparePageOptionTitleBarPrimaryListView=":function(){return new v({collection:this.model.get("viewpoints")})},"._ComparePageOptionTitleBarSecondaryListView=":function(){return new y({collection:this.model.get("viewpoints")})},"._ComparePageOptionHeaderListView=":function(){return new r({collection:this.model.get("viewpoints")})},"._ComparePageOptionSpecTableView=":function(){return new m({collection:this.model.get("viewpoints")})},"._ComparePageOptionListView=":function(){return new l({collection:this.model.get("viewpoints")})}},e}.call(this),e}.call(this),c=function(){class e extends M{}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._ComparePageOptionSliderItemView")}},e.prototype.events={"click ._option-slider-link":function(e){return this.model.trigger("select",{silent:!0,center:!0})},mouseover:function(e){var t;return t=new Q({model:this.model,follows:this,centered:!0}),$(e.currentTarget).one("mouseout",function(e){return t.remove()})}},e}.call(this),p=function(){class e extends T{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"position",this.position)}position(e){var t,n,i,o;return o=this.$el,n=e.index,t=this.getChildrenByView(c),!1===e.transition&&o.css("transition-property","none"),this instanceof u?(i=t[n=t.length-n-1].$el,o.css("top",-(i.position().top+i.height()))):((i=t[n+e.width-1])||(i=t.slice(-1)[0]),i=i.$el,o.css("top",-(i.position().top+i.height()))),o.css("transition-property","top")}}return e.prototype.options={orientation:"vertical"},e.prototype.collection=W,e.prototype.ItemView=c,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ComparePageOptionSliderView")}},e}.call(this),u=class extends p{sortBy(e){return-this.collection.indexOf(e)}},a=class extends p{},g=function(){class e extends M{}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ComparePageOptionTitleBarItemView")}}).prototype.rule={"._not-first-option=":function(){if(0===this.model.collection.indexOf(this.model))return""}},e}.call(this),e}.call(this),w=function(){class e extends T{}return e.prototype.ItemView=g,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ComparePageOptionTitleBarListView")}},e}.call(this),v=function(){class e extends w{}return e.prototype.limit=3,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._ComparePageOptionTitleBarPrimaryListView")}},e}.call(this),y=function(){class e extends w{}return e.prototype.offset=3,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._ComparePageOptionTitleBarSecondaryListView")}},e}.call(this),s=function(){class e extends M{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.managePanelForOption(this.model)}}return e.prototype.Model=H,e.prototype.mixin(E),e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ComparePageOptionHeaderView")}}).prototype.rule={"._ComparePageRecommendationView=":function(){return new V({collection:this.model.get("votes")})}},e}.call(this),e}.call(this),r=function(){class e extends T{}return e.prototype.ItemView=s,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ComparePageOptionHeaderListView")}},e}.call(this),V=function(){class e extends D{}return e.prototype.Rule=class extends D.prototype.Rule{template(){return template("._ComparePageRecommendationView")}},e}.call(this),h=function(){class e extends M{}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ComparePageOptionSpecTableItemView")}}).prototype.rule={"._spec-list=":function(){var e,t,n,i,o,r,s,l;for(l=[],e=0,n=(r=null!=(i=null!=(o=this.model.parents("topic"))?o.getSpecKeys():void 0)?i:[]).length;e<n;e++)t=r[e],l.push(new f({model:null!=(s=this.model.get("masterOption").get("specs").findWhere({key:t}))?s:new q({key:t})}));return l}},e}.call(this),e}.call(this),m=function(){class e extends T{}return e.prototype.ItemView=h,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ComparePageOptionSpecTableView")}},e}.call(this),f=function(){class e extends F{}return e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._ComparePageOptionSpecView")}}).prototype.rule={"._spec-value=":function(){return this.model.get("value")||"-"}},e}.call(this),e}.call(this),d=function(){class e extends k{}return e.prototype.Collection=N,e.prototype.ItemView=f,e.prototype.Rule=class extends k.prototype.Rule{template(){return template("._ComparePageOptionSpecListView")}},e}.call(this),x=function(){class e extends M{}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._ComparePageOptionView")}}).prototype.rule={"._ComparePageSectionListView=":function(){return new R({collection:this.model.get("sections")})}},e}.call(this),e}.call(this),l=function(){class e extends T{}return e.prototype.ItemView=x,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._ComparePageOptionListView")}},e}.call(this),b=function(){class e extends B{}return e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._ComparePageSectionView")}}).prototype.rule={"._section-body=":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("text").trim())?e:"")return Y(K(t,{renderer:J}))},"._ReactionButtonSetView=":function(){return new A({model:this.model.get("reactionSet")})}},e}.call(this),e}.call(this),R=function(){class e extends U{}return e.prototype.ItemView=b,e.prototype.Rule=class extends U.prototype.Rule{template(){return template("._ComparePageSectionListView")}},e}.call(this),C=function(){class e extends z{}return e.prototype.DefaultToastView=j,e}.call(this),t.exports={ComparePageView:S,ComparePageCarouselView:o,ComparePageOptionSliderItemView:c,ComparePageOptionSliderView:p,ComparePageOptionPreviousSliderView:u,ComparePageOptionNextSliderView:a,ComparePageOptionTitleBarItemView:g,ComparePageOptionTitleBarListView:w,ComparePageOptionTitleBarPrimaryListView:v,ComparePageOptionTitleBarSecondaryListView:y,ComparePageOptionHeaderView:s,ComparePageOptionHeaderListView:r,ComparePageRecommendationView:V,ComparePageOptionSpecTableItemView:h,ComparePageOptionSpecTableView:m,ComparePageOptionSpecView:f,ComparePageOptionSpecListView:d,ComparePageOptionView:x,ComparePageOptionListView:l,ComparePageSectionView:b,ComparePageSectionListView:R,ComparePageToasterView:C}},{"../../collections":2,"../../model":33,"../../models":34,"../../utils/data":86,"../../utils/transforms":89,"../base-view":91,"../components/question-header-view":137,"../components/reaction-button-set-view":141,"../components/recommendation-view":150,"../components/toaster-view":166,"../components/tooltip-view":167,"../lists/list-view":173,"../lists/option-list-view":175,"../lists/section-list-view":179,"../mixins/recommendation-panel-manager-mixin-view":188,"../models/option-view":200,"../models/question-view":201,"../models/section-view":204,"../models/spec-view":205,"../pages/post-page-view":244,marked:440,"marked-plaintext":439}],227:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S;({PageView:_}=e("./page-view")),({UserView:C}=e("../models/user-view")),({LoginModalView:w,LoginModalLoadingContentView:d,LoginModalRegisterContentView:m,LoginModalLoginContentView:h,LoginModalResetPasswordSentContentView:g,LoginModalResetPasswordErrorContentView:f}=e("../components/login-modal-view")),({UserProfileUsernameInputMixinView:b,UserProfileEmailInputMixinView:V,UserProfilePasswordInputMixinView:R,UserProfileCurrentPasswordInputMixinView:x}=e("../mixins/user-profile-input-mixin-view")),({ModalView:v}=e("../components/modal-view")),({NotifyPopupView:y}=e("../components/notify-popup-view")),({FancyInputMixinView:p}=e("../mixins/fancy-input-mixin-view")),({ExpandingTextareaMixinView:c}=e("../mixins/expanding-textarea-mixin-view")),({EditAvatarDropdownView:i}=e("../components/edit-avatar-dropdown-view")),S=e("underscore"),o=function(){class e extends _{title(){return super.title("Edit Profile")}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.setInputText(),this.initializeAllFancyInputs(),this.adjustTextareaHeight(),this.listenTo(this.model,"updated",function(e,t){return new u({follows:this.$el,fieldType:t})})}highlight(){return this.$el.removeClass("Loading")}setInputText(){return this.setUsernameText()}isError(){return this.isUsernameError()||this.isBioError()}setUsernameText(){return this.$("._username-input").val()===this.model.get("username")?(this.resetUsernameText(),this.$("._username-default-text").show()):b.prototype.setUsernameText.call(this)}isUsernameError(){return this.model.get("username")!==this.$("._username-input").val()&&b.prototype.isUsernameError.call(this)}isBioError(){return this.$("._bio-input").val().length>this.bioLengthLimit}setErrorState(){return this.setUsernameRequiredText()}}return e.prototype.mixin(p),e.prototype.mixin(c),e.prototype.mixin(b),e.prototype.bioLengthLimit=240,e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._EditProfilePageView")}}).prototype.rule={"._user-image":{"@src":function(){return this.model.getAvatarPreviewURL()},"@alt":function(){return this.model.get("displayName")||this.model.get("username")}},"._display-name-input":{"@value=":function(){return this.model.get("displayName")},"@class+":function(){if(this.model.get("displayName"))return"hasText"}},"._username-input":{"@value=":function(){return this.model.get("username")},"@class+":function(){if(this.model.get("username"))return"hasText"}},"._bio-input":{"":function(){return this.model.get("bio")},"@maxlength=":function(){return this.bioLengthLimit},"@class+":function(){if(this.model.get("bio"))return"hasText"}},"._bio-count":{"":function(){var e;return this.bioLengthLimit-((null!=(e=this.model.get("bio"))?e.length:void 0)||0)},"@class+":function(){var e;if(this.bioLengthLimit-((null!=(e=this.model.get("bio"))?e.length:void 0)||0)<=10)return"low"}}},e}.call(this),e.prototype.events=S.assign({},p.prototype.events,c.prototype.events,{"click ._edit-avatar-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new i({model:this.model,follows:e.currentTarget,anchor:"below",align:"center"})},"input ._username-input":function(e){return this.setUsernameText()},"input ._bio-input":function(e){var t,n;if(t=this.$("._bio-input").val(),n=this.bioLengthLimit-t.length,this.$("._bio-count").text(n),!this.isBioWarning&&n<=10&&(this.isBioWarning=!0,this.$(".EditProfile-Input-Count").addClass("low")),this.isBioWarning&&n>10)return this.isBioWarning=!1,this.$(".EditProfile-Input-Count").removeClass("low")},"submit ._user-form":function(e){var t,n,i;return e.preventDefault(),this.isError()?this.setErrorState():(n=this.$("._display-name-input").val(),t=this.$("._bio-input").val(),i=this.$("._username-input").val(),this.$el.addClass("Loading"),this.model.save({displayName:n,bio:t,username:i}),this.model.once("sync saveError",()=>this.model.navigate({callback:()=>this.$el.removeClass("Loading")})),analytics.track("Edit Profile Form Submitted",{label:"main"}))},"click ._update-email-link":function(e){return new s({model:this.model}),analytics.track("Edit Profile Modal Opened",{label:"email"})},"click ._update-password-link":function(e){return new a({model:this.model}),analytics.track("Edit Profile Modal Opened",{label:"password"})}}),e}.call(this),l=function(){class e extends v{initialize(){return super.initialize(...arguments),this.setDefaultInputsState()}setDefaultInputsState(){return this.resetInputsState(),this.$("._default-text").show()}resetInputsState(){return this.$(".FancyInput").removeClass("error"),this.$("._default-text").hide(),this.$("._valid-text").hide(),this.$("._error-text").hide()}showPassword(e){var t,n;return n=e.siblings("input"),t=e.siblings("._hide-password-link"),n.prop({type:"text"}),e.addClass("hidden"),t.removeClass("hidden")}hidePassword(e){var t,n;return t=e.siblings("input"),n=e.siblings("._show-password-link"),t.prop({type:"password"}),e.addClass("hidden"),n.removeClass("hidden")}}return e.prototype.mixin(p),e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._EditProfileUpdateFieldModalView")}},e.prototype.events=S.assign({},p.prototype.events,{"click ._show-password-link":function(e){var t;return e.preventDefault(),t=$(e.currentTarget),this.showPassword(t)},"click ._hide-password-link":function(e){var t;return e.preventDefault(),t=$(e.currentTarget),this.hidePassword(t)},"click ._reset-password-link":function(e){var t;return analytics.track("Reset Password Link Clicked"),t=new w({model:this.model,ContentView:d}),$.ajax({url:"/mgmt",type:"POST",dataType:"json",data:{username:this.model.get("username")},success:()=>(this.remove(),t.swapContent(g)),error:function(){return t.swapContent(r)}})}}),e}.call(this),s=function(){class e extends l{isError(){return this.$("._email-input").val()!==this.model.get("email")&&this.isEmailError()||this.isCurrentPasswordError()}setEmailText(){return this.$("._email-input").val()===this.model.get("email")?(this.resetEmailText(),this.$("._email-default-text").show()):V.prototype.setEmailText.call(this)}setErrorState(){return this.setEmailRequiredText(),this.setCurrentPasswordRequiredText()}}return e.prototype.mixin(V),e.prototype.mixin(x),e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._EditProfileUpdateEmailModalView")}}).prototype.rule={"._has-current-email=":function(){if(!this.model.get("email"))return""},"._no-current-email=":function(){if(this.model.get("email"))return""},"._current-email=":function(){return this.model.get("email")}},e}.call(this),e.prototype.events={"input ._email-input":function(e){return this.setEmailText()},"input ._current-password-input":function(e){return this.setCurrentPasswordText()},"submit ._update-email-form":function(e){var t;return e.preventDefault(),this.setDefaultInputsState(),this.isError()?this.setErrorState():(this.$(".Modal-Content").addClass("Loading"),t={email:this.$("._email-input").val(),verification:this.$("._current-password-input").val()},this.model.save(t,{silent:!0,success:()=>(this.remove(),this.model.trigger("updated","email")),error:(e,t)=>(this.$(".Modal-Content").removeClass("Loading"),this.$("._current-password-default-text").hide(),400===t.status?(this.$("._current-password-field").addClass("error"),this.$("._current-password-invalid-text").show()):(this.$("._email-field").addClass("error"),this.$("._email-general-error-text").show()))}),analytics.track("Edit Profile Form Submitted",{label:"email"}))}},e}.call(this),a=function(){class e extends l{isError(){return this.isCurrentPasswordError()||this.isPasswordError()}setErrorState(){return this.setCurrentPasswordRequiredText(),this.setPasswordRequiredText()}}return e.prototype.mixin(R),e.prototype.mixin(x),e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._EditProfileUpdatePasswordModalView")}},e.prototype.events={"input ._current-password-input":function(e){return this.setCurrentPasswordText()},"input ._password-input":function(e){return this.setPasswordText()},"submit ._update-password-form":function(e){var t;return e.preventDefault(),this.setDefaultInputsState(),this.isError()?this.setErrorState():(this.$(".Modal-Content").addClass("Loading"),t={verification:this.$("._current-password-input").val(),password:this.$("._password-input").val()},this.model.save(t,{silent:!0,success:()=>(this.remove(),this.model.trigger("updated","password")),error:(e,t)=>(this.$(".Modal-Content").removeClass("Loading"),this.$("._current-password-field").addClass("error"),this.$("._current-password-default-text").hide(),400===t.status?this.$("._current-password-invalid-text").show():this.$("._current-password-general-error-text").show())}),analytics.track("Edit Profile Form Submitted",{label:"password"}))}},e}.call(this),r=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{},e.prototype.events={"click ._login-swap-link":function(t){return this.swapContent(d),$.ajax({url:"/mgmt",type:"POST",dataType:"json",data:{username:this.model.get("username")},success:()=>this.swapContent(g),error:()=>this.swapContent(e)})}},e}.call(this),u=function(){class e extends y{position(){return super.position(...arguments),this.$el.css({top:"initial",bottom:0})}}return e.prototype.Rule=function(){var e;return(e=class extends y.prototype.Rule{template(){return template("._EditProfileUpdatedNotifyPopupView")}}).prototype.rule={"._updated-field-type=":function(){return this.options.fieldType||"profile"}},e}.call(this),e}.call(this),t.exports={EditProfilePageView:o,EditProfileUpdateFieldModalView:l,EditProfileUpdateEmailModalView:s,EditProfileUpdatePasswordModalView:a,EditProfileResetPasswordErrorModalContentView:r,EditProfileUpdatedNotifyPopupView:u}},{"../components/edit-avatar-dropdown-view":102,"../components/login-modal-view":115,"../components/modal-view":122,"../components/notify-popup-view":128,"../mixins/expanding-textarea-mixin-view":184,"../mixins/fancy-input-mixin-view":185,"../mixins/user-profile-input-mixin-view":190,"../models/user-view":207,"./page-view":241,underscore:448}],228:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("500 - Internal Server Error")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._ErrorPageView")}},e}.call(this),t.exports={ErrorPageView:i}},{"./page-view":241}],229:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N;({PageView:b}=e("./page-view")),({BaseView:i}=e("../base-view")),({QuestionCardListView:C}=e("../components/question-card-view")),({RecommendationCardListView:k,RecommendationCardAnswerView:S}=e("../components/recommendation-card-view")),({RecommendationOptionCardContainerView:P}=e("../components/recommendation-option-card-view")),({ContributorsView:r}=e("../components/contributors-view")),({SidebarUserStatsView:T}=e("../components/sidebar-user-stats-view")),({MainHeaderView:V}=e("../components/main-header-view")),({ToasterView:A,ToastCollapsedView:O}=e("../components/toaster-view")),({TagSelectorHeaderView:I}=e("../components/tag-selector-view")),({ClaimBannerCardView:o}=e("../components/claim-banner-view")),({JoinTagSidebarView:w}=e("../components/join-tag-sidebar-view")),({LoginModalView:x,LoginModalContentView:v,LoginModalLoginContentView:y,LoginModalRegisterContentView:_}=e("../components/login-modal-view")),({TopicList:D,TagList:L}=e("../../collections")),({Model:R,Topic:E,Feed:s,TagFilter:M}=e("../../models")),({shortenNumber:q,splitUnit:N}=e("../../utils/transforms")),$=e("urijs"),B=e("moment"),U=e("underscore"),g=function(){class e extends b{title(){var e;switch(query.filter){case"top":e="Top Question";break;case"improve":e="Improve Question";break;default:e="Choose the best"}return query.page&&(e=`${e} - Page ${parseInt(query.page)+1}`),super.title(e)}initialize(){if(super.initialize(...arguments),this.stopListening(),"undefined"!=typeof window&&null!==window)return window.currentUser.get("username")?this.fetchUserTags():this.fetchFeed(),this.listenTo(window.currentUser,"change",()=>"undefined"!=typeof window&&null!==window&&window.currentUser.get("username")?window.currentUser.get("anonymous")?void 0:this.fetchUserTags():(this.model.clear(),delete window.localStorage.tagFilterData)),this.listenTo(this.model,"change repaint",()=>this.fetchFeed())}fetchFeed(){var e;return(e=this.getChildrenByView(a)[0]).model.clear({silent:!0}),e.model.set({URL:this.getFeedURL()},{silent:!0}),e.options.loading=!0,e.update(),delete e.options.loading,e.$("._is-loading").addClass("Loading"),e.model.fetch()}fetchUserTags(){if("undefined"!=typeof window&&null!==window)return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?(window.localStorage.tagFilterData&&(this.model.set(this.model.parse(JSON.parse(window.localStorage.tagFilterData)),{silent:!0}),this.fetchFeed()),this.model.set("URL",`/users/${window.currentUser.get("username")}/tagFilter`,{silent:!0}),this.model.fetch({reset:!0,success:function(e,t){return window.localStorage.tagFilterData=JSON.stringify(t)}})):void 0}getFeedURL(){var e,t,n,i;return(i=new $("/feed")).addQuery("filter",null!=(n=this.query.filter)?n:"recs"),(t=this.model.get("include").pluck("id").join(","))&&i.addQuery("include_tags",t),(e=this.model.get("include").findWhere({id:"development"})?"":"development")&&i.addQuery("exclude_tags",e),i.toString()}}return e.prototype.Model=M,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._FrontPageView")}}).prototype.rule={"._FrontPageSplashHeaderView=":function(){return new h},"._FrontPageFeedView=":function(){return new a({model:new s({URL:this.getFeedURL()}),loading:!0})},"._FrontPageToasterView=":function(){return new f},"._TagSelectorHeaderView=":function(){return new I({model:this.model})}},e}.call(this),e}.call(this),h=function(){class e extends V{sendAnalytics(e,t={}){if(null!=e)return t=U.extend(t,{label:"Front Page Splash"}),super.sendAnalytics(e,t)}oAuthSignIn(e){return new x({ContentView:v,contentOptions:{method:e}})}}return e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._FrontPageSplashHeaderView")}},e.prototype.events={"click ._signup-link":function(e){return e.preventDefault(),new x({ContentView:_}),this.sendAnalytics("Clicked Join Button")},"click ._facebook-login-link":function(e){return this.oAuthSignIn("facebook")},"click ._google-login-link":function(e){return this.oAuthSignIn("google")}},e}.call(this),a=function(){class e extends i{}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageFeedView")}}).prototype.rule={"._is-loading=":function(){if(!this.options.loading)return""},"._not-loading=":function(){if(this.options.loading)return""},"._has-recent-recs=":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return""},"._not-recs-feed=":function(){if(!("undefined"!=typeof query&&null!==query?query.filter:void 0)||"recs"===("undefined"!=typeof query&&null!==query?query.filter:void 0))return""},"._is-recs-feed=":function(){if(("undefined"!=typeof query&&null!==query?query.filter:void 0)&&"recs"!==("undefined"!=typeof query&&null!==query?query.filter:void 0))return""},"._filter-recommendation-count=":function(){return N(q(this.model.get("filterVotesCount"),0)).value},"._filter-recommendation-count-unit=":function(){return N(q(this.model.get("filterVotesCount"),0)).unit},"._filter-edit-count=":function(){return N(q(this.model.get("filterUpdatesCount"),0)).value},"._filter-edit-count-unit=":function(){return N(q(this.model.get("filterUpdatesCount"),0)).unit},"._filter-update-time-ago-value=":function(){var e;return e=B(new Date(this.model.get("filterModified")),null,"en-abbr").fromNow(!0),N(e).value},"._filter-update-time-ago-unit=":function(){var e;return e=B(new Date(this.model.get("filterModified")),null,"en-abbr").fromNow(!0),N(e).unit},"._FrontPageTagSidebarView=":function(){return new m},"._FrontPageNavigationSidebarView=":function(){return new c({model:this.model})},"._FrontPageNavHeaderView=":function(){return new u({model:this.model})},"._QuestionCardListView=":function(){var e;return"recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0)?new P({collection:this.model.get("content")}):new p({collection:this.model.get("content")})},"._RecommendationCardAnswerView=":function(){var e,t,n;return({include_tags:t,exclude_tags:e}=new $(this.model.url()).query(!0)),n=decodeURIComponent(new $("/topics/random").query({include_tags:t,exclude_tags:e}).toString()),new S({model:new E({URL:n}),ajax:n})},"._RecommendationCardListView=":function(){var e;return e=new $(this.model.get("content").url()).path("/activity").search({filter:"recommended"}).toString(),new d({ajax:e})},"._ContributorsView=":function(){return new l({collection:this.model.get("users")})},"._ClaimBannerCardView=":function(){return new o}},e}.call(this),e}.call(this),p=function(){class e extends C{}return e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{}).prototype.rule={"._load-more-link@href":function(){var e,t;return new $(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0).path("")}},e}.call(this),e}.call(this),l=function(){class e extends r{}return e.prototype.limit=18,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._has-more-users=":""},e}.call(this),e}.call(this),c=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageNavigationSidebarView")}}).prototype.rule={"._is-logged-in=":function(){if(null==("undefined"!=typeof window&&null!==window?window.currentUser.id:void 0))return""},"._not-logged-in=":function(){if(null!=("undefined"!=typeof window&&null!==window?window.currentUser.id:void 0))return""},"._recs-link@class+":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._feed-link@class+":function(){var e;if("feed"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._top-link@class+":function(){var e;if("top"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._improve-link@class+":function(){var e;if("improve"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._SidebarUserStatsView=":function(){return new T}},e}.call(this),e}.call(this),u=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._FrontPageNavHeaderView")}},e}.call(this),d=function(){class e extends k{}return e.prototype.limit=3,e}.call(this),f=function(){class e extends A{}return e.prototype.DefaultToastView=O,e}.call(this),m=function(){class e extends i{initialize(){if(this.allTagList=new L([],{url:"/tags"}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.allTagList.fetch({silent:!0,success:()=>(this.fetched=!0,this.update())})}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageTagSidebarView")}}).prototype.rule={"._JoinTagSidebarView=":function(){if(this.fetched)return new w({collection:this.allTagList})}},e}.call(this),e}.call(this),t.exports={FrontPageView:g,FrontPageSplashHeaderView:h,FrontPageFeedView:a,FrontPageQuestionCardListView:p,FrontPageNavHeaderView:u,FrontPageNavigationSidebarView:c,FrontPageRecommendationCardListView:d,FrontPageContributorsView:l,FrontPageToasterView:f,FrontPageTagSidebarView:m}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/claim-banner-view":96,"../components/contributors-view":100,"../components/join-tag-sidebar-view":110,"../components/login-modal-view":115,"../components/main-header-view":119,"../components/question-card-view":135,"../components/recommendation-card-view":144,"../components/recommendation-option-card-view":148,"../components/sidebar-user-stats-view":158,"../components/tag-selector-view":165,"../components/toaster-view":166,"./page-view":241,moment:441,underscore:448,urijs:452}],230:[function(e,t,n){var i,o,r,s,l,a,u;({BaseView:i}=e("../base-view")),({PageView:u}=e("./page-view")),({OptionPageNavigationSidebarView:a}=e("./option-page-view")),l=function(){class e extends u{title(){return super.title("Help")}}return e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._HelpPageView")}}).prototype.rule={"._HelpPageLinksView=":function(){return new r},"._HelpPageNavigationSidebarView=":function(){return new s},"._HelpPageContentView=":function(){return new o}},e}.call(this),e}.call(this),r=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._HelpPageLinksView")}},e}.call(this),s=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._HelpPageNavigationSidebarView")}},e}.call(this),o=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._HelpPageContentView")}},e}.call(this),t.exports={HelpPageView:l,HelpPageLinksView:r,HelpPageNavigationSidebarView:s,HelpPageContentView:o}},{"../base-view":91,"./option-page-view":240,"./page-view":241}],231:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f;({PageView:d}=e("../pages/page-view")),({CommentsPageView:s,CommentsTopicPageView:l}=e("../pages/comments-page-view")),({CommentView:r}=e("../models/comment-view")),({CommentListView:o}=e("../lists/comment-list-view")),({Topic:h}=e("../../models")),({convertImageURL:m,improveURL:f}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),c=function(){class e extends s{title(){return super.title("History")}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._HistoryPageView")}}).prototype.rule={"._HistoryPageCommentListView=":function(){return new a({collection:this.getModel().get("comments")})}},e}.call(this),e}.call(this),p=function(){class e extends c{}return e.prototype.Model=h,e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._HistoryPageView")}},e}.call(this),u=function(){class e extends r{}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._HistoryPageCommentView")}}).prototype.rule={"._image-before":{"=":function(){var e;if(e=m.apply(this.model.get("revision").get("parent")),m.apply(this.model.get("revision"))===e)return""},"@src":function(){return m.apply(this.model.get("revision").get("parent"))}},"._image-after":{"=":function(){var e;if(e=m.apply(this.model.get("revision").get("parent")),m.apply(this.model.get("revision"))===e)return""},"@src":function(){return m.apply(this.model.get("revision"))}},"._title-diff=":function(){var e,t;if(this.model.get("revision").get("title")!==(null!=(e=this.model.get("revision").get("parent"))?e.title:void 0))return[i("<ins>").text(this.model.get("revision").get("title")),i("<del>").text(null!=(t=this.model.get("revision").get("parent"))?t.title:void 0)]},"._site-url-diff=":function(){var e,t;if(this.model.get("revision").get("siteURL")!==(null!=(e=this.model.get("revision").get("parent"))?e.siteURL:void 0))return[i("<ins>").text(this.model.get("revision").get("siteURL")),i("<del>").text(null!=(t=this.model.get("revision").get("parent"))?t.siteURL:void 0)]},"._text-diff":function(){var e,t,n,o,r,s,l,a;if(t=this.model.diff()){for(l=[],n=0,r=(s=null!=t?t:[]).length;n<r;n++)switch(e=s[n],[o,a]=e,o){case 0:l.push(a);break;case 1:l.push(i("<ins>").text(a));break;case-1:l.push(i("<del>").text(a));break;default:l.push(void 0)}return l}}},e}.call(this),e}.call(this),a=function(){class e extends o{filter(e){return e.get("revision").get("class")}}return e.prototype.ItemView=u,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._HistoryPageCommentListView")}},e}.call(this),t.exports={HistoryPageView:c,HistoryTopicPageView:p,HistoryPageCommentView:u,HistoryPageCommentListView:a}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../lists/comment-list-view":170,"../models/comment-view":191,"../pages/comments-page-view":225,"../pages/page-view":241,jquery:438}],232:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("../../views-v2/pages/ai-category-page-view"),e("../../views-v2/pages/ai-home-page-view"),e("../../views-v2/pages/ai-parent-category-page-view"),e("../../views-v2/pages/ai-plugin-category-page-view"),e("../../views-v2/pages/ai-plugin-details-page-view"),e("../../views-v2/pages/ai-plugin-error-page-view"),e("../../views-v2/pages/ai-plugin-main-popup-page-view"),e("../../views-v2/pages/ai-plugin-maintenance-page-view"),e("../../views-v2/pages/ai-plugin-not-found-page-view"),e("../../views-v2/pages/ai-plugin-parent-category-page-view"),e("../../views-v2/pages/ai-plugin-product-page-view"),e("../../views-v2/pages/ai-uninstall-page-view"),e("../../views-v2/pages/ai-welcome-page-view"),e("../../views-v2/pages/summary-page-view"),e("./activity-page-view"),e("./add-question-page-view"),e("./ads-test-page-view"),e("./claim-business-account-page-view"),e("./comments-page-view"),e("./compare-page-view"),e("./edit-profile-page-view"),e("./error-page-view"),e("./front-page-view"),e("./help-page-view"),e("./history-page-view"),e("./logs-page-view"),e("./maintenance-page-view"),e("./master-alternatives-page-view"),e("./master-compare-page-view"),e("./master-option-page-view"),e("./not-found-page-view"),e("./notifications-page-view"),e("./option-page-view"),e("./page-view"),e("./password-reset-page-view"),e("./post-activity-page-view"),e("./post-page-view"),e("./profile-page-view"),e("./search-page-view"),e("./sitemap-page-view"),e("./tag-page-view"),e("./update-question-page-view"))},{"../../views-v2/pages/ai-category-page-view":211,"../../views-v2/pages/ai-home-page-view":212,"../../views-v2/pages/ai-parent-category-page-view":213,"../../views-v2/pages/ai-plugin-category-page-view":214,"../../views-v2/pages/ai-plugin-details-page-view":215,"../../views-v2/pages/ai-plugin-error-page-view":216,"../../views-v2/pages/ai-plugin-main-popup-page-view":217,"../../views-v2/pages/ai-plugin-maintenance-page-view":218,"../../views-v2/pages/ai-plugin-not-found-page-view":219,"../../views-v2/pages/ai-plugin-parent-category-page-view":220,"../../views-v2/pages/ai-plugin-product-page-view":221,"../../views-v2/pages/ai-uninstall-page-view":222,"../../views-v2/pages/ai-welcome-page-view":223,"../../views-v2/pages/summary-page-view":248,"./activity-page-view":208,"./add-question-page-view":209,"./ads-test-page-view":210,"./claim-business-account-page-view":224,"./comments-page-view":225,"./compare-page-view":226,"./edit-profile-page-view":227,"./error-page-view":228,"./front-page-view":229,"./help-page-view":230,"./history-page-view":231,"./logs-page-view":233,"./maintenance-page-view":234,"./master-alternatives-page-view":235,"./master-compare-page-view":236,"./master-option-page-view":237,"./not-found-page-view":238,"./notifications-page-view":239,"./option-page-view":240,"./page-view":241,"./password-reset-page-view":242,"./post-activity-page-view":243,"./post-page-view":244,"./profile-page-view":245,"./search-page-view":246,"./sitemap-page-view":247,"./tag-page-view":249,"./update-question-page-view":250,underscore:448}],233:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;({BaseView:i}=e("../base-view")),({PageView:d}=e("./page-view")),({ModalView:p}=e("../components/modal-view")),({ListView:o}=e("../lists/list-view")),({Log:r}=e("../../models")),({LogList:s}=e("../../collections")),h=e("moment"),c=function(){class e extends d{}return e.prototype.Collection=s,e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._LogsPageView")}}).prototype.rule={"._has-prev-page=":function(){var e;if(parseInt(null!=(e=this.query.page)?e:0)<1)return""},"._prev-page-link@href":function(){var e;return`?page=${parseInt(null!=(e=this.query.page)?e:0)-1}`},"._next-page-link@href":function(){var e;return`?page=${parseInt(null!=(e=this.query.page)?e:0)+1}`},"._LogsPageActionListView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),a=function(){class e extends i{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._LogsPageActionView")}}).prototype.rule={"._color-style@style":function(){return`color: ${this.model.get("color")};`},"._displayname=":function(){return this.model.get("displayname")},"._action=":function(){return this.model.get("action")},"._url=":function(){return this.model.get("url")},"._data=":function(){return JSON.stringify(this.model.get("data"))},"._time=":function(){return h(new Date(this.model.get("time"))).utc().format("DD/MM/YY")},"._action-link@href":function(){var e,t,n;return null!=(e=null!=(t=(n=this.model.get("url")).match(/(\/topics\/\d+(\/viewpoints\/\d+)?|\/options\/\d+|\/users\/[^\/]+)(\/~.+)?/))?t[0]:void 0)?e:n},"._user-link@href":function(){return`/users/${this.model.get("username")}`},"._filter-link@href":function(){return`?filter=${this.model.get("action")}`}},e}.call(this),e.prototype.events={"click ._requester-log-link":function(){return new u({model:this.model})}},e}.call(this),l=function(){class e extends o{}return e.prototype.Collection=s,e.prototype.ItemView=a,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._LogsPageActionListView")}},e}.call(this),u=function(){class e extends p{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._LogsPageUserLogModalView")}}).prototype.rule={"._data=":function(){return JSON.stringify(this.model.get("data"),null,"  ")},"._headers=":function(){return JSON.stringify(this.model.get("headers"),null,"  ")},"._LogsPageActionListView=":function(){if(this.model.get("requester"))return new l({ajax:`/logs/users/${this.model.get("requester")}`})}},e}.call(this),e}.call(this),t.exports={LogsPageView:c,LogsPageActionView:a,LogsPageActionListView:l,LogsPageUserLogModalView:u}},{"../../collections":2,"../../models":34,"../base-view":91,"../components/modal-view":122,"../lists/list-view":173,"./page-view":241,moment:441}],234:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("503 - Under Maintenance")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MaintenancePageView")}},e}.call(this),t.exports={MaintenancePageView:i}},{"./page-view":241}],235:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D;({PageView:b}=e("./page-view")),({ListView:s}=e("../lists/list-view")),({MasterOptionView:R}=e("../models/master-option-view")),({MasterOptionDropdownView:x}=e("../components/master-option-dropdown-view")),({SummaryPageOptionView:L,SummaryPageOptionRecommendationView:k,SummaryPageHeaderAdView:S,SummaryPageOptionTabsView:M,SummaryPageOptionTabsContentListView:T,SummaryPageOptionSpecListView:P,SummaryPageSectionView:I}=e("../pages/summary-page-view")),({StickyNavMixinView:C}=e("../mixins/sticky-nav-mixin-view")),({JoinTagSidebarView:r}=e("../components/join-tag-sidebar-view")),({ImageCarouselView:o}=e("../components/image-carousel-view")),({AdSidebarAdView:i}=e("../components/ad-view")),({LustreAIPromoteFooterView:l}=e("../components/lustre-ai-promote-footer-view")),({MasterOptionAlternatives:_,MasterOption:y,Viewpoint:A}=e("../../models")),({MasterOptionList:V}=e("../../collections")),e("underscore"),O=e("urijs"),D=e("moment"),({improveURL:E}=e("../../utils/transforms")),v=function(){class e extends b{title(){return super.title(`${this.model.get("alternatives").length} best alternatives to ${this.model.get("masterOption").get("source").get("revision").get("title")} as of ${D().format("YYYY")}`)}}return e.prototype.Model=_,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._MasterAlternativesPageView")}}).prototype.rule={"._JoinTagSidebarView=":function(){return new r({collection:this.model.get("masterOption").get("tags")})},"._MasterAlternativesPageHeaderView=":function(){return new u({model:this.model.get("masterOption")})},"._MasterAlternativesPageOptionThreadView=":function(){return new f({collection:this.model.get("alternatives")})},"._LustreAIPromoteFooterView=":function(){return new l},"._MasterAlternativesPageSidebarAdView=":function(){return new w},"._SummaryPageHeaderAdView=":function(){return new S}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard-ad",type:"leaderboard_atf"}],e.prototype.conditionalAdUnits=[{selectorId:"sidebar-ad",type:"med_rect_atf"},{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e}.call(this),u=function(){class e extends R{}return e.prototype.Model=y,e.prototype.Rule=class extends R.prototype.Rule{template(){return template("._MasterAlternativesPageHeaderView")}},e}.call(this),p=function(){class e extends L{}return e.prototype.Model=A,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{}).prototype.rule={"._no-body=":function(){return""},"._reaction-dropdown-link=":function(){return""},"._has-slant-score=":function(){return""},"._option-link@href":function(){var e;return null!=(e=this.model.parents("masterOption"))?e.url():void 0},"._meta-option-rank@content=":function(){var e;return(e=this.model.parents("masterOption")).collection.indexOf(e)+1},"._SummaryPageOptionRecommendationView=":function(){return new d({collection:this.model.parents("masterOption").get("votes")})},"._SummaryPageOptionTabsView=":function(){return new m({model:this.model})},"._ImageCarouselView=":function(){return new c({collection:this.model.get("revision").get("images")})},"._SummaryPageSponsoredOptionView=":function(){return""}},e}.call(this),e}.call(this),f=function(){class e extends s{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=V,e.prototype.ItemView=p,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._MasterAlternativesPageOptionThreadView")}}).prototype.rule={"._meta-options-count@content":function(){return this.count()}},e}.call(this),e}.call(this),d=function(){class e extends k{}return e.prototype.Rule=class extends k.prototype.Rule{template(){return template("._MasterAlternativesPageOptionRecommendationView")}},e.prototype.events={"click ._upvote-link":function(e){},"click ._downvote-link":function(e){}},e}.call(this),g=function(){class e extends I{getParentOption(){return this.model.parents("source")}}return e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{}).prototype.rule={"._section-reaction-dropdown-link=":function(){return""},"._section-link@href":function(){var e;if(e=this.getParentOption())return new O(null!=e?e.url():void 0).fragment(this.model.get("id"))}},e}.call(this),e}.call(this),m=function(){class e extends M{getSpecs(){var e;return null!=(e=this.model.parents("masterOption"))?e.get("specs"):void 0}}return e.prototype.itemLimit=6,e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{}).prototype.rule={"._no-badge-class@class+":function(){return""},"._SummaryPageOptionTabsContentView=":function(){return new a({model:this.model,activeTabId:this.activeTabId||"all"})}},e}.call(this),e}.call(this),a=function(){class e extends T{getModels(){var e,t,n;return e=this.model.get("sections").models,(n=null!=(t=this.model.parents("masterOption"))?t.get("specs"):void 0)&&(e=e.concat(n)),e}getItemView(e){return this.isSection(e)?g:this.isSpecList(e)?super.getItemView(e):void 0}getSpecListView(){return h}}return e.prototype.Rule=class extends T.prototype.Rule{},e.prototype.getSpecs=m.prototype.getSpecs,e}.call(this),h=function(){class e extends P{}return e.prototype.Rule=function(){var e;return(e=class extends P.prototype.Rule{}).prototype.rule={"._specs-link@href":function(){var e;return null!=(e=new O(E(this.collection.parents("masterOption"))))?e.hash("specs"):void 0}},e}.call(this),e}.call(this),c=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{}).prototype.rule={"._ImageCarouselAddItemView=":function(){return""}},e}.call(this),e}.call(this),w=function(){class e extends i{}return e.prototype.adId="sidebar-ad",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={MasterAlternativesPageView:v,MasterAlternativesPageHeaderView:u,MasterAlternativesPageOptionItemView:p,MasterAlternativesPageOptionThreadView:f,MasterAlternativesPageOptionRecommendationView:d,MasterAlternativesPageSectionView:g,MasterAlternativesPageOptionTabsView:m,MasterAlternativesOptionTabsContentListView:a,MasterAlternativesPageOptionSpecListView:h,MasterAlternativesPageImageCarouselView:c,MasterAlternativesPageSidebarAdView:w}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../components/ad-view":93,"../components/image-carousel-view":106,"../components/join-tag-sidebar-view":110,"../components/lustre-ai-promote-footer-view":117,"../components/master-option-dropdown-view":121,"../lists/list-view":173,"../mixins/sticky-nav-mixin-view":189,"../models/master-option-view":198,"../pages/summary-page-view":248,"./page-view":241,moment:441,underscore:448,urijs:452}],236:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me,fe,ge,we=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};({BaseView:r}=e("../base-view")),({ListView:a}=e("../lists/list-view")),({SpecListView:le,SpecListItemView:se}=e("../components/spec-list-view")),({RecommendationView:te}=e("../components/recommendation-view")),({PopupView:ee}=e("../components/popup-view")),({RelatedProductListView:ne}=e("../components/related-product-list-view")),({PageView:Z}=e("./page-view")),({OptionView:X}=e("../models/option-view")),({OptionPageNavigationSidebarView:K,OptionPageSectionListView:J}=e("./option-page-view")),({MasterOptionPageSectionView:Y,MasterOptionPageQuestionView:W}=e("./master-option-page-view")),({JoinTagSidebarView:l}=e("../components/join-tag-sidebar-view")),({LustreAIPromoteFooterView:u}=e("../components/lustre-ai-promote-footer-view")),({StickySidebarPanelView:ae}=e("../components/sticky-sidebar-panel-view")),({AdView:o,AdSidebarAdView:i}=e("../components/ad-view")),({Comparison:s,Section:ie,Viewpoint:pe,MasterOption:Q,Topic:ue}=e("../../models")),({MasterOptionList:H,SectionList:oe,MasterOptionVoteList:G,TopicList:ce,SpecList:re}=e("../../collections")),({shortenNumber:ge,ordinalNumber:fe}=e("../../utils/transforms")),de=e("underscore"),me=e("moment"),he=function(e){var t,n,i;return n=e.at(0).get("topics"),t=e.at(1).get("topics"),i=n.filter(function(e){return t.some(function(t){return e.get("uuid")===t.get("uuid")})}),de.sortBy(i,function(e){return-e.get("optionsRecommendationCount")})},z=function(){class e extends Z{getSharedRelatedProducts(e){var t,n,i;return n=this.model.get("masters").at(0).get("related"),t=this.model.get("masters").at(1).get("related"),i=n.filter(function(n){return!de.contains(e,n.get("uuid"))&&t.some(function(e){return n.get("uuid")===e.get("uuid")})}),new H(i)}getOtherRelatedProducts(e){var t;return t=null,this.model.get("masters").forEach(function(e){return t?t.add(e.get("related").models,{silent:!0}):t=e.get("related").clone()}),t.chain().filter(function(t){return!de.contains(e,t.get("uuid"))}).sortBy(function(e){return-1*e.get("votes").meta("upvotes")}).value()}getMutualRelatedProducts(){var e,t,n;return e=this.model.get("masters").pluck("uuid"),(n=this.getSharedRelatedProducts(e)).length>ne.prototype.limit?n:(t=this.getOtherRelatedProducts(e),n.add(t,{silent:!0}),n)}getCachedSharedQuestions(){return null!=this.sharedQuestions?this.sharedQuestions:this.sharedQuestions=he(this.model.get("masters"))}getTopOption(){var e,t,n;return null!=this.topOption?this.topOption:(n=this.getCachedSharedQuestions(),e=this.model.get("masters").at(0).get("topics").findWhere({uuid:n[0].get("uuid")}).get("ranking"),t=this.model.get("masters").at(1).get("topics").findWhere({uuid:n[0].get("uuid")}).get("ranking"),this.topOption=e<t?this.model.get("masters").at(0):this.model.get("masters").at(1))}getBottomOption(){var e;return null!=this.bottomOption?this.bottomOption:(e=this.getTopOption(),this.model.get("masters").at(0)===e?this.bottomOption=this.model.get("masters").at(1):this.bottomOption=this.model.get("masters").at(0))}title(){var e,t,n,i;for(i=this.model.get("masters").at(0).get("source").get("revision").get("title"),e=0,t=(n=this.model.get("masters").slice(1)).length;e<t;e++)i+=` vs ${n[e].get("source").get("revision").get("title")} detailed comparison as of ${me().format("YYYY")}`;return super.title(i)}}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends Z.prototype.Rule{template(){return template("._MasterComparePageView")}}).prototype.rule={"._has-top-pro-description=":function(){var e;if(!(null!=(e=this.getTopOption().get("source").get("sections").findWhere({isCon:!1}))?e.get("revision").get("text"):void 0))return""},"._first-option-title=":function(){return this.model.get("masters").at(0).get("source").get("revision").get("title")},"._second-option-title=":function(){return this.model.get("masters").at(1).get("source").get("revision").get("title")},"._top-option-title=":function(){return this.getTopOption().get("source").get("revision").get("title")},"._bottom-option-title=":function(){return this.getBottomOption().get("source").get("revision").get("title")},"._top-ranking=":function(){return fe(this.getTopOption().get("topics").findWhere({uuid:this.getCachedSharedQuestions()[0].get("uuid")}).get("ranking"))},"._bottom-ranking=":function(){return fe(this.getBottomOption().get("topics").findWhere({uuid:this.getCachedSharedQuestions()[0].get("uuid")}).get("ranking"))},"._top-question-title=":function(){return this.getCachedSharedQuestions()[0].get("revision").get("title")},"._top-pro-description=":function(){return this.getTopOption().get("source").get("sections").findWhere({isCon:!1}).get("revision").get("text")},"._has-specs=":function(){if(!this.model.get("masters").some(function(e){return e.get("specs").length>0}))return""},"._MasterComparePageNavigationSidebarView=":function(){return new x({collection:this.model.get("masters")})},"._MasterComparePageTitleListView=":function(){return new N({collection:this.model.get("masters")})},"._MasterComparePageHeaderListView=":function(){return new v({collection:this.model.get("masters")})},"._MasterComparePageSpecListsView=":function(){return new q({collection:this.model.get("masters")})},"._MasterComparePageSectionsView=":function(){return new D({collection:this.model.get("masters")})},"._MasterComparePageQuestionsView=":function(){return new T({collection:this.model.get("masters")})},"._RelatedProductListView=":function(){return new ne({collection:this.getMutualRelatedProducts()})},"._LustreAIPromoteFooterView=":function(){return new u},"._MasterComparePageTopContentAdView=":function(){return new j}},e}.call(this),e.prototype.adUnits=[{selectorId:"top-content-ad",type:"leaderboard_atf"},{selectorId:"content-ad",type:"leaderboard_btf"}],e.prototype.conditionalAdUnits=[{selectorId:"pro-content-ad",type:"leaderboard_btf"},{selectorId:"sidebar-ad",type:"sky_atf"}],e}.call(this),x=function(){class e extends r{initialize(){return super.initialize(...arguments),ae.prototype.initialize.apply(this)}}return e.prototype.Collection=H,e.prototype.Model=null,e.prototype.Rule=function(){var e;return(e=class extends K.prototype.Rule{template(){return template("._MasterComparePageNavigationSidebarView")}}).prototype.rule={"._has-specs=":function(){if(!this.collection.some(function(e){return e.get("specs").length>0}))return""},"._MasterComparePageSidebarAdView=":function(){return new U},"._MasterComparePageJoinTagSidebarView=":function(){return new _({collection:this.collection.at(0).get("tags")})}},e}.call(this),e.prototype.events=ae.prototype.events,e}.call(this),V=function(){class e extends X{}return e.prototype.Rule=function(){var e;return(e=class extends X.prototype.Rule{}).prototype.rule={"._master-option-link@href":function(){return this.model.parent.url()}},e}.call(this),e}.call(this),F=function(){class e extends V{getComparedOption(){var e;return e=this.model.parent.get("uuid"),this.model.parents("masters").find(function(t){return t.get("uuid")!==e})}}return e.prototype.Model=pe,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._MasterComparePageTitleView")}}).prototype.rule={"._has-other-compare-options=":function(){if(!(this.getComparedOption().get("related").length>1))return""},"._no-other-compare-options=":function(){if(this.getComparedOption().get("related").length>1)return""},"._not-last-item=":function(){var e;if(0===(e=this.model.parent).collection.indexOf(e))return""}},e}.call(this),e.prototype.events={"click ._select-option-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new m({model:this.getComparedOption(),masterOptionUuid:this.model.parent.get("uuid"),follows:$(e.currentTarget).find("._dropdown-target"),align:"center",anchor:"below",cover:!1,relative:!1})}},e}.call(this),N=function(){class e extends a{getItems(){var e;return e=super.getItems(...arguments),de.map(e,function(e){return e.get("source")})}}return e.prototype.Collection=H,e.prototype.ItemView=F,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageTitleListView")}},e}.call(this),m=function(){class e extends ee{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._MasterComparePageComparedOptionsDropdownView")}}).prototype.rule={"._option-title=":function(){return this.model.get("source").get("revision").get("title")},"._MasterComparePageComparedOptionListView=":function(){return new d({collection:this.model.get("related"),masterOptionUuid:this.options.masterOptionUuid})}},e}.call(this),e}.call(this),h=function(){class e extends V{}return e.prototype.Model=pe,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._MasterComparePageComparedOptionView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._option-compare-link@href":function(){return this.model.parent.get("compareURL")},"._option-upvote-count=":function(){return ge(this.model.parent.get("votes").meta("upvotes")||0)}},e}.call(this),e}.call(this),d=function(){class e extends a{constructor(){super(...arguments),this.filter=this.filter.bind(this)}filter(t){return we(this,e),t.get("uuid")!==this.options.masterOptionUuid}getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=H,e.prototype.ItemView=h,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageComparedOptionListView")}},e}.call(this),y=function(){class e extends V{}return e.prototype.Model=pe,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._MasterComparePageHeaderView")}}).prototype.rule={"._meta-rating-count@content":function(){var e;return(null!=(e=this.model.parent)?e.getVotesCount():void 0)||0},"._meta-rating-value@content":function(){var e;return(null!=(e=this.model.parent)?e.getRatingValue():void 0)||0},"._MasterComparePageRecommendationView=":function(){return new M({collection:this.model.parent.get("votes")})}},e}.call(this),e}.call(this),v=function(){class e extends a{getItems(){var e;return e=super.getItems(...arguments),de.map(e,function(e){return e.get("source")})}}return e.prototype.Collection=H,e.prototype.ItemView=y,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageHeaderListView")}},e}.call(this),M=function(){class e extends te{}return e.prototype.Collection=G,e.prototype.Rule=class extends te.prototype.Rule{template(){return template("._MasterComparePageRecommendationView")}},e}.call(this),B=function(){class e extends a{}return e.prototype.Collection=re,e.prototype.ItemView=se,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageSpecListView")}},e}.call(this),q=function(){class e extends le{initialize(){return this.sortSpecs(),super.initialize(...arguments)}setCollapsedHeight(){var e,t;return t=this.collapsedItemCount,e=this.$(`.SpecList-Item:nth-child(${t})`).map(function(){return($(this).position().top||0)+($(this).prop("scrollHeight")||0)}),this.collapsedHeight=de.max(e)||""}getItems(){return super.getItems(...arguments).map(function(e){return e.get("specs")})}sortSpecs(){var e,t,n,i,o,r,s,l,a,u,c,p;for(n=null!=(l=this.collection.at(0))?l.get("specs"):void 0,u=null!=(a=this.collection.at(1))?a.get("specs"):void 0,n.each(function(e){return e.set({masterIndexForSort:0},{silent:!0})}),u.each(function(e){return e.set({masterIndexForSort:1},{silent:!0})}),e=n.clone().add(u.models,{silent:!0}),t=e.countBy("key"),r=[],s=[],i=0,o=(c=e.sortBy(e=>{return`${this.collection.length-t[e.get("key")]}${e.get("key")}`})).length;i<o;i++)0===(p=c[i]).get("masterIndexForSort")?r.push(p):s.push(p);return n.reset(r,{silent:!0}),u.reset(s,{silent:!0})}}return e.prototype.Collection=H,e.prototype.ItemView=B,e.prototype.collapsedItemCount=4,e.prototype.Rule=function(){var e;return(e=class extends le.prototype.Rule{template(){return template("._MasterComparePageSpecListsView")}}).prototype.rule={"._has-more-specs=":function(){if(!this.collection.some(e=>e.get("specs").length>this.collapsedItemCount))return""}},e}.call(this),e}.call(this),T=function(){class e extends r{getCachedSharedQuestions(){return null!=this.sharedQuestions?this.sharedQuestions:this.sharedQuestions=he(this.collection)}}return e.prototype.Collection=H,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._MasterComparePageQuestionsView")}}).prototype.rule={"._has-other-questions=":function(){if(!this.collection.some(e=>e.get("topics").length>this.getCachedSharedQuestions().length))return""},"._MasterComparePageCommonQuestionListView=":function(){return new c({collection:this.collection.at(0).get("topics"),sharedQuestions:this.getCachedSharedQuestions()})},"._MasterComparePageOtherQuestionsListView=":function(){return new C({collection:this.collection,sharedQuestions:this.getCachedSharedQuestions()})}},e}.call(this),e}.call(this),p=function(){class e extends W{getQuestionUuid(){return this.model.get("uuid")}getComparedQuestionList(){var e;return null!=(e=this.model.parents("masters").at(1))?e.get("topics"):void 0}update(){return this.cachedData={comparedQuestion:this.getComparedQuestionList().find(e=>e.get("uuid")===this.getQuestionUuid())},super.update(...arguments),delete this.cachedData}}return e.prototype.Model=ue,e.prototype.Rule=function(){var e;return(e=class extends W.prototype.Rule{template(){return template("._MasterComparePageCommonQuestionView")}}).prototype.rule={"._is-trending-second=":function(){if(!this.cachedData.comparedQuestion.get("trending"))return""},"._not-trending-second=":function(){if(this.cachedData.comparedQuestion.get("trending"))return""},"._rank-level-second@class+":function(){var e;return e=this.cachedData.comparedQuestion.get("ranking"),this.getRankingClass(e)},"._option-rank-in-question-second=":function(){return this.cachedData.comparedQuestion.get("ranking")}},e}.call(this),e}.call(this),c=function(){class e extends a{constructor(){super(...arguments),this.filter=this.filter.bind(this)}createViewOptions(){return{sharedQuestions:this.options.sharedQuestions}}filter(t){return we(this,e),-1!==de.findIndex(this.options.sharedQuestions,function(e){return e.get("uuid")===t.get("uuid")})}sortBy(e){return-e.get("optionsRecommendationCount")}}return e.prototype.Collection=ce,e.prototype.ItemView=p,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageCommonQuestionListView")}},e}.call(this),b=function(){class e extends W{}return e.prototype.Rule=class extends W.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionView")}},e}.call(this),R=function(){class e extends a{constructor(){super(...arguments),this.filter=this.filter.bind(this)}filter(t){return we(this,e),-1===de.findIndex(this.options.sharedQuestions,function(e){return e.get("uuid")===t.get("uuid")})}}return e.prototype.Collection=ce,e.prototype.ItemView=b,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionListView")}},e}.call(this),C=function(){class e extends a{getItems(){var e;return e=super.getItems(...arguments),de.map(e,function(e){return e.get("topics")})}createViewOptions(){return{sharedQuestions:this.options.sharedQuestions}}}return e.prototype.Collection=H,e.prototype.ItemView=R,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionsListView")}},e}.call(this),D=function(){class e extends r{setActiveList(e){return this.$("._tabbed-list").each(function(t,n){var i;return(i=$(n.children[e])).siblings().removeClass("active"),i.addClass("active")})}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._tab:first-child").addClass("active"),this.setActiveList(0),this.getChildrenByView(E).forEach(e=>this.listenTo(e,"select",e=>this.setActiveList(e)))}}return e.prototype.Collection=H,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._MasterComparePageSectionsView")}}).prototype.rule={"._has-3-pros":function(){var e;if(e=this.collection.map(function(e){return e.get("source").get("sections")}),!de.any(e,function(e){return e.countBy(function(e){return e.get("isCon")?"con":"pro"}).pro>=3}))return""},"._MasterComparePageSectionsTabListView=":function(){return new A({collection:this.collection})},"._MasterComparePageProsListView=":function(){return new P({collection:this.collection})},"._MasterComparePageConsListView=":function(){return new g({collection:this.collection})},"._MasterComparePageContentAdView=":function(){return new w},"._MasterComparePageProSectionContentAdView=":function(){return new k}},e}.call(this),e}.call(this),E=function(){class e extends X{}return e.prototype.Model=pe,e.prototype.Rule=class extends X.prototype.Rule{template(){return template("._MasterComparePageSectionsTabView")}},e.prototype.events={"click ._set-active-tab-link":function(e){var t;return this.$el.siblings().removeClass("active"),this.$el.addClass("active"),t=this.$el.index(),this.trigger("select",t)}},e}.call(this),A=function(){class e extends a{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=H,e.prototype.ItemView=E,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._MasterComparePageSectionsTabListView")}},e}.call(this),I=function(){class e extends Y{}return e.prototype.Rule=class extends Y.prototype.Rule{template(){return template("._MasterComparePageSectionView")}},e}.call(this),L=function(){class e extends J{}return e.prototype.Collection=oe,e.prototype.ItemView=I,e.prototype.Rule=class extends J.prototype.Rule{},e}.call(this),S=function(){class e extends L{filter(e){return!e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._MasterComparePageProListView")}},e}.call(this),f=function(){class e extends L{filter(e){return e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends L.prototype.Rule{template(){return template("._MasterComparePageConListView")}},e}.call(this),O=function(){class e extends a{getItems(){var e;return e=super.getItems(...arguments),de.map(e,function(e){return e.get("source").get("sections")})}}return e.prototype.Collection=H,e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),P=function(){class e extends O{}return e.prototype.ItemView=S,e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._MasterComparePageProsListView")}},e}.call(this),g=function(){class e extends O{}return e.prototype.ItemView=f,e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._MasterComparePageConsListView")}},e}.call(this),_=function(){class e extends l{initialize(){return JoinTagBannerView.prototype.initialize.apply(this)}}return e.prototype.Rule=class extends l.prototype.Rule{},e.prototype.events={},e}.call(this),w=function(){class e extends o{}return e.prototype.type="content",e.prototype.adId="content-ad",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MasterComparePageContentAdView")}},e}.call(this),k=function(){class e extends w{}return e.prototype.adId="pro-content-ad",e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),j=function(){class e extends o{}return e.prototype.type="content",e.prototype.adId="top-content-ad",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MasterComparePageTopContentAdView")}},e}.call(this),U=function(){class e extends i{}return e.prototype.adId="sidebar-ad",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={MasterComparePageView:z,MasterComparePageNavigationSidebarView:x,MasterComparePageOptionView:V,MasterComparePageTitleView:F,MasterComparePageTitleListView:N,MasterComparePageComparedOptionsDropdownView:m,MasterComparePageComparedOptionView:h,MasterComparePageComparedOptionListView:d,MasterComparePageHeaderView:y,MasterComparePageHeaderListView:v,MasterComparePageSpecListView:B,MasterComparePageSpecListsView:q,MasterComparePageSectionsView:D,MasterComparePageSectionsTabView:E,MasterComparePageSectionsTabListView:A,MasterComparePageQuestionsView:T,MasterComparePageCommonQuestionView:p,MasterComparePageCommonQuestionListView:c,MasterComparePageOtherQuestionView:b,MasterComparePageOtherQuestionListView:R,MasterComparePageOtherQuestionsListView:C,MasterComparePageSectionsListView:O,MasterComparePageProsListView:P,MasterComparePageConsListView:g,MasterComparePageSectionListView:L,MasterComparePageProListView:S,MasterComparePageConListView:f,MasterComparePageSectionView:I,MasterComparePageRecommendationView:M,MasterComparePageJoinTagSidebarView:_,MasterComparePageContentAdView:w,MasterComparePageProSectionContentAdView:k,MasterComparePageTopContentAdView:j,MasterComparePageSidebarAdView:U}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/ad-view":93,"../components/join-tag-sidebar-view":110,"../components/lustre-ai-promote-footer-view":117,"../components/popup-view":132,"../components/recommendation-view":150,"../components/related-product-list-view":151,"../components/spec-list-view":161,"../components/sticky-sidebar-panel-view":163,"../lists/list-view":173,"../models/option-view":200,"./master-option-page-view":237,"./option-page-view":240,"./page-view":241,moment:441,underscore:448}],237:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H;e("underscore"),({BaseView:o}=e("../base-view")),({PageView:E}=e("./page-view")),({OptionPageNavigationSidebarView:L,OptionPageSectionView:O,OptionPageSectionListView:I,OptionPageImageHeaderView:M}=e("./option-page-view")),({OptionView:A}=e("../models/option-view")),({QuestionView:$}=e("../models/question-view")),({ImageGalleryView:l,ImageGalleryThumbsCarouselView:s}=e("../components/image-gallery-view")),({JoinTagSidebarView:u}=e("../components/join-tag-sidebar-view")),({LustreAIPromoteFooterView:p}=e("../components/lustre-ai-promote-footer-view")),({CommonlyComparedView:r}=e("../components/commonly-compared-view")),({RelatedProductListView:U}=e("../components/related-product-list-view")),({SpecListView:j}=e("../components/spec-list-view")),({SpecEditorModalView:F}=e("../components/spec-editor-modal-view")),({AdView:i}=e("../components/ad-view")),({QuestionListView:D}=e("../lists/question-list-view")),({SidebarTagListView:N}=e("../lists/sidebar-tag-list-view")),({ListView:c}=e("../lists/list-view")),({MasterOption:d,Viewpoint:H,Section:B,Topic:z}=e("../../models")),({ImageList:a,SectionList:q,TopicList:Q,MasterOptionList:h}=e("../../collections")),T=function(){class e extends E{title(){return super.title(`${this.model.get("source").get("revision").get("title")} Review`)}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends E.prototype.Rule{template(){return template("._MasterOptionPageView")}}).prototype.rule={"._MasterOptionPageNavigationSidebarView=":function(){return new v({model:this.model})},"._MasterOptionPageSidebarView=":function(){return new P({model:this.model})},"._MasterOptionPageOptionView=":function(){return new y({model:this.model.get("source")})},"._RelatedProductListView=":function(){return new U({collection:this.model.get("related")})},"._LustreAIPromoteFooterView=":function(){return new p},"._MasterOptionPageFooterAdView=":function(){return new m}},e}.call(this),e.prototype.adUnits=[{selectorId:"footer-ad",type:"leaderboard_btf"}],e}.call(this),y=function(){class e extends A{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageOptionView")}}).prototype.rule={"._has-pros=":function(){if(!this.model.get("sections").some(function(e){return!e.get("isCon")&&!e.isMarked()}))return""},"._has-cons=":function(){if(!this.model.get("sections").some(function(e){return e.get("isCon")&&!e.isMarked()}))return""},"._has-specs=":function(){if(!(this.model.parent.get("specs").length>0))return""},"._no-specs=":function(){if(this.model.parent.get("specs").length>0)return""},"._has-questions=":function(){if(!(this.model.parent.get("topics").length>0))return""},"._has-related-products=":function(){if(!(this.model.parent.get("related").length>0))return""},"._is-valid-comparison=":function(){if(!(this.model.parent.get("topics").length>0))return""},"._upvote-count=":function(){var e;return null!=(e=this.model.parent.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.parent.get("votes").meta("downvotes"))?e:0},"._meta-rating-count@content":function(){var e;return(null!=(e=this.model.parent)?e.getVotesCount():void 0)||0},"._meta-rating-value@content":function(){var e;return(null!=(e=this.model.parent)?e.getRatingValue():void 0)||0},"._SpecListView=":function(){return new j({collection:this.model.parent.get("specs")})},"._MasterOptionPageImagesView=":function(){return new w({model:this.model})},"._MasterOptionPageQuestionRankView=":function(){return new V({collection:this.model.parent.get("topics")})},"._MasterOptionPageSectionProListView=":function(){return new S({collection:this.model.get("sections")})},"._MasterOptionPageSectionConListView=":function(){return new b({collection:this.model.get("sections")})},"._CommonlyComparedView=":function(){return new r({model:this.model.parent})}},e}.call(this),e.prototype.events={"click ._edit-specs-link":function(){return new F({model:this.model.parents("masterOption")})}},e}.call(this),k=function(){class e extends O{}return e.prototype.Model=B,e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._MasterOptionPageSectionView")}},e}.call(this),C=function(){class e extends I{}return e.prototype.Collection=q,e.prototype.ItemView=k,e.prototype.Rule=class extends I.prototype.Rule{},e}.call(this),S=function(){class e extends C{filter(e){return!e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MasterOptionPageSectionProListView")}},e}.call(this),b=function(){class e extends C{filter(e){return e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MasterOptionPageSectionConListView")}},e}.call(this),v=function(){class e extends L{getOption(){return this.model.get("source")}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._MasterOptionPageNavigationSidebarView")}}).prototype.rule={"._upvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("downvotes"))?e:0},"._has-site-link=":function(){if(!this.model.get("source").get("revision").get("siteURL"))return""},"._option-site-link":{"@href":function(){return this.model.get("source").get("revision").get("siteURL")},"@target":"_blank","@rel":"nofollow noopener"},"._no-price=":function(){if(this.model.get("source").get("revision").get("price"))return""},"._has-price=":function(){if(!this.model.get("source").get("revision").get("price"))return""},"._option-price=":function(){return this.model.get("source").get("revision").get("price")},"._has-pros=":function(){if(!this.model.get("source").get("sections").some(function(e){return!e.get("isCon")&&!e.isMarked()}))return""},"._has-cons=":function(){if(!this.model.get("source").get("sections").some(function(e){return e.get("isCon")&&!e.isMarked()}))return""},"._has-specs=":function(){if(!(this.model.get("specs").length>0))return""},"._has-questions=":function(){if(!(this.model.get("topics").length>0))return""}},e}.call(this),e}.call(this),P=function(){class e extends A{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageSidebarView")}}).prototype.rule={"._has-tags=":function(){if(!(this.model.get("tags").length>0))return""},"._has-related-products=":function(){if(!(this.model.get("related").length>0))return""},"._is-valid-comparison=":function(){if(!(this.model.get("topics").length>0))return""},"._JoinTagSidebarView=":function(){return new u({collection:this.model.get("tags")})},"._SidebarTagListView=":function(){return new N({collection:this.model.get("tags")})},"._CommonlyComparedView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),w=function(){class e extends A{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageImagesView")}}).prototype.rule={"._ImageGalleryView=":function(){return new g({collection:this.model.get("revision").get("images")})}},e}.call(this),e}.call(this),g=function(){class e extends l{}return e.prototype.Collection=a,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._has-thumbnails=":function(){if(!(this.collection.length>1))return""},"._ImageGalleryThumbsCarouselView=":function(){return new f({collection:this.collection})}},e}.call(this),e}.call(this),f=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{}).prototype.rule={"._ImageGalleryThumbsCarouselAddItemView=":""},e}.call(this),e}.call(this),R=function(){class e extends ${getRankingClass(e){return 1===e?"first":2===e?"second":3===e?"third":4===e?"fourth":4<e&&e<=10?"middle":"low"}}return e.prototype.Model=z,e.prototype.Rule=function(){var e;return(e=class extends $.prototype.Rule{template(){return template("._MasterOptionPageQuestionView")}}).prototype.rule={"._is-trending=":function(){if(!this.model.get("trending"))return""},"._not-trending=":function(){if(this.model.get("trending"))return""},"._rank-level@class+":function(){var e;return e=this.model.get("ranking"),this.getRankingClass(e)},"._option-rank-in-question=":function(){return this.model.get("ranking")}},e}.call(this),e}.call(this),_=function(){class e extends D{filter(e){var t;return!(t=e.get("reactionSet")).get("duplicate").count()&&!t.get("needsImprovement").count()&&!t.get("notAFit").count()}}return e.prototype.Collection=Q,e.prototype.ItemView=R,e.prototype.limit=4,e.prototype.Rule=class extends D.prototype.Rule{template(){return template("._MasterOptionPageQuestionListView")}},e}.call(this),x=function(){class e extends _{}return e.prototype.offset=_.prototype.limit,e.prototype.limit=null,e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._MasterOptionPageQuestionMoreListView")}},e}.call(this),V=function(){class e extends o{}return e.prototype.Collection=Q,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._MasterOptionPageQuestionRankView")}}).prototype.rule={"._has-more=":function(){if(!(this.collection.length>_.prototype.limit))return""},"._MasterOptionPageQuestionListView=":function(){return new _({collection:this.collection})},"._MasterOptionPageQuestionMoreListView=":function(){return new x({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._view-all-link":function(e){var t,n;return t=(n=this.$(".OptionDetailed-QuestionList-MoreList")).prop("scrollHeight"),n.css("max-height",t),this.$("._MasterOptionPageQuestionListView").addClass("expanded"),this.$(".ExpandListButton._view-all-link").addClass("hidden"),this.$(".ExpandListButton._view-less-link").removeClass("hidden")},"click ._view-less-link":function(e){return this.$(".OptionDetailed-QuestionList-MoreList").css("max-height",0),this.$("._MasterOptionPageQuestionListView").removeClass("expanded"),this.$(".ExpandListButton._view-less-link").addClass("hidden"),this.$(".ExpandListButton._view-all-link").removeClass("hidden")}},e}.call(this),m=function(){class e extends i{}return e.prototype.type="footer",e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._MasterOptionPageFooterAdView")}},e}.call(this),t.exports={MasterOptionPageView:T,MasterOptionPageOptionView:y,MasterOptionPageSectionView:k,MasterOptionPageSectionListView:C,MasterOptionPageSectionProListView:S,MasterOptionPageSectionConListView:b,MasterOptionPageNavigationSidebarView:v,MasterOptionPageSidebarView:P,MasterOptionPageImagesView:w,MasterOptionPageImageGalleryView:g,MasterOptionPageImageGalleryThumbsCarouselView:f,MasterOptionPageQuestionView:R,MasterOptionPageQuestionListView:_,MasterOptionPageQuestionMoreListView:x,MasterOptionPageQuestionRankView:V,MasterOptionPageFooterAdView:m}},{"../../collections":2,"../../models":34,"../base-view":91,"../components/ad-view":93,"../components/commonly-compared-view":97,"../components/image-gallery-view":107,"../components/join-tag-sidebar-view":110,"../components/lustre-ai-promote-footer-view":117,"../components/related-product-list-view":151,"../components/spec-editor-modal-view":160,"../components/spec-list-view":161,"../lists/list-view":173,"../lists/question-list-view":176,"../lists/sidebar-tag-list-view":181,"../models/option-view":200,"../models/question-view":201,"./option-page-view":240,"./page-view":241,underscore:448}],238:[function(e,t,n){var i,o;({PageView:o}=e("./page-view")),i=function(){class e extends o{title(){return super.title("404 - Page Not Found")}}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._NotFoundPageView")}},e}.call(this),t.exports={NotFoundPageView:i}},{"./page-view":241}],239:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h;h=e("underscore"),({PageView:p}=e("./page-view")),({ThreadView:d}=e("../threads/thread-view")),({ListView:i}=e("../lists/list-view")),({NotificationView:r}=e("../components/notification-view")),({NotificationList:o}=e("../../collections")),l=function(){class e extends p{initialize(){if(this.setPermissions(),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return h.defer(()=>this.clearNotifications())}clearNotifications(){var e;if(window.currentUser.get("username")&&!this.notificationsCleared&&this.collection.meta("unreadCount"))return e={data:"{}",success:e=>(this.notificationsCleared=!0,this.collection.parse(e),window.currentUser.get("notifications").parse(e),window.currentUser.get("notifications").trigger("clear"))},this.collection.sync("update",this.collection,e)}title(){return super.title("Notifications")}}return e.prototype.Collection=o,e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._NotificationsPageView")}}).prototype.rule={"._NotificationsThreadView=":function(){return new u({collection:this.collection})}},e}.call(this),e}.call(this),u=function(){class e extends d{}return e.prototype.Collection=o,e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._NotificationsThreadView")}}).prototype.rule={"._NotificationsUnreadListView=":function(){return new c({collection:this.collection})},"._NotificationsReadListView=":function(){return new a({collection:this.collection})}},e}.call(this),e}.call(this),s=function(){class e extends i{getItems(){return super.getItems(...arguments).map(function(e){return e.get("event")})}}return e.prototype.Collection=o,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-unread=":function(){if(!this.collection.some(function(e){return!e.get("isread")}))return""}},e}.call(this),e}.call(this),c=function(){class e extends s{filter(e){return!e.get("isread")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._NotificationsUnreadListView")}},e}.call(this),a=function(){class e extends s{filter(e){return e.get("isread")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._NotificationsReadListView")}},e}.call(this),t.exports={NotificationsPageView:l,NotificationsThreadView:u,NotificationsListView:s,NotificationsUnreadListView:c,NotificationsReadListView:a}},{"../../collections":2,"../components/notification-view":126,"../lists/list-view":173,"../threads/thread-view":258,"./page-view":241,underscore:448}],240:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me,fe,ge;de=e("underscore"),({improveURL:he}=e("../../utils/transforms")),({BaseView:o}=e("../base-view")),({PostPageView:j}=e("./post-page-view")),({OptionView:F}=e("../models/option-view")),({SectionView:ne}=e("../models/section-view")),({CommentListView:l,CommentListAddCommentView:s}=e("../lists/comment-list-view")),({OptionListView:w}=e("../lists/option-list-view")),({SectionListView:ee}=e("../lists/section-list-view")),({MyRecommendationListView:f,MyRecommendationItemView:m}=e("../lists/my-recommendation-list-view")),({CommunityRecommendationsView:a}=e("../threads/community-recommendation-thread-view")),({ContributorsView:u}=e("../components/contributors-view")),({ImageGalleryView:c}=e("../components/image-gallery-view")),({JoinTagSidebarView:p}=e("../components/join-tag-sidebar-view")),({MultiUserView:h}=e("../components/multi-user-view")),({SlantScoreInteractableBadgeView:re}=e("../components/slant-score-view")),({QuestionHeaderView:z}=e("../components/question-header-view")),({ReactionButtonSetView:W}=e("../components/reaction-button-set-view")),({RecommendationDrawerAgreeView:G,RecommendationDrawerDisagreeView:K}=e("../components/recommendation-drawer-view")),({RecommendationView:X}=e("../components/recommendation-view")),({SidebarAsyncOptionActivityView:ie}=e("../components/sidebar-activity-view")),({SidebarRelatedQuestionListView:oe}=e("../lists/sidebar-related-question-list-view")),({SpecEditorModalView:se}=e("../components/spec-editor-modal-view")),({SpecListView:le}=e("../components/spec-list-view")),({StickySidebarPanelView:ae}=e("../components/sticky-sidebar-panel-view")),({ToasterView:pe,ToastCollapsedView:ue,ToastSectionView:ce}=e("../components/toaster-view")),({ReactionBannerOptionFlagView:Q,ReactionBannerOptionOutOfDateView:H}=e("../components/reaction-banner-view")),({AdSidebarAdView:i}=e("../../views-v2/components/ad-view")),({LustreAIPromoteFooterView:d}=e("../components/lustre-ai-promote-footer-view")),({OptionModel:v,SectionModel:te,OptionPageQuery:P}=e("../../models/index")),({OptionCollection:g,SectionCollection:Z,RecCollection:Y,CommentCollection:r}=e("../../collections/index")),({RecommendationPanelManagerMixinView:J}=e("../mixins/recommendation-panel-manager-mixin-view")),({shortenNumber:fe,splitUnit:ge}=e("../../utils/transforms")),me=e("moment"),N=function(){class e extends j{title(){var e,t,n;return t=this.model.get("title"),n=null!=(e=this.getCurrentOption())?e.get("title"):void 0,super.title(`${n} - ${t}`)}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return"true"===new URI(window.location.toString()).search(!0).openSpecEditorModal?de.defer(()=>new se({model:this.getCurrentOption().getModel("product_id")})):void 0}getCurrentOption(){return this.model.getModel("option_id")}}return e.prototype.Model=P,e.prototype.Rule=function(){var e;return(e=class extends j.prototype.Rule{template(){return template("._OptionPageView")}}).prototype.rule={"._QuestionHeaderView=":function(){return new z({model:this.getCurrentOption().getModel("question_id")})},"._LustreAIPromoteFooterView=":function(){return new d},"._OptionPageOptionView=":function(){return new C({model:this.getCurrentOption()})},"._OptionPageNavigationSidebarView=":function(){return new b({model:this.getCurrentOption()})},"._OptionPageSidebarView=":function(){return new B({model:this.getCurrentOption()})},"._OptionPageToasterView=":function(){return new q({collection:this.getCurrentOption().get("option_section_ids"),openToaster:this.options.openToaster})}},e}.call(this),e.prototype.conditionalAdUnits=[{selectorId:"sidebar",type:"med_rect_atf"},{selectorId:"sidebar2",type:"med_rect_btf"},{selectorId:"sidebar-left",type:"sky_atf"}],e}.call(this),C=function(){class e extends F{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.managePanelForOption(this.model)}}return e.prototype.Model=v,e.prototype.mixin(J),e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._OptionPageOptionView")}}).prototype.rule={"._OptionPageImageGalleryView=":function(){return new x({model:this.model})},"._OptionPageCommentsView=":function(){return new y({model:this.model})},"._SpecListView=":function(){return new le({model:this.model})},"._OptionPageSectionProsListView=":function(){return new O({collection:this.model.getCollection("option_section_ids")})},"._OptionPageSectionConsListView=":function(){return new L({collection:this.model.getCollection("option_section_ids")})},"._OptionPageRecommendationView=":function(){return new T({collection:this.model.getCollection("option_rec_ids")})},"._OptionPageFlaggedSectionListView=":function(){return new _({collection:this.model.getCollection("option_section_ids")})},"._OptionPageOutOfDateSectionListView=":function(){return new k({collection:this.model.getCollection("option_section_ids")})},"._OptionPageOptionVoteView=":function(){return new S({model:this.model})},"._RecommendationDrawerAgreeView=":function(){return new G({model:this.model})},"._RecommendationDrawerDisagreeView=":function(){return new K({model:this.model})},"._ReactionBannerOptionFlagView=":function(){return new Q({collection:this.model.getCollection("option_reaction_ids")})},"._ReactionBannerOptionOutOfDateView=":function(){return new H({collection:this.model.getCollection("option_reaction_ids")})},"._SlantScoreInteractableBadgeView=":function(){return new re({model:this.model})}},e}.call(this),e.prototype.events={"click ._edit-specs-link":function(){return new se({model:this.model.getModel("product_id")})}},e}.call(this),S=function(){class e extends X{}return e.prototype.Rule=class extends X.prototype.Rule{template(){return template("._OptionPageOptionVoteView")}},e}.call(this),B=function(){class e extends F{initialize(){return super.initialize(...arguments),this.listenTo(this.model.getCollection("option_reaction_ids"),"update",function(){return this.update()})}}return e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._OptionPageSidebarView")}}).prototype.rule={"._option-upvote-count=":function(){var e;return ge(fe((null!=(e=this.model.get("option_ranking_obj"))?e.rec_count_up:void 0)||0),0).value},"._option-upvote-count-unit=":function(){var e;return ge(fe((null!=(e=this.model.get("option_ranking_obj"))?e.rec_count_up:void 0)||0),0).unit},"._tree-edit-count=":function(){return ge(fe(this.model.get("treeUpdatesCount"),0)).value},"._tree-edit-count-unit=":function(){return ge(fe(this.model.get("treeUpdatesCount"),0)).unit},"._update-time-ago-value=":function(){var e;return e=me(new Date(this.model.get("updated_timestamp")),null,"en-abbr").fromNow(!0),ge(e).value},"._update-time-ago-unit=":function(){var e;return e=me(new Date(this.model.get("updated_timestamp")),null,"en-abbr").fromNow(!0),ge(e).unit},"._datetime@datetime":function(){return new Date(this.model.get("updated_timestamp")).toISOString()},"._OptionPageSidebarOptionListView=":function(){return new D({collection:this.model.getModel("question_id").getCollection("question_option_ids")})},"._ContributorsView=":function(){return new u({collection:this.model.get("users")})},"._SidebarAsyncActivityView=":function(){return new ie({collection:this.model.getModel("question_id")})},"._SidebarRelatedQuestionListView=":function(){var e,t;return t=null!=(e=this.model.getModel("question_id"))?e.getRelatedQuestionsURL():void 0,new oe({ajax:t})},"._OptionPageSidebarAdView=":function(){return new E},"._OptionPageSidebarRelatedQuestionsAdView=":function(){return new U},"._JoinTagSidebarView=":function(){return new p({collection:this.model.getModel("question_id").getCollection("question_tags_ids")})}},e}.call(this),e}.call(this),$=function(){class e extends F{}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._OptionPageSidebarOptionView")}}).prototype.rule={"._is-selected@class+":function(){if(this.model.get("selected"))return"selected"}},e}.call(this),e}.call(this),D=function(){class e extends w{}return e.prototype.Collection=g,e.prototype.ItemView=$,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._OptionPageSidebarOptionListView")}},e}.call(this),b=function(){class e extends F{initialize(){if(super.initialize(...arguments),ae.prototype.initialize.apply(this),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("votes"),"vote",this.update)}hasRecs(){return this.hasCommunityRecommendations()||this.model.get("votes").any(function(e){return e.isVoted()})}hasCommunityRecommendations(){return this.model.get("communityRecommendations").count()&&this.model.get("communityRecommendations").any(function(e){return e.isVoted()&&("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)!==e.get("user").get("username")})}}return e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._OptionPageNavigationSidebarView")}}).prototype.rule={"._has-recs=":function(){if(!this.hasRecs())return""},"._OptionPageLeftSidebarAdView=":function(){return new V}},e}.call(this),e.prototype.events=ae.prototype.events,e}.call(this),A=function(){class e extends ne{initialize(){if(super.initialize(...arguments),this.isCommentsCollapsed=!0,"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"login",()=>this.$("._has-logged-user").addClass("loggedIn")),this.listenTo(window.currentUser,"logout",()=>this.$("._has-logged-user").removeClass("loggedIn")),de.defer(()=>{var e;if(null!=(e=window.currentUser)?e.get("username"):void 0)return this.$("._has-logged-user").addClass("loggedIn")})}toggleSectionComments(){var e;return this.isCommentsCollapsed=!this.isCommentsCollapsed,null!=(e=this.getChildrenByView(M)[0])&&e.toggle(),this.isCommentsCollapsed?(this.$("._section-toggle-comments-link").removeClass("selected"),analytics.track("Section Comments Collapsed")):(this.$("._section-toggle-comments-link").addClass("selected"),analytics.track("Section Comments Expanded"))}}return e.prototype.Model=te,e.prototype.Rule=function(){var e;return(e=class extends ne.prototype.Rule{template(){return template("._OptionPageSectionView")}}).prototype.rule={"._has-logged-user@class+":function(){var e;if("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2)?e.get("username"):void 0)return"loggedIn"},"._OptionPageSectionCommentsView=":function(){return new M({collection:this.model.getCollection("section_comment_ids")})},"._ReactionButtonSetView=":function(){return new W({collection:this.model.getCollection("section_reaction_ids")})},"._MultiUserView=":function(){return new h({collection:this.model.getCollection("section_contrib_user_ids")})}},e}.call(this),e.prototype.events={"click ._section-toggle-comments-link":function(e){return this.toggleSectionComments()}},e}.call(this),I=function(){class e extends ee{filter(e){return!e.isMarked()}}return e.prototype.Collection=Z,e.prototype.ItemView=A,e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._OptionPageSectionListView")}}).prototype.rule={"._is-indented@class+":function(){if(de.filter(this.collection.models,this.filter,this).length)return"avatarIndent"}},e}.call(this),e}.call(this),O=function(){class e extends I{filter(e){return"Pro"===e.get("section_type")&&super.filter(...arguments)}}return e.prototype.Rule=class extends I.prototype.Rule{template(){return template("._OptionPageSectionProsListView")}},e}.call(this),L=function(){class e extends I{filter(e){return"Con"===e.get("section_type")&&super.filter(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._OptionPageSectionConsListView")}}).prototype.rule={"._has-3-cons=":function(){if(!(this.count()>3))return""}},e}.call(this),e}.call(this),_=function(){class e extends I{filter(e){var t;return(null!=(t=e.get("section_reactions_obj"))?t.react_count_flag:void 0)>0}}return e.prototype.Rule=class extends I.prototype.Rule{template(){return template("._OptionPageFlaggedSectionListView")}},e}.call(this),k=function(){class e extends I{filter(e){var t,n;return({react_count_out_of_date:n,react_count_flag:t}=e.get("section_reactions_obj")),n>0&&!t>0}}return e.prototype.Rule=class extends I.prototype.Rule{template(){return template("._OptionPageOutOfDateSectionListView")}},e}.call(this),T=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change",this.onVote)}hasRecs(){return this.collection.any(function(e){return e.isVoted()})}hasCommunityRecommendations(){var e,t;return t=("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUserV2)?e.get("user_rec_ids"):void 0)||[],this.collection.length>0&&this.collection.any(function(e){return!t.includes(e.id)&&e.isVoted()})}onVote(){var e;return this.hasCommunityRecommendations()?null!=(e=this.getChildrenByView(R)[0])?e.update():void 0:this.update()}}return e.prototype.Collection=Y,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageRecommendationView")}}).prototype.rule={"._has-recs=":function(){if(!this.hasRecs())return""},"._OptionPageMyRecommendationView=":function(){return new R({collection:this.collection})},"._CommunityRecommendationsView=":function(){return new a({collection:this.collection})}},e}.call(this),e}.call(this),R=function(){class e extends o{getOwnRec(){var e,t;return(null!=(e="undefined"!=typeof window&&null!==window&&null!=(t=window.currentUserV2)?t.getOptionRec(this.collection.getParent()):void 0)?e.isVoted():void 0)&&e}}return e.prototype.Collection=Y,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageMyRecommendationView")}}).prototype.rule={"._has-own-recommendation=":function(){if(!this.getOwnRec())return""},"._MyRecommendationItemView=":function(){return new m({model:this.getOwnRec()})}},e}.call(this),e}.call(this),M=function(){class e extends o{initialize(){if(super.initialize(...arguments),this.isCollapsed=!0,this.hasFetchedComments=!1,"undefined"!=typeof window&&null!==window)return this.listenTo(this.collection,"resizeComments",this.adjustSectionCommentsExpansion),this.listenTo(this.collection,"add",this.adjustSectionCommentsExpansion)}toggle(){var e,t,n;return e=this.getChildrenByView(s)[0],this.isCollapsed&&!this.hasFetchedComments&&(this.collection.count()?(this.$el.addClass("Loading"),n=(()=>{var e;return this.$el.removeClass("Loading"),this.hasFetchedComments=!0,this.commentCountLimit=3,this.setCommentIsDisplayedFlag(this.collection.toArray().reverse()),null!=(e=this.getChildrenByView(l)[0])&&e.update(),de.defer(()=>this.adjustSectionCommentsExpansion())}),t=(()=>this.$el.removeClass("Loading")),this.collection.fetch({success:n,error:t,silent:!0})):null!=e&&e.update()),this.isCollapsed=!this.isCollapsed,null!=e?e.adjustTextareaHeight():void 0}adjustSectionCommentsExpansion(){return requestAnimationFrame(()=>{var e;return this.isCollapsed?(this.$el.css("max-height",0),this.$el.addClass("hidden")):(e=this.$el.prop("scrollHeight"),this.$el.css("max-height",e),this.$el.removeClass("hidden"))})}setCommentIsDisplayedFlag(e){if(!(this.commentCountLimit<=0))return e.forEach(e=>{var t;if(null==(null!=(t=e.get("revision"))?t.get("title"):void 0)&&this.commentCountLimit>0)return e.set({isDisplayed:!0},{silent:!0}),this.commentCountLimit--,this.setCommentIsDisplayedFlag(e.get("comments"))})}}return e.prototype.Collection=r,e.prototype.commentsLimit=3,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageSectionCommentsView")}}).prototype.rule={"._has-more-comments=":function(){if(!(this.collection.length>this.commentsLimit))return""},"._has-multi-more-comments=":function(){if(!(this.collection.length-this.commentsLimit>1))return""},"._comments-more-count=":function(){return this.collection.length-this.commentsLimit},"._section-comment-link@href":function(){var e;return null!=(e=this.collection.getParent())?e.getSectionCommentPageURL():void 0},"._CommentListView=":function(){return new l({collection:this.collection,filterByDisplayed:!0})},"._CommentListAddCommentView=":function(){return new s({collection:this.collection})}},e}.call(this),e}.call(this),y=function(){class e extends o{}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageCommentsView")}}).prototype.rule={"._has-contributors":function(){var e;return e=this.model.get("users"),{"=":function(){if(!e.count())return""},"._has-two-contributors=":function(){if(2!==e.count())return""},"._has-three-plus-contributors=":function(){if(!(e.count()>2))return""},"._has-more-contributors=":function(){if(!(e.count()>3))return""},"._first-contributor-link@href":function(){var t;return null!=(t=e.at(0))?t.url():void 0},"._first-contributor-name=":function(){var t,n;return((null!=(t=e.at(0))?t.get("displayName"):void 0)||(null!=(n=e.at(0))?n.get("username"):void 0)).split(" ")[0]},"._second-contributor-link@href":function(){var t;return null!=(t=e.at(1))?t.url():void 0},"._second-contributor-name=":function(){var t,n;return((null!=(t=e.at(1))?t.get("displayName"):void 0)||(null!=(n=e.at(1))?n.get("username"):void 0)).split(" ")[0]},"._more-count=":function(){return e.count()-2}}},"._option-title=":function(){return this.model.get("revision").get("title")},"._CommentListView=":function(){return new l({collection:this.model.get("comments"),ajax:this.model.get("comments").url()})},"._CommentListAddCommentView=":function(){return new s({collection:this.model.get("comments")})}},e}.call(this),e}.call(this),x=function(){class e extends F{}return e.prototype.Rule=function(){var e;return(e=class extends F.prototype.Rule{template(){return template("._OptionPageImageGalleryView")}}).prototype.rule={"._ImageGalleryView=":function(){return new c({collection:this.model.getCollection("option_image_ids")})}},e}.call(this),e}.call(this),q=function(){class e extends pe{initialize(e){var t;if(super.initialize(...arguments),e.openToaster)return(t=new te({title:"",body:"",section_type:"Pro",option_id:this.collection.getParent().id})).store=this.collection.getParent().store,this.setToast(ce,{model:t})}}return e.prototype.DefaultToastView=ue,e}.call(this),E=function(){class e extends i{}return e.prototype.adId="sidebar",e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionPageSidebarAdView")}},e}.call(this),U=function(){class e extends E{}return e.prototype.adId="sidebar2",e.prototype.Rule=class extends E.prototype.Rule{},e}.call(this),V=function(){class e extends i{}return e.prototype.adId="sidebar-left",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={OptionPageView:N,OptionPageOptionView:C,OptionPageOptionVoteView:S,OptionPageSidebarView:B,OptionPageSidebarOptionView:$,OptionPageSidebarOptionListView:D,OptionPageNavigationSidebarView:b,OptionPageSectionView:A,OptionPageSectionListView:I,OptionPageSectionConsListView:L,OptionPageSectionProsListView:O,OptionPageFlaggedSectionListView:_,OptionPageOutOfDateSectionListView:k,OptionPageRecommendationView:T,OptionPageMyRecommendationView:R,OptionPageSectionCommentsView:M,OptionPageCommentsView:y,OptionPageImageGalleryView:x,OptionPageToasterView:q,OptionPageSidebarAdView:E,OptionPageSidebarRelatedQuestionsAdView:U,OptionPageLeftSidebarAdView:V}},{"../../collections/index":7,"../../models/index":64,"../../utils/transforms":89,"../../views-v2/components/ad-view":93,"../base-view":91,"../components/contributors-view":100,"../components/image-gallery-view":107,"../components/join-tag-sidebar-view":110,"../components/lustre-ai-promote-footer-view":117,"../components/multi-user-view":124,"../components/question-header-view":137,"../components/reaction-banner-view":140,"../components/reaction-button-set-view":141,"../components/recommendation-drawer-view":145,"../components/recommendation-view":150,"../components/sidebar-activity-view":156,"../components/slant-score-view":159,"../components/spec-editor-modal-view":160,"../components/spec-list-view":161,"../components/sticky-sidebar-panel-view":163,"../components/toaster-view":166,"../lists/comment-list-view":170,"../lists/my-recommendation-list-view":174,"../lists/option-list-view":175,"../lists/section-list-view":179,"../lists/sidebar-related-question-list-view":180,"../mixins/recommendation-panel-manager-mixin-view":188,"../models/option-view":200,"../models/section-view":204,"../threads/community-recommendation-thread-view":252,"./post-page-view":244,moment:441,underscore:448}],241:[function(e,t,n){var i,o,r,s,l,a,u;u=e("underscore"),({BaseView:i}=e("../base-view")),({LoginModalView:s,LoginModalLoginContentView:o,LoginModalRegisterContentView:r}=e("../components/login-modal-view")),({SearchDropdownView:a}=e("../components/search-dropdown-view")),l=function(){class e extends i{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&(this.loadAds(),this.initializeImageLazyLoader(),this.handleAmpActions(),(e=window.currentUser)&&this.model))return this.listenTo(e,"login logout",function(){if(window.view===this)return e.fill(this.model)}),u.delay(()=>this.allowVideoAdClose(),5e3)}initializeImageLazyLoader(){var e;return e={rootMargin:"800px 0px"},this.lazyImageObserver=new IntersectionObserver(this.onIntersection,e)}onIntersection(e,t){return e.forEach(function(e){if(e.isIntersecting)return $(e.target).find("[data-lazy-src]").each(function(e,t){var n;return t.parentNode.classList.add("Loading"),t.src=t.dataset.lazySrc,delete t.dataset.lazySrc,n=function(e){return t.parentNode.classList.remove("Loading")},t.addEventListener("load",n,{once:!0}),t.addEventListener("error",n,{once:!0})}),t.unobserve(e.target)})}handleAmpActions(){var e,t;if(e=new URI(window.location.href).query(!0).amp_action)switch(e){case"login":new s({ContentView:o}),analytics.track("AMP - Login Clicked");break;case"signup":new s({ContentView:r}),analytics.track("AMP - Signup Clicked");break;case"siteSearch":t=$("._search-form:visible"),this.searchDropdown=new a({follows:t,search:"",closeOnNavigate:!1})}}loadAds(){var e,t;return(null!=(e=window.tyche)?e.addUnits:void 0)?this.initAds():null!=(t=window.tyche)?t.onReady=(()=>this.initAds()):void 0}initAds(){var e,t,n;return window.tyche.destroyUnits("all"),e=null!=(n=this.adUnits)?n:[],t=this.getFilteredConditionalAds(),window.tyche.addUnits([...e,...t,...this.defaultAdUnits]).then(function(){return window.tyche.displayUnits()})}getFilteredConditionalAds(){var e;return(null!=(e=this.conditionalAdUnits)?e:[]).filter(function(e){var t,n;return({selectorId:n,isMobile:t}=e),(null!=n||null!=t)&&(n?$(`#${n}:visible`).length:null!=t?window.tyche.isMobile===t:void 0)})}allowVideoAdClose(){var e,t,n;if((n=document.getElementById("tyche_corner_video_container"))&&"undefined"!=typeof MutationObserver&&null!==MutationObserver)return t={childList:!0},e=function(e,t){var i,o,r;for(o of(r=[],e))"childList"===o.type&&(i=n.querySelector("#pw-close-btn"))?(i.id="",r.push(t.disconnect())):r.push(void 0);return r},new MutationObserver(e).observe(n,t)}}return e.prototype.defaultAdUnits=[{type:"corner_video"}],e.prototype.events={"click a[href]":function(e){return this.loadLink(e)}},e}.call(this),t.exports={PageView:l}},{"../base-view":91,"../components/login-modal-view":115,"../components/search-dropdown-view":152,underscore:448}],242:[function(e,t,n){var i,o,r,s;({PageView:r}=e("./page-view")),({LoginModalView:o,LoginModalResetPasswordContentView:i}=e("../components/login-modal-view")),s=function(){class e extends r{title(){return super.title("Password Reset")}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return new o({ContentView:i,model:this.model})}}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._PasswordResetPageView")}},e}.call(this),t.exports={PasswordResetPageView:s}},{"../components/login-modal-view":115,"./page-view":241}],243:[function(e,t,n){var i,o,r,s,l,a;({CommentsPageView:i}=e("./comments-page-view")),({EventThreadView:o}=e("../threads/event-thread-view")),({Topic:l}=e("../../models")),({improveURL:a}=e("../../utils/transforms")),r=function(){class e extends i{title(){return super.title("Activity")}}return e.prototype.Model=l,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._PostActivityPageView")}}).prototype.rule={"._EventThreadView=":function(){return new o({collection:this.getModel().get("events")})}},e}.call(this),e}.call(this),s=function(){class e extends r{}return e.prototype.Model=l,e.prototype.Rule=class extends r.prototype.Rule{},e}.call(this),t.exports={PostActivityPageView:r,PostActivityTopicPageView:s}},{"../../models":34,"../../utils/transforms":89,"../threads/event-thread-view":254,"./comments-page-view":225}],244:[function(e,t,n){var i,o,r,s,l,a;({QuestionView:a}=e("../models/question-view")),({QuestionHeaderMinimalView:l,QuestionHeaderMinimalNavigationView:s}=e("../components/question-header-view")),({PageView:i}=e("../pages/page-view")),r=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._QuestionHeaderMinimalView=":function(){return new l({model:this.model})}},e}.call(this),e}.call(this),o=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._QuestionHeaderMinimalView=":function(){return new s({model:this.model})}},e}.call(this),e}.call(this),t.exports={PostPageView:r,PostInfoPageView:o}},{"../components/question-header-view":137,"../models/question-view":201,"../pages/page-view":241}],245:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae;le=e("moment"),se=e("underscore"),te=e("urijs"),({BaseView:r}=e("../base-view")),({EventView:p}=e("../models/event-view")),({KarmaView:h}=e("../models/karma-view")),({OptionView:g}=e("../models/option-view")),({UserView:ie}=e("../models/user-view")),({PageView:w}=e("./page-view")),({ListView:m}=e("../lists/list-view")),({ThreadView:ee}=e("../threads/thread-view")),({ActivityView:i}=e("../components/activity-view")),({DropdownView:a}=e("../components/dropdown-view")),({EditAvatarDropdownView:u}=e("../components/edit-avatar-dropdown-view")),({QuestionCardView:K}=e("../components/question-card-view")),({ClaimBannerMiniCardView:s}=e("../components/claim-banner-view")),({StickyNavMixinView:X}=e("../mixins/sticky-nav-mixin-view")),({PanelView:v}=e("../components/panel-view")),({CommunityRecommendationPanelView:l}=e("../components/community-recommendation-panel-view")),({MyRecommendationPanelView:f}=e("../components/my-recommendation-panel-view")),({User:ne,Viewpoint:oe,ViewpointVote:re}=e("../../models")),({RecommendedViewpointList:J,SubscribedTopicList:Z,AskedTopicList:o,EventList:c,KarmaBonusList:d}=e("../../collections")),({shortenNumber:ae}=e("../../utils/transforms")),N=function(){class e extends w{title(e){var t;return null==e&&(e="Profile"),t=this.model.get("displayName")||this.model.get("username"),super.title(`${t}'${"s"!==(null!=t?t.slice(-1):void 0)?"s":""} ${e}`)}initialize(){return this.setPermissions(),super.initialize(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{}).prototype.rule={"._ProfilePageHeaderView=":function(){return new A({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new U({model:this.model})},"._ProfilePageNavView=":function(){return new D({model:this.model,collectionName:this.collectionName,tabName:this.tabName})}},e}.call(this),e}.call(this),Q=function(){class e extends N{}return e.prototype.Model=ne,e.prototype.collectionName="recommendedViewpoints",e.prototype.tabName="Recs",e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._ProfileRecsPageView")}}).prototype.rule={"._ProfilePageContentView=":function(){return new F({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new j({model:this.model})}},e}.call(this),e}.call(this),I=function(){class e extends r{}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._has-items=":function(){if(!(this.model.get(this.collectionName).length>0))return""},"._no-items=":function(){if(this.model.get(this.collectionName).length>0)return""},"._display-name=":function(){return this.model.get("displayName")||this.model.get("username")}},e}.call(this),e}.call(this),F=function(){class e extends I{}return e.prototype.Model=ne,e.prototype.collectionName="recommendedViewpoints",e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ProfileRecsPageContentView")}}).prototype.rule={"._ProfileRecsPageThreadView=":function(){return new z({collection:this.model.get("recommendedViewpoints")})}},e}.call(this),e}.call(this),z=function(){class e extends ee{}return e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._ProfileRecsPageThreadView")}}).prototype.rule={"._ProfilePageFavoriteRecListView=":function(){return new O({collection:this.collection})},"._ProfilePageOtherRecListView=":function(){return new B({collection:this.collection})}},e}.call(this),e}.call(this),q=function(){class e extends g{openCommunityRecPanel(e){var t;return null!=(t=new v({model:this.model}))?t.setContent(l,{model:e}):void 0}openMyRecPanel(e){var t;return null!=(t=new v({model:this.model}))?t.setContent(f,{model:e}):void 0}isCurrentUser(){var e,t,n;return t=null!=(n=this.getParentByView(Q))?n.model:void 0,(e="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&e===t.get("username")}loadMyVote(){var e,t,n,i;return i=this.getVoteDataPromise(),t=this.getOptionDataPromise(),n=(()=>{var e;if(this.$el.removeClass("Loading"),e=this.model.get("votes").at(0))return this.openMyRecPanel(e)}),e=(()=>this.$el.removeClass("Loading")),$.when(i,t).then(n,e),analytics.track("Profile Page Rec Panel Link Clicked",{label:"edit"})}loadCommunityVote(){var e,t,n,i;return i=this.getVoteDataPromise(),n=this.getUserInfoDataPromise(),t=(()=>{var e;if(this.$el.removeClass("Loading"),e=this.model.get("votes").at(0))return this.openCommunityRecPanel(e)}),e=(()=>this.$el.removeClass("Loading")),$.when(i,n).then(t,e),analytics.track("Profile Page Rec Panel Link Clicked",{label:"community"})}getOptionDataPromise(){return this.optionDataFetched?$.Deferred().resolve():this.model.fetch({success:()=>this.optionDataFetched=!0})}getVoteDataPromise(){var e,t,n,i,o,r;return r=this.model.get("votes"),this.voteDataFetched?$.Deferred().resolve():(n=null!=(e=this.getParentByView(Q))&&null!=(t=e.model)?t.get("username"):void 0,o=new te(this.model.url().replace(/~.*/,"")).segment("votes").segment(n).toString(),i=new re({URL:o},{collection:r}),r.add(i,{silent:!0}),null!=i?i.fetch({parseContext:!0,silent:!0,success:()=>this.voteDataFetched=!0}):void 0)}getUserInfoDataPromise(){var e,t;return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&(e=this.model.parents("topic"))?(t=$.Deferred(),window.currentUser.fill(e,{callback:()=>{var n,i,o,r;return o=this.model.get("votes").at(0),r=null!=o?o.get("URL"):void 0,(n=null!=(i=e.get("viewpoints").findWhere({uuid:this.model.get("uuid")}))?i.get("communityRecommendations").find(function(e){return e.get("URL")===r}):void 0)&&n.get("reactionSet").get("useful").meta("reacted")&&(null!=o&&o.get("reactionSet").get("useful").meta("reacted",!0),this.model.listenToOnce(window.currentUser,"logout",()=>null!=o?o.get("reactionSet").get("useful").meta("reacted",!1):void 0)),t.resolve()},errorCallback:()=>t.resolve()}),t):$.Deferred().resolve()}}return e.prototype.Model=oe,e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._ProfilePageRecView")}}).prototype.rule={"._is-favorite=":function(){if(!this.model.get("votes").meta("favorite"))return""},"._not-favorite=":function(){if(this.model.get("votes").meta("favorite"))return""},"._topic-title=":function(){return this.model.parents("topic").get("revision").get("title")}},e}.call(this),e.prototype.events={"click ._toggle-favorite-rec-link":function(e){var t,n,i,o;return e.stopPropagation(),e.preventDefault(),t=!(o=this.model.get("votes")).meta("favorite"),n=this.getParentByView(F),i=(()=>n.model.get(n.collectionName).fetch({success:()=>this.model.trigger("repaint"),error:()=>this.model.trigger("repaint"),silent:!0})),o.favorite(t,{success:i,error:i})},"click ._recommendation-link":function(e){return this.$el.addClass("Loading"),this.isCurrentUser()?this.loadMyVote():this.loadCommunityVote()}},e}.call(this),O=function(){class e extends m{filter(e){return e.get("votes").meta("favorite")}getItems(){var e;return e=super.getItems(...arguments),se.sortBy(e,function(e){var t;return t=e.get("votes").meta("favorite_time"),isNaN(t)&&(t=Date.parse(t)),-t})}}return e.prototype.Collection=J,e.prototype.ItemView=q,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._ProfilePageFavoriteRecListView")}}).prototype.rule={"._favorite-count=":function(){return ae(this.collection.meta("favoriteCount"))||0}},e}.call(this),e}.call(this),B=function(){class e extends m{filter(e){return!e.get("votes").meta("favorite")}getItems(){var e;return e=super.getItems(...arguments),se.sortBy(e,function(e){var t;return t=e.get("votes").meta("vote_time"),isNaN(t)&&(t=Date.parse(t)),-t})}}return e.prototype.Collection=J,e.prototype.ItemView=q,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._ProfilePageOtherRecListView")}}).prototype.rule={"._has-favorite-recs=":function(){if(0===this.collection.meta("favoriteCount"))return""},"._other-count=":function(){return ae(this.collection.count()-(this.collection.meta("favoriteCount")||0))}},e}.call(this),e}.call(this),G=function(){class e extends N{title(){return super.title("Subscribed Questions")}}return e.prototype.Model=ne,e.prototype.collectionName="subscribedTopics",e.prototype.tabName="Watching",e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._ProfileSubscribedPageView")}}).prototype.rule={"._ProfilePageContentView=":function(){return new H({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new W({model:this.model})}},e}.call(this),e}.call(this),H=function(){class e extends I{}return e.prototype.Model=ne,e.prototype.collectionName="subscribedTopics",e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ProfileSubscribedPageContentView")}}).prototype.rule={"._ProfileSubscribedPageThreadView=":function(){return new Y({collection:this.model.get("subscribedTopics")})}},e}.call(this),e}.call(this),Y=function(){class e extends ee{}return e.prototype.Collection=Z,e.prototype.ItemView=K,e.prototype.Rule=class extends ee.prototype.Rule{template(){return template("._ProfileSubscribedPageThreadView")}},e}.call(this),k=function(){class e extends N{title(){return super.title("Asked Questions")}}return e.prototype.Model=ne,e.prototype.collectionName="askedTopics",e.prototype.tabName="Asked",e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._ProfileAskedPageView")}}).prototype.rule={"._ProfilePageContentView=":function(){return new R({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new b({model:this.model})}},e}.call(this),e}.call(this),R=function(){class e extends I{}return e.prototype.Model=ne,e.prototype.collectionName="askedTopics",e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ProfileAskedPageContentView")}}).prototype.rule={"._ProfileAskedPageThreadView=":function(){return new S({collection:this.model.get("askedTopics")})}},e}.call(this),e}.call(this),C=function(){class e extends K{}return e.prototype.Rule=class extends K.prototype.Rule{template(){return template("._ProfileAskedPageQuestionCardView")}},e}.call(this),S=function(){class e extends ee{}return e.prototype.Collection=o,e.prototype.ItemView=C,e.prototype.Rule=class extends ee.prototype.Rule{template(){return template("._ProfileAskedPageThreadView")}},e}.call(this),V=function(){class e extends N{title(){return super.title("Activity")}}return e.prototype.Model=ne,e.prototype.collectionName="events",e.prototype.tabName="Activity",e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._ProfileActivityPageView")}}).prototype.rule={"._ProfilePageContentView=":function(){return new y({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new _({model:this.model})}},e}.call(this),e}.call(this),y=function(){class e extends I{}return e.prototype.Model=ne,e.prototype.collectionName="events",e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ProfileActivityPageContentView")}}).prototype.rule={"._ProfileActivityPageThreadView=":function(){return new x({collection:this.model.get("events")})}},e}.call(this),e}.call(this),x=function(){class e extends ee{}return e.prototype.Collection=c,e.prototype.ItemView=i,e.prototype.Rule=class extends ee.prototype.Rule{template(){return template("._ProfileActivityPageThreadView")}},e}.call(this),L=function(){class e extends N{title(){return super.title("Karma")}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return se.defer(()=>this.markAllAsRead())}markAllAsRead(){var e,t;if(t=this.model.get("karma"),this.model.get("username")===window.currentUser.get("username")&&!this.markedAsRead&&!1===t.meta("isread"))return e={data:"{}",success:e=>(this.markedAsRead=!0,t.parse(e),window.currentUser.get("karma").parse(e),window.currentUser.get("karma").trigger("clear"))},t.sync("update",t,e)}}return e.prototype.Model=ne,e.prototype.collectionName="karma",e.prototype.tabName="Karma",e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._ProfileKarmaPageView")}}).prototype.rule={"._ProfilePageContentView=":function(){return new P({model:this.model})},"._ProfilePageNavigationSidebarView=":function(){return new T({model:this.model})}},e}.call(this),e}.call(this),P=function(){class e extends I{}return e.prototype.Model=ne,e.prototype.collectionName="karma",e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ProfileKarmaPageContentView")}}).prototype.rule={"._ProfileKarmaPageThreadView=":function(){return new M({collection:this.model.get("karma")})}},e}.call(this),e}.call(this),M=function(){class e extends ee{}return e.prototype.Collection=d,e.prototype.ItemView=h,e.prototype.Rule=class extends ee.prototype.Rule{template(){return template("._ProfileKarmaPageThreadView")}},e}.call(this),A=function(){class e extends ie{getTimeSinceJoined(){return le(new Date(this.model.get("created"))).format("MMMM Do, YYYY")}}return e.prototype.Model=ne,e.prototype.Rule=function(){var e;return(e=class extends ie.prototype.Rule{template(){return template("._ProfilePageHeaderView")}}).prototype.rule={"._has-bio=":function(){if(!this.model.get("bio"))return""},"._no-bio=":function(){if(this.model.get("bio"))return""},"._avatar":{"@src":function(){return this.model.getAvatarURL()},"@alt":function(){return`${this.model.get("displayName")||this.model.get("username")} Avatar`}},"._recs-count=":function(){return ae(this.model.get("recommendedViewpoints").count())},"._display-name=":function(){return this.model.get("displayName")||`@${this.model.get("username")}`},"._username=":function(){return null!=this.model.get("displayName")&&""!==this.model.get("displayName")?`@${this.model.get("username")}`:""},"._user-bio=":function(){return this.model.get("bio")},"._default-bio=":function(){return`I’ve been an awesome Slanter since ${this.getTimeSinceJoined()}!`},"._edit-profile-link@href":function(){return`${this.model.url()}/edit`},"._ClaimBannerMiniCardView=":function(){return new s}},e}.call(this),e.prototype.events={"click ._edit-avatar-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new u({model:this.model,follows:e.currentTarget,anchor:"below",align:"center"})}},e}.call(this),D=function(){class e extends r{initialize(){return super.initialize(...arguments),this.initializeStickyNav()}}return e.prototype.Model=ne,e.prototype.mixin(X),e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ProfilePageNavView")}}).prototype.rule={"._current-tab-title=":function(){return this.options.tabName||"Recs"},"._current-tab-count=":function(){return this.model.get(this.options.collectionName||"recommendedViewpoints").count()}},e}.call(this),e.prototype.events=se.assign({},X.prototype.events,{"click ._select-tab-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new E({model:this.model,follows:e.currentTarget})}}),e}.call(this),E=function(){class e extends a{}return e.prototype.Model=ne,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._ProfilePageNavDropdownView")}}).prototype.rule={"._has-subscriptions=":function(){if(!(this.model.get("subscribedTopics").count()>0))return""},"._has-asked-questions=":function(){if(!(this.model.get("askedTopics").count()>0))return""},"._has-karma=":function(){if(!(this.model.get("karma").meta("total")>0))return""},"._recs-link@href":function(){return this.model.get("recommendedViewpoints").url()},"._subscribed-topics-link@href":function(){return this.model.get("subscribedTopics").url()},"._my-questions-link@href":function(){return this.model.get("askedTopics").url()},"._karma-link@href":function(){return this.model.get("karma").url()},"._activities-link@href":function(){return this.model.get("events").url()},"._recs-count=":function(){return ae(this.model.get("recommendedViewpoints").count())},"._subscribed-topics-count=":function(){return ae(this.model.get("subscribedTopics").count())},"._my-questions-count=":function(){return ae(this.model.get("askedTopics").count())}},e}.call(this),e}.call(this),U=function(){class e extends r{}return e.prototype.Model=ne,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ProfilePageNavigationSidebarView")}}).prototype.rule={"._has-subscriptions=":function(){if(!(this.model.get("subscribedTopics").count()>0))return""},"._has-asked-questions=":function(){if(!(this.model.get("askedTopics").count()>0))return""},"._has-karma=":function(){if(!(this.model.get("karma").meta("total")>0))return""},"._recs-link@href":function(){return this.model.get("recommendedViewpoints").url()},"._subscribed-topics-link@href":function(){return this.model.get("subscribedTopics").url()},"._my-questions-link@href":function(){return this.model.get("askedTopics").url()},"._karma-link@href":function(){return this.model.get("karma").url()},"._activities-link@href":function(){return this.model.get("events").url()},"._recs-count=":function(){return ae(this.model.get("recommendedViewpoints").count())},"._subscribed-topics-count=":function(){return ae(this.model.get("subscribedTopics").count())},"._my-questions-count=":function(){return ae(this.model.get("askedTopics").count())}},e}.call(this),e}.call(this),j=function(){class e extends U{}return e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{}).prototype.rule={"._recs-link@class+":function(){return"selected"}},e}.call(this),e}.call(this),W=function(){class e extends U{}return e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{}).prototype.rule={"._subscribed-topics-link@class+":function(){return"selected"}},e}.call(this),e}.call(this),b=function(){class e extends U{}return e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{}).prototype.rule={"._my-questions-link@class+":function(){return"selected"}},e}.call(this),e}.call(this),_=function(){class e extends U{}return e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{}).prototype.rule={"._activities-link@class+":function(){return"selected"}},e}.call(this),e}.call(this),T=function(){class e extends U{}return e.prototype.Rule=function(){var e;return(e=class extends U.prototype.Rule{}).prototype.rule={"._has-karma=":function(){},"._karma-link@class+":function(){return"selected"}},e}.call(this),e}.call(this),t.exports={ProfilePageView:N,ProfileRecsPageView:Q,ProfilePageContentView:I,ProfileRecsPageContentView:F,ProfileRecsPageThreadView:z,ProfilePageRecView:q,ProfilePageFavoriteRecListView:O,ProfilePageOtherRecListView:B,ProfileSubscribedPageView:G,ProfileSubscribedPageContentView:H,ProfileSubscribedPageThreadView:Y,ProfileAskedPageView:k,ProfileAskedPageContentView:R,ProfileAskedPageQuestionCardView:C,ProfileAskedPageThreadView:S,ProfileActivityPageView:V,ProfileActivityPageContentView:y,ProfileActivityPageThreadView:x,ProfileKarmaPageView:L,ProfileKarmaPageContentView:P,ProfileKarmaPageThreadView:M,ProfilePageHeaderView:A,ProfilePageNavView:D,ProfilePageNavDropdownView:E,ProfilePageNavigationSidebarView:U,ProfileRecsPageNavigationSidebarView:j,ProfileSubscribedPageNavigationSidebarView:W,ProfileAskedPageNavigationSidebarView:b,ProfileActivityPageNavigationSidebarView:_,ProfileKarmaPageNavigationSidebarView:T}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/activity-view":92,"../components/claim-banner-view":96,"../components/community-recommendation-panel-view":98,"../components/dropdown-view":101,"../components/edit-avatar-dropdown-view":102,"../components/my-recommendation-panel-view":125,"../components/panel-view":131,"../components/question-card-view":135,"../lists/list-view":173,"../mixins/sticky-nav-mixin-view":189,"../models/event-view":192,"../models/karma-view":196,"../models/option-view":200,"../models/user-view":207,"../threads/thread-view":258,"./page-view":241,moment:441,underscore:448,urijs:452}],246:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f;({PageView:r}=e("./page-view")),({ThreadView:h}=e("../threads/thread-view")),({QuestionCardView:s}=e("../components/question-card-view")),({MasterOptionCardView:o}=e("../components/master-option-card-view")),({RecommendationCardListView:l}=e("../components/recommendation-card-view")),({StickyNavMixinView:d}=e("../mixins/sticky-nav-mixin-view")),({SearchList:a}=e("../../collections")),({Topic:m,MasterOption:i}=e("../../models")),f=e("urijs"),p=function(){class e extends r{title(){return super.title(`Results for "${this.collection.meta("search")}"`)}initialize(){return super.initialize(...arguments),this.initializeStickyNav()}}return e.prototype.mixin(d),e.prototype.Collection=a,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._SearchPageView")}}).prototype.rule={"._all-filter-link@href":function(){return new f(this.collection.url()).removeSearch("filter")},"._all-filter-link@class+":function(){if(!new f(this.collection.url()).search(!0).filter)return"selected"},"._question-filter-link@href":function(){return new f(this.collection.url()).setSearch("filter","questions")},"._question-filter-link@class+":function(){if("questions"===new f(this.collection.url()).search(!0).filter)return"selected"},"._product-filter-link@href":function(){return new f(this.collection.url()).setSearch("filter","products")},"._product-filter-link@class+":function(){if("products"===new f(this.collection.url()).search(!0).filter)return"selected"},"._question-count=":function(){return this.collection.count()},"._search-query=":function(){return this.collection.meta("search")},"._SearchPageCardThreadView=":function(){return new u({collection:this.collection})},"._RecommendationCardListView=":function(){var e;return e=new f(this.collection.meta("URL")).path("/activity").removeSearch("filter").addSearch({filter:"recommended"}).toString(),new c({ajax:e})}},e}.call(this),e}.call(this),u=function(){class e extends h{getItemView(e){return e instanceof m?s:e instanceof i?o:void 0}}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._SearchPageCardThreadView")}},e}.call(this),c=function(){class e extends l{}return e.prototype.limit=3,e}.call(this),t.exports={SearchPageView:p,SearchPageCardThreadView:u,SearchPageRecommendationCardListView:c}},{"../../collections":2,"../../models":34,"../components/master-option-card-view":120,"../components/question-card-view":135,"../components/recommendation-card-view":144,"../mixins/sticky-nav-mixin-view":189,"../threads/thread-view":258,"./page-view":241,urijs:452}],247:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d;({PageView:o}=e("./page-view")),({Sitemap:r}=e("../../models")),e("urijs"),d=e("underscore"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),c=function(){class e extends o{title(){return super.title("Sitemap")}}return e.prototype.Model=r,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._SitemapPage")}},e}.call(this),s=function(){class e extends o{title(){return super.title("Sitemap")}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SitemapListPage")}}).prototype.rule={"._has-next=":function(){if(!this.model.get("properties").page.next)return""},"._has-prev=":function(){if(!this.model.get("properties").page.prev)return""},"._has-page=":function(){if(!(parseInt(this.query.page)>0))return""},"._page-number=":function(){return parseInt(this.query.page)+1},"._next-link@href":function(){return this.model.get("properties").page.next},"._prev-link@href":function(){return this.model.get("properties").page.prev},"._url-list=":function(){return d.map(this.model.get("list"),function(e){return i(`<div><a href="${e.url}">${e.title}</a></div>`)})}},e}.call(this),e}.call(this),u=function(){class e extends s{title(){return super.title("Sitemap")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SitemapMasterOptionListPage")}},e}.call(this),a=function(){class e extends s{title(){return super.title("Sitemap")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SitemapMasterCompareListPage")}},e}.call(this),p=function(){class e extends s{title(){return super.title("Sitemap")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SitemapQuestionListPage")}},e}.call(this),l=function(){class e extends s{title(){return super.title("Sitemap")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SitemapMasterAlternativesListPage")}},e}.call(this),t.exports={SitemapPageView:c,SitemapListPageView:s,SitemapMasterOptionListPageView:u,SitemapMasterCompareListPageView:a,SitemapQuestionListPageView:p,SitemapMasterAlternativesListPageView:l}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"./page-view":241,jquery:438,underscore:448,urijs:452}],248:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me,fe,ge,we,ve,ye,_e,xe,Ve,Re,be,Ce,Se,ke,Pe,Te,Me,Le,Ie,Oe,Ae,Ee,De,$e,Ue,Be,qe,Ne,Fe,je,ze,Qe,He,We,Ye,Ge,Ke,Je,Xe,Ze,et,tt,nt,it,ot,rt,st,lt,at,ut,ct,pt,dt,ht,mt,ft,gt,wt,vt,yt,_t,xt,Vt,Rt,bt,Ct,St,kt,Pt,Tt,Mt;_t=e("underscore"),({BaseView:a}=e("../base-view")),({PostPageView:B}=e("./post-page-view")),({QuestionView:W}=e("../models/question-view")),({OptionView:$}=e("../models/option-view")),({SectionView:ce}=e("../models/section-view")),({RecView:te}=e("../models/rec-view")),({UserView:yt}=e("../models/user-view")),({SpecView:Re}=e("../models/spec-view")),({OptionThreadView:D}=e("../threads/option-thread-view")),({OptionListView:I}=e("../lists/option-list-view")),({ListView:S}=e("../lists/list-view")),({CommunityRecommendationsView:h,CommunityRecommendationNoTextThreadView:p}=e("../threads/community-recommendation-thread-view")),({MyRecommendationListView:M}=e("../lists/my-recommendation-list-view")),({ContributorsView:m}=e("../components/contributors-view")),({FABRecommendView:w,FABRecommendButtonView:g}=e("../components/fab-view")),({JoinTagSidebarView:R}=e("../components/join-tag-sidebar-view")),({ReactionMenuDropdownView:G,ReactionMenuOptionStepView:K,ReactionMenuSectionStepView:J}=e("../components/reaction-menu-dropdown-view")),({RecommendationView:re}=e("../components/recommendation-view")),({RecommendationDrawerAgreeView:ne,RecommendationDrawerDisagreeView:ie}=e("../components/recommendation-drawer-view")),({RecommendationFormView:oe}=e("../components/recommendation-form-view")),({PromoteQuestionCardView:F}=e("../components/promote-question-view")),({MultiUserView:T}=e("../components/multi-user-view")),({LazyMultiUserView:C}=e("../components/lazy-multi-user-view")),({ToasterView:ht,ToastCollapsedView:ct,ToastOptionView:pt,ToastSectionView:dt}=e("../components/toaster-view")),({QuestionHeaderView:z}=e("../components/question-header-view")),({SidebarRelatedQuestionListView:he,SidebarRelatedQuestionListQuestionView:de}=e("../lists/sidebar-related-question-list-view")),({SearchablePopupInvokerView:le}=e("../components/searchable-popup-invoker-view")),({SearchOptionDropdownView:se}=e("../components/search-option-dropdown-view")),({SidebarAsyncActivityView:pe}=e("../components/sidebar-activity-view")),({SpecTableView:Ve,SpecTableHeaderCellView:ve,SpecTableOptionRowView:xe,SpecTableMoreDropdownView:_e,SpecTableModalView:ye}=e("../components/spec-table-view")),({TooltipView:ft,TooltipTitleView:mt}=e("../components/tooltip-view")),({SlantScoreInteractableBadgeView:me,SlantScoreInteractableSimpleBadgeView:fe}=e("../components/slant-score-view")),({ModalView:P}=e("../components/modal-view")),({DropdownView:f}=e("../components/dropdown-view")),({ImageCarouselView:_}=e("../components/image-carousel-view")),({PanelView:U}=e("../components/panel-view")),({CommunityRecommendationPanelView:d}=e("../components/community-recommendation-panel-view")),({LazyImageCarouselView:b}=e("../components/lazy-image-carousel-view")),({LustreAIPromoteFooterView:k}=e("../components/lustre-ai-promote-footer-view")),({AdView:s,AdInArticleAdView:o,AdSidebarAdView:r}=e("../components/ad-view")),({OptionTabsView:E,OptionTabsContentListView:A}=e("../components/option-tabs-view")),({shortenNumber:Tt,trimText:Mt,convertURL:Vt,isURL:Ct,improveURL:bt,decodeHTMLEntities:Rt}=e("../../utils/transforms")),({BADGES:l,TRANSITION_END_EVENT:lt}=e("../../utils/constants")),({CommentCollection:u,HighlightCollection:v,ImageCollection:x,OptionCollection:L,ProductCollection:q,QuestionCollection:j,ReactionCollection:Y,RecCollection:Z,SectionCollection:ae,TagCollection:at,UserCollection:wt}=e("../../collections/index")),({SpecList:we}=e("../../collections")),({CommentModel:c,HighlightModel:y,ImageModel:V,OptionModel:O,ProductModel:N,QuestionModel:Q,ReactionModel:X,RecModel:ee,SectionModel:ue,TagModel:ut,UserModel:vt,QuestionPageQuery:H}=e("../../models/index")),({Spec:ge}=e("../../models")),kt=e("moment"),St=e("marked"),gt=e("urijs"),Pt=new(e("marked-plaintext"))({spaces:!0}),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),st=function(){class e extends B{title(){var e,t,n;return(t=this.model.getModel("question_id")).getCollection("question_option_ids").length?(e=t.getCollection("question_option_ids").filter(function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)!==l.flagged}).length,(n=t.get("title").replace(/what (are|is) the best/i,"Best"))!==t.get("title")&&(n=e+" "+n.replace("?","")+" as of "+kt().format("YYYY"))):n=t.get("title"),super.title(n)}initialize(){var e,t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&"true"===new gt(window.location.toString()).search(!0).openToaster)return t=this.getChildrenByView(it)[0],(e=new O({title:"",body:"",site_url:"",price:"",question_id:this.model.get(question_id)})).store=this.model.store,t.setToast(pt,{model:e})}}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._SummaryPageView")}}).prototype.rule={"._SummaryPageHeaderAdView=":function(){return new Pe},"._QuestionHeaderView=":function(){return new z({model:this.model.getModel("question_id")})},"._LustreAIPromoteFooterView=":function(){return new k},"._SummaryPageSidebarView=":function(){return new Ze({model:this.model.getModel("question_id")})},"._SummaryPageContentContainerView=":function(){return new Ce({model:this.model.getModel("question_id"),questionPageQuery:this.model})},"._SummaryPageToasterView=":function(){return new it({collection:this.model.getModel("question_id").getCollection("question_option_ids"),openToaster:this.options.openToaster})}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard-ad",type:"leaderboard_atf"}],e.prototype.conditionalAdUnits=[{selectorId:"sidebar-ad",type:"med_rect_atf"},{selectorId:"sidebar-sticky-ad",type:"med_rect_btf"},{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e.prototype.events={"click ._option-image-link":function(){return analytics.track("Image Click Summary")},"click ._option-title-link":function(){return analytics.track("Option Title Click Summary")},"click ._section-title-link":function(){return analytics.track("Pro/Con Title Click Summary")},"click ._section-description-link":function(){return analytics.track("Pro/Con Description Click Summary")}},e}.call(this),Ce=function(){class e extends a{getTopOptionListView(){return new rt({collection:this.model.getCollection("question_option_ids")})}getOptionListView(){return new qe({collection:this.model.getCollection("question_option_ids")})}getFlaggedOptionListView(){return new ke({collection:this.model.getCollection("question_option_ids")})}getOptionThreadView(){return new Ue({collection:this.model.getCollection("question_option_ids")})}getFilteredOptions(){return this.model.getCollection("question_option_ids").filter(function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)!==l.flagged})}getTopOptions(){return this.model.getCollection("question_option_ids").filter(function(e){var t,n;return(t=null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)===l.best||t===l.excellent})}getOtherOptions(){return this.model.getCollection("question_option_ids").filter(function(e){var t,n;return(t=null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)!==l.best&&t!==l.excellent&&t!==l.flagged})}openExplanationTooltip(e){var t;if(null==(t=this.explainTooltip)||!t.attached)return this.explainTooltip=new Se({model:this.model,follows:e.currentTarget}),analytics.track("Summary Page Info Tooltip Opened",{label:"others"})}openTopExplanationTooltip(e){var t;if(null==(t=this.topExplainTooltip)||!t.attached)return this.topExplainTooltip=new ot({model:this.model,follows:e.currentTarget}),analytics.track("Summary Page Info Tooltip Opened",{label:"best"})}}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageContentContainerView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.model.isGamingQuestion())return""},"._not-gaming-question=":function(){if(this.model.isGamingQuestion())return""},"._has-top-options=":function(){if(!this.getTopOptions().length)return""},"._no-top-options=":function(){if(this.getTopOptions().length)return""},"._has-other-options=":function(){if(!this.getOtherOptions().length)return""},"._has-one-top-option=":function(){if(1!==this.getTopOptions().length)return""},"._has-multi-top-options=":function(){if(!(this.getTopOptions().length>1))return""},"._has-multi-other-options=":function(){if(!(this.getOtherOptions().length>1))return""},"._has-options=":function(){if(0===this.getFilteredOptions().length)return""},"._no-options=":function(){if(0!==this.getFilteredOptions().length)return""},"._has-multi-options=":function(){if(!(this.getFilteredOptions().length>1))return""},"._top-options-count=":function(){return this.getTopOptions().length},"._other-options-count=":function(){return this.getOtherOptions().length},"._options-count=":function(){return Tt(this.getFilteredOptions().length)},"._meta-option-count@content":function(){return this.getFilteredOptions().length},"._RecommendationFormView=":function(){return new oe({collection:this.model.getCollection("question_option_ids")})},"._MyRecommendationListView=":function(){return new M({collection:this.model.getCollection("question_rec_ids")})},"._SummaryPageSpecTableView=":function(){return new tt({model:this.model})},"._SummaryPageTopOptionListView=":function(){return this.getTopOptionListView()},"._SummaryPageOtherOptionListView=":function(){return this.getOptionListView()},"._SummaryPageOptionThreadView=":function(){return this.getOptionThreadView()},"._SummaryPageRecommendationsView=":function(){return new We({model:this.model})},"._SummaryPageNoOptionsView=":function(){return new Le({model:this.model})},"._PromoteQuestionCardView=":function(){return new F({model:this.model})},"._FABRecommendView=":function(){return new w({model:this.model})},"._SummaryPageRelatedQuestionListView=":function(){var e;return e=this.model.getRelatedQuestionsURL(),new Ge({ajax:e})}},e}.call(this),e.prototype.events={"mouseover ._explain-tooltip-link":function(e){return this.openExplanationTooltip(e)},"click ._explain-tooltip-link":function(e){return this.openExplanationTooltip(e)},"mouseover ._top-explain-tooltip-link":function(e){return this.openTopExplanationTooltip(e)},"click ._top-explain-tooltip-link":function(e){return this.openTopExplanationTooltip(e)}},e}.call(this),tt=function(){class e extends Ve{getFilteredOptionList(){var e;return e=this.options.limit,this.model.getCollection("question_option_ids").filter(function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)!==l.flagged}).slice(0,e)}hasMoreItems(){return this.getFilteredOptionList().length<this.model.getCollection("question_option_ids").length}hasMoreSpecs(){return this.model.getSpecKeys().length>4-this.options.specLimit}}return e.prototype.options={limit:5,specLimit:2},e.prototype.Rule=function(){var e;return(e=class extends Ve.prototype.Rule{template(){return template("._SummaryPageSpecTableView")}}).prototype.rule={"._has-more-items=":function(){if(!this.hasMoreItems())return""},"._not-two-specs=":function(){if(this.model.getSpecKeys().length>=2)return""},"._spec-header-list=":function(){var e,t,n,i,o;for(o=[],e=0,n=(i=this.model.getSpecKeys().slice(0,this.options.specLimit)).length;e<n;e++)t=i[e],o.push(new ve({model:new ge({key:t})}));return o},"._spec-table-list=":function(){var e;return e=this.getFilteredOptionList(),_t.map(e,function(e){return new et({model:e})})}},e}.call(this),e.prototype.events={"click ._show-more-link":function(e){return new ye({model:this.model})}},e}.call(this),et=function(){class e extends xe{}return e.prototype.options={specLimit:2},e.prototype.Rule=function(){var e;return(e=class extends xe.prototype.Rule{template(){return template("._SummaryPageSpecTableOptionRowView")}}).prototype.rule={"._not-two-specs=":function(){if(this.getParentModel().getSpecKeys().length>=2)return""},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.getCollection("option_image_ids").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"@class+":function(){if(this.model.get("badge")===l.best||this.model.get("badge")===l.excellent)return"top"},"._SlantScoreInteractableSimpleBadgeView=":function(){return new fe({model:this.model})}},e}.call(this),e.prototype.events={"click ._title-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new _e({model:this.model,follows:e.currentTarget})},"click ._summary-option-link":function(e){var t,n,o;return t=null!=(n=this.model)?n.get("vp_id"):void 0,o=i(`#${t}`),i("html, body").animate({scrollTop:null!=o?o.offset().top:void 0},{duration:200,complete:function(){if(t)return"undefined"!=typeof window&&null!==window?window.location.hash=t:void 0}}),analytics.track("Summary Page Spec Table Option Link Clicked")},"mouseover .SpecTable-TitleCell":function(e){var t;if((t=e.currentTarget).scrollWidth>i(t).outerWidth())return new mt({model:this.model,follows:t})}},e}.call(this),Ze=function(){class e extends W{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends W.prototype.Rule{template(){return template("._SummaryPageSidebarView")}}).prototype.rule={"._SidebarAsyncActivityView=":function(){return new pe({model:this.model})},"._SidebarRelatedQuestionListView=":function(){var e;return e=this.model.getRelatedQuestionsURL(),new he({ajax:e})},"._JoinTagSidebarView=":function(){return new R({collection:this.model.getCollection("question_tag_ids")})},"._SummaryPageSidebarAdView=":function(){return new Je},"._SummaryPageSidebarStickyAdView=":function(){return new Xe}},e}.call(this),e.prototype.events={"click ._expand-description-link":function(e){return new Ne({model:this.model})}},e}.call(this),Be=function(){class e extends ${initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.getCollection("option_reaction_ids"),"update",function(){return this.update()}),this.listenTo(this.model,"scrollTo",()=>i("html, body").animate({scrollTop:this.$el.position().top-40},300))}getTopOptions(){var e;return null!=(e=this.model.getModel("question_id"))?e.getCollection("question_option_ids").filter(function(e){var t,n;return(t=null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)===l.best||t===l.excellent}):void 0}getOptionIndex(){return this.model.getModel("question_id").getCollection("question_option_ids").indexOf(this.model)}}return e.prototype.adOffset=2,e.prototype.adInterval=4,e.prototype.Rule=function(){var e;return(e=class extends $.prototype.Rule{template(){return template("._SummaryPageOptionView")}}).prototype.rule={"@itemprop":function(){var e,t,n;if(e=null!=(t=this.model.get("option_ranking_obj"))?t.badge:void 0,1===(null!=(n=this.model.get("option_ranking_obj"))?n.ranking:void 0)&&(e===l.best||e===l.excellent))return"acceptedAnswer"},"._is-first-option=":function(){if(0!==this.getOptionIndex())return""},"._is-3rd-option=":function(){if(2!==this.getOptionIndex())return""},"._is-nth-option=":function(){var e;if((e=this.getOptionIndex())<this.adOffset||(e-this.adOffset)%this.adInterval!=0)return""},"._show-sponsored=":function(){if(this.model.collection.findWhere({title:"NordVPN"}))return""},"._option-id@id":function(){return this.model.get("vp_id")},"._no-media-class@class+":function(){var e;if(0===(null!=(e=this.model.getCollection("option_image_ids"))?e.length:void 0))return"noMedia"},"._meta-option-rank@content=":function(){return this.model.collection.indexOf(this.model)+1},"._meta-option-text@content=":function(){var e,t,n,i;return i=this.model.get("body").trim(),n=this.model.getCollection("option_section_ids").filter(function(e){return!e.isMarked()}).map(function(e){var t,n;return n=e.get("title"),(t=e.get("body"))?`${n}: ${t}`:n}),t=this.model.getCollection("option_body_rec_ids").filter(function(e){return e.get("body")}).map(function(e){return`${e.get("body")}`}),(e=n.concat(t)).length&&(i+=`${null!=i?i:{" | ":""}}${e.join(" | ")}`),i||this.model.get("title")},"._SummaryPageOptionTabsView=":function(){return new $e({model:this.model})},"._SummaryPageOptionRecommendationView=":function(){return new Oe({model:this.model})},"._RecommendationDrawerAgreeView=":function(){return new ne({model:this.model})},"._RecommendationDrawerDisagreeView=":function(){return new ie({model:this.model})},"._SlantScoreInteractableBadgeView=":function(){return new me({model:this.model})},"._ImageCarouselView=":function(){return this.model.getModel("question_id").getCollection("question_option_ids").indexOf(this.model)<3?new _({collection:this.model.getCollection("option_image_ids")}):new b({collection:this.model.getCollection("option_image_ids")})},"._AdInArticleAdView=":function(){return new o},"._SummaryPageSponsoredOptionView=":function(){return new nt}},e}.call(this),e.prototype.events={"click ._reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new Fe({model:this.model,follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})}},e}.call(this),nt=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._SummaryPageSponsoredOptionView")}},e}.call(this),Me=function(){class e extends Be{}return e.prototype.Rule=function(){var e;return(e=class extends Be.prototype.Rule{}).prototype.rule={"._has-gallery=":function(){return""},"._ImageCarouselView=":function(){return""},"._AdInArticleAdView=":function(){return""}},e}.call(this),e}.call(this),$e=function(){class e extends E{update(e={}){var t;return"undefined"!=typeof window&&null!==window?(e=_t.extend({shouldUpdateSelected:!1},e),this.updateSelectedTab(),t=(()=>{if(super.update(e),this.updateSelectedTab(),this.isExpanded)return this.expandTabContent()}),this.tabAnimating?this.$("._tab-selected-indicator").one(lt,t):t(),window.requestAnimationFrame(()=>this.updateIndicatorPosition())):super.update(...arguments)}hasGamingSpecs(){var e;return null!=this.hasSpecsCached?this.hasSpecsCached:(e=Te.prototype.gamingSpecKeys,this.hasSpecsCached=_t.some(this.getSpecs(),function(t){return _t.contains(e,t.spec_key)}))}expandTabContent(){return this.$("._section-list").addClass("expanded"),this.$("._see-more-link").addClass("hidden"),this.$("._hide-more-link").removeClass("hidden"),_t.each(this.getChildrenByView(Ke),function(e){return e.initializeSectionContent()}),_t.each(this.getChildrenByView(He),function(e){return e.initializeRecContent()})}collapseTabContent(){return this.$("._section-list").removeClass("expanded"),this.$("._see-more-link").removeClass("hidden"),this.$("._hide-more-link").addClass("hidden")}isReactedActivity(e,t){return e.get("option_reactions_obj")[t]>0}isOutOfDateActivity(e){return this.isReactedActivity(e,"react_count_out_of_date")}isFlaggedActivity(e){return this.isReactedActivity(e,"react_count_flag")}updateIndicatorPosition(){var e,t;if(t=this.getSelectedIndicatorStyles())return e=this.$("._tab-selected-indicator"),window.requestAnimationFrame(()=>e.css(t))}getSelectedIndicatorStyles(){var e;if("undefined"!=typeof window&&null!==window&&(e=this.$(`._tab-link[data-tab-id='${this.activeTabId}']`)).length)return{transform:`translateX(${e.position().left}px)`,width:e.width()+2*parseInt(e.css("padding-left"))}}onTabChange(e){var t;return t=super.onTabChange(e),analytics.track("Summary Page Option Tab Changed",{type:t})}}return e.prototype.badgedItemLimit=6,e.prototype.itemLimit=2,e.prototype.Rule=function(){var e;return(e=class extends E.prototype.Rule{template(){return template("._SummaryPageOptionTabsView")}}).prototype.rule={"._is-regular-activity=":function(){if(this.isOutOfDateActivity(this.model)||this.isFlaggedActivity(this.model))return""},"._no-badge-class@class+":function(){if(!this.model.isAP())return"noBadge"},"._tab-selected-indicator@style+":function(){var e;return(e=this.getSelectedIndicatorStyles())?`width: ${e.width}px; transform: ${e.transform};`:""},"._SummaryPageOptionTabsContentView=":function(){return new De({model:this.model,activeTabId:this.activeTabId})}},e}.call(this),e.prototype.events={"click ._see-more-link":function(){return this.isExpanded=!0,this.expandTabContent(),analytics.track("See More Click Summary")},"click ._hide-more-link":function(){var e,t,n,o;if(this.isExpanded=!1,this.collapseTabContent(),(null!=(t=this.$("._see-more-link").offset())?t.top:void 0)<(null!=(n=i(window))?n.scrollTop():void 0)&&(e=this.getParentByView(Be)))return i("html, body").scrollTop((null!=(o=e.$el.offset())?o.top:void 0)-40)}},e}.call(this),De=function(){class e extends A{initialize(){return super.initialize(...arguments),this.collapseMicrocards()}getItemView(e){return this.isSection(e)?Ke:this.isRec(e)?He:this.isSpecList(e)?this.getSpecListView():void 0}getSpecListView(){var e;return(null!=(e=this.model.getModel("question_id"))?e.isGamingQuestion():void 0)?Te:Ae}collapseMicrocards(){return this.mobileCardsExpanded=!1,this.$el.addClass("mobileMicrocardsCollapsed"),this.$el.removeClass("mobileMicrocardsExpanded")}expandMicrocards(){return this.mobileCardsExpanded=!0,this.$el.addClass("mobileMicrocardsExpanded"),this.$el.removeClass("mobileMicrocardsCollapsed")}}return e.prototype.Model=O,e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._SummaryPageOptionTabsContentListView")}},e.prototype.hasGamingSpecs=$e.prototype.hasGamingSpecs,e.prototype.events={"click ._expand-item-link":function(e){return this.mobileCardsExpanded?this.collapseMicrocards():this.expandMicrocards()},"touchend ._tabs-content-list":function(e){if(!this.scrollEventSent)return _t.defer(()=>{if(this.$("._tabs-content-list").scrollLeft()>50)return this.scrollEventSent=!0,analytics.track("Microcard horizontally scrolled")})}},e}.call(this),xt=function(e){return e.isComplete()},Ue=function(){class e extends D{update(){var e;return e=this.cachedViews,super.update(...arguments),_t.defer(function(){return null!=e?e.map(e=>{var t;return null!=(t=e.getChildrenByView(ViewsV2.AdInArticleAdView)[0])?t.update():void 0}):void 0})}hasUnloaded(){return _t.findLastIndex(this.collection.models,xt)+1<this.collection.length}loadMore(e={}){var t,n,i;return t=_t.findLastIndex(this.collection.models,xt)+1,i=_t.extend({question_id:this.collection.getParent().get("question_id"),option_limit:20,option_offset:t,rec_limit:0}),n=this.collection.store.ensureQuery(H,i),e=_t.defaults({query:n},e),super.loadMore(e)}}return e.prototype.offset=20,e.prototype.Collection=L,e.prototype.ItemView=Be,e.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._SummaryPageOptionThreadView")}}).prototype.rule={"._SummaryPageAddOptionView=":function(){return new be({collection:this.collection})}},e}.call(this),e.prototype.filter=xt,e}.call(this),Ie=function(){class e extends I{initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=L,e.prototype.ItemView=Be,e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._SummaryPageOptionListView")}}).prototype.rule={"._SummaryPageAddOptionView=":function(){return new be({collection:this.collection})}},e}.call(this),e.prototype.filter=xt,e}.call(this),rt=function(){class e extends Ie{filter(e,t){var n,i;return super.filter(...arguments)&&((null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)===l.best||(null!=(i=e.get("option_ranking_obj"))?i.badge:void 0)===l.excellent)&&t<Ue.prototype.offset}}return e.prototype.options={infiniteScroll:!1},e.prototype.Rule=class extends Ie.prototype.Rule{template(){return template("._SummaryPageTopOptionListView")}},e}.call(this),qe=function(){class e extends Ie{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.collection,"moreViewpointsLoaded",this.update)}filter(e,t){var n,i,o;return super.filter(...arguments)&&(null!=(n=e.get("option_ranking_obj"))?n.badge:void 0)!==l.best&&(null!=(i=e.get("option_ranking_obj"))?i.badge:void 0)!==l.excellent&&(null!=(o=e.get("option_ranking_obj"))?o.badge:void 0)!==l.flagged&&t<Ue.prototype.offset}}return e.prototype.options={infiniteScroll:!1},e.prototype.Rule=function(){var e;return(e=class extends Ie.prototype.Rule{template(){return template("._SummaryPageOtherOptionListView")}}).prototype.rule={"._has-flagged-options=":function(){if(null==this.collection.find(function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)===l.flagged}))return""},"._no-incomplete-unflagged-options=":function(){if(null!=this.collection.find(function(e){var t;return(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)!==l.flagged&&!xt(e)}))return""},"._SummaryPageFlaggedOptionListView=":function(){return new ke({collection:this.collection})},"._FABRecommendButtonView=":function(){return new g({model:this.collection.getParent()})}},e}.call(this),e}.call(this),ke=function(){class e extends Ie{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.collapseFlaggedList()}filter(e){var t;return super.filter(...arguments)&&(null!=(t=e.get("option_ranking_obj"))?t.badge:void 0)===l.flagged}expandFlaggedList(){var e,t;return this.expanded=!0,e=(t=this.$("._collapsible-list")).prop("scrollHeight"),t.css({"max-height":e}),this.$("._expand-flagged-options-link").addClass("hidden"),this.$("._collapse-flagged-options-link").removeClass("hidden")}collapseFlaggedList(){return this.expanded=!1,this.$("._collapsible-list").css({"max-height":0}),this.$("._expand-flagged-options-link").removeClass("hidden"),this.$("._collapse-flagged-options-link").addClass("hidden")}}return e.prototype.options={infiniteScroll:!1},e.prototype.ItemView=Me,e.prototype.Rule=class extends Ie.prototype.Rule{template(){return template("._SummaryPageFlaggedOptionListView")}},e.prototype.events={"click ._expand-flagged-options-link":function(e){return this.expandFlaggedList(),analytics.track("Flagged Options Section Expanded")},"click ._collapse-flagged-options-link":function(e){return this.collapseFlaggedList()},"resize window":function(e){if(this.expanded)return this.expandFlaggedList()}},e}.call(this),We=function(){class e extends a{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageRecommendationsView")}}).prototype.rule={"._recommendations-count=":function(){return this.model.getCollection("question_rec_ids").length||""},"._ContributorsView=":function(){return new m({collection:this.model.getCollection("question_rec_user_ids")})},"._RecommendationFormView=":function(){return new oe({collection:this.model.getCollection("question_option_ids")})},"._PromoteQuestionCardView=":function(){return new F({model:this.model})},"._MyRecommendationListView=":function(){return new M({collection:this.model.getCollection("question_rec_ids")})},"._CommunityRecommendationsView=":function(){return new h({collection:this.model.getCollection("question_rec_ids")})}},e}.call(this),e}.call(this),Qe=function(){class e extends J{}return e.prototype.Rule=function(){var e;return(e=class extends J.prototype.Rule{}).prototype.rule={"._no-comments=":function(){if(this.model.getCollection("section_comment_ids").length)return""}},e}.call(this),e}.call(this),ze=function(){class e extends G{}return e.prototype.Rule=class extends G.prototype.Rule{},e.prototype.DefaultStepView=Qe,e}.call(this),je=function(){class e extends K{}return e.prototype.Rule=class extends K.prototype.Rule{},e}.call(this),Fe=function(){class e extends G{}return e.prototype.Rule=class extends G.prototype.Rule{},e.prototype.DefaultStepView=je,e}.call(this),Ke=function(){class e extends ce{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _t.defer(()=>this.initializeSectionContent())}initializeSectionContent(){var e,t;return t=this.$("._item-content"),e=Math.round(t.prop("scrollHeight")),this.originalHeight||(this.originalHeight=Math.round(t.height())),this.originalHeight<e?t.addClass("expandable"):t.removeClass("expandable"),414<e?t.addClass("hasMore"):t.removeClass("hasMore")}expandSectionContent(){var e,t;return e=(t=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<e&&(t.css("max-height",e),t.removeClass("collapsed")),this.expanded=!0}collapseSectionContent(){var e,t;return e=(t=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<e&&(t.removeAttr("style"),t.addClass("collapsed")),this.expanded=!1}toggleSectionContent(){if(this.$("._item-content").hasClass("expandable"))return this.expanded?this.collapseSectionContent():(this.expandSectionContent(),analytics.track("Microcard Content Expanded"))}}return e.prototype.Rule=function(){var e;return(e=class extends ce.prototype.Rule{template(){return template("._SummaryPageSectionView")}}).prototype.rule={"._section-body=":function(){var e,t;if(t=null!=(e=this.model.get("body"))?e:"")return Rt(St(t,{renderer:Pt}))},"@class+":function(){return"Pro"===this.model.get("section_type")?"pro":"con"},"._MultiUserView=":function(){var e;return(e=this.model.getModel("option_id")).getModel("question_id").getCollection("question_option_ids").indexOf(e)<3?new T({collection:this.model.getCollection("section_contrib_user_ids")}):new C({collection:this.model.getCollection("section_contrib_user_ids")})}},e}.call(this),e.prototype.events={"click ._section-reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new ze({model:this.model,follows:e.currentTarget,align:"left"}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})},"resize window":function(){return this.initializeSectionContent(),this.expanded?this.expandSectionContent():this.collapseSectionContent()},"click ._expand-item-link":function(e){return this.toggleSectionContent(),!0},"click ._section-link":function(e){return analytics.track("Summary Page Section Microcard See All Link Clicked")}},e}.call(this),He=function(){class e extends te{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _t.defer(()=>this.initializeRecContent())}initializeRecContent(){var e,t;return e=this.$("._item-content"),t=Math.round(e.prop("scrollHeight")),this.originalHeight||(this.originalHeight=Math.round(e.height())),this.originalHeight<t?e.addClass("expandable"):e.removeClass("expandable"),414<t?e.addClass("hasMore"):e.removeClass("hasMore")}expandRecContent(){var e,t;return t=(e=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<t&&(e.css("max-height",t),e.removeClass("collapsed")),this.expanded=!0}collapseRecContent(){var e,t;return t=(e=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<t&&(e.removeAttr("style"),e.addClass("collapsed")),this.expanded=!1}toggleRecContent(){if(this.$("._item-content").hasClass("expandable"))return this.expanded?this.collapseRecContent():(this.expandRecContent(),analytics.track("Microcard Content Expanded"))}openRecPanel(){var e;return null!=(e=new U({model:this.model}))?e.setContent(d,{model:this.model}):void 0}}return e.prototype.Rule=function(){var e;return(e=class extends te.prototype.Rule{template(){return template("._SummaryPageRecView")}}).prototype.rule={"._rec-body=":function(){var e,t;if(t=null!=(e=this.model.get("body"))?e:"")return Rt(St(t,{renderer:Pt}))},"._rec-displayname=":function(){return this.model.getModel("user_id").get("displayname")},"._UserView=":function(){return new yt({model:this.model.getModel("user_id")})}},e}.call(this),e.prototype.events={"resize window":function(){return this.initializeRecContent(),this.expanded?this.expandRecContent():this.collapseRecContent()},"click ._full-recommendation-link":function(){return analytics.track("Summary Option Rec Expand Link Clicked"),this.openRecPanel()},"click ._expand-item-link":function(e){return this.toggleRecContent(),!0}},e}.call(this),Ee=function(){class e extends Re{}return e.prototype.Model=ge,e.prototype.Rule=class extends Re.prototype.Rule{template(){return template("._SummaryPageOptionSpecView")}},e}.call(this),Ae=function(){class e extends S{getModels(){return _t.map(this.model.get("option_spec_set"),function(e){return new ge({key:e.spec_key,value:e.spec_value})})}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _t.defer(()=>this.initializeSectionContent())}}return e.prototype.Model=O,e.prototype.Collection=null,e.prototype.ItemView=Ee,e.prototype.limit=4,e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{template(){return template("._SummaryPageOptionSpecListView")}}).prototype.rule={"._has-more-specs=":function(){if(!(this.getModels().length>this.limit))return""},"._specs-link@href":function(){var e;return null!=(e=new gt(this.model.getViewpointPageURL()))?e.hash("specs"):void 0}},e}.call(this),e.prototype.initializeSectionContent=Ke.prototype.initializeSectionContent,e.prototype.expandSectionContent=Ke.prototype.expandSectionContent,e.prototype.collapseSectionContent=Ke.prototype.collapseSectionContent,e.prototype.toggleSectionContent=Ke.prototype.toggleSectionContent,e.prototype.events=_t.assign({},Ke.prototype.events,{"click ._specs-link":function(e){return analytics.track("Summary Page Specs Microcard See All Link Clicked")}}),e}.call(this),Te=function(){class e extends Ae{filter(e){return _t.contains(this.gamingSpecKeys,e.get("key"))}sortBy(e){return"Steam Rating"===e.get("key")?0:1}}return e.prototype.gamingSpecKeys=["Steam Rating","Genre","Co-Op","Controller Support"],e.prototype.limit=null,e.prototype.Rule=function(){var e;return(e=class extends Ae.prototype.Rule{}).prototype.rule={"._has-more-specs=":function(){if(!_t.any(this.getModels(),e=>!_t.contains(this.gamingSpecKeys,e.get("key"))))return""}},e}.call(this),e}.call(this),Oe=function(){class e extends re{}return e.prototype.Rule=class extends re.prototype.Rule{template(){return template("._SummaryPageOptionRecommendationView")}},e}.call(this),it=function(){class e extends ht{initialize(e){var t;if(super.initialize(...arguments),e.openToaster)return(t=new O({title:"",body:"",site_url:"",price:"",question_id:this.collection.getParent().id})).store=this.collection.store,this.setToast(pt,{model:t})}}return e.prototype.DefaultToastView=ct,e}.call(this),be=function(){class e extends le{createPopupView(e){return new se({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}search(e){var t;return null!=(t=this.popup)?t.search(e):void 0}}return e.prototype.Collection=L,e.prototype.Rule=class extends le.prototype.Rule{template(){return template("._SummaryPageAddOptionView")}},e}.call(this),Le=function(){class e extends a{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUserV2,"change",this.update),_t.defer(()=>this.update())}}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageNoOptionsView")}}).prototype.rule={"._is-asked=":function(){if("undefined"==typeof window||null===window||this.model.get("created_user_id")!==window.currentUserV2.id)return""}},e}.call(this),e.prototype.events={"click ._share-google-link":function(e){return this.model.postToGoogle()},"click ._share-facebook-link":function(e){return this.model.postToFacebook()},"click ._share-twitter-link":function(e){return this.model.postToTwitter()}},e}.call(this),Ne=function(){class e extends P{}return e.prototype.Model=Q,e.prototype.Rule=class extends W.prototype.Rule{template(){return template("._SummaryPageQuestionDescriptionModalView")}},e}.call(this),Se=function(){class e extends ft{initialize(){return this.analyticsTimeoutId=setTimeout(this.sendReadAnalytics,1500),super.initialize(...arguments)}close(){return this.analyticsTimeoutId&&clearTimeout(this.analyticsTimeoutId),super.close(...arguments)}sendReadAnalytics(){return analytics.track("Summary Page Info Tooltip Read",{label:"others"})}getFilteredOptions(){return Ce.prototype.getFilteredOptions.apply(this)}getTopOptions(){return Ce.prototype.getTopOptions.apply(this)}getOtherOptions(){return Ce.prototype.getOtherOptions.apply(this)}}return e.prototype.Model=Q,e.prototype.options={interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends ft.prototype.Rule{template(){return template("._SummaryPageExplanationTooltipView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.model.isGamingQuestion())return""},"._not-gaming-question=":function(){if(this.model.isGamingQuestion())return""},"._has-top-options=":function(){if(!this.getTopOptions().length)return""},"._no-top-options=":function(){if(this.getTopOptions().length)return""},"._has-other-options=":function(){if(!this.getOtherOptions().length)return""},"._has-one-top-option=":function(){if(1!==this.getTopOptions().length)return""},"._has-multi-top-options=":function(){if(!(this.getTopOptions().length>1))return""},"._has-one-other-option=":function(){if(1!==this.getOtherOptions().length)return""},"._has-multi-other-options=":function(){if(!(this.getOtherOptions().length>1))return""},"._has-options=":function(){if(0===this.getFilteredOptions().length)return""},"._no-options=":function(){if(0!==this.getFilteredOptions().length)return""},"._has-multi-options=":function(){if(!(this.getFilteredOptions().length>1))return""},"._top-options-count=":function(){return this.getTopOptions().length},"._other-options-count=":function(){return this.getOtherOptions().length},"._options-count=":function(){return Tt(this.getFilteredOptions().length)},"._recommendations-count=":function(){return this.model.getCollection("question_rec_ids").length||""}},e}.call(this),e}.call(this),ot=function(){class e extends Se{sendReadAnalytics(){return analytics.track("Summary Page Info Tooltip Read",{label:"best"})}}return e.prototype.Rule=class extends Se.prototype.Rule{template(){return template("._SummaryPageTopExplanationTooltipView")}},e}.call(this),Ye=function(){class e extends de{}return e.prototype.Rule=class extends de.prototype.Rule{template(){return template("._SummaryPageRelatedQuestionListQuestionView")}},e.prototype.events={"click ._question-link":function(){return analytics.track("Related Question Card Link Clicked")}},e}.call(this),Ge=function(){class e extends he{}return e.prototype.ItemView=Ye,e.prototype.Rule=class extends he.prototype.Rule{template(){return template("._SummaryPageRelatedQuestionListView")}},e}.call(this),Pe=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SummaryPageHeaderAdView")}},e}.call(this),Je=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SummaryPageSidebarAdView")}},e}.call(this),Xe=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SummaryPageSidebarStickyAdView")}},e}.call(this),t.exports={SummaryPageView:st,SummaryPageContentContainerView:Ce,SummaryPageSpecTableView:tt,SummaryPageSpecTableOptionRowView:et,SummaryPageSidebarView:Ze,SummaryPageOptionView:Be,SummaryPageMinimalOptionView:Me,SummaryPageOptionTabsView:$e,SummaryPageOptionTabsContentListView:De,SummaryPageOptionListView:Ie,SummaryPageOptionThreadView:Ue,SummaryPageTopOptionListView:rt,SummaryPageOtherOptionListView:qe,SummaryPageFlaggedOptionListView:ke,SummaryPageRecommendationsView:We,SummaryPageReactionMenuSectionStepView:Qe,SummaryPageReactionMenuSectionDropdownView:ze,SummaryPageReactionMenuOptionStepView:je,SummaryPageReactionMenuOptionDropdownView:Fe,SummaryPageSectionView:Ke,SummaryPageRecView:He,SummaryPageOptionSpecView:Ee,SummaryPageOptionSpecListView:Ae,SummaryPageMediaOptionSpecListView:Te,SummaryPageOptionRecommendationView:Oe,SummaryPageToasterView:it,SummaryPageAddOptionView:be,SummaryPageNoOptionsView:Le,SummaryPageQuestionDescriptionModalView:Ne,SummaryPageExplanationTooltipView:Se,SummaryPageTopExplanationTooltipView:ot,SummaryPageRelatedQuestionListQuestionView:Ye,SummaryPageRelatedQuestionListView:Ge,SummaryPageHeaderAdView:Pe,SummaryPageSidebarAdView:Je,SummaryPageSidebarStickyAdView:Xe,SummaryPageSponsoredOptionView:nt}},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../collections/index":7,"../../models":34,"../../models/index":64,"../../utils/constants":85,"../../utils/transforms":89,"../base-view":91,"../components/ad-view":93,"../components/community-recommendation-panel-view":98,"../components/contributors-view":100,"../components/dropdown-view":101,"../components/fab-view":104,"../components/image-carousel-view":106,"../components/join-tag-sidebar-view":110,"../components/lazy-image-carousel-view":112,"../components/lazy-multi-user-view":113,"../components/lustre-ai-promote-footer-view":117,"../components/modal-view":122,"../components/multi-user-view":124,"../components/option-tabs-view":130,"../components/panel-view":131,"../components/promote-question-view":134,"../components/question-header-view":137,"../components/reaction-menu-dropdown-view":142,"../components/recommendation-drawer-view":145,"../components/recommendation-form-view":147,"../components/recommendation-view":150,"../components/search-option-dropdown-view":153,"../components/searchable-popup-invoker-view":155,"../components/sidebar-activity-view":156,"../components/slant-score-view":159,"../components/spec-table-view":162,"../components/toaster-view":166,"../components/tooltip-view":167,"../lists/list-view":173,"../lists/my-recommendation-list-view":174,"../lists/option-list-view":175,"../lists/sidebar-related-question-list-view":180,"../models/option-view":200,"../models/question-view":201,"../models/rec-view":202,"../models/section-view":204,"../models/spec-view":205,"../models/user-view":207,"../threads/community-recommendation-thread-view":252,"../threads/option-thread-view":256,"./post-page-view":244,jquery:438,marked:440,"marked-plaintext":439,moment:441,underscore:448,urijs:452}],249:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I;({BaseView:i}=e("../base-view")),({PageView:r}=e("./page-view")),({TagView:R}=e("../models/tag-view")),({TagListView:m}=e("../lists/tag-list-view")),({QuestionCardListView:s}=e("../components/question-card-view")),({RecommendationCardListView:a,RecommendationCardAnswerView:l}=e("../components/recommendation-card-view")),({RecommendationOptionCardContainerView:u}=e("../components/recommendation-option-card-view")),({SidebarTagFilterView:c}=e("../components/sidebar-tag-filter-view")),({TagDropdownView:d}=e("../components/tag-dropdown-view")),({ToasterView:S,ToastCollapsedView:C}=e("../components/toaster-view")),({TopicList:P,TagList:h}=e("../../collections")),({Topic:k,Filter:o,Tag:p}=e("../../models")),({shortenNumber:L,splitUnit:I}=e("../../utils/transforms")),M=e("underscore"),T=e("urijs"),e("moment"),V=function(){class e extends r{title(){var e,t,n;switch(t=this.model.get("tags").filter(function(e){return e.get("isFilter")}).map(function(e){return e.get("name")}).join(" + "),null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0){case"top":n="Top "+t+" Question";break;case"improve":n="Improve "+t+" Question";break;case"recs":n=t+" Product Recommendations";break;case"feed":n=t+" Questions";break;default:n=t+" Questions"}return super.title(n)}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._TagPageView")}}).prototype.rule={"._has-recent-recs=":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return""},"._tag-name=":function(){var e;return null!=(e=this.model.get("tags").at(0))?e.get("name"):void 0},"._TagPageNavHeaderView=":function(){return new f({model:this.model})},"._TagPageNavSidebarView=":function(){return new g({model:this.model})},"._QuestionCardListView=":function(){var e;return"recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0)?new u({collection:this.model.get("content")}):new w({collection:this.model.get("content")})},"._SidebarTagFilterView=":function(){return new x({collection:this.model.get("tags")})},"._RecommendationCardAnswerView=":function(){var e,t,n;return t=new T("/topics/random"),(e=this.model.get("tags").at(0).id)&&t.setSearch({filter_tags:e}),n=t.toString(),new l({model:new k({URL:n}),ajax:n})},"._RecommendationCardListView=":function(){var e,t;return t=new T(this.model.get("content").url()).path("/activity").setSearch({filter:"recommended"}).setSearch({tags:null!=(e=this.model.get("tags").findWhere({isFilter:!0}))?e.id:void 0}).toString(),new v({ajax:t})},"._TagPageRelatedTagsListView=":function(){var e,t;return e=this.model.get("content").meta("properties").tags[0].id,t=new h([]),new _({collection:t,ajax:"/tags",currentTag:e})},"._TagPageToasterView=":function(){return new b}},e}.call(this),e}.call(this),w=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{}).prototype.rule={"._load-more-link@href":function(){var e,t,n,i,o;return o=new T(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0),i=M.pluck(null!=(n=this.collection.meta("properties"))?n.tags:void 0,"id"),o.directory("tags").path(i[0]).removeSearch("tags"),i.length>1&&o.setSearch("filter_tags",i.slice(1).join(",")),o}},e}.call(this),e}.call(this),y=function(){class e extends R{}return e.prototype.Rule=class extends R.prototype.Rule{template(){return template("._TagPageRelatedTagsItemView")}},e}.call(this),_=function(){class e extends m{initialize(e){if(e.currentTag=this.$el.attr("data-current-tag")||e.currentTag||"",super.initialize(...arguments),null!=e.currentTag)return this.$el.attr("data-current-tag",e.currentTag)}getItems(){var e;return e=super.getItems(...arguments),M.reject(e,function(e){return"female-fashion"===e.id})}filter(e){return e.get("id")!==this.options.currentTag}}return e.prototype.limit=12,e.prototype.ItemView=y,e.prototype.options={inferModel:!1},e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._TagPageRelatedTagsListView")}},e.prototype.events={"click ._more-tags-link":function(e){var t,n,i;if(null==(n=this.popup)||!n.attached)return i=this.$("._TagPageRelatedTagsItemView").eq(0).position().top,t=this.$("._TagPageRelatedTagsItemView").filter(function(){return $(this).position().top===i}).length+1,this.popup=new d({collection:this.collection,follows:e.currentTarget,offset:t})}},e}.call(this),f=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._TagPageNavHeaderView")}}).prototype.rule={"._recs-link":{"@href":function(){return new T(this.model.url()).removeSearch("filter").addSearch("filter","recs").removeSearch("page")},"@class+":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"}},"._feed-link":{"@href":function(){return new T(this.model.url()).removeSearch("filter").addSearch("filter","feed").removeSearch("page")},"@class+":function(){var e;if("feed"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"}},"._top-link":{"@href":function(){return new T(this.model.url()).removeSearch("filter").addSearch("filter","top").removeSearch("page")},"@class+":function(){var e;if("top"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"}},"._improve-link":{"@href":function(){return new T(this.model.url()).removeSearch("filter").addSearch("filter","improve").removeSearch("page")},"@class+":function(){var e;if("improve"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"}}},e}.call(this),e}.call(this),g=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._TagPageNavSidebarView")}},e}.call(this),v=function(){class e extends a{}return e.prototype.limit=3,e}.call(this),x=function(){class e extends c{}return e.prototype.offset=1,e}.call(this),b=function(){class e extends S{}return e.prototype.DefaultToastView=C,e}.call(this),t.exports={TagPageView:V,TagPageQuestionCardListView:w,TagPageRelatedTagsItemView:y,TagPageRelatedTagsListView:_,TagPageNavHeaderView:f,TagPageNavSidebarView:g,TagPageRecommendationCardListView:v,TagPageSidebarTagFilterView:x,TagePageToasterView:b}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":91,"../components/question-card-view":135,"../components/recommendation-card-view":144,"../components/recommendation-option-card-view":148,"../components/sidebar-tag-filter-view":157,"../components/tag-dropdown-view":164,"../components/toaster-view":166,"../lists/tag-list-view":182,"../models/tag-view":206,"./page-view":241,moment:441,underscore:448,urijs:452}],250:[function(e,t,n){var i,o,r,s;({PostPageView:i}=e("./post-page-view")),({QuestionView:r}=e("../models/question-view")),({QuestionEditorView:o}=e("../components/question-editor-view")),s=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._UpdateQuestionPageView")}}).prototype.rule={"._QuestionEditorView=":function(){return new o({model:this.model})}},e}.call(this),e}.call(this),t.exports={UpdateQuestionPageView:s}},{"../components/question-editor-view":136,"../models/question-view":201,"./post-page-view":244}],251:[function(e,t,n){var i,o,r,s,l;({ThreadView:l}=e("./thread-view")),({EventView:s}=e("../models/event-view")),({ActivityView:o}=e("../components/activity-view")),({EventList:r}=e("../../collections")),i=function(){class e extends l{}return e.prototype.Collection=r,e.prototype.ItemView=o,e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._ActivityThreadView")}},e}.call(this),t.exports={ActivityThreadView:i}},{"../../collections":2,"../components/activity-view":92,"../models/event-view":192,"./thread-view":258}],252:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B;({BaseView:i}=e("../base-view")),({ListView:w}=e("../lists/list-view")),({ThreadView:M}=e("../threads/thread-view")),({UserView:I}=e("../models/user-view")),({SectionView:T}=e("../models/section-view")),({RecView:S}=e("../models/rec-view")),({ReactionTextButtonUsefulView:V}=e("../components/reaction-button-set-view")),({PanelView:v}=e("../components/panel-view")),({CommunityRecommendationPanelView:a}=e("../components/community-recommendation-panel-view")),({RecModel:b,HighlightModel:g,UserModel:L,SectionModel:P,ReactionModel:x,QuestionPageQuery:y,RecPageQuery:C}=e("../../models/index")),({RecCollection:R,HighlightCollection:f,SectionCollection:k,ReactionCollection:_}=e("../../collections/index")),({improveURL:E,splitUnit:U,shortenNumber:$,trimText:B,decodeHTMLEntities:A}=e("../../utils/transforms")),O=e("underscore"),D=e("moment"),e("marked"),new(e("marked-plaintext"))({spaces:!0}),m=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.stopListening(this.collection)}}return e.prototype.Collection=R,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommunityRecommendationsView")}}).prototype.rule={"._CommunityRecommendationThreadView=":function(){return new d({collection:this.collection})},"._CommunityRecommendationNoTextThreadView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),s=function(){class e extends S{openRecPanel(){var e;return null!=(e=new v({model:this.model}))?e.setContent(a,{model:this.model}):void 0}fetchVote(e){var t,n;return this.fetched?e():(this.$el.addClass("Loading"),n=(()=>(this.fetched=!0,this.$el.removeClass("Loading"),e())),t=(()=>this.$el.removeClass("Loading")),this.model.store.ensureQuery(C,{rec_id:this.model.id}).fetch({silent:!0,success:n,error:t}))}getRecType(){return"Community"}}return e.prototype.Model=b,e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{template(){return template("._CommunityRecommendationItemView")}}).prototype.rule={"._is-empty-recommendation=":function(){var e;if((null!=(e=this.model.get("body"))?e.trim():void 0)||this.model.getCollection("rec_highlight_ids").length)return""},"._time-ago=":function(){return D(new Date(this.model.get("modified_timestamp"))).fromNow()},"._user-first-name=":function(){var e;return null!=(e=this.model.getModel("user_id").get("displayname")||this.model.get("username"))?e.split(" ")[0]:void 0},"._is-downvote-class@class+":function(){if(this.model.get("magnitude")<0)return"downVote"},"._CommunityRecommendationUserView=":function(){return new h({model:this.model.getModel("user_id")})},"._CommunityRecommendationHighlightListView=":function(){return new o({collection:this.model.getCollection("rec_highlight_ids")})},"._CommunityRecommendationReactionsView=":function(){return new c({collection:this.model.getCollection("rec_reaction_ids")})}},e}.call(this),e.prototype.events={"click ._full-recommendation-link":function(){return this.fetchVote(()=>this.openRecPanel()),analytics.track("Community Rec Expand Link Clicked")},"click ._option-link":function(){return analytics.track(`${this.getRecType()} Rec Option Title Clicked`)}},e}.call(this),d=function(){class e extends M{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.collection.getParent().getCollection("question_option_ids").forEach(e=>{var t;return t=e.getLegacyModel(),this.listenTo(t.get("votes"),"vote repaint",this.update)}),this.listenTo(window.currentUserV2,"change repaint",this.update)}filter(e){return e.loaded&&("undefined"!=typeof window&&null!==window?window.currentUserV2.id:void 0)!==e.get("user_id")&&e.isVoted()&&this.isOfType(e)}isOfType(e){var t;return e.loaded&&(null!=(t=e.get("body"))?t.trim():void 0)}loadMore(e={}){var t,n,i;return t=this.collection.indexOf(this.collection.findWhere({magnitude:void 0})),i=O.extend({question_id:this.collection.getParent().get("question_id"),rec_limit:10,rec_offset:t,option_limit:0}),n=this.collection.store.ensureQuery(y,i),e=O.defaults({query:n},e),super.loadMore(e)}}return e.prototype.Collection=R,e.prototype.options={infiniteScroll:!1},e.prototype.ItemView=s,e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._CommunityRecommendationThreadView")}},e}.call(this),l=function(){class e extends d{initialize(){return this.isExpanded=!1,super.initialize(...arguments)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.isExpanded?this.$(".CommunityRecommendation-List").removeClass("collapsed"):void 0}isOfType(e){var t;return e.loaded&&!(null!=(t=e.get("body"))?t.trim():void 0)}}return e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._CommunityRecommendationNoTextThreadView")}}).prototype.rule={"._has-recommendations=":function(){if(!this.collection.length)return""},"._has-more-items=":function(){if(!(this.collection.getUnloaded().length>0||!this.isExpanded&&O.any(this.getItems(),this.isOfType)))return""},"._is-showing-recommendations=":function(){if(!this.isExpanded&&!this.collection.chain().slice(0,10).find(function(e){var t;return null!=(t=e.rec_ranking_obj)?t.react_useful_count:void 0}))return""},"._not-showing-recommendations=":function(){if(this.isExpanded||this.collection.chain().slice(0,10).find(function(e){var t;return null!=(t=e.rec_ranking_obj)?t.react_useful_count:void 0}))return""},"._displayed-recommendations-count=":function(){return this.collection.filter(function(e){return e.loaded&&e.isVoted()}).length},"._total-recommendations-count=":function(){return this.collection.length}},e}.call(this),e.prototype.events={"click ._load-more-link":function(e){var t;if(e.stopImmediatePropagation(),e.preventDefault(),analytics.track("Community Recs Load More Button Clicked"),t=null!=this.collection.find(this.isOfType),!this.isExpanded&&t)return this.isExpanded=!0,this.collection.hasUnloaded()?this.loadMore():this.update();this.loadMore()},"click ._show-recommendations-link":function(e){return this.isExpanded=!0,analytics.track("Community Recs Show All Button Clicked"),this.update()}},e}.call(this),h=function(){class e extends I{}return e.prototype.Model=L,e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._CommunityRecommendationUserView")}}).prototype.rule={"._is-own-recommendation=":function(){if(this.model.get("username")!==("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._not-own-recommendation=":function(){if(this.model.get("username")===("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._user-first-name=":function(){var e;return null!=(e=this.model.get("displayname")||this.model.get("username"))?e.split(" ")[0]:void 0},"._created-time-ago=":function(){return D(new Date(this.model.get("created_timestamp"))).fromNow(!0)},"._total-recs-count=":function(){return U($(this.model.get("user_contribs_obj").rec_count||0,0)).value},"._total-recs-count-unit=":function(){return U($(this.model.get("user_contribs_obj").rec_count||0,0)).unit},"._karma-count=":function(){return U($(this.model.get("user_contribs_obj").karma_total||0,0)).value},"._karma-count-unit=":function(){return U($(this.model.get("user_contribs_obj").karma_total||0,0)).unit}},e}.call(this),e.prototype.events={"click ._user-link":function(e){return analytics.track("Community Rec User Profile Link Clicked")}},e}.call(this),p=function(){class e extends T{}return e.prototype.Model=P,e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._CommunityRecommendationSectionView")}},e}.call(this),r=function(){class e extends i{}return e.prototype.Model=g,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommunityRecommendationHighlightView")}}).prototype.rule={"._CommunityRecommendationSectionView=":function(){return new p({model:this.model.getModel("section_id")})}},e}.call(this),e}.call(this),o=function(){class e extends w{filter(e){var t;return t=e.getModel("section_id"),e.get("magnitude")>0&&!t.isMarked()}}return e.prototype.Collection=f,e.prototype.ItemView=r,e.prototype.limit=3,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._CommunityRecommendationHighlightListView")}},e}.call(this),c=function(){class e extends i{}return e.prototype.Collection=_,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommunityRecommendationReactionsView")}}).prototype.rule={"._CommunityRecommendationReactionButtonUsefulView=":function(){return new u({collection:this.collection})}},e}.call(this),e}.call(this),u=function(){class e extends V{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Card")}}return e.prototype.Rule=class extends V.prototype.Rule{},e}.call(this),t.exports={CommunityRecommendationsView:m,CommunityRecommendationItemView:s,CommunityRecommendationThreadView:d,CommunityRecommendationNoTextThreadView:l,CommunityRecommendationUserView:h,CommunityRecommendationSectionView:p,CommunityRecommendationHighlightView:r,CommunityRecommendationHighlightListView:o,CommunityRecommendationReactionsView:c,CommunityRecommendationReactionButtonUsefulView:u}},{"../../collections/index":7,"../../models/index":64,"../../utils/transforms":89,"../base-view":91,"../components/community-recommendation-panel-view":98,"../components/panel-view":131,"../components/reaction-button-set-view":141,"../lists/list-view":173,"../models/rec-view":202,"../models/section-view":204,"../models/user-view":207,"../threads/thread-view":258,marked:440,"marked-plaintext":439,moment:441,underscore:448}],253:[function(e,t,n){var i,o;({ThreadView:o}=e("./thread-view")),i=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._dropdown-scrollable-content").on("scroll",()=>this.checkScroll())}update(){var e,t;if(t=null!=(e=this.$("._dropdown-scrollable-content").scrollTop())?e:0,super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._dropdown-scrollable-content").scrollTop(t),this.$("._dropdown-scrollable-content").on("scroll",()=>this.checkScroll())}checkScroll(){var e,t,n,i;if(e=(t=this.$("._dropdown-scrollable-content")).scrollTop()+(n=t.height()),i=t.prop("scrollHeight"),!this.isLoading&&e+2*n>i)return this.isLoading=!0,this.loadMore()}}return e.prototype.Rule=class extends o.prototype.Rule{},e.prototype.events={"scroll document":function(e){}},e}.call(this),t.exports={DropdownThreadView:i}},{"./thread-view":258}],254:[function(e,t,n){var i,o,r,s,l,a;({EventList:i}=e("../../collections")),({ThreadView:a}=e("./thread-view")),({EventView:r}=e("../models/event-view")),({OptionEventView:s}=e("../models/option-event-view")),({SectionEventView:l}=e("../models/section-event-view")),o=function(){class e extends a{getItemView(){return this.collection.parents("section")?l:this.collection.parents("viewpoint")?s:r}}return e.prototype.Collection=i,e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventThreadView")}},e}.call(this),t.exports={EventThreadView:o}},{"../../collections":2,"../models/event-view":192,"../models/option-event-view":199,"../models/section-event-view":203,"./thread-view":258}],255:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./activity-thread-view"),e("./community-recommendation-thread-view"),e("./dropdown-thread-view"),e("./event-thread-view"),e("./option-thread-view"),e("./question-thread-view"),e("./thread-view"))},{"./activity-thread-view":251,"./community-recommendation-thread-view":252,"./dropdown-thread-view":253,"./event-thread-view":254,"./option-thread-view":256,"./question-thread-view":257,"./thread-view":258,underscore:448}],256:[function(e,t,n){var i,o,r,s;({OptionCollection:i}=e("../../collections/index")),({ThreadView:s}=e("./thread-view")),({OptionView:r}=e("../models/option-view")),o=function(){class e extends s{}return e.prototype.Collection=i,e.prototype.ItemView=r,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._OptionThreadView")}},e}.call(this),t.exports={OptionThreadView:o}},{"../../collections/index":7,"../models/option-view":200,"./thread-view":258}],257:[function(e,t,n){var i,o,r,s;({TopicList:s}=e("../../collections")),({ThreadView:r}=e("./thread-view")),({QuestionView:o}=e("../models/question-view")),i=function(){class e extends r{}return e.prototype.Collection=s,e.prototype.ItemView=o,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._QuestionThreadView")}},e}.call(this),t.exports={QuestionThreadView:i}},{"../../collections":2,"../models/question-view":201,"./thread-view":258}],258:[function(e,t,n){var i,o,r;e("../../rule"),e("../../model"),e("../../collection"),({ListView:i}=e("../lists/list-view")),r=e("underscore"),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return r.defer(()=>this.checkScroll())}checkScroll(){var e,t,n,i;if(!1!==this.options.infiniteScroll&&this.$el.is(":visible"))return i=(e=$(window)).scrollTop()+(n=e.height())+4*n,t=this.$el.position().top+this.$el.height(),!this.isLoading&&i>t&&this.hasUnloaded()?(this.isLoading=!0,this.loadMore()):void 0}hasUnloaded(){return this.collection.hasUnloaded()}loadMore(e){var t;return(t=this.$("._load-more-link")).addClass("Loading"),this.collection.once("sync error",(e,n)=>(this.isLoading=!1,t.removeClass("Loading"),this.onMoreContentLoaded(),this.checkScroll())),e.query.fetch({success:()=>this.collection.trigger("change sync")})}onMoreContentLoaded(){return this.collection.trigger("repaint")}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-more-items=":function(){if(!this.hasUnloaded())return""},"._no-more-items=":function(){if(this.hasUnloaded())return""}},e}.call(this),e.prototype.events={"scroll document":function(e){return this.checkScroll()},"resize window":function(e){return this.checkScroll()},"click ._load-more-link":function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.loadMore()}},e}.call(this),t.exports={ThreadView:o}},{"../../collection":1,"../../model":33,"../../rule":81,"../lists/list-view":173,underscore:448}],259:[function(e,t,n){var i,o,r,s;o=e("../rule"),r=e("../view"),s=/.+\/ai\/\w*/,i=function(){class e extends r{loadLink(e,t){var n,i,o,r,l,a,u;if((u=e.currentTarget).href.replace(u.hash,"")!==location.href.replace(location.hash,"")&&(!u.href.match(s)||location.href.match(s)))return u.host===location.host&&!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||u.target)&&(e.preventDefault(),l=u.pathname,a=u.search,o=u.hash,null!=u.getAttribute("data-bootstrap")&&(i=null==(n=(null!=(r=this.model)?r:this.collection).clone({deep:!0}))),t=_.extend({trigger:!0,search:a,hash:o,bootstrap:n,fill:i},t),l)?router.navigate(l,t):void 0}}return e.prototype.Rule=class extends o{},e}.call(this),t.exports={BaseView:i}},{"../rule":81,"../view":90}],260:[function(e,t,n){var i,o,r,s,l;({EventView:r}=e("../models/event-view")),({Event:o,Topic:s}=e("../../models")),({improveURL:l}=e("../../utils/transforms")),i=function(){class e extends r{getTopic(){var e;return(e=this.model.get("target"))instanceof s?e:this.model.get("target").collection.parents("topic")}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._ActivityView")}}).prototype.rule={"._question-title=":function(){var e;return null!=(e=this.getTopic())?e.get("revision").get("title").trim():void 0},"._question-link@href":function(){var e;return e=this.getTopic(),l(e,null!=e?e.get("communityURL"):void 0)},"._EventView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),t.exports={ActivityView:i}},{"../../models":34,"../../utils/transforms":89,"../models/event-view":353}],261:[function(e,t,n){(function(n){var i,o,r,s,l,a;({BaseView:l}=e("../base-view")),({TooltipView:a}=e("../components/tooltip-view")),s=function(){class e extends l{hasAds(){var e;return"true"===(e=("undefined"!=typeof window&&null!==window?window:n).env).ENABLE_PLAYWIRE_ADS&&null!=e.PLAYWIRE_ADS_CONFIG_URL&&!("undefined"!=typeof window&&null!==window&&window.currentUser.get("username")&&!window.currentUser.get("isModerator"))}openExplanationTooltip(e){var t;if(null==(t=this.explainTooltip)||!t.attached)return this.explainTooltip=new i({follows:e.currentTarget})}}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._has-ads=":function(){if(!this.hasAds())return""},"._tagged-ad@id":function(){return this.adId}},e}.call(this),e.prototype.events={"mouseover ._explain-ad-tooltip-link":function(e){return this.openExplanationTooltip(e)},"mouseenter ._explain-ad-tooltip-link":function(e){var t,n;return n=null!=(t=this.type)?t:"None",analytics.track("Ad Info Tooltip Opened",{label:n})}},e}.call(this),r=function(){class e extends s{}return e.prototype.type="sidebar",e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._AdSidebarAdView")}},e}.call(this),o=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._AdInArticleAdView")}},e}.call(this),i=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._AdExplanationTooltipView")}},e}.call(this),t.exports={AdView:s,AdSidebarAdView:r,AdInArticleAdView:o,AdExplanationTooltipView:i}}).call(this,e("_process"))},{"../base-view":259,"../components/tooltip-view":328,_process:426}],262:[function(e,t,n){var i,o,r,s,l;({BaseView:i}=e("../base-view")),({ListView:s}=e("../lists/list-view")),l=e("underscore"),o=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._CarouselItemView")}},e}.call(this),r=function(){class e extends s{initialize(){return this.currentIndex=0,super.initialize(...arguments)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return l.defer(()=>this.position())}orientationProperties(){var e;return"vertical"===(null!=(e=this.options)?e.orientation:void 0)?{position:"top",size:"height",scroll:"scrollHeight"}:{position:"left",size:"width",scroll:"scrollWidth"}}updateNav(e){var t,n;return n=this.orientationProperties(),(t=this.$("._carousel-list")).prop(n.scroll)<=t[n.size]()?(this.$("._previous-item-link").addClass("disabled"),void this.$("._next-item-link").addClass("disabled")):(this.$("._previous-item-link").removeClass("disabled"),this.$("._next-item-link").removeClass("disabled"),0===this.currentIndex?this.$("._previous-item-link").addClass("disabled"):this.$("._previous-item-link").removeClass("disabled"),this.hasOverflow(e)?this.$("._next-item-link").removeClass("disabled"):this.$("._next-item-link").addClass("disabled"))}hasOverflow(e){var t,n;return n=this.orientationProperties(),(t=this.$("._carousel-list")).prop(n.scroll)>t[n.size]()-(null!=e?e:parseInt(t.css(n.position)))}step(e){var t,n;if(t=this.currentIndex+e,0<=(n=this.currentIndex+e)&&n<this.$("._carousel-item:visible").length)return this.position(t)}position(e){var t,n,i,o,r,s,l;return l=this.orientationProperties(),this.currentIndex=null!=e?e:this.currentIndex,n=this.$("._carousel-list"),t=this.$("._carousel-item:visible").eq(this.currentIndex),0===this.currentIndex?r=0:(o=this.$("._carousel-offset")[l.size]()||0,r=t.position()[l.position]-o,(i=n.prop(l.scroll)-n[l.size]())<r&&(this.currentIndex-1==0?0:(null!=(s=this.$("._carousel-item:visible").eq(this.currentIndex-1))?s.position()[l.position]:void 0)-o,r=i)),n.css(l.position,-r),this.updateNav(-r),this.updateCurrentIndexIndicators()}updateCurrentIndexIndicators(){var e,t;return(e=this.$("._index-indicator-item")).removeClass("selected"),null!=(t=e.eq(this.currentIndex))?t.addClass("selected"):void 0}}return e.prototype.ItemView=o,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._CarouselView")}}).prototype.rule={"._index-indicator@data-total":function(){return this.collection.length||0}},e}.call(this),e.prototype.events={"resize window":function(e){return this.position()},"click ._previous-item-link":function(e){return this.step(-1)},"click ._next-item-link":function(e){return this.step(1)}},e}.call(this),t.exports={CarouselItemView:o,CarouselView:r}},{"../base-view":259,"../lists/list-view":334,underscore:448}],263:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{"../../models":34,"../models/user-view":366,"./dropdown-view":268,"./login-modal-view":280,dup:96,underscore:448}],264:[function(e,t,n){arguments[4][97][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../lists/list-view":334,"../models/option-view":359,"./tooltip-view":328,dup:97,underscore:448}],265:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P;P=e("moment"),k=e("marked"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({BaseView:o}=e("../base-view")),({RecommendationPanelView:V,RecommendationPanelHeaderView:y,RecommendationPanelUserView:x,RecommendationPanelContentView:v,RecommendationPanelSectionView:_}=e("../components/recommendation-panel-view")),({ListView:g}=e("../lists/list-view")),({ReactionTextButtonUsefulView:w}=e("../components/reaction-button-set-view")),({ViewpointVote:S,User:C,Section:R}=e("../../models")),({SectionList:b}=e("../../collections")),f=function(){class e extends V{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Recommendation Panel Opened",{label:"community"})}}return e.prototype.Model=S,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new a({model:this.model})},"._RecommendationPanelContentView=":function(){return new s({model:this.model})}},e}.call(this),e}.call(this),a=function(){class e extends y{}return e.prototype.Model=S,e.prototype.Rule=function(){var e;return(e=class extends y.prototype.Rule{template(){return template("._CommunityRecommendationPanelHeaderView")}}).prototype.rule={"._owner-first-name=":function(){var e,t;return(null!=(t=(null!=(e=this.model.get("user"))?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0))?t.split(" ")[0]:void 0)||"User"},"._CommunityRecommendationPanelUserView=":function(){return new m({model:this.model.get("user")})}},e}.call(this),e}.call(this),m=function(){class e extends x{}return e.prototype.Model=C,e.prototype.Rule=class extends x.prototype.Rule{},e}.call(this),s=function(){class e extends v{collapsePanel(){return this.closePanel()}getSourceOption(){var e,t;return null!=this.sourceOption?this.sourceOption:(e=this.model.get("viewpointID"),this.sourceOption=this.model.parents("viewpoint")||(null!=(t=this.model.parents("topic"))?t.get("viewpoints").findWhere({id:e}):void 0))}}return e.prototype.Model=S,e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._CommunityRecommendationPanelContentView")}}).prototype.rule={"._has-recommendation-body=":function(){if(!this.model.get("text").trim())return""},"._has-pros=":function(){var e;if(!(null!=(e=this.getSourceOption())?e.get("sections").any(function(e){return!1===e.get("isCon")&&e.get("votes").meta("delta")>0}):void 0))return""},"._has-cons=":function(){var e;if(!(null!=(e=this.getSourceOption())?e.get("sections").any(function(e){return!0===e.get("isCon")&&e.get("votes").meta("delta")>0}):void 0))return""},"._rec-last-updated=":function(){return P(new Date(this.model.get("lastUpdated"))).format("MMMM Do, YYYY")},"._recommendation-text=":function(){return i(k(this.model.get("text").trim()))},"._CommunityRecommendationPanelProsListView=":function(){var e;return new u({collection:null!=(e=this.getSourceOption())?e.get("sections"):void 0,vote:this.model})},"._CommunityRecommendationPanelConsListView=":function(){var e;return new r({collection:null!=(e=this.getSourceOption())?e.get("sections"):void 0,vote:this.model})},"._CommunityRecommendationPanelFooterView=":function(){return new l({model:this.model})}},e}.call(this),e}.call(this),l=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._CommunityRecommendationPanelFooterView")}}).prototype.rule={"._CommunityRecommendationPanelReactionButtonSetView=":function(){return new c({model:this.model.get("reactionSet")})}},e}.call(this),e}.call(this),c=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._CommunityRecommendationPanelReactionButtonSetView")}}).prototype.rule={"._CommunityRecommendationPanelReactionButtonUsefulView=":function(){return new p({collection:this.model.get("useful")})}},e}.call(this),e}.call(this),p=function(){class e extends w{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Panel")}}return e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),h=function(){class e extends _{}return e.prototype.Model=R,e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._CommunityRecommendationPanelSectionView")}},e}.call(this),d=function(){class e extends g{filter(e){return e.get("votes").meta("delta")>0&&!e.isMarked()}}return e.prototype.Collection=b,e.prototype.ItemView=h,e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){var e,t;if(!((null!=(e=this.options)&&null!=(t=e.vote)?t.get("delta"):void 0)>0))return""},"._is-downvote=":function(){var e,t;if(!((null!=(e=this.options)&&null!=(t=e.vote)?t.get("delta"):void 0)<0))return""}},e}.call(this),e}.call(this),u=function(){class e extends d{filter(e){return super.filter(e)&&!1===e.get("isCon")}}return e.prototype.Collection=b,e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._CommunityRecommendationPanelProsListView")}},e.prototype.isCon=!1,e}.call(this),r=function(){class e extends d{filter(e){return super.filter(e)&&!0===e.get("isCon")}}return e.prototype.Collection=b,e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._CommunityRecommendationPanelConsListView")}},e.prototype.isCon=!0,e}.call(this),t.exports={CommunityRecommendationPanelView:f,CommunityRecommendationPanelHeaderView:a,CommunityRecommendationPanelUserView:m,CommunityRecommendationPanelContentView:s,CommunityRecommendationPanelFooterView:l,CommunityRecommendationPanelReactionButtonSetView:c,CommunityRecommendationPanelReactionButtonUsefulView:p,CommunityRecommendationPanelSectionView:h,CommunityRecommendationPanelSectionListView:d,CommunityRecommendationPanelProsListView:u,CommunityRecommendationPanelConsListView:r}},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../models":34,"../base-view":259,"../components/reaction-button-set-view":302,"../components/recommendation-panel-view":310,"../lists/list-view":334,jquery:438,marked:440,moment:441}],266:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{"../base-view":259,dup:99,underscore:448}],267:[function(e,t,n){var i,o,r,s,l,a,u;({UserListView:l}=e("../lists/user-list-view")),({TooltipUserView:s}=e("../components/tooltip-view")),({UserView:a}=e("../models/user-view")),({ImageLazyLoaderMixinView:r}=e("../mixins/image-lazy-loader-mixin-view")),({shortenNumber:u}=e("../../utils/transforms")),i=function(){class e extends a{}return e.prototype.mixin(r),e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._ContributorsUserView")}},e.prototype.events={"mouseover ._user-link":function(e){return new s({model:this.model,follows:e.currentTarget})}},e}.call(this),o=function(){class e extends l{}return e.prototype.limit=11,e.prototype.ItemView=i,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._ContributorsView")}}).prototype.rule={"._has-more-users=":function(){if(!(this.collection.count()-this.limit>0))return""},"._more-users-count=":function(){return u(this.collection.count()-this.limit)}},e}.call(this),e}.call(this),t.exports={ContributorsView:o,ContributorsUserView:i}},{"../../utils/transforms":89,"../components/tooltip-view":328,"../lists/user-list-view":344,"../mixins/image-lazy-loader-mixin-view":347,"../models/user-view":366}],268:[function(e,t,n){arguments[4][101][0].apply(n,arguments)},{"../../utils/data":86,"./popup-view":294,dup:101}],269:[function(e,t,n){arguments[4][102][0].apply(n,arguments)},{"../components/edit-avatar-modal-view":270,"../components/popup-view":294,dup:102}],270:[function(e,t,n){arguments[4][103][0].apply(n,arguments)},{"../../models":34,"../base-view":259,"../models/image-view":354,"./modal-view":285,dup:103}],271:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;y=e("underscore"),({BaseView:i}=e("../base-view")),({RecommendationDropdownView:f}=e("../components/recommendation-dropdown-view")),({SearchableDropdownView:w}=e("./searchable-dropdown-view")),({TooltipView:v}=e("../components/tooltip-view")),({QuestionLevelRecommendationFormView:m,QuestionLevelRecommendationDropdownView:h}=e("../components/question-level-recommendation-form-view")),({RecommendationPanelManagerMixinView:g}=e("../mixins/recommendation-panel-manager-mixin-view")),d=function(){class e extends i{handleClick(){return analytics.track("FAB Recommend Clicked",{label:this.fabType||null}),this.createDropdown()}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._FABView")}},e.prototype.showTooltip=y.debounce(function(){if(this.mouseover)return new p({follows:this})},150),e.prototype.events={click:function(e){return this.handleClick()},mouseover:function(e){return this.mouseover=!0,this.showTooltip.call(this)},mouseout:function(e){return this.mouseover=!1}},e}.call(this),a=function(){class e extends d{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.position(),y.delay(()=>this.$el.removeClass("shrink"),250)}position(){var e,t,n,i;return t=null!=(i=(e=$("._fab-container")).position())?i.left:void 0,n=e.width(),this.$el.css({left:t+n/2})}createDropdown(){var e;return e=new u({collection:this.model.get("viewpoints"),follows:this,anchor:"above",cover:!0,fixed:!0}),this.$el.addClass("hidden"),this.listenTo(e,"dropdown-close",()=>this.$el.removeClass("hidden"))}}return e.prototype.fabType="Floating",e.prototype.Rule=class extends e.prototype.Rule{template(){return template("._FABRecommendView")}},e.prototype.events={"resize window":function(){return this.position()}},e}.call(this),o=function(){class e extends d{createDropdown(){return new u({collection:this.model.get("viewpoints"),follows:this,anchor:"below",cover:!0})}}return e.prototype.fabType="Inline",e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._FABRecommendButtonView")}},e}.call(this),r=function(){class e extends o{}return e.prototype.fabType="Micro Inline",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._FABRecommendMicroButtonView")}},e}.call(this),p=function(){class e extends v{}return e.prototype.options={anchor:"above"},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._FABRecommendationTooltipView")}},e}.call(this),u=function(){class e extends f{}return e.prototype.options={align:"center"},e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._FABRecommendationDropdownView")}},e}.call(this),s=function(){class e extends o{createDropdown(){var e;return null!=this.popup&&this.stopListening(this.popup,"fetched",this.fetchDone),e=new c({collection:this.model.get("viewpoints"),follows:this,hasFetched:this.fetched,userChanged:this.userChanged,fixed:!1,anchor:"below",cover:!0}),!this.userChanged&&this.fetched||this.listenTo(e,"fetched",this.fetchDone),e}}return e.prototype.mixin(g),e.prototype.fabType="Feed Inline",e.prototype.Rule=class extends o.prototype.Rule{},e.prototype.initialize=m.prototype.initialize,e.prototype.fetchDone=m.prototype.fetchDone,e}.call(this),l=function(){class e extends s{}return e.prototype.fabType="Feed Micro Inline",e.prototype.Rule=class extends r.prototype.Rule{},e}.call(this),c=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.initialize=h.prototype.initialize,e}.call(this),t.exports={FABView:d,FABRecommendView:a,FABRecommendButtonView:o,FABRecommendMicroButtonView:r,FABRecommendationTooltipView:p,FABRecommendationDropdownView:u,FABRecommendQuestionLevelButtonView:s,FABRecommendQuestionLevelMicroButtonView:l,FABRecommendationQuestionLevelDropdownView:c}},{"../base-view":259,"../components/question-level-recommendation-form-view":299,"../components/recommendation-dropdown-view":307,"../components/tooltip-view":328,"../mixins/recommendation-panel-manager-mixin-view":349,"./searchable-dropdown-view":315,underscore:448}],272:[function(e,t,n){arguments[4][105][0].apply(n,arguments)},{"../../rule":81,"../base-view":259,dup:105}],273:[function(e,t,n){var i,o,r,s,l,a,u,c,p;({CarouselView:o,CarouselItemView:i}=e("../components/carousel-view")),({ImageListView:u}=e("../lists/image-list-view")),({ImageView:c}=e("../models/image-view")),({OptionView:p}=e("../models/option-view")),({ImageList:a}=e("../../collections")),e("underscore"),s=function(){class e extends c{update(){return super.update(...arguments),this.$("._image-item").on("load",()=>{var e;return null!=(e=this.getParentByView(l))?e.position():void 0})}}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ImageCarouselItemView")}},e}.call(this),r=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ImageCarouselAddItemView")}},e}.call(this),l=function(){class e extends o{}return e.prototype.Collection=a,e.prototype.ItemView=s,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._ImageCarouselView")}}).prototype.rule={"._not-max-images=":function(){if(this.collection.length>=5)return""},"._single-item-class@class+":function(){if(1===this.collection.length)return"singleItem"},"._ImageCarouselAddItemView=":function(){return new r({model:this.collection.parents("viewpoint")})}},e}.call(this),e}.call(this),t.exports={ImageCarouselItemView:s,ImageCarouselAddItemView:r,ImageCarouselView:l}},{"../../collections":2,"../components/carousel-view":262,"../lists/image-list-view":332,"../models/image-view":354,"../models/option-view":359,underscore:448}],274:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({BaseView:i}=e("../base-view")),({ImageView:m}=e("../models/image-view")),({ImageCarouselView:s,ImageCarouselAddItemView:r}=e("../components/image-carousel-view")),({ImageList:h}=e("../../collections")),({Image:o}=e("../../models")),d=function(){class e extends i{setSelected(e){var t,n;if(0<=(n=this.collection.indexOf(e))&&n<this.collection.length)return null!=(t=this.getChildrenByView(a)[0])?t.position(n):void 0}setActiveImage(e){var t;return null!=(t=this.getChildrenByView(p)[0])?t.setActive(e):void 0}}return e.prototype.Collection=h,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ImageGalleryView")}}).prototype.rule={"._ImageGalleryMainCarouselView=":function(){return new a({collection:this.collection})},"._ImageGalleryThumbsCarouselView=":function(){return new p({collection:this.collection})}},e}.call(this),e}.call(this),l=function(){class e extends m{}return e.prototype.Model=o,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._ImageGalleryMainCarouselItemView")}},e}.call(this),a=function(){class e extends s{position(){var e;return super.position(...arguments),null!=(e=this.getParentByView(d))?e.setActiveImage(this.currentIndex):void 0}}return e.prototype.Collection=h,e.prototype.ItemView=l,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ImageGalleryMainCarouselView")}},e}.call(this),c=function(){class e extends m{}return e.prototype.Model=o,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselItemView")}},e.prototype.events={click:function(e){var t;return null!=(t=this.getParentByView(d))?t.setSelected(this.model):void 0}},e}.call(this),p=function(){class e extends s{setActive(e){var t,n;if(0<=e&&e<this.collection.length)return(t=this.$("._carousel-item")).removeClass("active"),null!=(n=t.eq(e))?n.addClass("active"):void 0}}return e.prototype.Collection=h,e.prototype.ItemView=c,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselView")}}).prototype.rule={"._ImageGalleryThumbsCarouselAddItemView=":function(){return new u({model:this.collection.parents("viewpoint")})}},e}.call(this),e}.call(this),u=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._ImageGalleryThumbsCarouselAddItemView")}},e}.call(this),t.exports={ImageGalleryView:d,ImageGalleryMainCarouselItemView:l,ImageGalleryMainCarouselView:a,ImageGalleryThumbsCarouselItemView:c,ImageGalleryThumbsCarouselView:p,ImageGalleryThumbsCarouselAddItemView:u}},{"../../collections":2,"../../models":34,"../base-view":259,"../components/image-carousel-view":273,"../models/image-view":354}],275:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./activity-view"),e("./ad-view"),e("./carousel-view"),e("./claim-banner-view"),e("./content-container-view"),e("./commonly-compared-view"),e("./community-recommendation-panel-view"),e("./dropdown-view"),e("./edit-avatar-dropdown-view"),e("./edit-avatar-modal-view"),e("./fab-view"),e("./feedback-form-view"),e("./image-carousel-view"),e("./image-gallery-view"),e("./join-tag-banner-view"),e("./join-tag-sidebar-view"),e("./karma-dropdown-view"),e("./lightbox-view"),e("./login-modal-view"),e("./lustre-ai-banner-view"),e("./main-header-view"),e("./master-option-card-view"),e("./master-option-dropdown-view"),e("./modal-view"),e("./more-dropdown-view"),e("./multi-user-view"),e("./my-recommendation-panel-view"),e("./notifications-dropdown-view"),e("./notification-view"),e("./notify-popup-view"),e("./option-dropdown-view"),e("./panel-view"),e("./popup-view"),e("./promote-question-view"),e("./question-card-view"),e("./question-editor-view"),e("./question-header-view"),e("./question-level-recommendation-form-view"),e("./question-tag-selector-view"),e("./reaction-banner-view"),e("./reaction-button-set-view"),e("./reaction-menu-dropdown-view"),e("./reaction-tooltip-view"),e("./recommendation-card-view"),e("./recommendation-drawer-view"),e("./recommendation-dropdown-view"),e("./recommendation-form-view"),e("./recommendation-option-card-view"),e("./recommendation-panel-view"),e("./recommendation-view"),e("./related-product-list-view"),e("./search-dropdown-view"),e("./search-option-dropdown-view"),e("./searchable-dropdown-view"),e("./searchable-popup-invoker-view"),e("./sidebar-activity-view"),e("./slant-score-view"),e("./contributors-view"),e("./sidebar-tag-filter-view"),e("./sidebar-user-stats-view"),e("./spec-editor-modal-view"),e("./spec-list-view"),e("./spec-table-view"),e("./sticky-sidebar-panel-view"),e("./tag-dropdown-view"),e("./tag-selector-view"),e("./toaster-view"),e("./tooltip-view"),e("./watch-view"))},{"./activity-view":260,"./ad-view":261,"./carousel-view":262,"./claim-banner-view":263,"./commonly-compared-view":264,"./community-recommendation-panel-view":265,"./content-container-view":266,"./contributors-view":267,"./dropdown-view":268,"./edit-avatar-dropdown-view":269,"./edit-avatar-modal-view":270,"./fab-view":271,"./feedback-form-view":272,"./image-carousel-view":273,"./image-gallery-view":274,"./join-tag-banner-view":276,"./join-tag-sidebar-view":277,"./karma-dropdown-view":278,"./lightbox-view":279,"./login-modal-view":280,"./lustre-ai-banner-view":281,"./main-header-view":282,"./master-option-card-view":283,"./master-option-dropdown-view":284,"./modal-view":285,"./more-dropdown-view":286,"./multi-user-view":287,"./my-recommendation-panel-view":288,"./notification-view":289,"./notifications-dropdown-view":290,"./notify-popup-view":291,"./option-dropdown-view":292,"./panel-view":293,"./popup-view":294,"./promote-question-view":295,"./question-card-view":296,"./question-editor-view":297,"./question-header-view":298,"./question-level-recommendation-form-view":299,"./question-tag-selector-view":300,"./reaction-banner-view":301,"./reaction-button-set-view":302,"./reaction-menu-dropdown-view":303,"./reaction-tooltip-view":304,"./recommendation-card-view":305,"./recommendation-drawer-view":306,"./recommendation-dropdown-view":307,"./recommendation-form-view":308,"./recommendation-option-card-view":309,"./recommendation-panel-view":310,"./recommendation-view":311,"./related-product-list-view":312,"./search-dropdown-view":313,"./search-option-dropdown-view":314,"./searchable-dropdown-view":315,"./searchable-popup-invoker-view":316,"./sidebar-activity-view":317,"./sidebar-tag-filter-view":318,"./sidebar-user-stats-view":319,"./slant-score-view":320,"./spec-editor-modal-view":321,"./spec-list-view":322,"./spec-table-view":323,"./sticky-sidebar-panel-view":324,"./tag-dropdown-view":325,"./tag-selector-view":326,"./toaster-view":327,"./tooltip-view":328,"./watch-view":329,underscore:448}],276:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S;({BaseView:i}=e("../base-view")),({TagView:b}=e("../models/tag-view")),({TagListView:_}=e("../lists/tag-list-view")),({SearchablePopupInvokerView:g}=e("../components/searchable-popup-invoker-view")),({TagSelectorDropdownView:x,TagSelectorTagListView:V,TagSelectorTagView:R}=e("../components/tag-selector-view")),({LoginModalView:f,LoginModalContentView:h,LoginModalRegisterContentView:m}=e("../components/login-modal-view")),({Tag:w,TagFilter:v}=e("../../models")),({TagList:y}=e("../../collections")),({tagData:S}=e("../../utils/data")),C=e("underscore"),d=function(){class e extends i{isGamingTag(){return this.collection.findWhere({id:"gaming"})&&!(this.collection.findWhere({id:"electronics"})||this.collection.findWhere({id:"software"}))}}return e.prototype.Collection=y,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._JoinTagBannerView")}}).prototype.rule={"._JoinTagBannerContentView=":function(){return this.isGamingTag()?new a:new r}},e}.call(this),e.prototype.events={"scroll document":function(e){var t;if(!this.scrollAnalyticsSent)return(t=$(window)).scrollTop()+(t.height()-($(".Toaster").height()||0))>=this.$("._join-link").offset().top?(this.scrollAnalyticsSent=!0,analytics.track("Join Tag Banner Footer In Viewport")):void 0}},e}.call(this),r=function(){class e extends g{initialize(){if(("undefined"!=typeof window&&null!==window?window._joinTags:void 0)?this.collection=window._joinTags:this.collection=new y([],{url:"/tags"}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&("undefined"==typeof window||null===window||!window._joinTags))return window._joinTags=this.collection,this.collection=window._joinTags,this.$el.addClass("Loading"),this.collection.fetch({silent:!0,success:()=>(this.collection.trigger("reset"),this.$el.removeClass("Loading")),error:()=>{var e;return this.collection=new y(function(){var t,n,i;for(i=[],t=0,n=S.length;t<n;t++)e=S[t],i.push(new w(e));return i}()),this.update(),this.$el.removeClass("Loading")}})}createPopupView(e){return new x({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}setAutoSelectedTags(){if(null!=this.autoSelectedTagIds)return C.forEach(this.autoSelectedTagIds,e=>{return this.collection.findWhere({id:e}).set({selected:!0,silent:!0})})}saveTags(){var e,t;return this.$el.addClass("Loading"),this.setAutoSelectedTags(),e=new y(this.collection.where({selected:!0})),(t=new v).url=function(){var e;return`/users/${null!=(e=window.currentUser.get("username"))?e:"_"}/tagFilter`},t.on("saveError",()=>this.$el.removeClass("Loading")),t.save({include:e},{success:(e,t)=>(window.localStorage.tagFilterData=JSON.stringify(t),this.loadFeed(e))})}loadFeed(e){var t,n;return"undefined"!=typeof window&&null!==window&&"/"!==new URI(window.location.href).path()?router.navigate("/",{trigger:!0}):($("body").scrollTop(0),t=this.getParentByView(Views.FrontPageView),null!=e&&null!=t&&null!=(n=t.model)&&n.set({include:e.get("include")},{silent:!0}),null!=t&&t.update(),null!=t&&t.fetchFeed(),this.$el.removeClass("Loading"))}emailSignIn(){var e;return e=new f({ContentView:m}),this.listenTo(e,"login",this.saveTags.bind(this))}thirdPartySignIn(e){var t;return t=new f({ContentView:h,contentOptions:{method:e}}),this.listenTo(t,"login",this.saveTags.bind(this))}}return e.prototype.Collection=y,e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._JoinTagBannerContentView")}}).prototype.rule={"._JoinTagBannerActiveTagListView=":function(){return new o({collection:this.collection})},"._JoinTagBannerDefaultTagListView=":function(){return new s({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._join-link":function(e){return analytics.track("Join Feed Email Button Clicked"),this.saveTags()}},e}.call(this),a=function(){class e extends r{createPopupView(e){var t;return t=new y(this.collection.reject(e=>"gaming"===e.get("id"))),new x({collection:t,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._JoinTagBannerGamingContentView")}}).prototype.rule={"._JoinTagBannerGamingActiveTagListView=":function(){return new l({collection:this.collection})},"._JoinTagBannerGamingTagListView=":function(){return new u({collection:this.collection})}},e}.call(this),e.prototype.autoSelectedTagIds=["gaming"],e}.call(this),p=function(){class e extends R{}return e.prototype.Rule=class extends R.prototype.Rule{template(){return template("._JoinTagBannerTagView")}},e}.call(this),c=function(){class e extends V{filter(e,t){return"female-fashion"!==e.get("id")}sortBy(e){var t;if((t=this.priorityTags.indexOf(e.get("id")))>=0)return t}}return e.prototype.ItemView=p,e.prototype.priorityTags=["laptops","smartphone","tv","headphones","routers","speakers","pc-games","ps4","xbox-one","nintendo-switch"],e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._JoinTagBannerTagListView")}},e}.call(this),s=class extends c{filter(e,t){return t<30&&super.filter(...arguments)}},o=class extends s{filter(e,t){return e.get("selected")&&!super.filter(...arguments)}},u=function(){class e extends s{}return e.prototype.priorityTags=["pc-games","ps4","xbox-one","nintendo-switch","android-games","ios-games","osx-games","linux-games","3ds","electronics","multiplayer","rpg","tabletop","board-games","headphones","music","game-development","monitors","laptops","tv","vr","online-games","sports","local-multiplayer","single-player","hardware","ps3","xbox-360","game-engine","sega"],e}.call(this),l=class extends u{filter(e){return e.get("selected")&&!super.filter(...arguments)}},t.exports={JoinTagBannerView:d,JoinTagBannerContentView:r,JoinTagBannerGamingContentView:a,JoinTagBannerTagView:p,JoinTagBannerTagListView:c,JoinTagBannerActiveTagListView:o,JoinTagBannerDefaultTagListView:s,JoinTagBannerGamingTagListView:u,JoinTagBannerGamingActiveTagListView:l}},{"../../collections":2,"../../models":34,"../../utils/data":86,"../base-view":259,"../components/login-modal-view":280,"../components/searchable-popup-invoker-view":316,"../components/tag-selector-view":326,"../lists/tag-list-view":343,"../models/tag-view":365,underscore:448}],277:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V;({BaseView:i}=e("../base-view")),({JoinTagBannerView:u,JoinTagBannerContentView:r,JoinTagBannerTagView:a,JoinTagBannerTagListView:l,JoinTagBannerGamingTagListView:s}=e("../components/join-tag-banner-view")),({StickySidebarPanelView:y}=e("../components/sticky-sidebar-panel-view")),({LoginModalView:v,LoginModalContentView:g,LoginModalRegisterContentView:w}=e("../components/login-modal-view")),({TagSelectorDropdownView:x}=e("../components/tag-selector-view")),({ClaimBannerSidebarCardView:o}=e("../components/claim-banner-view")),({TagList:_}=e("../../collections")),V=e("underscore"),f=function(){class e extends u{initialize(){return super.initialize(...arguments),y.prototype.initialize.apply(this)}}return e.prototype.Collection=_,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._JoinTagSidebarView")}}).prototype.rule={"@style+":function(){},"._JoinTagSidebarContentView=":function(){return this.isGamingTag()?new p:new c}},e}.call(this),e.prototype.events=V.extend({},y.prototype.events),e}.call(this),c=function(){class e extends r{createPopupView(e){return new x({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._JoinTagSidebarContentView")}}).prototype.rule={"._JoinTagSidebarTagListView=":function(){return new h({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._join-link":function(e){return analytics.track("Join Feed Sidebar Email Button Clicked"),this.saveTags()}},e}.call(this),p=function(){class e extends c{createPopupView(e){var t;return t=new _(this.collection.reject(e=>"gaming"===e.get("id"))),new x({collection:t,follows:e,align:"left",searchQuery:e.val()})}}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._JoinTagSidebarGamingContentView")}}).prototype.rule={"._JoinTagSidebarTagListView=":function(){return new d({collection:this.collection})}},e}.call(this),e.prototype.autoSelectedTagIds=["gaming"],e}.call(this),m=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._JoinTagSidebarTagView")}},e}.call(this),h=function(){class e extends l{filter(e,t){return t<=12&&super.filter(...arguments)||e.get("selected")}}return e.prototype.ItemView=m,e}.call(this),d=function(){class e extends s{filter(e,t){return t<=12&&super.filter(...arguments)||e.get("selected")}}return e.prototype.ItemView=m,e}.call(this),t.exports={JoinTagSidebarView:f,JoinTagSidebarContentView:c,JoinTagSidebarGamingContentView:p,JoinTagSidebarTagView:m,JoinTagSidebarTagListView:h,JoinTagSidebarGamingTagListView:d}},{"../../collections":2,"../base-view":259,"../components/claim-banner-view":263,"../components/join-tag-banner-view":276,"../components/login-modal-view":280,"../components/sticky-sidebar-panel-view":324,"../components/tag-selector-view":326,underscore:448}],278:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../models/event-view":353,"../models/karma-view":356,"../threads/dropdown-thread-view":399,"./dropdown-view":268,dup:111,underscore:448}],279:[function(e,t,n){var i,o,r,s;({ImageView:o}=e("../models/image-view")),({ModalView:s}=e("./modal-view")),({Image:i}=e("../../models")),r=function(){class e extends s{update(){return super.update(...arguments),this.$("._image-full-src").on("load",()=>this.$("._modal-window").removeClass("Loading"))}}return e.prototype.Model=i,e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._LightboxView")}},e}.call(this),t.exports={LightboxView:r}},{"../../models":34,"../models/image-view":354,"./modal-view":285}],280:[function(e,t,n){arguments[4][115][0].apply(n,arguments)},{"../../models":34,"../../utils/patterns":87,"../base-view":259,"../components/content-container-view":266,"../components/modal-view":285,"../mixins/fancy-input-mixin-view":346,"../mixins/user-profile-input-mixin-view":351,dup:115,fingerprintjs:431,underscore:448,urijs:452}],281:[function(e,t,n){(function(n){var i,o,r;r=e("underscore"),({BaseView:i}=e("../base-view")),o=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return r.defer(()=>{if("true"!==window.localStorage.getItem("AIBannerCollapsed"))return r.delay(()=>requestAnimationFrame(()=>this.$el.removeClass("collapsed")),500)})}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._LustreAIBannerView")}}).prototype.rule={"._lustre-home-link@href":function(){return("undefined"!=typeof window&&null!==window?window:n).env.AI_HOSTNAME}},e}.call(this),e.prototype.events={"click ._collapse-banner-link":function(e){return this.$el.addClass("collapsed"),window.localStorage.setItem("AIBannerCollapsed",!0),analytics.track("Lustre Banner Collapsed")},"click ._expand-banner-link":function(e){return this.$el.removeClass("collapsed"),window.localStorage.setItem("AIBannerCollapsed",!1),analytics.track("Lustre Banner Expanded")},"click ._lustre-home-link":function(e){return analytics.track("Lustre Banner Home Page Link Clicked")},"click ._chrome-store-link":function(e){return analytics.track("Lustre Banner Chrome Store Link Clicked")}},e}.call(this),t.exports={LustreAIBannerView:o}}).call(this,e("_process"))},{"../base-view":259,_process:426,underscore:448}],282:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;x=e("underscore"),e("../../utils/templating"),({UserView:_}=e("../models/user-view")),({DropdownView:o}=e("./dropdown-view")),({TagDropdownView:w,TagDropdownListView:g}=e("./tag-dropdown-view")),({SearchDropdownView:m}=e("./search-dropdown-view")),({NotificationsDropdownView:h}=e("./notifications-dropdown-view")),({KarmaDropdownView:r}=e("./karma-dropdown-view")),({ClaimBannerDropdownView:i}=e("./claim-banner-view")),({LoginModalView:a,LoginModalLoginContentView:s,LoginModalRegisterContentView:l}=e("./login-modal-view")),({LustreAIBannerView:u}=e("./lustre-ai-banner-view")),({User:y,Tag:f}=e("../../models")),({TagList:v}=e("../../collections")),d=function(){class e extends _{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"sync",this.update),this.listenTo(this.model.get("karma"),"clear",this.update),this.listenTo(this.model.get("notifications"),"clear",this.update)}update(){if(this.searchInteracted||(this.search=this.query.query||""),super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._main-header").hasClass("expanded")?this.expandSearch():this.collapseSearch(),this.$("._search-input").val(this.search),this.model.trigger("headerUpdated")}setQuery(e,t){return this.searchInteracted||(this.searchInteracted=!0,this.sendAnalytics("Main Search Interacted")),this.$("._search-input").not(null!=t?t.target:void 0).val(e),this.search=e}submitSearch(){return this.$("._search-input").blur(),this.collapseSearch(),router.navigate("/search",{trigger:!0,search:`?query=${this.search}`})}expandSearch(e){return this.$("._main-header").addClass("expanded"),this.$("._toggle-search-link").addClass("selected"),this.expanded=!0}collapseSearch(e){var t;if(this.$("._main-header").removeClass("expanded"),this.$("._toggle-search-link").removeClass("selected"),this.expanded=!1,null!=(t=this.searchDropdown)?t.attached:void 0)return this.searchDropdown.remove()}sendAnalytics(e,t={}){if(null!=e)return null==t.label&&(t.label="Main Header"),analytics.track(e,t)}setPopup(e,t){var n;if(null==(n=this.userPopup)||!n.attached)return this.userPopup=new e(x.extend({model:this.model,align:"right",follows:this.$("._user-dropdown-link"),closeOnNavigate:!1},t))}}return e.prototype.Model=y,e.prototype.Rule=function(){var e;return(e=class extends _.prototype.Rule{template(){return template("._MainHeaderView")}}).prototype.rule={"._has-unread-karma-notification=":function(){if(this.model.get("karma").meta("isread")||null==this.model.get("karma").meta("isread"))return""},"._has-unread-notifications=":function(){if(!this.model.get("notifications").meta("unreadCount"))return""},"._has-extra-unread-notification=":function(){if(!(this.model.get("notifications").meta("unreadCount")>99))return""},"._no-extra-unread-notification=":function(){if(this.model.get("notifications").meta("unreadCount")>99)return""},"._has-notifications-count-icon@class+":function(){if(this.model.get("notifications").meta("unreadCount"))return".hasCount"},"._has-karma-count-icon@class+":function(){if(!this.model.get("karma").meta("isread"))return".hasCount"},"._LustreAIBannerView=":function(){return new u}},e}.call(this),e.prototype.events={"click ._signin-link":function(e){return e.preventDefault(),new a({ContentView:s}),this.sendAnalytics("Clicked Login Button")},"click ._signup-link":function(e){return e.preventDefault(),new a({ContentView:l}),this.sendAnalytics("Clicked Join Button")},"click ._user-dropdown-link":function(e){return this.model.get("anonymous")?this.setPopup(i,{showProfileLink:!0,follows:this.$(".MainHeader-Content")}):this.setPopup(p,{closeOnNavigate:!0})},"click ._header-nav-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new c({follows:e.currentTarget})},"input ._search-input":function(e){return this.setQuery($(e.target).val(),e),!this.searchDropdown||this.searchDropdown.removed?this.searchDropdown=new m({follows:$(e.currentTarget).closest("._search-form"),search:this.search,invokerView:this}):this.searchDropdown.setQuery(this.search)},"click ._search-input":function(e){if(this.search=$(e.target).val(),!this.searchDropdown||this.searchDropdown.removed)return this.searchDropdown=new m({follows:$(e.currentTarget).closest("._search-form"),search:this.search,invokerView:this})},"submit ._search-form":function(e){if(e.preventDefault(),this.search)return this.sendAnalytics("Search",{search:this.search}),this.submitSearch()},"click ._submit-search-link":function(e){return analytics.track("Clicked Search Icon"),this.search?(this.sendAnalytics("Search",{search:this.search}),this.submitSearch()):this.$("._search-input:visible").focus()},"click ._toggle-search-link":function(e){return this.expanded?this.collapseSearch():this.expandSearch()},"click ._add-question-link":function(e){return this.sendAnalytics("Clicked Ask Question")},"resize window":function(e){var t,n;if((null!=(n=this.searchDropdown)?n.attached:void 0)&&!this.searchDropdown.isFullscreen()&&!$(this.searchDropdown.follows).is(":visible"))return this.searchDropdown.remove(),this.expandSearch(),t=this.$("._search-form:visible")[0],this.searchDropdown=new m({follows:t,search:this.search,invokerView:this}),x.defer(()=>this.searchDropdown.position())},"click a[href]":function(e){return this.loadLink(e)},"click ._user-notification-dropdown-link":function(e){var t;if(null==(t=this.notificationsPopup)||!t.attached)return this.notificationsPopup=new h({collection:this.model.get("notifications"),follows:e.currentTarget}),analytics.track("Site Header Opened Notifications Dropdown")},"click ._user-karma-dropdown-link":function(e){var t;if(null==(t=this.karmaPopup)||!t.attached)return this.karmaPopup=new r({collection:this.model.get("karma"),follows:e.currentTarget}),analytics.track("Site Header Opened Karma Dropdown")}},e}.call(this),p=function(){class e extends o{}return e.prototype.options={align:"right",anchor:"below"},e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._MainHeaderUserDropdownView","header")}}).prototype.rule={"._has-unread-karma-notification=":function(){if(this.model.get("karma").meta("isread")||null==this.model.get("karma").meta("isread"))return""},"._has-unread-notifications=":function(){if(!this.model.get("notifications").meta("unreadCount"))return""},"._has-extra-unread-notification=":function(){if(!(this.model.get("notifications").meta("unreadCount")>99))return""},"._no-extra-unread-notification=":function(){if(this.model.get("notifications").meta("unreadCount")>99)return""},"._user-link@href":function(){return this.model.get("URL")}},e}.call(this),e.prototype.getUserDisplayName=d.prototype.getUserDisplayName,e.prototype.events={"click ._logout-link":function(e){return analytics.track("Clicked Logout Button"),e.stopImmediatePropagation(),e.preventDefault(),this.model.logout()},"click ._add-question-link":function(e){return analytics.track("Clicked Ask Question",{label:"User Dropdown - Mobile"})}},e}.call(this),c=function(){class e extends w{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.tagList=new v([],{url:"/tags"}),this.$el.addClass("Loading"),this.tagList.fetch({success:()=>(this.$el.removeClass("Loading"),this.update())}),analytics.track("Site Logo Dropdown Opened")}}return e.prototype.options={align:"left"},e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._MainHeaderDropdownView","header")}}).prototype.rule={"._TagDropdownListView=":function(){var e;return new g({collection:null!=(e=this.tagList)?e:new v([])})}},e}.call(this),e}.call(this),t.exports={MainHeaderView:d,MainHeaderUserDropdownView:p,MainHeaderDropdownView:c}},{"../../collections":2,"../../models":34,"../../utils/templating":88,"../models/user-view":366,"./claim-banner-view":263,"./dropdown-view":268,"./karma-dropdown-view":278,"./login-modal-view":280,"./lustre-ai-banner-view":281,"./notifications-dropdown-view":290,"./search-dropdown-view":313,"./tag-dropdown-view":325,underscore:448}],283:[function(e,t,n){arguments[4][120][0].apply(n,arguments)},{"../lists/question-list-view":337,"../models/master-option-view":357,"../models/option-view":359,"../models/question-view":361,dup:120}],284:[function(e,t,n){arguments[4][121][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../lists/list-view":334,"../models/master-option-view":357,"./dropdown-view":268,dup:121}],285:[function(e,t,n){arguments[4][122][0].apply(n,arguments)},{"../../../../../server/compiled/templating/jquery":461,"../../utils/patterns":87,"../base-view":259,dup:122,jquery:438}],286:[function(e,t,n){arguments[4][123][0].apply(n,arguments)},{"../../models":34,"../../utils/transforms":89,"../components/toaster-view":327,"./dropdown-view":268,dup:123}],287:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f;e("underscore"),({hashCode:f}=e("../../utils/transforms")),({BaseView:i}=e("../base-view")),({TooltipView:p}=e("./tooltip-view")),({UserView:m}=e("../models/user-view")),({ListView:r}=e("../lists/list-view")),({Event:o,User:d}=e("../../models")),({UserList:h}=e("../../collections")),c=function(){class e extends i{getUserAt(e){return this.collection.at(e)}openMultiUserTooltip(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new u({collection:this.collection,follows:e.currentTarget})}}return e.prototype.Collection=h,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MultiUserView")}}).prototype.rule={"._has-one-user@class+":function(){if(1===this.collection.count())return"singleImage"},"._has-two-users@class+":function(){if(2===this.collection.count())return"twoImages"},"._has-second-recent-user=":function(){if(!(this.collection.count()>1))return""},"._has-third-recent-user=":function(){if(!(this.collection.count()>2))return""},"._most-recent-user":function(){var e;return e=this.getUserAt(0),{"@data-initials":function(){return((null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)||"").charAt(0).toLowerCase()},"@data-background":function(){var t;return f(null!=(t=null!=e?e.get("username"):void 0)?t:"")%12+1},"._most-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return(null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)}}}}},"._second-recent-user":function(){var e;return e=this.getUserAt(1),{"@data-initials":function(){return((null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)||"").charAt(0).toLowerCase()},"@data-background":function(){var t;return f(null!=(t=null!=e?e.get("username"):void 0)?t:"")%12+1},"._second-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return(null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)}}}}},"._third-recent-user":function(){var e;return e=this.getUserAt(2),{"@data-initials":function(){return((null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)||"").charAt(0).toLowerCase()},"@data-background":function(){var t;return f(null!=(t=null!=e?e.get("username"):void 0)?t:"")%12+1},"._third-recent-user-image":function(){return{"@src":function(){return null!=e?e.getAvatarThumbnailURL():void 0},"@alt":function(){return(null!=e?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0)}}}}}},e}.call(this),e.prototype.events={"mouseover ._section-users-tooltip-link":function(e){return this.openMultiUserTooltip(e)},"click ._section-users-tooltip-link":function(e){return e.preventDefault(),e.stopPropagation(),this.openMultiUserTooltip(e)}},e}.call(this),u=function(){class e extends p{}return e.prototype.Collection=h,e.prototype.options={anchor:"above",interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._MultiUserTooltipView")}}).prototype.rule={"._MultiUserTooltipUserListView=":function(){return new a({collection:this.collection})},"._MultiUserTooltipContentView=":function(){return new s({collection:this.collection})}},e}.call(this),e}.call(this),l=function(){class e extends m{}return e.prototype.Model=d,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._MultiUserTooltipUserItemView")}},e}.call(this),a=function(){class e extends r{}return e.prototype.Collection=h,e.prototype.ItemView=l,e.prototype.limit=3,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._MultiUserTooltipUserListView")}},e}.call(this),s=function(){class e extends r{getUserAt(e){return this.collection.at(e)}}return e.prototype.Collection=h,e.prototype.limit=3,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._MultiUserTooltipContentView")}}).prototype.rule={"._has-two-users=":function(){if(2!==this.collection.count())return""},"._has-three-users=":function(){if(3!==this.collection.count())return""},"._most-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(0))?e.get("displayName").split(" ")[0]:void 0},"._second-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(1))?e.get("displayName").split(" ")[0]:void 0},"._third-recent-user-first-name=":function(){var e;return null!=(e=this.getUserAt(2))?e.get("displayName").split(" ")[0]:void 0},"._has-multi-more-count=":function(){if(!(this.collection.count()>this.limit+1))return""},"._most-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(0))?e.url():void 0},"._second-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(1))?e.url():void 0},"._third-recent-user-link@href":function(){var e;return null!=(e=this.getUserAt(2))?e.url():void 0}},e}.call(this),e}.call(this),t.exports={MultiUserView:c,MultiUserTooltipView:u,MultiUserTooltipUserItemView:l,MultiUserTooltipUserListView:a,MultiUserTooltipContentView:s}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../lists/list-view":334,"../models/user-view":366,"./tooltip-view":328,underscore:448}],288:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W;W=e("underscore"),({BaseView:i}=e("../base-view")),({SectionView:j}=e("../models/section-view")),({PanelView:L}=e("../components/panel-view")),({TooltipView:z}=e("../components/tooltip-view")),({RecommendationPanelView:B,RecommendationPanelHeaderView:E,RecommendationPanelUserView:U,RecommendationPanelContentView:A,RecommendationPanelSectionView:D}=e("../components/recommendation-panel-view")),({ReactionReadOnlyButtonUsefulView:O}=e("../components/reaction-button-set-view")),({ListView:s}=e("../lists/list-view")),({ExpandingTextareaMixinView:o}=e("../mixins/expanding-textarea-mixin-view")),({FancyInputMixinView:r}=e("../mixins/fancy-input-mixin-view")),({ViewpointVote:H,User:Q,Section:q,SectionEdit:N}=e("../../models")),({SectionList:F,ReactionList:I}=e("../../collections")),M=function(){class e extends B{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Recommendation Panel Opened",{label:"edit"}),this.stopListening(this.model,"change"),(e=this.model.parents("votes"))?this.listenTo(e,"voteError",()=>(analytics.track("Recommendation Panel Force Closed On Vote Error"),W.defer(()=>{var e;return null!=(e=this.getParentByView(L))?e.collapse():void 0}))):void 0}}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new h({model:this.model})},"._RecommendationPanelContentView=":function(){return new p({model:this.model})}},e}.call(this),e}.call(this),h=function(){class e extends E{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends E.prototype.Rule{template(){return template("._MyRecommendationPanelHeaderView")}}).prototype.rule={"._MyRecommendationPanelUserView=":function(){return new T({model:this.model.get("user")})}},e}.call(this),e}.call(this),T=function(){class e extends U{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return!this.model.get("username")&&this.model.parents("votes")?this.listenToOnce(this.model.parents("votes"),"voteSuccess",this.update):void 0}}return e.prototype.Model=Q,e.prototype.Rule=class extends U.prototype.Rule{},e}.call(this),p=function(){class e extends A{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return window.onbeforeunload=this.beforeunload.bind(this)}beforeunload(){if($.contains(document,this.el)&&this.hasUnsubmittedContent())return confirm("One sec! Are you sure that you want to abandon your hard work?")}hasUnsubmittedContent(){var e,t;return t=this.getChildrenByView(C),!!W.some(t,e=>e.isDirty())||(e=this.getChildrenByView(R),W.some(e,e=>e.isDirty()))}clearForms(){var e;return e=this.getChildrenByView(C),W.forEach(e,e=>e.clear())}closePanel(){return this.clearForms(),super.closePanel(...arguments)}showCancelOverlay(){return this.$("._confirm-close").removeClass("hidden")}collapsePanel(){return this.hasUnsubmittedContent()?(this.isUnvoting=!1,this.showCancelOverlay()):this.closePanel()}}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MyRecommendationPanelContentView")}}).prototype.rule={"._MyRecommendationPanelTestimonialView=":function(){return new S({model:this.model})},"._MyRecommendationPanelSectionsView=":function(){var e;return new b({collection:null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0})},"._MyRecommendationPanelFooterView=":function(){return new d({model:this.model})}},e}.call(this),e.prototype.events={"click ._unvote-link":function(e){var t;return analytics.track("Recommendation Panel Clicked Panel Remove Recommendation"),this.hasUnsubmittedContent()?(this.isUnvoting=!0,this.showCancelOverlay()):(null!=(t=this.model.parents("votes"))&&t.vote(0),this.closePanel())},"click ._submit-sections-link":function(e){var t,n,i;return analytics.track("Recommendation Panel Clicked Panel Main Submit"),i=this.getChildrenByView(C),t=0,n=(()=>{if(++t===i.length)return this.closePanel()}),W.forEach(i,e=>(this.listenToOnce(e,"doneSubmitting",n),e.submit()))},"click ._confirm-close-link":function(){var e;return this.isUnvoting&&(this.isUnvoting=!1,null!=(e=this.model.parents("votes"))&&e.vote(0)),this.$("._confirm-close").addClass("hidden"),this.closePanel()},"click ._close-overlay-link":function(){return this.$("._confirm-close").addClass("hidden")}},e}.call(this),C=function(){class e extends i{submit(){return this.trigger("doneSubmitting")}isDirty(){return!1}clear(){}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),S=function(){class e extends C{initialize(){var e,t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return(t=this.$("._testimonial-input")).val((null!=(e=this.model.get("text"))?e.trim():void 0)||""),this.setFancyInputClass(this.$(".FancyInput-Field")),W.defer(()=>this.adjustTextareaHeight(t))}update(){var e,t;if((t=this.$("._testimonial-input")).length&&(e=t.is(":focus"),t.val()),super.update(...arguments),t.length&&(this.$("._testimonial-input").val(t),e))return t.focus()}submit(){var e,t,n,i,o,r,s;return this.resetFormState(),this.isDirty()?(this.$el.addClass("Loading"),e=this.model.get("text").trim(),i=null!=(o=this.$("._testimonial-input").val())?o.trim():void 0,s=(n=!e&&i)?"new":i?"updated":"removed",analytics.track("Recommendation Panel Testimonial Text Changed",{label:s}),r=(()=>{var e;return this.$el.removeClass("Loading"),this.model.trigger("change"),null!=(e=this.model.parents("votes"))&&e.trigger("recommendationTextChange",e),n&&this.model.trigger("newTestimonial"),this.trigger("doneSubmitting")}),t=(()=>(this.$el.removeClass("Loading"),this.setFormSaveErrorState(),W.defer(()=>{var e;return null!=(e=this.getParentByView(L))&&e.scrollTo(this.$el),this.$("._testimonial-input").focus()}))),this.model.save("text",i,{success:r,error:t,silent:!0,wait:!0})):this.trigger("doneSubmitting")}isDirty(){var e;return this.$("._testimonial-input").val().trim()!==((null!=(e=this.model.get("text"))?e.trim():void 0)||"")}clear(){return this.$el.removeClass("Loading")}setFormSaveErrorState(){return this.$("._testimonial-input-label").addClass("error"),this.$("._testimonial-error-placeholder").removeClass("hidden")}resetFormState(){return this.$("._testimonial-input-label").removeClass("error"),this.$("._testimonial-error-placeholder").addClass("hidden")}}return e.prototype.Model=H,e.prototype.mixin(r),e.prototype.mixin(o),e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MyRecommendationPanelTestimonialView")}},e.prototype.events=W.assign({},r.prototype.events,o.prototype.events),e}.call(this),b=function(){class e extends i{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window){if(e=this.getMasterOptionSource(),!this.isMasterOption()&&!(null!=e?e.get("sections").length:void 0))try{null!=e&&e.get("sections").fetch({silent:!0,success:()=>(this.update(),analytics.track("Recommendation Panel Master Sections Loaded"))})}catch(e){e,analytics.track("Recommendation Panel No Master Option Error")}return this.stopListening(this.collection,"add",this.update)}}getMasterOptionSource(){var e;return null!=(e=this.collection.parents("viewpoint"))?e.get("masterOption").get("source"):void 0}isMasterOption(){var e,t;return(null!=(e=this.getMasterOptionSource())?e.get("uuid"):void 0)===(null!=(t=this.collection.parents("viewpoint"))?t.get("uuid"):void 0)}getMasterSections(){var e;return null!=(e=this.getMasterOptionSource())?e.get("sections"):void 0}}return e.prototype.Collection=F,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MyRecommendationPanelSectionsView")}}).prototype.rule={"._MyRecommendationPanelProsListView=":function(){return new v({collection:this.collection})},"._MyRecommendationPanelConsListView=":function(){return new c({collection:this.collection})},"._MyRecommendationPanelMasterProsListView=":function(){return this.isMasterOption()?"":new f({collection:this.getMasterSections(),originalSectionList:this.collection})},"._MyRecommendationPanelMasterConsListView=":function(){return this.isMasterOption()?"":new m({collection:this.getMasterSections(),originalSectionList:this.collection})},"._MyRecommendationPanelAddProView=":function(){return new a({collection:this.collection})},"._MyRecommendationPanelAddConView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),R=function(){var e,t;class n extends D{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.stopListening(this.model.get("votes"),"repaint"),this.listenTo(this.model.get("votes"),"repaint",this.updateReactionState),this.stopListening(this.model.get("reactionSet").get("useful"),"repaint"),this.listenTo(this.model.get("reactionSet").get("useful"),"repaint",this.updateReactionState),this.listenTo(this.model,"masterSectionAdded",this.masterSectionAdded)}updateReactionState(){return this.isAgreed()&&this.isImportant()?this.markAsImportant():this.isAgreed()?this.markAsAgreed():this.clearMarks()}masterSectionAdded(){return this.model.get("votes").vote(1),W.defer(()=>{var e;return null!=(e=this.getParentByView(L))&&e.scrollTo(this.$el),this.highlight({scroll:!1})})}isAgreed(){return this.model.get("votes").meta("delta")>0}isImportant(){return this.model.get("reactionSet").get("useful").meta("reacted")}markAsImportant(){return this.$("._section-important-link").addClass("isImportant").removeClass("isBelow"),this.$("._section-agree-link").addClass("isAgreed isAlsoImportant")}markAsAgreed(){return this.$("._section-important-link").addClass("isBelow").removeClass("isImportant"),this.$("._section-agree-link").addClass("isAgreed").removeClass("isAlsoImportant")}clearMarks(){return this.$("._section-agree-link").removeClass("isAgreed isAlsoImportant"),this.$("._section-important-link").removeClass("isImportant isBelow")}toggleEditSectionForm(){return this.$(".RecommendationPanel-Section-Body").toggleClass("hidden"),this.$(".RecommendationPanel-Section-Edit").toggleClass("hidden"),this.togglePanelEditMode()}togglePanelEditMode(){var e;return null!=(e=this.getParentByView(A))&&e.$(".RecommendationPanel-Content").toggleClass("editingSection"),this.$el.toggleClass("active")}initializeSectionForm(){var e;return this.setEditSubmitState(),this.$("._section-edit-title-input").val(this.model.get("revision").get("title").trim()),(e=this.$("._section-edit-description-input")).val(this.model.get("revision").get("text").trim()),this.adjustTextareaHeight(e),this.setFancyInputClass(this.$(".FancyInput-Field")),this.resetEditFormState()}isDirty(){return!this.$(".RecommendationPanel-Section-Edit").hasClass("hidden")&&(this.$("._section-edit-title-input").val().trim()!==this.model.get("revision").get("title").trim()||this.$("._section-edit-description-input").val().trim()!==this.model.get("revision").get("text").trim())}setEditSubmitState(){return this.isDirty()&&this.$("._section-edit-title-input").val().trim()?this.$("._submit-section-edit-link").removeClass("disabled"):this.$("._submit-section-edit-link").addClass("disabled")}submitEdit(){var e,t,n,i,o,r,s,l;if((l=this.$("._section-edit-title-input").val().trim())&&this.isDirty())return analytics.track("Recommendation Panel Submit Section Edit"),this.resetEditFormState(),i={revision:this.model.get("revision").clone({deep:!0})},o={collection:this.model.get("comments")},r=new N(i,o),e=this.$("._section-edit-description-input").val().trim(),(n={}).title=l,n.text=e,s=(()=>(this.$el.removeClass("Loading"),this.model.set("revision",r.get("revision")),this.setDescriptionExpansionDefaults(),this.togglePanelEditMode(),this.initializeSectionForm())),t=(()=>(this.$el.removeClass("Loading"),this.setEditFormSaveErrorState())),this.$el.addClass("Loading"),r.get("revision").set(n,{silent:!0}),r.save(null,{success:s,error:t})}resetEditFormState(){return this.$("._edit-form-input").removeClass("error"),this.$("._section-edit-title-default-placeholder").removeClass("hidden"),this.$("._section-edit-error-placeholder").addClass("hidden")}setEditFormSaveErrorState(){return this.$("._edit-form-input").addClass("error"),this.$("._section-edit-title-default-placeholder").addClass("hidden"),this.$("._section-edit-error-placeholder").removeClass("hidden")}}return n.prototype.Model=q,n.prototype.mixin(r),n.prototype.mixin(o),n.prototype.Rule=function(){var e;return(e=class extends D.prototype.Rule{template(){return template("._MyRecommendationPanelSectionView")}}).prototype.rule={"._section-agree-link@class+":function(){var e;return e=[],this.isAgreed()&&(e.push("isAgreed"),this.isImportant()&&e.push("isAlsoImportant")),e.join(" ")},"._section-important-link@class+":function(){if(this.model.get("votes").meta("delta")>0)return this.model.get("reactionSet").get("useful").meta("reacted")?"isImportant":"isBelow"}},e}.call(this),e=W.debounce(function(e){if(this.mouseoverAgree)return this.agreePopup=new y({model:this.model,follows:e.currentTarget})},800),t=W.debounce(function(e){if(this.mouseoverImportant)return this.importantPopup=new _({model:this.model,follows:e.currentTarget})},800),n.prototype.events=W.assign({},r.prototype.events,o.prototype.events,{"click ._section-agree-link":function(e){var t,n;return e.stopPropagation(),e.preventDefault(),(null!=(t=this.agreePopup)?t.attached:void 0)&&this.agreePopup.close(),this.mouseoverAgree=!1,(n=this.model.get("votes")).meta("delta")>0?n.vote(0):(analytics.track("Recommendation Panel Agree",{isCon:this.model.get("isCon")}),n.vote(1))},"click ._section-important-link":function(e){var t,n,i,o;return e.stopPropagation(),e.preventDefault(),(null!=(o=this.importantPopup)?o.attached:void 0)&&this.importantPopup.close(),this.mouseoverImportant=!1,(n=!(i=this.model.get("reactionSet").get("useful")).meta("reacted"))&&(t=this.model.get("isCon"),analytics.track("Recommendation Panel MostImportant",{isCon:t}),this.model.parents("sections").removeAllReactionsOfType("useful",t)),i.react(n)},"mouseover ._section-agree-link":function(t){if(t.stopPropagation(),t.preventDefault(),this.mouseoverAgree=!0,!this.model.get("votes").meta("delta")>0&&this.mouseoverAgree)return e.call(this,t)},"mouseover ._section-important-link":function(e){if(e.stopPropagation(),e.preventDefault(),this.mouseoverImportant=!0,!this.model.get("reactionSet").get("useful").meta("reacted"))return t.call(this,e)},"mouseout ._section-agree-link":function(e){return this.mouseoverAgree=!1},"mouseout ._section-important-link":function(e){return this.mouseoverImportant=!1},"click ._section-inline-edit-link":function(e){return e.stopPropagation(),e.preventDefault(),analytics.track("Recommendation Panel Click Edit Section Link"),this.toggleEditSectionForm(),this.initializeSectionForm()},"click ._cancel-section-edit-link":function(e){return this.toggleEditSectionForm(),this.initializeSectionForm()},"click ._submit-section-edit-link":function(e){return this.submitEdit()},"input ._section-edit-title-input":W.debounce(function(e){return this.setEditSubmitState()},200),"input ._section-edit-description-input":W.debounce(function(e){return this.setEditSubmitState()},200)}),n}.call(this),x=function(){class e extends s{filter(e){return!e.isMarked()}}return e.prototype.Collection=F,e.prototype.ItemView=R,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){if(!(this.collection.parents("viewpoint").get("votes").meta("delta")>0))return""},"._is-downvote=":function(){if(!(this.collection.parents("viewpoint").get("votes").meta("delta")<0))return""}},e}.call(this),e}.call(this),v=function(){class e extends x{filter(e){return super.filter(e)&&!1===e.get("isCon")}}return e.prototype.Collection=F,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._MyRecommendationPanelProsListView")}},e}.call(this),c=function(){class e extends x{filter(e){return super.filter(e)&&!0===e.get("isCon")}}return e.prototype.Collection=F,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._MyRecommendationPanelConsListView")}},e}.call(this),g=function(){class e extends R{addMasterSectionSuccessCallback(e,t){return e.unset("source",{silent:!0}),e.set(e.parse(t,{silent:!0}),{silent:!0}),this.options.originalSectionList.add(e),e.trigger("masterSectionAdded"),this.$el.addClass("hidden"),this.updateMasterSectionListView()}addMasterSectionErrorCallback(){return this.isAddingMaster=!1,this.$el.removeClass("Loading")}addSectionFromMaster(){var e,t,n,i,o,r,s,l,a,u;if(r=new q({},{collection:this.options.originalSectionList}),l=this.model.get("id"),u=null!=(t=this.model.parents("source"))?t.get("id"):void 0,a=null!=(n=this.model.url().match(/\/topics\/(\d+)/))?n[1]:void 0,e=null!=(i=this.model.parents("source"))&&null!=(o=i.parent)?o.get("id"):void 0,l&&u&&a){if(s={t_id:a,vp_id:u,sp_id:l,mvp_id:e},w.prototype.isNotDupe.call(this,this.model))return r.save("source",s,{wait:!0,valid:!1,success:(e,t)=>this.addMasterSectionSuccessCallback(e,t),error:()=>this.addMasterSectionErrorCallback()}),analytics.track("Recommendation Panel Add Master Section Click");this.addMasterSectionErrorCallback()}else this.addMasterSectionErrorCallback()}updateMasterSectionListView(){var e,t,n,i;return e=null!=(t=this.options.currentlyAddingList)?t.indexOf(this.model.get("uuid")):void 0,null!=(n=this.options.currentlyAddingList)&&n.splice(e,1),null!=(i=this.getParentByView(w))?i.masterSectionAdded():void 0}}return e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{}).prototype.rule={"._has-section-edit-link=":function(){return""}},e}.call(this),e.prototype.events={"click ._section-agree-link":function(e){var t,n,i;if(e.stopPropagation(),e.preventDefault(),t=this.model.get("uuid"),!W.contains(this.options.currentlyAddingList,t))return null!=(n=this.options.currentlyAddingList)&&n.push(t),this.$el.addClass("Loading"),(null!=(i=this.agreePopup)?i.attached:void 0)&&this.agreePopup.close(),this.mouseoverAgree=!1,this.addSectionFromMaster()},"click ._section-important-link":function(e){}},e}.call(this),w=function(){class e extends x{initialize(){return this.currentlyAddingList=[],super.initialize(...arguments)}masterSectionAdded(){if(0===this.currentlyAddingList.length)return this.update()}createViewOptions(){return{originalSectionList:this.options.originalSectionList,currentlyAddingList:this.currentlyAddingList}}filter(e){return super.filter(e)&&this.isNotDupe(e)}isNotDupe(e){var t;return null!=(t=this.options.originalSectionList)?t.all(function(t){var n;return(null!=(n=t.get("revision").get("title"))?n.trim():void 0)!==e.get("revision").get("title").trim()}):void 0}}return e.prototype.Collection=F,e.prototype.ItemView=g,e.prototype.Rule=function(){var e;return(e=class extends x.prototype.Rule{}).prototype.rule={"._has-regular-pros=":function(){var e;if(!(null!=(e=this.options.originalSectionList)?e.filter(v.prototype.filter.bind(this)).length:void 0))return""},"._has-regular-cons=":function(){var e;if(!(null!=(e=this.options.originalSectionList)?e.filter(c.prototype.filter.bind(this)).length:void 0))return""}},e}.call(this),e}.call(this),f=function(){class e extends w{filter(e){return super.filter(e)&&!1===e.get("isCon")}}return e.prototype.Collection=F,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._MyRecommendationPanelMasterProsListView")}},e}.call(this),m=function(){class e extends w{filter(e){return super.filter(e)&&!0===e.get("isCon")}}return e.prototype.Collection=F,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._MyRecommendationPanelMasterConsListView")}},e}.call(this),V=function(){class e extends z{}return e.prototype.Model=q,e.prototype.options={anchor:"above"},e.prototype.Rule=class extends z.prototype.Rule{},e}.call(this),y=function(){class e extends V{}return e.prototype.Model=q,e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._MyRecommendationPanelSectionAgreeTooltipView")}},e}.call(this),_=function(){class e extends V{}return e.prototype.Model=q,e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._MyRecommendationPanelSectionImportantTooltipView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("isCon"))return""},"._is-con=":function(){if(!this.model.get("isCon"))return""}},e}.call(this),e}.call(this),u=function(){class e extends C{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.isAgreed=!1,this.isImportant=!1,this.stopListening(this.collection,"add change")}update(){var e,t;return t=this.$("._section-title-input").val(),e=this.$("._section-description-input").val(),super.update(...arguments),this.$("._section-title-input").val(t),this.$("._section-description-input").val(e),this.setFancyInputClass(this.$(".FancyInput-Field")),this.updateReactionState(),t?(this.$("._add-section-link").removeClass("disabled"),this.$("._add-section-agree-link").removeClass("disabled")):(this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"))}hasTitle(){return this.$("._section-title-input").val()}isDirty(){return this.hasContent()}hasContent(){return this.$("._section-title-input").val()||this.$("._section-description-input").val()}submit(){var e,t,n;return n=this.$("._section-title-input").val(),t=this.$("._section-description-input").val(),n?(analytics.track("Recommendation Panel Submit New Section",{isCon:this.isCon}),this.resetErrorState(),this.$el.addClass("Loading"),(e=new q({isCon:this.isCon},{collection:this.collection})).get("revision").set({title:n,text:t}),e.save(null,{scroll:!1,highlight:!1}),e.once("saveError",()=>{var e;return this.$el.removeClass("Loading"),this.setErrorSubmitState(),null!=(e=this.getParentByView(L))&&e.scrollTo(this.$el),this.$("._section-title-input").focus()}),e.once("sync",()=>{return this.isAgreed&&(e.get("votes").vote(1),this.isImportant&&(this.collection.removeAllReactionsOfType("useful",this.isCon),e.get("reactionSet").get("useful").react(!0))),this.collection.add(e),this.clear(),this.trigger("doneSubmitting"),W.defer(()=>this.$("._section-title-input").focus())})):this.trigger("doneSubmitting")}clear(){return this.$el.removeClass("Loading"),this.$("._section-description-input").val(""),this.$("._section-title-input").val(""),this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"),this.isAgreed=!1,this.isImportant=!1,this.updateReactionState()}updateReactionState(){return this.isAgreed&&this.isImportant?this.markAsImportant():this.isAgreed?this.markAsAgreed():this.clearMarks()}markAsImportant(){return this.$("._add-section-important-link").addClass("isImportant").removeClass("isBelow"),this.$("._add-section-agree-link").addClass("isAgreed isAlsoImportant")}markAsAgreed(){return this.$("._add-section-important-link").addClass("isBelow").removeClass("isImportant"),this.$("._add-section-agree-link").addClass("isAgreed").removeClass("isAlsoImportant")}clearMarks(){return this.$("._add-section-agree-link").removeClass("isAgreed isAlsoImportant"),this.$("._add-section-important-link").removeClass("isImportant isBelow")}resetErrorState(){return this.$("._add-section-form-input").removeClass("error"),this.$("._add-section-title-default-placeholder").removeClass("hidden"),this.$("._add-section-error-placeholder").addClass("hidden")}setErrorSubmitState(){return this.$("._add-section-form-input").addClass("error"),this.$("._add-section-title-default-placeholder").addClass("hidden"),this.$("._add-section-error-placeholder").removeClass("hidden")}}return e.prototype.Collection=F,e.prototype.mixin(r),e.prototype.mixin(o),e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._MyRecommendationPanelAddSectionView")}}).prototype.rule={"._is-pro=":function(){if(this.isCon)return""},"._is-con=":function(){if(!this.isCon)return""}},e}.call(this),e.prototype.events=W.assign({},o.prototype.events,r.prototype.events,{"submit ._add-section-form":function(e){return e.preventDefault(),this.submit()},"input ._section-title-input":function(){return this.$("._section-title-input").val()?(this.$("._add-section-link").removeClass("disabled"),this.$("._add-section-agree-link").removeClass("disabled"),this.isAgreed=!0):(this.$("._add-section-link").addClass("disabled"),this.$("._add-section-agree-link").addClass("disabled"),this.isAgreed=!1),this.updateReactionState()},"click ._add-section-link":function(){return this.submit()},"click ._add-section-agree-link":function(e){if(e.preventDefault(),e.stopPropagation(),this.hasTitle())return this.isAgreed=!this.isAgreed,this.updateReactionState()},"click ._add-section-important-link":function(e){if(e.preventDefault(),e.stopPropagation(),this.hasTitle())return this.isImportant=!this.isImportant,this.updateReactionState()}}),e}.call(this),a=function(){class e extends u{}return e.prototype.Collection=F,e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.isCon=!1,e}.call(this),l=function(){class e extends u{}return e.prototype.Collection=F,e.prototype.Rule=class extends u.prototype.Rule{},e.prototype.isCon=!0,e}.call(this),d=function(){class e extends i{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MyRecommendationPanelFooterView")}}).prototype.rule={"._MyRecommendationPanelUsefulView=":function(){return new P({collection:this.model.get("reactionSet").get("useful")})}},e}.call(this),e}.call(this),k=function(){class e extends z{initialize(){return super.initialize(...arguments),analytics.track("My Recommendation Panel Useful Tooltip Shown")}}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._MyRecommendationPanelUsefulTooltipView")}},e}.call(this),P=function(){class e extends O{}return e.prototype.Collection=I,e.prototype.Rule=class extends O.prototype.Rule{},e.prototype.events={mouseover:function(e){return new k({follows:e.currentTarget,anchor:"above"})}},e}.call(this),t.exports={MyRecommendationPanelView:M,MyRecommendationPanelHeaderView:h,MyRecommendationPanelUserView:T,MyRecommendationPanelContentView:p,MyRecommendationPanelSubmittableView:C,MyRecommendationPanelTestimonialView:S,MyRecommendationPanelSectionsView:b,MyRecommendationPanelSectionView:R,MyRecommendationPanelSectionListView:x,MyRecommendationPanelProsListView:v,MyRecommendationPanelConsListView:c,MyRecommendationPanelMasterSectionView:g,MyRecommendationPanelMasterSectionsListView:w,MyRecommendationPanelMasterProsListView:f,MyRecommendationPanelMasterConsListView:m,MyRecommendationPanelSectionTooltipView:V,MyRecommendationPanelSectionAgreeTooltipView:y,MyRecommendationPanelSectionImportantTooltipView:_,MyRecommendationPanelAddSectionView:u,MyRecommendationPanelAddProView:a,MyRecommendationPanelAddConView:l,MyRecommendationPanelFooterView:d,MyRecommendationPanelUsefulView:P,MyRecommendationPanelUsefulTooltipView:k}},{"../../collections":2,"../../models":34,"../base-view":259,"../components/panel-view":293,"../components/reaction-button-set-view":302,"../components/recommendation-panel-view":310,"../components/tooltip-view":328,"../lists/list-view":334,"../mixins/expanding-textarea-mixin-view":345,"../mixins/fancy-input-mixin-view":346,"../models/section-view":363,underscore:448}],289:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T;P=e("underscore"),S=e("urijs"),({EventView:h,EventEditContentView:o,EventSectionEditContentView:l,EventOptionRecommendationContentView:r,EventRecommendationCommentContentView:s,EventSectionRecommendationContentView:d,EventSectionReactionMostImportantContentView:u,EventSectionReactionNeedsClarificationContentView:c,EventSectionReactionOutOfDateContentView:p,EventSectionReactionFlagContentView:a}=e("../models/event-view")),({PanelView:C}=e("./panel-view")),({MyRecommendationPanelView:m}=e("./my-recommendation-panel-view")),({Event:i,ViewpointVote:k}=e("../../models")),({improveURL:T}=e("../../utils/transforms")),b=function(){class e extends h{}return e.prototype.Model=i,e.prototype.actionToView=P.assign({},h.prototype.actionToView,{"Opt.Revise":function(){return f},"Sec.Revise":function(){return v},"Opt.Vote:Up":function(){return g},"Sec.Vote:Up":function(){return R},"Reaction_Sec.Create:Useful":function(){return _},"Reaction_Sec.Create:NeedsImprovement":function(){return x},"Reaction_Sec.Create:OutOfDate":function(){return V},"Reaction_Sec.Create:Flag":function(){return y},"Comment_Rec.Create":function(){return w}}),e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._NotificationView")}}).prototype.rule={"._question-title=":function(){var e;return null!=(e=this.model.get("target").parents("topic"))?e.get("revision").get("title").trim():void 0},"._question-link@href":function(){return T(this.model.get("target").parents("topic"))}},e}.call(this),e}.call(this),f=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._NotificationOptionEditContentView")}},e}.call(this),v=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._NotificationSectionEditContentView")}},e}.call(this),g=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._NotificationOptionRecommendationContentView")}},e}.call(this),R=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._NotificationSectionRecommendationContentView")}},e}.call(this),_=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._NotificationSectionReactionMostImportantContentView")}},e}.call(this),x=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._NotificationSectionReactionNeedsClarificationContentView")}},e}.call(this),V=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._NotificationSectionReactionOutOfDateContentView")}},e}.call(this),y=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._NotificationSectionReactionFlagContentView")}},e}.call(this),w=function(){class e extends s{doAction(){if("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)return this.loadVote()}loadVote(){var e,t,n,i,o,r;return(t=null!=(i=this.getParentByView(b))?i:this).$el.addClass("Loading"),r=this.getVoteDataPromise(),n=this.getOptionDataPromise(),o=(()=>{var e,n;if(t.$el.removeClass("Loading"),this.trigger("actionEnd"),n=null!=(e=this.getOption())?e.get("votes").at(0):void 0)return this.openMyRecPanel(n)}),e=(()=>(t.$el.removeClass("Loading"),this.trigger("actionEnd"))),$.when(r,n).then(o,e),analytics.track("Notification Rec Comment Panel Link Clicked")}getVoteDataPromise(){var e,t,n,i,o;return o=null!=(e=this.model.get("target").parents("viewpoint"))?e.get("votes"):void 0,this.voteDataFetched||null==e?$.Deferred().resolve():(t="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0,i=new S(null!=e?e.url().replace(/~.*/,""):void 0).segment("votes").segment(t).toString(),n=new k({URL:i},{collection:o}),o.add(n,{silent:!0}),null!=n?n.fetch({parseContext:!0,silent:!0,success:()=>this.voteDataFetched=!0}):void 0)}getOptionDataPromise(){var e;return e=this.getOption(),this.optionDataFetched||null==e?$.Deferred().resolve():null!=e?e.fetch({success:()=>this.optionDataFetched=!0}):void 0}openMyRecPanel(e){var t,n;return t=this.getOption(),null!=(n=new C({option:t}))&&n.setContent(m,{model:e}),P.defer(function(){return null!=n?n.scrollTo("._comments-section"):void 0})}getOption(){return this.model.get("target").parents("viewpoint")}}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._NotificationRecommendationCommentContentView")}},e.prototype.events={"click ._rec-comment-link":function(e){return this.doAction()}},e}.call(this),t.exports={NotificationView:b,NotificationOptionEditContentView:f,NotificationSectionEditContentView:v,NotificationOptionRecommendationContentView:g,NotificationSectionRecommendationContentView:R,NotificationSectionReactionMostImportantContentView:_,NotificationSectionReactionNeedsClarificationContentView:x,NotificationSectionReactionOutOfDateContentView:V,NotificationSectionReactionFlagContentView:y,NotificationRecommendationCommentContentView:w}},{"../../models":34,"../../utils/transforms":89,"../models/event-view":353,"./my-recommendation-panel-view":288,"./panel-view":293,underscore:448,urijs:452}],290:[function(e,t,n){arguments[4][127][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../components/dropdown-view":268,"../components/notification-view":289,"../models/event-view":353,"./karma-dropdown-view":278,dup:127}],291:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;p=e("../../rule"),({PopupView:c}=e("./popup-view")),({Viewpoint:m,Section:d}=e("../../models")),h=e("urijs"),u=function(){class e extends c{initialize(e){var t,n;if(super.initialize(...arguments),this.stopListening(),this.$el.addClass("shown"),t=null!=(n=null!=e?e.lifespan:void 0)?n:this.lifespan)return _.delay(this.remove.bind(this),t)}remove(){return this.$el.removeClass("shown"),_.delay(()=>super.remove(...arguments),1e3)}}return e.prototype.options={anchor:"above",relative:!0,enableBodyScroll:!0,align:"center"},e.prototype.Rule=function(){var e;return(e=class extends p{template(){return template("._NotifyPopupView")}}).prototype.rule={"._text=":function(){return this.options.text}},e}.call(this),e.prototype.lifespan=5e3,e.prototype.events={"click document":!1,"click ._close-link":e.prototype.remove},e}.call(this),s=function(){class e extends u{}return e.prototype.lifespan=0,e.prototype.Rule=class extends p{template(){return template("._NotifyPopupServerErrorView")}},e}.call(this),o=function(){class e extends u{}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends p{template(){return template("._NotifyPopupAddedOptionView")}}).prototype.rule={"._title=":function(){return this.model.get("revision").get("title")},"._link@href":function(){return this.model.get("URL")}},e}.call(this),e}.call(this),l=function(){class e extends u{}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._NotifyPopupUpdatedOptionView")}}).prototype.rule={"._link@href":function(){return this.model.parents("viewpoint").get("URL")}},e}.call(this),e}.call(this),r=function(){class e extends u{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends p{template(){return template("._NotifyPopupAddedSectionView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("isCon"))return""},"._is-con=":function(){if(!this.model.get("isCon"))return""},"._title=":function(){return this.model.get("revision").get("title")},"._link@href":function(){var e;return new h(null!=(e=this.model.parents("viewpoint"))?e.url():void 0).hash(this.model.get("id"))}},e}.call(this),e}.call(this),a=function(){class e extends u{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._NotifyPopupUpdatedSectionView")}}).prototype.rule={"._link@href":function(){var e;return new h(null!=(e=this.model.parents("viewpoint"))?e.url():void 0).hash(this.model.parents("section").get("id"))}},e}.call(this),e}.call(this),i=function(){class e extends u{}return e.prototype.Model=d,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._NotifyPopupAddedCommentView")}},e}.call(this),t.exports={NotifyPopupView:u,NotifyPopupServerErrorView:s,NotifyPopupAddedOptionView:o,NotifyPopupUpdatedOptionView:l,NotifyPopupAddedSectionView:r,NotifyPopupUpdatedSectionView:a,NotifyPopupAddedCommentView:i}},{"../../models":34,"../../rule":81,"./popup-view":294,urijs:452}],292:[function(e,t,n){var i,o,r,s,l,a,u,c;({DropdownView:i}=e("./dropdown-view")),({OptionView:a}=e("../models/option-view")),({OptionListView:l}=e("../lists/option-list-view")),({SearchableListView:u}=e("../lists/searchable-list-view")),({highlightText:c}=e("../../utils/transforms")),s=function(){class e extends i{search(e){var t;return null!=(t=this.getChildrenByView(r)[0])?t.search(e):void 0}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._OptionDropdownView")}}).prototype.rule={"._OptionDropdownListView=":function(){return new r({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e}.call(this),o=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._OptionDropdownItemView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"._option-title-highlighted=":function(){var e;return e=this.model.get("revision").get("title"),c(e,this.options.regex)}},e}.call(this),e}.call(this),r=function(){class e extends u{getSearchValue(e){return e.get("revision").get("title")}filter(e){return super.filter(e)&&!e.get("selected")}}return e.prototype.mixin(l),e.prototype.ItemView=o,e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._OptionDropdownListView")}},e}.call(this),t.exports={OptionDropdownView:s,OptionDropdownItemView:o,OptionDropdownListView:r}},{"../../utils/transforms":89,"../lists/option-list-view":336,"../lists/searchable-list-view":339,"../models/option-view":359,"./dropdown-view":268}],293:[function(e,t,n){var i,o,r,s,l;l=e("underscore"),({ModalView:o}=e("../components/modal-view")),({TRANSITION_END_EVENT:s}=e("../../utils/constants")),({MINIMUM_MAX_WIDTH_MEDIA_QUERY:i}=e("../../utils/patterns")),r=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Panel Opened")}setContent(e,t){var n,i,o;if((null!=(n=this.activePanelContent)?n.constructor:void 0)!==e||(null!=t?t.model:void 0)!==(null!=(i=this.activePanelContent)?i.model:void 0)||(null!=t?t.collection:void 0)!==(null!=(o=this.activePanelContent)?o.collection:void 0))return this.activePanelContent=new e(t),this.expand(),this.update()}collapse(e){return this.panelWasFullscreen&&this.removeFullscreenState(e),requestAnimationFrame(()=>{var e;return(e=this.$("._panel")).one(s,()=>this.remove()),e.addClass("collapsed")})}expand(){return requestAnimationFrame(()=>{var e;return(e=this.$("._panel")).one(s,()=>{if(this.expanded=!0,this.isIosDevice()&&this.isFullscreen())return this.setFullscreenState(),this.panelWasFullscreen=!0}),l.defer(()=>e.removeClass("collapsed"))})}scrollTo(e){var t,n,i,o,r,l,a;if(l=$(e),a=null!=(i=l.position())?i.top:void 0,n=null!=(o=l.offsetParent())&&null!=(r=o.position())?r.top:void 0,40,null!=a&&null!=n)return this.$el.stop(!0),t=(()=>this.$el.animate({scrollTop:a+n-40},200)),this.expanded?t():this.$el.one(s,()=>t())}triggerClosing(e){return e.preventDefault(),this.trigger("collapsePanel")}isFullscreen(){return window.matchMedia(i).matches&&this.expanded}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._PanelView")}}).prototype.rule={"._PanelContentView=":function(){var e;return null!=(e=this.activePanelContent)?e:""}},e}.call(this),e.prototype.events={click:function(e){return e.stopPropagation()},"click ._close-link":function(e){if(e.currentTarget===e.target)return this.triggerClosing(e)},"click ._close-panel-link":function(e){return this.triggerClosing(e)},"keydown document":function(e){if(27===e.keyCode)return this.triggerClosing(e)}},e}.call(this),t.exports={PanelView:r}},{"../../utils/constants":85,"../../utils/patterns":87,"../components/modal-view":285,underscore:448}],294:[function(e,t,n){var i,o,r,s;s=e("underscore"),({BaseView:i}=e("../base-view")),({MINIMUM_MAX_WIDTH_MEDIA_QUERY:o}=e("../../utils/patterns")),r=function(){class e extends i{initialize(e){var t,n,i,o;return this.follows=$(null!=(n=e.follows.el)?n:e.follows),super.initialize(...arguments),0===(t=this.follows.parents(".Modal")).length&&(t=null),$(null!=(i=null!=(o=e.parentSelector)?o:t)?i:"#container").append(this.el),this.align=e.align,this.anchor=e.anchor,this.cover=e.cover,this.relative=e.relative,this.fixed=e.fixed,this.enableBodyScroll=e.enableBodyScroll,this.closeOnNavigate=e.closeOnNavigate,e.follows?(this.fixed&&this.$el.css("position","fixed"),this.position(),this.attached=!0,s.defer(()=>{if(null==this.closable)return this.closable=!0}),this.closeOnNavigate?this.listenTo(window.router,"navigate",()=>(console.log("navigate close",this),this.close())):void 0):(console.error("PopupView instantiated without a follows element"),this.close())}position(){var e,t,n,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;if(!this.isFullscreen()){if(this.wasFullscreen&&(this.wasFullscreen=!1,$("body").removeClass("has-fullscreen-dropdown"),requestAnimationFrame(()=>window.scrollTo(0,this.savedScrollPosition))),0===this.$el.parents("body").length)return;return 0===(s=this.follows).parents("body").length?(console.error("PopupView follows element not attached to document"),this.closeOnNavigate&&this.close(),this):s.is(":visible")?(y=this.$el.outerWidth(!0),p=this.$el.outerHeight(!0),u=parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom")),a=parseInt(s.css("margin-left"))+parseInt(s.css("margin-right")),c=s.outerWidth(!0),l=s.outerHeight(!0),n=this.$el.parent().offset(),o=this.$el.parent().prop("scrollTop"),i=this.$el.parent().prop("scrollLeft"),r=$(document).width(),h=0,this.cover&&(h=l),(f=this.relative?s.position():s.offset()).top+=o-n.top,f.left+=i-n.left,"center"===this.align?(f.left-=a/2,f.left=f.left-y/2+c/2):"right"===this.align&&(f.left-=a,f.left=f.left-y+c),f.top-=p,m=f.left+y-r,this.overflow=0,m>0&&(f.left-=m,this.overflow=m),f.left<0&&(this.overflow=f.left,f.left=0),x=(e=$(window)).scrollTop(),d=0,s.parents(".Modal").length&&(!0,d=s.parents(".Modal").scrollTop()+(null!=(g=null!=(w=s.parents(".Modal-Window"))&&null!=(v=w.position())?v.top:void 0)?g:0)),t=p+l-h,"below"===this.anchor?(f.top-=u,f.top+=t,_=x+e.height()+d,f.top+this.$el.prop("offsetHeight")>_&&f.top-t>x&&(f.top-=t)):(f.top+=h,f.top<d+($("header.main").height()||0)&&(f.top+=t)),this.fixed&&(f.top-=x),this.$el.css({top:f.top,left:f.left}),this.enableBodyScroll||"fixed"!==this.$el.css("position")?$("body").removeClass("has-popup"):$("body").addClass("has-popup")):(console.info("PopupView follows element not visible"),this.closeOnNavigate&&this.close(),this)}if(!this.wasFullscreen)return this.wasFullscreen=!0,this.savedScrollPosition=$(window).scrollTop(),$("body").addClass("has-fullscreen-dropdown"),requestAnimationFrame(function(){return window.scrollTo(0,0)})}update(){return super.update(...arguments),this.position()}close(e={}){return $("body").removeClass("has-fullscreen-dropdown"),this.isFullscreen()&&!1!==e.scroll&&requestAnimationFrame(()=>window.scrollTo(0,this.savedScrollPosition)),this.trigger("dropdown-close"),this.attached=!1,this.remove()}remove(){return $("body").removeClass("has-popup"),super.remove(...arguments)}isScrollOverflow(e,t){var n,i,o;if(e)return o=e.scrollHeight!==e.clientHeight,n=e.scrollTop===e.scrollHeight-e.clientHeight&&t>0,i=0===e.scrollTop&&t<0,o&&(n||i)}isFullscreen(){return window.matchMedia(o).matches&&this.$el.hasClass("full")}}return e.prototype.options={align:"left",anchor:"above",cover:!1,relative:!1,fixed:!1,enableBodyScroll:!1,follows:null,parentSelector:null,closeOnNavigate:!0},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"@class+":function(){if(this.follows.parents(".Modal").length)return"fromModal"}},e}.call(this),e.prototype.events={"resize window":function(){return this.position()},"click ._close-link":function(e){return this.close()},"click document":function(e){if(this.closable&&this.el!==e.target&&0===this.$(e.target).length&&("INPUT"!==e.target.tagName||this.follows[0]!==e.target&&0===this.follows.has(e.target).length))return this.close()},"keydown document":function(e){if(27===e.keyCode)return this.close()},"wheel .Dropdown-Content":function(e){if(this.isScrollOverflow(e.currentTarget,e.originalEvent.deltaY))return e.preventDefault()},"click a[href]":function(e){return this.loadLink(e)}},e}.call(this),t.exports={PopupView:r}},{"../../utils/patterns":87,"../base-view":259,underscore:448}],295:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v;({BaseView:i}=e("../base-view")),({UserView:g}=e("../models/user-view")),({TooltipView:h}=e("./tooltip-view")),({ModalView:l}=e("./modal-view")),({LoginModalView:s,LoginModalLoginContentView:o,LoginModalRegisterContentView:r}=e("./login-modal-view")),({Topic:m,User:f}=e("../../models")),w=e("underscore"),({shortenNumber:v}=e("../../utils/transforms")),a=80,u=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"questionPromoted",this.update)}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._PromoteQuestionCardView")}}).prototype.rule={"._is-promoted=":function(){if(!this.model.get("promoted"))return""},"._not-promoted=":function(){if(this.model.get("promoted"))return""}},e}.call(this),e.prototype.events={"click ._promote-question-link":function(e){return new p({model:this.model})},"mouseover ._promote-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.tooltip=new d({follows:e.target})}},e}.call(this),p=function(){class e extends l{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Promote Question Modal Opened")}isLoggedIn(){return"undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0}getAvailableKarma(){return this.isLoggedIn()?(("undefined"!=typeof window&&null!==window?window.currentUser.get("karma").meta("total"):void 0)||0)-(("undefined"!=typeof window&&null!==window?window.currentUser.get("karma").meta("spent"):void 0)||0):0}hasSufficientKarma(){return this.getAvailableKarma()-this.getPromotionCost()>=0}getPromotionCost(){return this.model.get("promoteKarmaCost")||a}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._PromoteQuestionModalView")}}).prototype.rule={"._is-promoted=":function(){if(!this.model.get("promoted"))return""},"._not-promoted=":function(){if(this.model.get("promoted"))return""},"._is-logged-in=":function(){if(!("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._not-logged-in=":function(){if("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)return""},"._has-sufficient-karma=":function(){if(!this.hasSufficientKarma())return""},"._not-sufficient-karma=":function(){if(this.hasSufficientKarma())return""},"._is-promoted-or-insufficient-karma=":function(){if(!this.model.get("promoted")&&this.hasSufficientKarma())return""},"._user-available-karma=":function(){return v(this.getAvailableKarma())},"._promote-karma-cost=":function(){return this.getPromotionCost()},"._not-sufficient-karma-class@class+":function(){if(!this.hasSufficientKarma())return"insufficient"},"._PromoteQuestionModalUserView=":function(){return new c({model:"undefined"!=typeof window&&null!==window?window.currentUser:void 0})}},e}.call(this),e.prototype.events={"click ._promote-question-link":function(e){var t,n,i,o,r,s;if(s=("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)||!this.hasSufficientKarma())return this.$("._promote-question-link").addClass("loading"),this.$("._promote-error-message").addClass("hidden"),o=$.Deferred(),w.delay(()=>o.resolve(),2e3),r=`/topics/${this.model.get("id")}/promote/${s}`,n=$.ajax({url:r,type:"POST"}),i=(()=>(this.$("._promote-question-link").removeClass("loading"),this.model.set({promoted:!0},{silent:!0}),this.update(),this.model.trigger("questionPromoted"))),t=(()=>(this.$("._promote-question-link").removeClass("loading"),this.$("._promote-error-message").removeClass("hidden"))),$.when(n,o).then(i,t),analytics.track("Promote Question Requested")},"click ._login-link":function(e){var t;return e.preventDefault(),t=new s({ContentView:o}),this.listenToOnce(t,"login",this.update)},"click ._signup-link":function(e){var t;return e.preventDefault(),t=new s({ContentView:r}),this.listenToOnce(t,"login",this.update)}},e}.call(this),c=function(){class e extends g{}return e.prototype.Model=f,e.prototype.Rule=function(){var e;return(e=class extends g.prototype.Rule{template(){return template("._PromoteQuestionModalUserView")}}).prototype.rule={"._is-logged-in=":function(){if(!("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._not-logged-in=":function(){if("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)return""}},e}.call(this),e}.call(this),d=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._PromoteQuestionTooltipView")}},e}.call(this),t.exports={PromoteQuestionCardView:u,PromoteQuestionModalView:p,PromoteQuestionModalUserView:c,PromoteQuestionTooltipView:d}},{"../../models":34,"../../utils/transforms":89,"../base-view":259,"../models/user-view":366,"./login-modal-view":280,"./modal-view":285,"./tooltip-view":328,underscore:448}],296:[function(e,t,n){arguments[4][135][0].apply(n,arguments)},{"../../models":34,"../../utils/transforms":89,"../components/fab-view":271,"../components/tooltip-view":328,"../lists/option-list-view":336,"../lists/tag-list-view":343,"../models/event-view":353,"../models/option-view":359,"../models/question-view":361,"../models/tag-view":365,"../models/user-view":366,"../threads/question-thread-view":403,dup:135,urijs:452}],297:[function(e,t,n){arguments[4][136][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/data":86,"../components/question-tag-selector-view":300,"../mixins/expanding-textarea-mixin-view":345,"../mixins/fancy-input-mixin-view":346,"../models/question-view":361,dup:136,underscore:448}],298:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C;e("../../rule"),e("urijs"),R=e("moment"),({BaseView:o}=e("../base-view")),({QuestionView:h}=e("../models/question-view")),({TagView:y}=e("../models/tag-view")),({ListView:r}=e("../lists/list-view")),({TagListView:v}=e("../lists/tag-list-view")),({WatchView:x}=e("../components/watch-view")),({ReactionBannerQuestionNeedsClarificationView:f,ReactionBannerQuestionDuplicateView:m,ReactionBannerQuestionNotAFitView:g}=e("./reaction-banner-view")),({Topic:_}=e("../../models")),({TagList:w}=e("../../collections")),({improveURL:V,splitUnit:C,shortenNumber:b}=e("../../utils/transforms")),({BADGES:i}=e("../../utils/constants")),p=function(){class e extends h{getFilteredOptions(){return this.model.get("viewpoints").filter(function(e){return e.get("badge")!==i.flagged})}}return e.prototype.Model=_,e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._QuestionHeaderView")}}).prototype.rule={"._total-option-count=":function(){return C(b(this.getFilteredOptions().length,0)).value},"._total-option-count-unit=":function(){return C(b(this.getFilteredOptions().length,0)).unit},"._recs-count=":function(){return C(b(this.model.get("communityRecommendations").count(),0)).value},"._recs-count-unit=":function(){return C(b(this.model.get("communityRecommendations").count(),0)).unit},"._update-time-ago-value=":function(){var e;return(e=R(new Date(this.model.get("treeModified")),null,"en-abbr")).diff()<-864e5?e.format("MMM Do, YYYY"):e.fromNow(!0)},"._datetime@datetime":function(){if(this.model.get("treeModified"))return new Date(this.model.get("treeModified")).toISOString()},"._datetime@content":function(){if(this.model.get("treeModified"))return new Date(this.model.get("treeModified")).toISOString()},"._created-datetime@content":function(){return new Date(this.model.get("createdEvent").get("time")).toISOString()},"._QuestionHeaderTagListView=":function(){return new u({collection:this.model.get("tags")})},"._QuestionHeaderWatchView=":function(){return new d({collection:this.model.get("subscriptions")})},"._QuestionHeaderSocialShareView=":function(){return new a({model:this.model})},"._ReactionBannerQuestionNeedsClarificationView=":function(){return new f({collection:this.model.get("reactionSet").get("needsImprovement")})},"._ReactionBannerQuestionDuplicateView=":function(){return new m({collection:this.model.get("reactionSet").get("duplicate")})},"._ReactionBannerQuestionNotAFitView=":function(){return new g({collection:this.model.get("reactionSet").get("notAFit")})}},e}.call(this),e}.call(this),c=function(){class e extends y{}return e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._QuestionHeaderTagView")}},e}.call(this),u=function(){class e extends v{filter(e){return!e.get("isCommunity")}}return e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._QuestionHeaderTagListView")}}).prototype.rule={"._question-edit-link@href":function(){return V(this.collection.parents("topic").get("comments")).replace("comments","pending")}},e}.call(this),e.prototype.ItemView=c,e}.call(this),d=function(){class e extends x{}return e.prototype.Rule=function(){var e;return(e=class extends x.prototype.Rule{template(){return template("._QuestionHeaderWatchView")}}).prototype.rule={"._is-active@class+":function(){if(this.collection.meta("subscribed"))return"active"}},e}.call(this),e}.call(this),a=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._QuestionHeaderSocialShareView")}},e.prototype.events={"click ._share-google-link":function(e){return this.model.postToGoogle()},"click ._share-facebook-link":function(e){return this.model.postToFacebook()},"click ._share-twitter-link":function(e){return this.model.postToTwitter()}},e}.call(this),l=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._QuestionHeaderMinimalView")}},e}.call(this),s=function(){class e extends h{getCurrentOption(){return this.model.get("viewpoints").findWhere({selected:!0})}}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{template(){return template("._QuestionHeaderMinimalNavigationView")}}).prototype.rule={"._is-question-page=":function(){if(this.getCurrentOption())return""},"._not-question-page=":function(){if(!this.getCurrentOption())return""},"._option-link@href":function(){if(this.getCurrentOption())return V(this.getCurrentOption())},"._option-title=":function(){var e;return null!=(e=this.getCurrentOption())?e.get("revision").get("title"):void 0}},e}.call(this),e}.call(this),t.exports={QuestionHeaderView:p,QuestionHeaderTagView:c,QuestionHeaderTagListView:u,QuestionHeaderWatchView:d,QuestionHeaderSocialShareView:a,QuestionHeaderMinimalView:l,QuestionHeaderMinimalNavigationView:s}},{"../../collections":2,"../../models":34,"../../rule":81,"../../utils/constants":85,"../../utils/transforms":89,"../base-view":259,"../components/watch-view":329,"../lists/list-view":334,"../lists/tag-list-view":343,"../models/question-view":361,"../models/tag-view":365,"./reaction-banner-view":301,moment:441,urijs:452}],299:[function(e,t,n){arguments[4][138][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../components/recommendation-dropdown-view":307,"../components/recommendation-form-view":308,"../mixins/recommendation-panel-manager-mixin-view":349,dup:138}],300:[function(e,t,n){arguments[4][139][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/data":86,"../../utils/transforms":89,"../base-view":259,"../components/dropdown-view":268,"../components/searchable-dropdown-view":315,"../components/searchable-popup-invoker-view":316,"../components/tag-selector-view":326,"../mixins/fancy-input-mixin-view":346,"../models/tag-view":365,dup:139,underscore:448}],301:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;h=e("urijs"),e("../../rule"),({BaseView:i}=e("../base-view")),({ReactionList:d}=e("../../collections")),({improveURL:m}=e("../../utils/transforms")),p=function(){class e extends i{}return e.prototype.Collection=d,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionBannerView")}}).prototype.rule={"._is-active=":function(){if(!this.collection.count())return""}},e}.call(this),e}.call(this),c=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionBannerQuestionView")}}).prototype.rule={"._comment-link@href":function(){return new h(m(this.collection.parents("topic"))).filename("comments").hash(this.collection.meta("commentId")||"")}},e}.call(this),e}.call(this),a=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionNeedsClarificationView")}},e}.call(this),l=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionDuplicateView")}},e}.call(this),u=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionBannerQuestionNotAFitView")}},e}.call(this),s=function(){class e extends p{}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionBannerOptionView")}}).prototype.rule={"._comment-link@href":function(){return new h(m(this.collection.parents("viewpoint"))).filename("comments").hash(this.collection.meta("commentId")||"")}},e}.call(this),e}.call(this),o=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ReactionBannerOptionFlagView")}},e}.call(this),r=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ReactionBannerOptionOutOfDateView")}},e}.call(this),t.exports={ReactionBannerView:p,ReactionBannerQuestionView:c,ReactionBannerQuestionNeedsClarificationView:a,ReactionBannerQuestionDuplicateView:l,ReactionBannerQuestionNotAFitView:u,ReactionBannerOptionView:s,ReactionBannerOptionFlagView:o,ReactionBannerOptionOutOfDateView:r}},{"../../collections":2,"../../rule":81,"../../utils/transforms":89,"../base-view":259,urijs:452}],302:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b;({BaseView:i}=e("../base-view")),({ReactionTooltipView:V,ReactionTooltipAgreeView:_,ReactionTooltipDisagreeView:x}=e("./reaction-tooltip-view")),({ReactionMenuDropdownView:h,ReactionMenuSectionStepView:g,ReactionMenuNeedsImprovementStepView:f,ReactionMenuFlagStepView:m}=e("./reaction-menu-dropdown-view")),({ReactionList:d,VoteList:R}=e("../../collections")),({ReactionSet:v}=e("../../models")),b=e("underscore"),u=function(){class e extends i{}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionButtonSetView")}}).prototype.rule={"._ReactionButtonAgreeView=":function(){var e;return new o({collection:null!=(e=this.model.parents("section"))?e.get("votes"):void 0})},"._ReactionButtonDisagreeView=":function(){var e;return new r({collection:null!=(e=this.model.parents("section"))?e.get("votes"):void 0})},"._ReactionButtonNeedsImprovementView=":function(){return new l({collection:this.model.get("needsImprovement")})},"._ReactionButtonOutOfDateView=":function(){return new a({collection:this.model.get("outOfDate")})},"._ReactionButtonFlagView=":function(){return new s({collection:this.model.get("flag")})}},e}.call(this),e.prototype.events={"click ._reaction-button-set-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return $(e.currentTarget).addClass("selected"),this.popup=new(function(){var e;return(e=class extends h{}).prototype.DefaultStepView=g,e}.call(this))({model:this.model,follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return $(e.currentTarget).removeClass("selected")})}},e}.call(this),p=function(){class e extends i{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"repaint error",()=>this.fetching=!1)}}return e.prototype.Collection=d,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionButtonView")}}).prototype.rule={"._has-items=":function(){if(!this.collection.meta("count"))return""},"._reaction-count=":function(){return this.collection.meta("count")||""},"._reacted-class@class+":function(){if(this.collection.meta("reacted"))return"reacted"}},e}.call(this),e.prototype.showTooltip=b.debounce(function(e){if(this.mouseover)return new V({collection:this.collection,follows:e.currentTarget})},300),e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){return this.mouseover=!0,this.fetching||(this.collection.fetch({silent:!0,success:()=>this.collection.trigger("reset")}),this.fetching=!0),this.showTooltip.call(this,e,this.collection)},"mouseout ._reaction-tooltip-link":function(e){return this.mouseover=!1},"click ._reaction-toggle-link":function(e){return this.collection.react(!this.collection.meta("reacted")),"function"==typeof this.sendReactedAnalytics?this.sendReactedAnalytics():void 0}},e}.call(this),o=function(){var e;class t extends p{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"vote",()=>this.fetching=!1)}}return t.prototype.Collection=R,t.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionButtonAgreeView")}}).prototype.rule={"._reaction-count=":function(){return this.collection.meta("upvotes")},"._reacted-class@class+":function(){if(this.collection.meta("delta")>0)return"reacted"}},e}.call(this),e=b.debounce(function(e,t){if(this.mouseover)return new _({collection:t,follows:e.currentTarget})},300),t.prototype.events={"mouseover ._reaction-tooltip-link":function(t){var n;return this.mouseover=!0,n=this.collection.parent.get("reactionSet").get("upvote"),this.fetching||(n.fetch({silent:!0,success:()=>n.trigger("reset")}),this.fetching=!0),e.call(this,t,n)},"click ._reaction-toggle-link":function(e){return this.collection.meta("delta")>0?this.collection.vote(0):this.collection.vote(1)}},t}.call(this),r=function(){var e;class t extends p{initialize(){return super.initialize(...arguments),this.listenTo(this.collection,"vote",()=>this.fetching=!1)}}return t.prototype.Collection=R,t.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._ReactionButtonDisagreeView")}}).prototype.rule={"._reaction-count=":function(){return this.collection.meta("downvotes")},"._reacted-class@class+":function(){if(this.collection.meta("delta")<0)return"reacted"}},e}.call(this),e=b.debounce(function(e,t){if(this.mouseover)return new x({collection:t,follows:e.currentTarget})},300),t.prototype.events={"mouseover ._reaction-tooltip-link":function(t){var n;return this.mouseover=!0,n=this.collection.parent.get("reactionSet").get("downvote"),this.fetching||(n.fetch({silent:!0,success:()=>n.trigger("reset")}),this.fetching=!0),e.call(this,t,n)},"click ._reaction-toggle-link":function(e){return this.collection.meta("delta")<0?this.collection.vote(0):this.collection.vote(-1)}},t}.call(this),l=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionButtonNeedsImprovementView")}},e.prototype.events={"click ._reaction-toggle-link":function(e){var t;return this.collection.meta("reacted")?this.collection.react(!1):null!=(t=this.popup)&&t.attached?void 0:this.popup=new(function(){var e;return(e=class extends h{}).prototype.DefaultStepView=f,e}.call(this))({collection:this.collection,follows:this.$("._dropdown-target")})}},e}.call(this),a=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionButtonOutOfDateView")}},e}.call(this),s=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionButtonFlagView")}},e.prototype.events={"click ._reaction-toggle-link":function(e){var t;return this.collection.meta("reacted")?this.collection.react(!1):null!=(t=this.popup)&&t.attached?void 0:this.popup=new(function(){var e;return(e=class extends h{}).prototype.DefaultStepView=m,e}.call(this))({collection:this.collection,follows:this.$("._dropdown-target")})}},e}.call(this),c=function(){class e extends p{sendReactedAnalytics(e=""){var t;return t=e?{label:e}:{},analytics.track("Helpful Reaction Clicked",t)}}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._ReactionButtonUsefulView")}},e}.call(this),y=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionTextButtonUsefulView")}},e}.call(this),w=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionReadOnlyButtonUsefulView")}},e}.call(this),t.exports={ReactionButtonSetView:u,ReactionButtonView:p,ReactionButtonAgreeView:o,ReactionButtonDisagreeView:r,ReactionButtonNeedsImprovementView:l,ReactionButtonOutOfDateView:a,ReactionButtonFlagView:s,ReactionButtonUsefulView:c,ReactionTextButtonUsefulView:y,ReactionReadOnlyButtonUsefulView:w}},{"../../collections":2,"../../models":34,"../base-view":259,"./reaction-menu-dropdown-view":303,"./reaction-tooltip-view":304,underscore:448}],303:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W;({BaseView:i}=e("../base-view")),({DropdownView:o}=e("./dropdown-view")),({Reaction:u,ReactionSet:A,Section:E}=e("../../models")),({ReactionList:c,VoteList:j}=e("../../collections")),({LoginModalView:l,LoginModalAnonymousRegisterContentView:r,LoginModalRegisterContentView:s}=e("./login-modal-view")),({NotifyPopupView:a}=e("./notify-popup-view")),({ToasterView:N,ToastEditOptionView:U,ToastSectionView:q,ToastEditSectionView:B}=e("../components/toaster-view")),({SpecEditorModalView:D}=e("../components/spec-editor-modal-view")),F=e("urijs"),z=e("clipboard-polyfill"),({improveURL:H,shortenNumber:W}=e("../../utils/transforms")),h=function(){class e extends o{initialize(){return this.activeStepView=this.makeDefaultStep(),super.initialize(...arguments)}makeDefaultStep(){if(this.DefaultStepView)return new this.DefaultStepView({model:this.model,collection:this.collection,containerView:this})}setStep(e,t){return t=_.extend({containerView:this},t),e&&analytics.track("Reaction Dropdown Modal Second Step",{reactionType:e.prototype.classID}),this.activeStepView=e?new e(t):this.makeDefaultStep(),this.closable=this.activeStepView.isClosable,this.update(),this.position()}}return e.prototype.Model=A,e.prototype.options={align:"right"},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._ReactionMenuDropdownView")}}).prototype.rule={"._ReactionMenuStepView=":function(){var e;return null!=(e=this.activeStepView)?e:""}},e}.call(this),e.prototype.events={"click ._default-step-link":function(e){return e.stopImmediatePropagation(),this.setStep()}},e}.call(this),I=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionMenuStepView")}}).prototype.rule={"._not-default-step=":function(){if(this instanceof this.options.containerView.DefaultStepView)return""},"._is-registered=":function(){if(!window.currentUser.get("username")||window.currentUser.get("anonymous"))return""},"._not-registered=":function(){if(window.currentUser.get("username")&&!window.currentUser.get("anonymous"))return""}},e}.call(this),e.prototype.isClosable=!0,e.prototype.events={"click ._claim-link":function(e){return e.preventDefault(),new l({ContentView:r,model:window.currentUser})},"click ._register-link":function(e){return e.preventDefault(),new l({ContentView:s})}},e}.call(this),T=function(){class t extends I{}return t.prototype.Model=A,t.prototype.Rule=function(){var t;return(t=class extends I.prototype.Rule{template(){return template("._ReactionMenuQuestionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.parents("topic").get("comments").count())return""},"._summary-link@href":function(){return H(this.model.parents("topic"))},"._compare-link@href":function(){return H(this.model.parents("topic"),this.model.parents("topic").get("compareURL"))},"._edit-link@href":function(){return H(this.model.parents("topic").get("comments")).replace("comments","pending")},"._comment-link@href":function(){return H(this.model.parents("topic").get("comments"))},"._comment-count=":function(){return W(this.model.parents("topic").get("comments").count())},"._history-link@href":function(){return new F(H(this.model.parents("topic"))).filename("history")},"._ReactionMenuNeedsClarificationItemView=":function(){return new y({collection:this.model.get("needsImprovement")})},"._ReactionMenuDuplicateItemView=":function(){return new m({collection:this.model.get("duplicate")})},"._ReactionMenuNotAFitItemView=":function(){return new b({collection:this.model.get("notAFit")})},"._QuestionHeaderWatchView=":function(){var t;return({QuestionHeaderWatchView:t}=e("./question-header-view")),new t({collection:this.model.parents("topic").get("subscriptions")})}},t}.call(this),t.prototype.events={"click ._share-google-link":function(e){return this.model.parents("topic").postToGoogle(),this.getParentByView(h).close()},"click ._share-facebook-link":function(e){return this.model.parents("topic").postToFacebook(),this.getParentByView(h).close()},"click ._share-twitter-link":function(e){return this.model.parents("topic").postToTwitter(),this.getParentByView(h).close()},"click ._copy-link":function(e){return z.writeText(location.origin+this.model.parents("topic").url()),new a({follows:$("._toaster"),text:"Link Copied!"}),this.getParentByView(h).close()},"click ._show-add-option-link":function(e){return $("._SummaryPageAddOptionView").removeClass("hidden")[0].scrollIntoView()}},t}.call(this),S=function(){class e extends I{}return e.prototype.Model=A,e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ReactionMenuOptionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.parents("viewpoint").get("comments").count())return""},"._comment-link@href":function(){return H(this.model.parents("viewpoint").get("comments"))},"._comment-count=":function(){return W(this.model.parents("viewpoint").get("comments").count())},"._history-link@href":function(){return new F(H(this.model.parents("viewpoint"))).filename("history")},"._edit-specs-link@href":function(){var e,t;if(e=this.model.parents("viewpoint"))return null!=(t=new F(H(e)))?t.hash("specs").search({openSpecEditorModal:!0}):void 0},"._ReactionMenuOutOfDateItemView=":function(){return new k({collection:this.model.get("outOfDate")})},"._ReactionMenuFlagItemView=":function(){return new g({collection:this.model.get("flag")})}},e}.call(this),e.prototype.events={"click ._edit-option-link":function(e){var t;return null!=(t=window.view.getChildrenByView(N)[0])&&t.setToast(U,{viewpoint:this.model.parents("viewpoint")}),this.getParentByView(h).close()},"click ._add-section-link":function(e){var t,n,i;return i=new E({},{collection:null!=(t=this.model.parents("viewpoint"))?t.get("sections"):void 0}),null!=(n=window.view.getChildrenByView(N)[0])&&n.setToast(q,{model:i}),this.getParentByView(h).close()},"click ._edit-specs-link":function(e){var t,n;if(t=new F(location.href).path(),n=this.model.parents("viewpoint"),t===new F(H(n)).path())return e.preventDefault(),e.stopPropagation(),new D({model:n.get("masterOption")})}},e}.call(this),L=function(){class e extends I{}return e.prototype.Model=A,e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{template(){return template("._ReactionMenuSectionStepView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.parents("section").get("comments").count())return""},"._is-pro=":function(){if(this.model.parents("section").get("isCon"))return""},"._is-con=":function(){if(!this.model.parents("section").get("isCon"))return""},"._history-link@href":function(){return new F(H(this.model.parents("section"))).filename("history")},"._comment-link@href":function(){return new F(H(this.model.parents("section"))).filename("comments")},"._comment-count=":function(){return W(this.model.parents("section").get("comments").count())},"._ReactionMenuAgreeItemView=":function(){return new p({collection:this.model.parents("section").get("votes")})},"._ReactionMenuDisagreeItemView=":function(){return new d({collection:this.model.parents("section").get("votes")})},"._ReactionMenuNeedsImprovementItemView=":function(){return new V({collection:this.model.get("needsImprovement")})},"._ReactionMenuOutOfDateItemView=":function(){return new k({collection:this.model.get("outOfDate")})},"._ReactionMenuFlagItemView=":function(){return new g({collection:this.model.get("flag")})}},e}.call(this),e.prototype.events={"click ._edit-section-link":function(){var e;return null!=(e=window.view.getChildrenByView(N)[0])&&e.setToast(B,{section:this.model.parents("section")}),this.getParentByView(h).close()}},e}.call(this),O=function(){class e extends I{}return e.prototype.Rule=class extends I.prototype.Rule{},e.prototype.Collection=c,e.prototype.isClosable=!1,e.prototype.events={"submit ._reaction-form":function(e){var t;return e.preventDefault(),t=this.$("._reaction-text-input").val(),this.collection.react(!this.collection.meta("reacted"),{text:t}),this.getParentByView(h).close()}},e}.call(this),R=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._ReactionMenuNeedsImprovementStepView")}},e}.call(this),x=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._ReactionMenuNeedsClarificationStepView")}},e}.call(this),C=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._ReactionMenuNotAFitStepView")}},e}.call(this),M=function(){class e extends I{}return e.prototype.Collection=c,e.prototype.Rule=class extends I.prototype.Rule{},e.prototype.isClosable=!1,e.prototype.events={"input ._reaction-text-input":function(e){return $(e.currentTarget).val()?this.$("._input-submittable").prop("disabled",!1):this.$("._input-submittable").prop("disabled",!0)},"submit ._reaction-form":function(e){var t;if(e.preventDefault(),t=this.$("._reaction-text-input").val())return this.collection.react(!this.collection.meta("reacted"),{text:t}),this.getParentByView(h).close()}},e}.call(this),w=function(){class e extends M{}return e.prototype.Collection=c,e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._ReactionMenuFlagStepView")}},e}.call(this),f=function(){class e extends M{}return e.prototype.Collection=c,e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._ReactionMenuDuplicateStepView")}},e}.call(this),P=function(){class e extends M{}return e.prototype.Collection=c,e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._ReactionMenuOutOfDateStepView")}},e}.call(this),v=function(){class e extends i{}return e.prototype.Collection=c,e.prototype.events={"click ._reacted-link":function(e){return this.collection.react(!this.collection.meta("reacted")),this.getParentByView(h).close()}},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionMenuItemView")}}).prototype.rule={"._selected-class@class+":function(){if(this.collection.meta("reacted"))return"selected"}},e}.call(this),e}.call(this),p=function(){class e extends v{}return e.prototype.Collection=j,e.prototype.events={"click ._reacted-link":function(e){return this.collection.meta("delta")>0?this.collection.vote(0):this.collection.vote(1),this.getParentByView(h).close()}},e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._ReactionMenuAgreeItemView")}}).prototype.rule={"._selected-class@class+":function(){if(this.collection.meta("delta")>0)return"selected"}},e}.call(this),e}.call(this),d=function(){class e extends v{}return e.prototype.Collection=j,e.prototype.events={"click ._reacted-link":function(e){return this.collection.meta("delta")<0?this.collection.vote(0):this.collection.vote(-1),this.getParentByView(h).close()}},e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._ReactionMenuDisagreeItemView")}}).prototype.rule={"._selected-class@class+":function(){if(this.collection.meta("delta")<0)return"selected"}},e}.call(this),e}.call(this),Q=function(e,t){return this.collection.meta("reacted")?this.collection.react(!1):(e.stopImmediatePropagation(),this.getParentByView(h).setStep(t,{collection:this.collection}))},V=function(){class e extends v{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,R)}},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._ReactionMenuNeedsImprovementItemView")}},e}.call(this),y=function(){class e extends V{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,x)}},e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._ReactionMenuNeedsClarificationItemView")}},e}.call(this),k=function(){class e extends v{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,P)}},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._ReactionMenuOutOfDateItemView")}},e}.call(this),g=function(){class e extends v{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,w)}},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._ReactionMenuFlagItemView")}},e}.call(this),m=function(){class e extends v{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,f)}},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._ReactionMenuDuplicateItemView")}},e}.call(this),b=function(){class e extends v{}return e.prototype.events={"click ._reacted-link":function(e){return Q.call(this,e,C)}},e.prototype.Rule=class extends v.prototype.Rule{template(){return template("._ReactionMenuNotAFitItemView")}},e}.call(this),t.exports={ReactionMenuDropdownView:h,ReactionMenuStepView:I,ReactionMenuQuestionStepView:T,ReactionMenuOptionStepView:S,ReactionMenuSectionStepView:L,ReactionMenuTextStepView:O,ReactionMenuNeedsImprovementStepView:R,ReactionMenuNeedsClarificationStepView:x,ReactionMenuNotAFitStepView:C,ReactionMenuRequiredTextStepView:M,ReactionMenuFlagStepView:w,ReactionMenuDuplicateStepView:f,ReactionMenuOutOfDateStepView:P,ReactionMenuItemView:v,ReactionMenuAgreeItemView:p,ReactionMenuDisagreeItemView:d,ReactionMenuDuplicateItemView:m,ReactionMenuFlagItemView:g,ReactionMenuNeedsImprovementItemView:V,ReactionMenuNeedsClarificationItemView:y,ReactionMenuNotAFitItemView:b,ReactionMenuOutOfDateItemView:k}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/spec-editor-modal-view":321,"../components/toaster-view":327,"./dropdown-view":268,"./login-modal-view":280,"./notify-popup-view":291,"./question-header-view":298,"clipboard-polyfill":427,urijs:452}],304:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w;w=e("underscore"),({TooltipView:f}=e("./tooltip-view")),({ReactionListView:o}=e("../lists/reaction-list-view")),({UserView:g}=e("../models/user-view")),({BaseView:i}=e("../base-view")),d=function(){class e extends f{initialize(){return super.initialize(...arguments),this.collection.count()?analytics.track("Reaction Tooltip Open",{reactionType:this.collection.key}):this.close()}}return e.prototype.options={anchor:"above",align:"center",interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._ReactionTooltipView")}}).prototype.rule={"._ReactionTooltipListView=":function(){return new c({collection:this.collection})}},e}.call(this),e}.call(this),m=function(){class e extends f{initialize(){return super.initialize(...arguments)}}return e.prototype.options={anchor:"above",align:"center",interactive:!0},e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._ReactionTooltipView")}},e}.call(this),s=function(){class e extends m{initialize(){return super.initialize(...arguments),0===this.collection.parents("section").get("votes").meta("upvotes")?this.close():analytics.track("Reaction Tooltip Open",{reactionType:"agree"})}}return e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{}).prototype.rule={"._ReactionTooltipListView=":function(){return new r({collection:this.collection})}},e}.call(this),e}.call(this),a=function(){class e extends m{initialize(){return super.initialize(...arguments),0===this.collection.parents("section").get("votes").meta("downvotes")?this.close():analytics.track("Reaction Tooltip Open",{reactionType:"disagree"})}}return e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{}).prototype.rule={"._ReactionTooltipListView=":function(){return new l({collection:this.collection})}},e}.call(this),e}.call(this),p=function(){class e extends g{}return e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._ReactionTooltipUserView")}},e}.call(this),u=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionTooltipItemView")}}).prototype.rule={"._ReactionTooltipUserView=":function(){return new p({model:this.model.get("user")})}},e}.call(this),e}.call(this),c=function(){class e extends o{getItems(){var e,t,n;return n=super.getItems(...arguments),(e=window.currentUser.id)&&-1!==(t=w.findIndex(n,function(t){return t.get("user").id===e}))&&n.splice(0,0,n.splice(t,1)[0]),n}}return e.prototype.ItemView=u,e.prototype.limit=5,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._ReactionTooltipListView")}}).prototype.rule={"._is-pro=":function(){var e;if(null!=(e=this.collection.parents("section"))?e.get("isCon"):void 0)return""},"._is-con=":function(){var e;if(!(null!=(e=this.collection.parents("section"))?e.get("isCon"):void 0))return""},"._has-others=":function(){if(!(this.collection.count()>1))return""},"._has-multi-others=":function(){if(!(this.collection.count()>2))return""},"._not-multi-others=":function(){if(this.collection.count()>2)return""},"._has-multi=":function(){if(!(this.collection.count()>1))return""},"._not-multi=":function(){if(this.collection.count()>1)return""},"._other-count=":function(){return this.collection.count()-1}},e}.call(this),e}.call(this),h=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._ReactionTooltipListView")}},e}.call(this),r=function(){class e extends h{}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{}).prototype.rule={"._is-reacted=":function(){if(!(this.collection.parents("section").get("votes").meta("delta")>0))return""},"._not-reacted=":function(){if(this.collection.parents("section").get("votes").meta("delta")>0)return""},"._has-others=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>1))return""},"._has-multi-others=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>2))return""},"._not-multi-others=":function(){if(this.collection.parents("section").get("votes").meta("upvotes")>2)return""},"._has-multi=":function(){if(!(this.collection.parents("section").get("votes").meta("upvotes")>1))return""},"._not-multi=":function(){if(this.collection.parents("section").get("votes").meta("upvotes")>1)return""},"._count=":function(){return this.collection.parents("section").get("votes").meta("upvotes")},"._other-count=":function(){return this.collection.parents("section").get("votes").meta("upvotes")-1},"._more-count=":function(){return Math.max((this.collection.parents("section").get("votes").meta("upvotes")||0)-this.limit,0)}},e}.call(this),e}.call(this),l=function(){class e extends h{}return e.prototype.Rule=function(){var e;return(e=class extends h.prototype.Rule{}).prototype.rule={"._is-reacted=":function(){if(!(this.collection.parents("section").get("votes").meta("delta")<0))return""},"._not-reacted=":function(){if(this.collection.parents("section").get("votes").meta("delta")<0)return""},"._has-others=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>1))return""},"._has-multi-others=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>2))return""},"._not-multi-others=":function(){if(this.collection.parents("section").get("votes").meta("downvotes")>2)return""},"._has-multi=":function(){if(!(this.collection.parents("section").get("votes").meta("downvotes")>1))return""},"._not-multi=":function(){if(this.collection.parents("section").get("votes").meta("downvotes")>1)return""},"._count=":function(){return this.collection.parents("section").get("votes").meta("downvotes")},"._other-count=":function(){return this.collection.parents("section").get("votes").meta("downvotes")-1},"._more-count=":function(){return Math.max((this.collection.parents("section").get("votes").meta("downvotes")||0)-this.limit,0)}},e}.call(this),e}.call(this),t.exports={ReactionTooltipView:d,ReactionTooltipVotesView:m,ReactionTooltipAgreeView:s,ReactionTooltipDisagreeView:a,ReactionTooltipUserView:p,ReactionTooltipItemView:u,ReactionTooltipListView:c,ReactionTooltipVotesListView:h,ReactionTooltipAgreeListView:r,ReactionTooltipDisagreeListView:l}},{"../base-view":259,"../lists/reaction-list-view":338,"../models/user-view":366,"./tooltip-view":328,underscore:448}],305:[function(e,t,n){arguments[4][144][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/fab-view":271,"../lists/list-view":334,"../mixins/recommendation-panel-manager-mixin-view":349,"../models/event-view":353,"../models/option-view":359,"../models/question-view":361,dup:144,underscore:448}],306:[function(e,t,n){var i,o,r,s,l,a,u;u=e("underscore"),e("../../rule"),({OptionView:o}=e("../models/option-view")),({PanelView:r}=e("../components/panel-view")),({MyRecommendationPanelView:i}=e("../components/my-recommendation-panel-view")),a=function(){class e extends o{initialize(){var e;if(this.hidden=!this.isVoted(),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return e=this.model.get("votes"),this.listenTo(e,"vote",this.onVote),this.listenTo(e,"repaint",this.onVoteChange),this.listenTo(e,"error",this.onVoteError),this.stopListening(e,"vote",this.update),this.stopListening(e,"repaint",this.update)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.hidden?u.defer(()=>this.hide()):u.defer(()=>this.collapse())}onVote(){if(!this.isVoted())return this.hide();this.hidden&&this.collapse()}onVoteChange(){return this.isVoted()?this.collapse():this.hide()}onVoteError(){return this.isVoted()?this.collapse():this.hide()}hide(){return this.hidden=!0,this.$el.removeClass("collapsed"),this.$el.addClass("hidden")}collapse(){var e;return e=this.hidden,this.hidden=!1,e&&this.update(),this.$el.removeClass("hidden"),this.$el.addClass("collapsed")}isVoted(){return this.model.get("votes").meta("delta")}openPanel(){var e;return null!=(e=new r({model:this.model}))?e.setContent(i,{model:this.model.get("votes").getCurrentUserVote()}):void 0}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._RecommendationDrawerView")}}).prototype.rule={"._not-hidden=":function(){if(this.hidden)return""}},e}.call(this),e.prototype.events={"resize window":function(){if(!this.hidden)return this.collapse()},"click ._toggle-link":function(){if(!this.hidden&&window.currentUser.get("username"))return null!=this.model.get("revision").get("text")?this.openPanel():(this.$el.addClass("Loading"),this.model.once("sync",()=>(this.openPanel(),this.$el.removeClass("Loading"))),this.model.once("error",()=>this.$el.removeClass("Loading")),this.model.fetch())}},e}.call(this),s=function(){class e extends a{isVoted(){var e;return(null!=(e=this.model.get("votes").meta("delta"))?e:0)>0}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._RecommendationDrawerAgreeView")}},e}.call(this),l=function(){class e extends a{isVoted(){var e;return(null!=(e=this.model.get("votes").meta("delta"))?e:0)<0}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._RecommendationDrawerDisagreeView")}},e}.call(this),t.exports={RecommendationDrawerView:a,RecommendationDrawerAgreeView:s,RecommendationDrawerDisagreeView:l}},{"../../rule":81,"../components/my-recommendation-panel-view":288,"../components/panel-view":293,"../models/option-view":359,underscore:448}],307:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};({ToasterView:w,ToastOptionView:g}=e("../components/toaster-view")),({SearchOptionDropdownView:f,SearchOptionDropdownOptionItemView:h,SearchOptionDropdownOptionListView:m,SearchOptionDropdownMasterOptionItemView:p,SearchOptionDropdownMasterOptionListView:d}=e("./search-option-dropdown-view")),({Viewpoint:v,MasterOption:i}=e("../../models")),({ViewpointList:y,SearchList:c}=e("../../collections")),_=e("underscore"),u=function(){class e extends f{initialize(e={},t="Recommendation Vote"){return super.initialize(this.options,t)}}return e.prototype.Collection=y,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{}).prototype.rule={"._SearchOptionDropdownOptionListView=":function(){return new l({collection:this.collection,searchQuery:this.options.searchQuery})},"._SearchOptionDropdownMasterOptionListView=":function(){return new r({searchQuery:this.options.searchQuery,optionCollection:this.collection})}},e}.call(this),e.prototype.events={"click ._add-option-link":function(){var e,t,n;return analytics.track("Recommendation Vote Dropdown Add Option Clicked"),(n=new v({},{collection:this.collection})).get("revision").set({title:"",text:"",siteURL:"",price:""}),e=n.toJSON({valid:!0}),n.get("revision").set({title:this.options.searchQuery}),null!=(t=window.view.getChildrenByView(w)[0])?t.setToast(a,{model:n,originalAttributes:e}):void 0}},e}.call(this),s=function(){class e extends h{vote(){var e;return this.model.get("votes").vote(1),this.model.trigger("scrollTo"),null!=(e=this.getParentByView(f))?e.clearSearch().close():void 0}}return e.prototype.Rule=class extends h.prototype.Rule{},e.prototype.events={"click ._select-option-link":function(e){var t;return null!=this.model.get("revision").get("text")?this.vote():(null!=(t=this.getParentByView(f))&&t.showLoadingState(),this.model.once("sync",()=>this.vote()),this.model.once("saveError",()=>null!=t?t.hideLoadingState().showErrorState():void 0),this.model.fetch())},"click ._option-analytics-link":function(e){return analytics.track("Recommendation Vote Dropdown Option Voted")}},e}.call(this),l=function(){class e extends m{filter(e){return super.filter(...arguments)&&!e.get("votes").meta("delta")}}return e.prototype.ItemView=s,e.prototype.Rule=class extends m.prototype.Rule{},e}.call(this),o=function(){class e extends p{constructor(){super(...arguments),this.addMasterOptionSuccessCallback=this.addMasterOptionSuccessCallback.bind(this)}addMasterOptionSuccessCallback(t){return x(this,e),super.addMasterOptionSuccessCallback(...arguments),t.get("votes").vote(1)}}return e.prototype.Model=i,e.prototype.Rule=class extends p.prototype.Rule{},e.prototype.events={"click ._option-analytics-link":function(e){return analytics.track("Recommendation Vote Dropdown Master Option Clicked")}},e}.call(this),r=function(){class e extends d{}return e.prototype.Collection=c,e.prototype.ItemView=o,e.prototype.Rule=class extends d.prototype.Rule{},e}.call(this),a=class extends g{submit(e){return super.submit(_.extend({scroll:!1},e))}sync(){var e,t;return analytics.track("Recommendation Vote Dropdown Option Submitted"),(null!=(e=this.model.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0)&&this.model.get("revision").unset("text"),this.getParentByView(w).setToast(),this.model.collection.add(this.model),this.model.get("votes").vote(1)}},t.exports={RecommendationDropdownView:u,RecommendationDropdownOptionItemView:s,RecommendationDropdownOptionListView:l,RecommendationDropdownMasterOptionItemView:o,RecommendationDropdownMasterOptionListView:r,RecommendationDropdownToastOptionView:a}},{"../../collections":2,"../../models":34,"../components/toaster-view":327,"./search-option-dropdown-view":314,underscore:448}],308:[function(e,t,n){arguments[4][147][0].apply(n,arguments)},{"../../collections":2,"../base-view":259,"../models/user-view":366,"./recommendation-dropdown-view":307,"./searchable-popup-invoker-view":316,dup:147}],309:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y;({BaseView:i}=e("../base-view")),({ThreadView:U}=e("../threads/thread-view")),({UserView:j}=e("../models/user-view")),({OptionVoteView:m}=e("../models/option-vote-view")),({QuestionLevelRecommendationFormView:v,QuestionLevelRecommendationDropdownView:w}=e("../components/question-level-recommendation-form-view")),({QuestionView:y}=e("../models/question-view")),({OptionView:h}=e("../models/option-view")),({QuestionCardStatsView:g}=e("../components/question-card-view")),({CommunityRecommendationHighlightListView:l}=e("../threads/community-recommendation-thread-view")),({PanelView:f}=e("../components/panel-view")),({CommunityRecommendationPanelView:a}=e("../components/community-recommendation-panel-view")),({ReactionTextButtonUsefulView:x}=e("../components/reaction-button-set-view")),({FABRecommendQuestionLevelMicroButtonView:c}=e("../components/fab-view")),({ToasterView:B}=e("../components/toaster-view")),({NotifyPopupServerErrorView:d,NotifyPopupAddedCommentView:p}=e("../components/notify-popup-view")),({CommentListAddCommentView:s}=e("../lists/comment-list-view")),({TopicList:N,ViewpointList:z,ReactionList:_,CommentList:r}=e("../../collections")),({ViewpointVote:Q,User:F,Topic:q,Comment:o}=e("../../models")),({improveURL:H,shortenNumber:Y}=e("../../utils/transforms")),e("underscore"),e("urijs"),W=e("moment"),({ExpandingTextareaMixinView:u}=e("../mixins/expanding-textarea-mixin-view")),V=function(){class e extends i{}return e.prototype.Collection=N,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardContainerView")}}).prototype.rule={"._RecommendationOptionCardTodayListView=":function(){return new M({collection:this.collection})},"._RecommendationOptionCardYesterdayListView=":function(){return new E({collection:this.collection})},"._RecommendationOptionCardWeekListView=":function(){return new A({collection:this.collection})},"._RecommendationOptionCardOlderListView=":function(){return new C({collection:this.collection})}},e}.call(this),e}.call(this),O=function(){class e extends i{getVote(){return this.model.get("communityRecommendations").at(0)}getOption(){var e;return null!=(e=this.getVote())?e.parents("viewpoint"):void 0}}return e.prototype.Model=q,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardView")}}).prototype.rule={"._option-link":function(){return{"@href":function(){return H(this.getOption())},"@title":function(){var e;return null!=(e=this.getOption())?e.get("revision").get("title"):void 0},"@rel":"nofollow"}},"._option-title=":function(){var e;return null!=(e=this.getOption())?e.get("revision").get("title"):void 0},"._option-image@style+":function(){var e,t,n;if(e=null!=(t=this.getOption())&&null!=(n=t.get("revision").get("images").at(0))?n.getImagePreviewURL():void 0)return`background-image: URL('${e}');`},"._RecommendationOptionCardQuestionHeaderView=":function(){return new S({model:this.model})},"._RecommendationOptionCardUserRecView=":function(){return new L({model:this.getVote()})},"._RecommendationOptionCardContentView=":function(){return new R({model:this.getVote()})}},e}.call(this),e}.call(this),D=function(){class e extends O{}return e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._RecommendationOptionImageCardView")}},e}.call(this),b=function(){class e extends U{getItemView(e){var t,n;return(null!=(t=this.getVoteFromQuestion(e))&&null!=(n=t.parents("viewpoint"))?n.get("revision").get("images").at(0):void 0)?D:O}getVoteFromQuestion(e){return e.get("communityRecommendations").at(0)}filter(e){var t,n;return null!=(n=this.getVoteFromQuestion(e))&&(t=W.utc(null!=n?n.get("created"):void 0),this.isInDateCategory(t)&&(null!=n?n.get("text").trim():void 0))}}return e.prototype.Collection=N,e.prototype.ItemView=O,e.prototype.options={infiniteScroll:!1},e.prototype.Rule=class extends U.prototype.Rule{},e}.call(this),M=function(){class e extends b{isInDateCategory(e){return 0===W().diff(e,"days")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardTodayListView")}},e}.call(this),E=function(){class e extends b{isInDateCategory(e){return 1===W().diff(e,"days")}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardYesterdayListView")}},e}.call(this),A=function(){class e extends b{isInDateCategory(e){var t;return 1<(t=W().diff(e,"days"))&&t<7}}return e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardWeekListView")}},e}.call(this),C=function(){class e extends b{filter(e){var t,n;return null!=(n=this.getVoteFromQuestion(e))&&(t=W.utc(null!=n?n.get("created"):void 0),W().diff(t,"days")>=7||!(null!=n?n.get("text").trim():void 0))}onMoreContentLoaded(){var e;return null!=(e=this.getParentByView(V))?e.update():void 0}}return e.prototype.options={infiniteScroll:!0},e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._RecommendationOptionCardOlderListView")}},e}.call(this),S=function(){class e extends y{}return e.prototype.Rule=function(){var e;return(e=class extends y.prototype.Rule{template(){return template("._RecommendationOptionCardQuestionHeaderView")}}).prototype.rule={"._FABRecommendQuestionLevelMicroButtonView=":function(){return new c({model:this.model})},"._QuestionCardStatsView=":function(){return new g({model:this.model})}},e}.call(this),e}.call(this),L=function(){class e extends i{}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationOptionCardUserRecView")}}).prototype.rule={"._has-karma=":function(){if(!this.model.get("user").get("testimonial_karma"))return""},"._user-first-name=":function(){var e;return null!=(e=this.model.get("user").get("displayName")||this.model.get("user").get("username"))?e.split(" ")[0]:void 0},"._karma-total=":function(){return Y(this.model.get("user").get("testimonial_karma")||0)},"._option-title=":function(){var e;return null!=(e=this.model.parents("viewpoint"))?e.get("revision").get("title"):void 0},"._option-link":{"@href":function(){return H(this.model.parents("viewpoint"))},"@title":function(){var e;return null!=(e=this.model.parents("viewpoint"))?e.get("revision").get("title"):void 0}},"._RecommendationOptionCardUserView=":function(){return new I({model:this.model.get("user")})}},e}.call(this),e}.call(this),I=function(){class e extends j{}return e.prototype.Model=F,e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._RecommendationOptionCardUserView")}},e}.call(this),R=function(){class e extends m{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("comments"),"add",this.update)}loadUserReactionStateData(){var e,t;return t=$.Deferred(),e=this.getParentTopic(),("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&e?window.currentUser.fill(e,{success:t.resolve}):t.resolve(),t}openRecPanel(){var e;return null!=(e=new f)?e.setContent(a,{model:this.model}):void 0}getParentTopic(){var e;return null!=(e=this.getParentByView(O))?e.model:void 0}}return e.prototype.Model=Q,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._RecommendationOptionCardContentView")}}).prototype.rule={"._not-empty-recommendation=":function(){var e;if(!((null!=(e=this.model.get("text"))?e.trim():void 0)||this.hasSections()))return""},"._CommunityRecommendationHighlightListView=":function(){var e;return new l({collection:null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0})},"._RecommendationOptionCardReactionTextButtonUsefulView=":function(){return new k({collection:this.model.get("reactionSet").get("useful")})}},e}.call(this),e.prototype.events={"click ._full-recommendation-link":function(e){return analytics.track("Recs Feed Rec Expand Link Clicked"),this.loadUserReactionStateData().then(()=>this.openRecPanel())},"click ._recommendation-comments-link":function(){return this.loadUserReactionStateData().then(()=>{var e;return null!=(e=this.openRecPanel())?e.scrollTo("._comments-section"):void 0}),analytics.track("Recs Feed Rec Comments Link Clicked")}},e}.call(this),T=function(){class e extends v{getPopupView(){return P}onVoteListener(e){}}return e.prototype.Model=q,e.prototype.Rule=class extends v.prototype.Rule{},e}.call(this),P=function(){class e extends w{initialize(e={},t="Recs Feed Recommendation Vote"){return super.initialize(this.options,t)}}return e.prototype.Collection=z,e.prototype.Rule=class extends w.prototype.Rule{},e}.call(this),k=function(){class e extends x{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Option Card")}}return e.prototype.Rule=class extends x.prototype.Rule{},e}.call(this),t.exports={RecommendationOptionCardContainerView:V,RecommendationOptionCardListView:b,RecommendationOptionCardTodayListView:M,RecommendationOptionCardYesterdayListView:E,RecommendationOptionCardWeekListView:A,RecommendationOptionCardOlderListView:C,RecommendationOptionCardView:O,RecommendationOptionImageCardView:D,RecommendationOptionCardQuestionHeaderView:S,RecommendationOptionCardUserRecView:L,RecommendationOptionCardUserView:I,RecommendationOptionCardContentView:R,RecommendationOptionCardRecommendationFormView:T,RecommendationOptionCardRecommendationDropdownView:P,RecommendationOptionCardReactionTextButtonUsefulView:k}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/community-recommendation-panel-view":265,"../components/fab-view":271,"../components/notify-popup-view":291,"../components/panel-view":293,"../components/question-card-view":296,"../components/question-level-recommendation-form-view":299,"../components/reaction-button-set-view":302,"../components/toaster-view":327,"../lists/comment-list-view":331,"../mixins/expanding-textarea-mixin-view":345,"../models/option-view":359,"../models/option-vote-view":360,"../models/question-view":361,"../models/user-view":366,"../threads/community-recommendation-thread-view":398,"../threads/thread-view":404,moment:441,underscore:448,urijs:452}],310:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_;y=e("underscore"),({BaseView:i}=e("../base-view")),({OptionView:l}=e("../models/option-view")),({UserView:w}=e("../models/user-view")),({SectionView:f}=e("../models/section-view")),({PanelView:a}=e("../components/panel-view")),({CommentListAddCommentView:r,CommentListView:s}=e("../lists/comment-list-view")),({ViewpointVote:v,User:g,Section:m}=e("../../models")),({CommentList:o}=e("../../collections")),({improveURL:_}=e("../../utils/transforms")),h=function(){class e extends i{}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._RecommendationPanelView")}}).prototype.rule={"._RecommendationPanelHeaderView=":function(){return new c({model:this.model})},"._RecommendationPanelContentView=":function(){return new u({model:this.model})}},e}.call(this),e}.call(this),c=function(){class e extends i{getRandomImage(){var e,t,n,i;if(e=(t=this.getSourceOption()).get("revision").get("images").length)return n=Math.floor(Math.random()*e),null!=(i=t.get("revision").get("images").at(n))?i.getImagePreviewURL():void 0}getSourceOption(){var e,t;return null!=this.sourceOption?this.sourceOption:(e=this.model.get("viewpointID"),this.sourceOption=this.model.parents("viewpoint")||(null!=(t=this.model.parents("topic"))?t.get("viewpoints").findWhere({id:e}):void 0))}}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-image=":function(){if(!this.getSourceOption().get("revision").get("images").length)return""},"._downvote-class@class+":function(){if(this.model.get("delta")<0)return"downvote"},"._option-title=":function(){return this.getSourceOption().get("revision").get("title")},"._option-image@src":function(){return this.getRandomImage()},"._option-link@href":function(){return _(this.getSourceOption())},"._RecommendationPanelUserView=":function(){if("undefined"!=typeof window&&null!==window)return new d({model:window.currentUser})}},e}.call(this),e.prototype.events={"click ._option-link":function(e){var t;return null!=(t=this.getParentByView(a))?t.trigger("collapsePanel"):void 0}},e}.call(this),d=function(){class e extends w{}return e.prototype.Model=g,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._RecommendationPanelUserView")}},e}.call(this),u=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return y.defer(()=>this.listenTo(this.getParentByView(a),"collapsePanel",this.collapsePanel))}closePanel(){var e;return null!=(e=this.getParentByView(a))?e.collapse():void 0}}return e.prototype.Model=v,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._downvote-class@class+":function(){if(this.model.get("delta")<0)return"downvote"}},e}.call(this),e}.call(this),p=function(){class e extends f{initialize(){if(this.isExpandable=!1,this.expanded=!1,super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return y.defer(()=>this.setDescriptionExpansionDefaults())}setDescriptionExpansionDefaults(){var e,t;return e=this.$(".RecommendationPanel-Section-Body-Description"),this.originalHeight=e.height()||0,t=e.prop("scrollHeight")||0,this.originalHeight<t?(this.$("._expand-section-description-arrow").removeClass("hidden"),this.isExpandable=!0):(this.$("._expand-section-description-arrow").addClass("hidden"),this.isExpandable=!1),this.updateDescriptionExpansionState()}updateDescriptionExpansionState(){if(this.isExpandable)return this.expanded?this.expandDescription():this.collapseDescription()}expandDescription(){var e,t;return t=(e=this.$(".RecommendationPanel-Section-Body-Description")).prop("scrollHeight")||0,this.originalHeight<t&&(e.css("max-height",t),this.$("._expand-section-description-arrow").addClass("expanded")),this.expanded=!0}collapseDescription(){return this.$(".RecommendationPanel-Section-Body-Description").removeAttr("style"),this.$("._expand-section-description-arrow").removeClass("expanded"),this.expanded=!1}toggleDescriptionExpansion(){return this.expanded=!this.expanded,this.expanded&&analytics.track("Recommendation Panel Section Description Expanded"),this.updateDescriptionExpansionState()}}return e.prototype.Model=m,e.prototype.Rule=class extends f.prototype.Rule{},e.prototype.events={"resize window":function(){return this.setDescriptionExpansionDefaults()},"click ._expand-section-description":e.prototype.toggleDescriptionExpansion},e}.call(this),t.exports={RecommendationPanelView:h,RecommendationPanelHeaderView:c,RecommendationPanelUserView:d,RecommendationPanelContentView:u,RecommendationPanelSectionView:p}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/panel-view":293,"../lists/comment-list-view":331,"../models/option-view":359,"../models/section-view":363,"../models/user-view":366,underscore:448}],311:[function(e,t,n){var i,o,r,s;r=e("../../rule"),({VoteList:s}=e("../../collections")),({BaseView:i}=e("../base-view")),o=function(){class e extends i{}return e.prototype.Collection=s,e.prototype.Rule=function(){var e;return(e=class extends r{template(){return template("._RecommendationView")}}).prototype.rule={"._upvote-selected@class+":function(){if(this.collection.meta("delta")>=1)return"selected"},"._downvote-selected@class+":function(){if(this.collection.meta("delta")<=-1)return"selected"},"._upvote-reacted@class+":function(){if(this.collection.meta("delta")>=1)return"reacted"},"._downvote-reacted@class+":function(){if(this.collection.meta("delta")<=-1)return"reacted"},"._has-votes=":function(){if(!this.collection.count())return""},"._no-votes=":function(){if(this.collection.count())return""},"._has-upvotes=":function(){if(!this.collection.meta("upvotes"))return""},"._no-upvotes=":function(){if(this.collection.meta("upvotes"))return""},"._has-downvotes=":function(){if(!this.collection.meta("downvotes"))return""},"._no-downvotes=":function(){if(this.collection.meta("downvotes"))return""},"._is-upvote=":function(){if(!(this.collection.meta("delta")>0))return""},"._is-downvote=":function(){if(!(this.collection.meta("delta")<0))return""},"._is-novote=":function(){if(null!=this.collection.meta("delta")&&0!==this.collection.meta("delta"))return""},"._vote-count=":function(){return this.collection.count()},"._upvote-count=":function(){var e;return null!=(e=this.collection.meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.collection.meta("downvotes"))?e:0},"._target-title=":function(){var e;return null!=(e=this.collection.parents())?e.get("revision").get("title"):void 0}},e}.call(this),e.prototype.events={"click ._upvote-link":function(e){return 1===this.collection.meta("delta")?this.collection.vote(0):this.collection.vote(1)},"click ._downvote-link":function(e){return-1===this.collection.meta("delta")?this.collection.vote(0):this.collection.vote(-1)}},e}.call(this),t.exports={RecommendationView:o}},{"../../collections":2,"../../rule":81,"../base-view":259}],312:[function(e,t,n){arguments[4][151][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../lists/list-view":334,"../models/option-view":359,dup:151}],313:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b;e("../../rule"),({BaseView:i}=e("../base-view")),({DropdownView:o}=e("./dropdown-view")),({ListView:r}=e("../lists/list-view")),({QuestionView:c}=e("../models/question-view")),({OptionView:u}=e("../models/option-view")),({MasterOptionView:a}=e("../models/master-option-view")),({Topic:R,MasterOption:s}=e("../../models")),({SearchList:V,TopicList:b,MasterOptionList:l}=e("../../collections")),x=function(){class e extends o{initialize(e){if(super.initialize(...arguments),this.setQuery(e.search),this.position(),this.stopListening(this.collection),window)return _.defer(()=>{var e,t;if((e=this.$("._search-input:visible")).length)return e.focus(),t=e.val().length,e.get(0).setSelectionRange(t,t)})}position(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0)),super.position(...arguments)}submitSearch(){var t;return this.$("._search-input").blur(),null!=(t=this.getParentByView(e).options.invokerView)&&t.collapseSearch(),router.navigate("/search",{trigger:!0,search:`?query=${this.options.search}`})}syncAndSetQuery(e){var t;return null!=(t=this.options.invokerView)&&t.setQuery(e),this.setQuery(e)}setQuery(e){var t,n;return(t=this.$("._search-input")).val()!==e&&t.val(e),this.options.search=e,n={hitsPerPage:20},""===this.options.search?(this.$el.addClass("noInput"),n.restrictSearchableAttributes="revision.title"):this.$el.removeClass("noInput"),this.collection.search(this.options.search,n,()=>(this.$el.removeClass("Loading"),this.collection.meta("search",this.options.search)))}}return e.prototype.Collection=V,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SearchDropdownView")}}).prototype.rule={"._search-input@value":function(){return this.options.search},"._SearchDropdownResultsView=":function(){return new y({collection:this.collection})},"._SearchDropdownFooterView=":function(){return new d({collection:this.collection})}},e}.call(this),e.prototype.events={"submit ._search-form":function(e){if(e.preventDefault(),this.search)return this.sendAnalytics("Search",{search:this.search}),this.submitSearch()},"resize window":function(e){return this.position()},"click ._search-clear-link":function(e){return this.syncAndSetQuery(""),this.$("._search-input:visible").focus()},"input ._search-input":function(e){return this.syncAndSetQuery($(e.target).val())}},e}.call(this),y=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SearchDropdownResultsView")}}).prototype.rule={"._has-results=":function(){if(0===this.collection.length)return""},"._no-results=":function(){if(0!==this.collection.length)return""},"._has-query=":function(){if(!this.collection.meta("search"))return""},"._no-query=":function(){if(this.collection.meta("search"))return""},"._add-question-link@href":function(){return`/topics/create?title=${this.collection.meta("search")}`},"._search-link@href":function(){return`/search?query=${this.collection.meta("search")}`},"._search-query=":function(){return this.collection.meta("search")},"._SearchDropdownQuestionListView=":function(){return new w({collection:this.collection})},"._SearchDropdownMasterOptionListView=":function(){return new h({collection:this.collection})},"._SearchDropdownOptionListView=":function(){return new f({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._search-dropdown-item":function(e){var t;return analytics.track("Site Search Dropdown Item Clicked"),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0},"click ._add-question-link":function(e){var t;return analytics.track("Clicked Ask Question",{label:"Search Dropdown"}),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0}},e}.call(this),d=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SearchDropdownFooterView")}}).prototype.rule={"._add-question-link@href":function(){return`/topics/create?title=${this.collection.meta("search")}`}},e}.call(this),e.prototype.events={"click ._add-question-link":function(e){var t;return analytics.track("Clicked Ask Question",{label:"Search Dropdown"}),null!=(t=this.getParentByView(x).options.invokerView)?t.collapseSearch():void 0}},e}.call(this),v=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._SearchDropdownQuestionView")}}).prototype.rule={"._no-image=":function(){var e,t;if(null!=(e=this.model.get("viewpoints").at(0))&&null!=(t=e.get("revision").get("images").at(0))?t.getImagePreviewURL():void 0)return""},"._first-option-background-image@style":function(){var e,t,n;if(n=null!=(e=this.model.get("viewpoints").at(0))&&null!=(t=e.get("revision").get("images").at(0))?t.getImagePreviewURL():void 0)return`background-image: URL('${n}');`},"._highlighted-question-title=":function(){var e,t,n,i;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.value:void 0)?$(`<span>${e}</span>`):this.model.get("title")}},e}.call(this),e}.call(this),m=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SearchDropdownMasterOptionView")}}).prototype.rule={"._no-image=":function(){var e;if(null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return""},"._option-background-image@style":function(){var e,t;if(t=null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._highlighted-option-title=":function(){var e,t,n,i,o;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.source)&&null!=(i=n.revision)&&null!=(o=i.title)?o.value:void 0)?$(`<span>${e}</span>`):this.model.get("source").get("revision").get("title")}},e}.call(this),e}.call(this),g=function(){class e extends v{}return e.prototype.Rule=function(){var e;return(e=class extends v.prototype.Rule{template(){return template("._SearchDropdownOptionView")}}).prototype.rule={"._first-option-link@href":function(){var e;return null!=(e=this.model.get("viewpoints").at(0))?e.url():void 0},"._highlighted-option-title=":function(){var e,t,n,i,o,r,s,l;return(e=null!=(t=this.model.get("_highlightResult"))&&null!=(n=t.viewpoints)&&null!=(i=n.children)&&null!=(o=i[0])&&null!=(r=o.revision)&&null!=(s=r.title)?s.value:void 0)?$(`<span>${e}</span>`):null!=(l=this.model.get("viewpoints").at(0))?l.get("revision").get("title"):void 0}},e}.call(this),e}.call(this),w=function(){class e extends r{filter(e){var t,n,i;return e instanceof R&&(!this.collection.meta("query")||"none"!==(null!=(t=e.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.matchLevel:void 0))}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=v,e}.call(this),h=function(){class e extends r{filter(e){return e instanceof s}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=m,e}.call(this),f=function(){class e extends r{filter(e){var t,n,i;return e instanceof R&&this.collection.meta("query")&&"none"===(null!=(t=e.get("_highlightResult"))&&null!=(n=t.revision)&&null!=(i=n.title)?i.matchLevel:void 0)}initialize(){return super.initialize(...arguments),this.stopListening()}}return e.prototype.Collection=V,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SearchDropdownQuestionListView")}},e.prototype.ItemView=g,e}.call(this),p=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SearchDropdownErrorView")}},e}.call(this),t.exports={SearchDropdownView:x,SearchDropdownResultsView:y,SearchDropdownQuestionView:v,SearchDropdownMasterOptionView:m,SearchDropdownFooterView:d,SearchDropdownOptionView:g,SearchDropdownQuestionListView:w,SearchDropdownMasterOptionListView:h,SearchDropdownOptionListView:f,SearchDropdownErrorView:p}},{"../../collections":2,"../../models":34,"../../rule":81,"../base-view":259,"../lists/list-view":334,"../models/master-option-view":357,"../models/option-view":359,"../models/question-view":361,"./dropdown-view":268}],314:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};e("underscore"),({convertURL:y,isURL:_}=e("../../utils/transforms")),({SearchableDropdownView:m,SearchableDropdownListView:h}=e("./searchable-dropdown-view")),({ToasterView:g,ToastOptionView:f}=e("./toaster-view")),({OptionDropdownItemView:s}=e("./option-dropdown-view")),({MasterOption:r,Viewpoint:w,Image:i}=e("../../models")),({ViewpointList:v,SearchList:l,ImageList:o}=e("../../collections")),d=function(){class e extends m{initialize(e={},t="Search Option"){return analytics.track("Search Option Dropdown Opened",{label:t}),super.initialize(...arguments),this.setWidth(),this.position()}showLoadingState(){return this.$("._load-spinner").removeClass("hidden"),this.closable=!1,this}showAddLoadingState(){return this.$("._add-spinner").removeClass("hidden"),this.closable=!1,this}hideLoadingState(){return this.$("._add-spinner").addClass("hidden"),this.$("._load-spinner").addClass("hidden"),this.closable=!0,this}showErrorState(){return this.$("._error-overlay").removeClass("hidden"),this}hideErrorState(){return this.$("._error-overlay").addClass("hidden"),this}setWidth(){var e,t;return e=this.options.follows,this.$el.width($(null!=(t=e.el)?t:e).outerWidth(!0))}checkIsEmpty(){return this.getChildrenByView(p).some(function(e){return e.count()>0})?this.$(".Dropdown-Seperator").removeClass("hidden"):this.$(".Dropdown-Seperator").addClass("hidden")}}return e.prototype.Collection=v,e.prototype.isSelfClosing=!0,e.prototype.Rule=function(){var e;return(e=class extends m.prototype.Rule{template(){return template("._SearchOptionDropdownView")}}).prototype.rule={"._SearchOptionDropdownOptionListView=":function(){return new p({collection:this.collection,searchQuery:this.options.searchQuery})},"._SearchOptionDropdownMasterOptionListView=":function(){return new u({searchQuery:this.options.searchQuery,optionCollection:this.collection})}},e}.call(this),e.prototype.events={"click ._add-option-link":function(e){var t,n,r,s,l;return analytics.track("Search Option Dropdown Add Option Button Clicked"),e.preventDefault(),(l=new w({},{collection:this.collection})).get("revision").set({title:"",text:"",siteURL:"",price:""}),n=l.toJSON({valid:!0}),t=this.options.searchQuery,r=(()=>{var e;return this.close(),null!=(e=window.view.getChildrenByView(g)[0])?e.setToast(f,{model:l,originalAttributes:n}):void 0}),_(t)?(this.showLoadingState(),s=y(t),l.get("revision").set("siteURL",s),$.ajax(`/seek?url=${s}`,{timeout:3e3,success:e=>{var t;return this.hideLoadingState(),null!=e.data&&l.get("revision").set({title:e.data.product_name,images:null!=e.data.product_images?new o(function(){var n,o,r,s;for(s=[],n=0,o=(r=e.data.product_images.slice(0,5)).length;n<o;n++)t=r[n],s.push(new i({source:t}));return s}()):void 0,price:e.data.product_price}),r()},error:e=>(this.hideLoadingState(),r())})):(t&&l.get("revision").set("title",t),r())},"click ._focus-search-link":function(){return this.$("._dropdown-search-input").focus()},"resize window":function(e){return this.setWidth(),this.position()}},e}.call(this),c=function(){class e extends s{}return e.prototype.Model=w,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SearchOptionDropdownOptionItemView")}},e.prototype.events={"click ._select-option-link":function(e){var t;return this.model.trigger("scrollTo"),null!=(t=this.getParentByView(d))?t.clearSearch().close():void 0},"click ._option-analytics-link":function(e){return analytics.track("Search Option Dropdown Option Clicked")}},e}.call(this),p=function(){class e extends h{getSearchValue(e){return e.get("revision").get("title")}}return e.prototype.Collection=v,e.prototype.ItemView=c,e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._SearchOptionDropdownOptionListView")}},e}.call(this),a=function(){class e extends c{constructor(){super(...arguments),this.addMasterOptionSuccessCallback=this.addMasterOptionSuccessCallback.bind(this),this.addMasterOptionErrorCallback=this.addMasterOptionErrorCallback.bind(this)}getOption(){return this.model.get("source")}addMasterOptionSuccessCallback(t){var n;return x(this,e),null!=(n=this.getParentByView(d))&&n.clearSearch().close(),this.options.optionCollection.trigger("add",t,this.options.optionCollection)}addMasterOptionErrorCallback(){var t;return x(this,e),null!=(t=this.getParentByView(d))?t.hideLoadingState().showErrorState():void 0}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{}).prototype.rule={"._show-recs=":function(){return""},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"._option-title=":function(){var e;return e=this.model.get("source").get("revision").get("title"),$(`<span>${e}</span>`)}},e}.call(this),e.prototype.events={"click ._select-option-link":function(e){var t,n;return null!=(t=this.getParentByView(d))&&t.showAddLoadingState(),n=new w({},{collection:this.options.optionCollection}),this.options.optionCollection.add(n,{silent:!0}),n.once("sync",()=>this.addMasterOptionSuccessCallback(n)),n.once("saveError",()=>this.addMasterOptionErrorCallback()),n.save("masterOption",{id:this.model.get("id"),shallow:!0},{wait:!0,valid:!1})},"click ._option-analytics-link":function(e){return analytics.track("Search Option Dropdown Master Option Clicked")}},e}.call(this),u=function(){class e extends p{initialize(e){return super.initialize(...arguments),this.search(e.searchQuery)}createViewOptions(){return{optionCollection:this.options.optionCollection}}filter(e){return!this.options.optionCollection.some(function(t){var n;return(null!=(n=t.get("masterOption"))?n.get("source").get("revision").get("title"):void 0)===e.get("source").get("revision").get("title")})}search(e,t){var n,i;return this.options.query=e,i={filters:"class:MasterOption",hitsPerPage:5,exactOnSingleWordQuery:"attribute"},e?this.collection.search(this.options.query,i,()=>{var e;return this.update(),null!=(e=this.getParentByView(d))&&e.checkIsEmpty(),null!=e&&e.position(),"function"==typeof t?t():void 0}):(this.collection.reset(),this.update(),null!=(n=this.getParentByView(d))&&n.checkIsEmpty(),"function"==typeof t?t():void 0)}getSearchValue(e){return e.get("source").get("revision").get("title")}}return e.prototype.Collection=l,e.prototype.options={asyncSearch:!0},e.prototype.ItemView=a,e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._SearchOptionDropdownMasterOptionListView")}},e}.call(this),t.exports={SearchOptionDropdownView:d,SearchOptionDropdownOptionItemView:c,SearchOptionDropdownOptionListView:p,SearchOptionDropdownMasterOptionItemView:a,SearchOptionDropdownMasterOptionListView:u}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"./option-dropdown-view":292,"./searchable-dropdown-view":315,"./toaster-view":327,underscore:448}],315:[function(e,t,n){arguments[4][154][0].apply(n,arguments)},{"../lists/searchable-list-view":339,"./dropdown-view":268,dup:154}],316:[function(e,t,n){arguments[4][155][0].apply(n,arguments)},{"../base-view":259,"../components/popup-view":294,"../lists/searchable-list-view":339,dup:155}],317:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({BaseView:i}=e("../base-view")),({ListView:s}=e("../lists/list-view")),({EventView:r}=e("../models/event-view")),({OptionEventView:l}=e("../models/option-event-view")),({UserView:d}=e("../models/user-view")),({EventList:o}=e("../../collections")),({shortenNumber:m,improveURL:h}=e("../../utils/transforms")),a=function(){class e extends s{}return e.prototype.Collection=o,e.prototype.limit=5,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._SidebarActivityView")}}).prototype.rule={"._question-activity-link@href":function(){return h(this.collection)}},e}.call(this),e}.call(this),p=function(){class e extends a{}return e.prototype.ItemView=l,e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),u=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"change",this.fetchEvents),this.fetchEvents()}fetchEvents(){if(!this.hasFetched&&window.currentUser.get("username"))return this.$el.addClass("Loading"),this.collection.fetch({success:()=>(this.$el.removeClass("Loading"),this.hasFetched=!0)})}}return e.prototype.Collection=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SidebarAsyncActivityView")}}).prototype.rule={"._SidebarActivityView=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?new a({collection:this.collection}):""}},e}.call(this),e}.call(this),c=function(){class e extends u{}return e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{}).prototype.rule={"._SidebarActivityView=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?new p({collection:this.collection}):""}},e}.call(this),e}.call(this),t.exports={SidebarActivityView:a,SidebarOptionActivityView:p,SidebarAsyncActivityView:u,SidebarAsyncOptionActivityView:c}},{"../../collections":2,"../../utils/transforms":89,"../base-view":259,"../lists/list-view":334,"../models/event-view":353,"../models/option-event-view":358,"../models/user-view":366}],318:[function(e,t,n){arguments[4][157][0].apply(n,arguments)},{"../lists/tag-list-view":343,"../models/tag-view":365,dup:157,underscore:448,urijs:452}],319:[function(e,t,n){arguments[4][158][0].apply(n,arguments)},{"../models/user-view":366,dup:158,underscore:448}],320:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;({BaseView:o}=e("../base-view")),({TooltipView:d}=e("../components/tooltip-view")),({Viewpoint:h}=e("../../models")),({BADGES:i}=e("../../utils/constants")),m=e("underscore"),g=function(e){return e.get("badge")||e.get("votes").meta("weightedcount")>=10},f=function(e){return g(e)&&e.getSlantScore()<59},r=function(){class e extends o{}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreBadgeView")}}).prototype.rule={"._SlantScoreBadgeContentView=":function(){switch(this.model.get("badge")){case i.best:case i.excellent:return new p({model:this.model});default:return new a({model:this.model})}}},e}.call(this),e}.call(this),s=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SlantScoreInteractableBadgeView")}},e.prototype.showTooltip=m.debounce(function(e){var t;if((null==(t=this.tooltip)||!t.attached)&&this.mouseover)return this.tooltip=new c({model:this.model,follows:e.currentTarget})},200),e.prototype.events={"mouseenter ._explanation-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.mouseover=!0,this.showTooltip.call(this,e)},"mouseleave ._explanation-tooltip-link":function(e){if(this.mouseover=!1,this.tooltip)return this.tooltip.close()},"click ._explanation-tooltip-link":function(e){var t;if(null==(t=this.tooltip)||!t.attached)return this.tooltip=new c({model:this.model,follows:e.currentTarget})}},e}.call(this),a=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreSimpleBadgeView")}}).prototype.rule={"._is-confident-score=":function(){if(!g(this.model))return""},"._not-confident-score=":function(){if(g(this.model))return""},"._slant-score=":function(){return this.model.getSlantScore()},"._score-type@class+":function(){var e;switch(e=this.model.get("badge")){case i.best:case i.excellent:case i.flagged:return e;default:if(f(this.model))return"bad"}}},e}.call(this),e}.call(this),l=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._SlantScoreInteractableSimpleBadgeView")}},e.prototype.showTooltip=s.prototype.showTooltip,e.prototype.events=s.prototype.events,e}.call(this),p=function(){class e extends a{isGaming(){var e;return null!=(e=this.model.parents("topic"))?e.isGamingTopic():void 0}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SlantScoreTopBadgeView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.isGaming())return""},"._not-gaming-question=":function(){if(this.isGaming())return""},"._is-best=":function(){if(this.model.get("badge")!==i.best)return""},"._is-excellent=":function(){if(this.model.get("badge")!==i.excellent)return""},"._gaming-type@class+":function(){if(this.isGaming())return"gaming"}},e}.call(this),e}.call(this),c=function(){class e extends d{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return analytics.track("Slant Score Explanation Tooltip Opened")}}return e.prototype.options={align:"left"},e.prototype.Rule=function(){var e;return(e=class extends d.prototype.Rule{template(){return template("._SlantScoreTooltipView")}}).prototype.rule={"._upvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("downvotes"))?e:0},"._SlantScoreTooltipContentView=":function(){return new u({model:this.model})}},e}.call(this),e}.call(this),u=function(){class e extends o{isGaming(){var e;return null!=(e=this.model.parents("topic"))?e.isGamingTopic():void 0}}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SlantScoreTooltipContentView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.isGaming())return""},"._not-gaming-question=":function(){if(this.isGaming())return""},"._is-best=":function(){if(this.model.get("badge")!==i.best)return""},"._is-excellent=":function(){if(this.model.get("badge")!==i.excellent)return""},"._is-flagged=":function(){if(this.model.get("badge")!==i.flagged)return""},"._is-bad=":function(){if(this.model.get("badge")||!f(this.model))return""},"._is-contender=":function(){if(this.model.get("badge")||f(this.model))return""},"._is-confident-score=":function(){if(!g(this.model))return""},"._not-confident-score=":function(){if(g(this.model))return""},"._SlantScoreBadgeView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),t.exports={SlantScoreBadgeView:r,SlantScoreInteractableBadgeView:s,SlantScoreSimpleBadgeView:a,SlantScoreInteractableSimpleBadgeView:l,SlantScoreTopBadgeView:p,SlantScoreTooltipView:c,SlantScoreTooltipContentView:u}},{"../../models":34,"../../utils/constants":85,"../base-view":259,"../components/tooltip-view":328,underscore:448}],321:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x;({BaseView:i}=e("../base-view")),({ModalView:l}=e("../components/modal-view")),({OptionView:a}=e("../models/option-view")),({SpecView:y}=e("../models/spec-view")),({ListView:r}=e("../lists/list-view")),({SearchableListView:u}=e("../lists/searchable-list-view")),({SearchablePopupInvokerView:c}=e("../components/searchable-popup-invoker-view")),({DropdownView:o}=e("../components/dropdown-view")),({MasterOption:s,Spec:p}=e("../../models")),({SpecList:v}=e("../../collections")),({specKeys:x}=e("../../utils/data")),_=e("underscore"),w=function(){class e extends l{}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._SpecEditorModalView")}}).prototype.rule={"._option-title=":function(){return this.model.get("source").get("revision").get("title")},"._SpecEditorModalSpecListView=":function(){var e,t,n,i,o,r,s,l;for(l=function(){var e,n,i,o,r;for(r=[],e=0,n=(o=null!=(i=this.options.defaultSpecs)?i:[]).length;e<n;e++)t=o[e],r.push(new p({key:t,value:""}));return r}.call(this),s=new v(l),e=0,n=(o=this.model.get("specs").models).length;e<n;e++)i=o[e],(r=s.findWhere({key:i.get("key")}))?r.set({value:i.get("value")}):s.add(i.clone());return s.add(new p({key:"",value:""})),new f({collection:s})}},e}.call(this),e.prototype.events={"submit ._spec-form":function(e){var t,n,i,o,r,s,l,a;return e.preventDefault(),this.$(".Modal-Window").addClass("Loading"),o=this.getChildrenByView(f)[0].collection.toJSON(),i=_.pluck(o,"key"),s=this.model.get("specs").toJSON(),r=_.pluck(s,"key"),t=_.chain(r).difference(i).map(function(e){return{key:e,value:null}}).value(),n=o.concat(t),a=new v(function(){var e,t,i;for(i=[],e=0,t=n.length;e<t;e++)(l=n[e]).key&&i.push(new p(l));return i}()),this.model.save({specs:a},{highlight:!1,remove:!0,reset:!0,silent:!0,success:()=>{var e,t;return this.remove(),(null!=(e=null!=(t=this.model.parents("topic"))?t:this.model.parents("viewpoint"))?e:this.model).trigger("change")},error:()=>this.$(".Modal-Window").removeClass("Loading")})}},e}.call(this),g=function(){class e extends c{createPopupView(e){var t;return new m({collection:new v(function(){var e,n,i;for(i=[],e=0,n=x.length;e<n;e++)t=x[e],i.push(new p({key:t}));return i}()),follows:e,align:"left",searchQuery:e.val(),sourceSpec:this.model})}}return e.prototype.Model=p,e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._SpecEditorModalSpecView")}}).prototype.rule={"._spec-key-input@value":function(){return this.model.get("key")},"._spec-value-input@value":function(){return this.model.get("value")}},e}.call(this),e.prototype.events={"click ._remove-spec-link":function(e){return this.model.collection.remove(this.model)},"input ._spec-key-input":function(e){return this.model.set("key",$(e.currentTarget).val(),{silent:!0})},"input ._spec-value-input":function(e){return this.model.set("value",$(e.currentTarget).val(),{silent:!0})},"blur ._spec-key-input":function(e){var t,n;if(n=$(e.currentTarget).val(),t=_.find(x,function(e){return e.toUpperCase()===n.toUpperCase()}))return this.model.set("key",t)}},e}.call(this),f=function(){class e extends r{}return e.prototype.ItemView=g,e.prototype.Collection=v,e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SpecEditorModalSpecListView")}},e.prototype.events={"click ._add-spec-link":function(e){return this.collection.add(new p({key:"",value:""}))}},e}.call(this),m=function(){class e extends o{update(){var e;return super.update(...arguments),(null!=(e=this.getChildrenByView(u)[0])?e.count():void 0)?this.$el.show():this.$el.hide()}setSourceSpecKey(e){return this.follows.val(e),this.options.sourceSpec.set("key",e,{silent:!0})}}return e.prototype.options={parentSelector:"._SpecEditorModalView"},e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownView")}}).prototype.rule={"._SpecEditorModalSpecKeyDropdownKeyListView=":function(){return new d({collection:this.collection,searchQuery:this.options.searchQuery})}},e}.call(this),e}.call(this),h=function(){class e extends y{}return e.prototype.Rule=class extends y.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownKeyView")}},e.prototype.events={"click ._spec-key-link":function(){var e;return(e=this.getParentByView(o)).setSourceSpecKey(this.model.get("key")),e.close()}},e}.call(this),d=function(){class e extends u{update(){var e,t;return super.update(...arguments),this.count()?null!=(e=this.getParentByView(o))?e.$el.show():void 0:null!=(t=this.getParentByView(o))?t.$el.hide():void 0}getSearchValue(e){return e.get("key")}filter(e){var t;return t=this.getSearchValue(e),super.filter(e)&&this.options.searchQuery!==t&&this.options.searchQuery.length}}return e.prototype.limit=5,e.prototype.ItemView=h,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._SpecEditorModalSpecKeyDropdownKeyListView")}},e}.call(this),t.exports={SpecEditorModalView:w,SpecEditorModalSpecView:g,SpecEditorModalSpecListView:f,SpecEditorModalSpecKeyDropdownView:m,SpecEditorModalSpecKeyDropdownKeyView:h,SpecEditorModalSpecKeyDropdownKeyListView:d}},{"../../collections":2,"../../models":34,"../../utils/data":86,"../base-view":259,"../components/dropdown-view":268,"../components/modal-view":285,"../components/searchable-popup-invoker-view":316,"../lists/list-view":334,"../lists/searchable-list-view":339,"../models/option-view":359,"../models/spec-view":364,underscore:448}],322:[function(e,t,n){var i,o,r,s,l;({SpecView:l}=e("../models/spec-view")),({ListView:i}=e("../lists/list-view")),({SpecList:o}=e("../../collections")),r=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._SpecListItemView")}},e}.call(this),s=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return _.defer(()=>(this.setCollapsedHeight(),this.list=this.$("._expandable-list"),this.list.css("max-height",this.collapsedHeight)))}setCollapsedHeight(){var e,t;if(t=this.options.lastCollapsedItem||4,(e=this.$(`.SpecList-Item:nth-child(${t})`)).length)return this.collapsedHeight=e.position().top+e.outerHeight()||""}}return e.prototype.Collection=o,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SpecListView")}}).prototype.rule={"._has-more-specs=":function(){if(!(this.collection.length>(this.options.lastCollapsedItem||4)))return""}},e}.call(this),e.prototype.events={"click ._expand-specs-link":function(e){var t;return t=this.list.prop("scrollHeight"),this.list.css("max-height",t),this.$("._expand-specs-link").addClass("hidden"),this.$("._collapse-specs-link").removeClass("hidden"),this.expanded=!0},"click ._collapse-specs-link":function(e){return this.list.css("max-height",this.collapsedHeight),this.$("._expand-specs-link").removeClass("hidden"),this.$("._collapse-specs-link").addClass("hidden"),this.expanded=!1},"resize window":function(){var e,t,n;return this.setCollapsedHeight(),e=this.expanded?null!=(t=this.list)?t.prop("scrollHeight"):void 0:this.collapsedHeight,null!=(n=this.list)?n.css("max-height",e):void 0}},e}.call(this),t.exports={SpecListItemView:r,SpecListView:s}},{"../../collections":2,"../lists/list-view":334,"../models/spec-view":364}],323:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O;({BaseView:o}=e("../base-view")),({QuestionView:c}=e("../models/question-view")),({OptionView:u}=e("../models/option-view")),({ListView:l}=e("../lists/list-view")),({CarouselView:r}=e("../components/carousel-view")),({TooltipSpecView:b,TooltipTitleView:C}=e("../components/tooltip-view")),({DropdownView:s}=e("./dropdown-view")),({SpecEditorModalView:h}=e("../components/spec-editor-modal-view")),({ModalView:a}=e("../components/modal-view")),({SlantScoreInteractableSimpleBadgeView:p}=e("../components/slant-score-view")),({ViewpointList:P,VoteList:T}=e("../../collections")),({Topic:S,Viewpoint:k,Spec:d}=e("../../models")),({BADGES:i}=e("../../utils/constants")),O=e("moment"),M=e("underscore"),I=function(e){return null!=e.get("revision").get("text")},L=function(e){return e.get("badge")!==i.flagged},R=function(){class e extends c{initialize(e){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&null!=this.getSpecTableSourceCollection())return this.listenTo(this.getSpecTableSourceCollection(),"sync",this.update)}getFilteredList(){return this.getNonFlaggedList().filter(I)}getNonFlaggedList(){return this.getSpecTableSourceCollection().filter(L)}getSpecTableSourceCollection(){return this.model.get("viewpoints")}getSpecTableTitleRowView(){return x}hasMoreItems(){var e,t,n;return(null!=(e=this.options.limit)?e:Infinity)<this.getNonFlaggedList().length||null!=(null!=(t=this.getSpecTableSourceCollection().meta("properties"))&&null!=(n=t.page)?n.next:void 0)}hasMoreSpecs(){var e;return this.model.getSpecKeys().length>(null!=(e=this.options.specLimit)?e:Infinity)}}return e.prototype.Model=S,e.prototype.pageLength=20,e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._SpecTableView")}}).prototype.rule={"._has-more-items=":function(){if(!this.hasMoreItems()&&!this.hasMoreSpecs())return""},"._load-more-link@href":function(){return this.getSpecTableSourceCollection().meta("properties").page.next},"._load-more-count=":function(){return Math.min(this.pageLength,this.getNonFlaggedList().length-this.getFilteredList().length)},"._option-count=":function(){return this.getNonFlaggedList().length},"._spec-table-title-list=":function(){var e,t,n;return t=null!=(n=this.options.limit)?n:this.getFilteredList().length,e=this.getSpecTableTitleRowView(),this.getSpecTableSourceCollection().slice(0,t).map(t=>new e({model:t}))},"._SpecTableCarouselView=":function(){return new m({model:this.model,limit:this.options.limit})}},e}.call(this),e.prototype.events={"click ._load-more-link":function(e){var t;return e.preventDefault(),e.stopPropagation(),t=this.model.get("viewpoints"),this.$("._load-more-link").addClass("Loading"),t.loadMore(),this.listenToOnce(t,"sync error",()=>(t.trigger("moreViewpointsLoaded"),this.update()))}},e}.call(this),m=function(){class e extends r{getFilteredList(){return this.getNonFlaggedList().filter(I)}getNonFlaggedList(){return this.getSpecTableSourceCollection().filter(L)}getSpecTableSourceCollection(){return this.model.get("viewpoints")}getSpecTableRowView(){return y}}return e.prototype.Model=S,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._SpecTableCarouselView")}}).prototype.rule={"._spec-header-list=":function(){var e,t,n,i,o;for(o=[],e=0,n=(i=this.model.getSpecKeys().slice(0,this.options.specLimit)).length;e<n;e++)t=i[e],o.push(new g({model:new d({key:t})}));return o},"._spec-table-list=":function(){var e,t,n;return t=null!=(n=this.options.limit)?n:this.getFilteredList().length,e=this.getSpecTableRowView(),this.getSpecTableSourceCollection().slice(0,t).map(t=>new e({model:t}))}},e}.call(this),e.prototype.events={"click ._previous-item-link":function(e){return e.preventDefault(),e.stopPropagation(),this.step(-1)},"click ._next-item-link":function(e){return e.preventDefault(),e.stopPropagation(),this.step(1)}},e}.call(this),x=function(){class e extends u{}return e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._SpecTableOptionTitleRowView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.getOption().get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"@class+":function(){if(this.model.get("badge")===i.best||this.model.get("badge")===i.excellent)return"top"},"._SlantScoreInteractableSimpleBadgeView=":function(){return new p({model:this.model})}},e}.call(this),e.prototype.events={"click ._title-dropdown-link":function(e){var t,n;if(null!=(t=this.getParentByView(w))&&(t.closable=!1),null==(n=this.popup)||!n.attached)return this.popup=new v({model:this.model,follows:e.currentTarget}),M.delay(()=>null!=t?t.closable=!0:void 0,100)},"click ._option-link":function(e){var t;if(null!=(t=this.getParentByView(a)))return t.remove()},"mouseover .SpecTable-TitleCell":function(e){var t;if((t=e.currentTarget).scrollWidth>$(t).outerWidth())return new C({model:this.getOption(),follows:t})}},e}.call(this),_=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._SpecTableOptionTitleListView")}},e}.call(this),v=function(){class e extends s{initialize(){return super.initialize(...arguments),this.follows.addClass("selected")}close(){return super.close(...arguments),this.follows.removeClass("selected")}getParentModel(){return this.model.parents("topic")}}return e.prototype.options={align:"right",relative:!1},e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SpecTableMoreDropdownView")}},e.prototype.events={"click ._edit-specs-link":function(e){return new h({model:this.model.get("masterOption"),defaultSpecs:this.getParentModel().getSpecKeys()}),this.close()}},e}.call(this),y=function(){class e extends u{getParentModel(){return this.model.parents("topic")}}return e.prototype.Model=k,e.prototype.Rule=function(){var e;return(e=class extends u.prototype.Rule{template(){return template("._SpecTableOptionRowView")}}).prototype.rule={"@class+":function(){if(this.model.get("badge")===i.best||this.model.get("badge")===i.excellent)return"top"},"._option-last-modified=":function(){var e,t;return O(new Date("function"==typeof(e=this.getOption().get("events")).at&&null!=(t=e.at(0))?t.get("time"):void 0)).format("MMM D, YYYY")},"._spec-list=":function(){var e,t,n,i,o,r,s,l,a;for(l=[],e=0,n=(r=null!=(i=null!=(o=this.getParentModel())?o.getSpecKeys().slice(0,this.options.specLimit):void 0)?i:[]).length;e<n;e++)t=r[e],a=null!=(s=this.getMasterOption().get("specs").findWhere({key:t}))?s:new d({key:t,value:"-"}),l.push(new V({model:a}));return l}},e}.call(this),e.prototype.events={"click ._option-site-link":function(e){var t;return t={source:"spec table"},this.sendOptionSiteLinkAnalytics(t)}},e}.call(this),f=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._SpecTableCellView")}},e}.call(this),g=function(){class e extends f{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._SpecTableHeaderCellView")}}).prototype.rule={"._spec-key=":function(){return this.model.get("key")}},e}.call(this),e}.call(this),V=function(){class e extends f{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._SpecTableSpecCellView")}}).prototype.rule={"._no-spec-value=":function(){if(this.model.get("value"))return""},"._spec-value=":function(){var e;return null!=(e=this.model.get("value"))?e:""}},e}.call(this),e.prototype.events={mouseover:function(e){if(this.el.scrollWidth>this.$el.outerWidth())return new b({model:this.model,follows:this.el})}},e}.call(this),w=function(){class e extends a{initialize(){return super.initialize(...arguments),analytics.track("Spec Table Modal Opened")}}return e.prototype.Model=S,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SpecTableModalView")}}).prototype.rule={"._SpecTableView=":function(){return new R({model:this.model})}},e}.call(this),e.prototype.events={click:function(e){if(!1!==this.closable)return this.remove()}},e}.call(this),t.exports={SpecTableView:R,SpecTableCarouselView:m,SpecTableOptionTitleRowView:x,SpecTableOptionTitleListView:_,SpecTableMoreDropdownView:v,SpecTableOptionRowView:y,SpecTableCellView:f,SpecTableHeaderCellView:g,SpecTableSpecCellView:V,SpecTableModalView:w}},{"../../collections":2,"../../models":34,"../../utils/constants":85,"../base-view":259,"../components/carousel-view":262,"../components/modal-view":285,"../components/slant-score-view":320,"../components/spec-editor-modal-view":321,"../components/tooltip-view":328,"../lists/list-view":334,"../models/option-view":359,"../models/question-view":361,"./dropdown-view":268,moment:441,underscore:448}],324:[function(e,t,n){arguments[4][163][0].apply(n,arguments)},{"../base-view":259,dup:163}],325:[function(e,t,n){arguments[4][164][0].apply(n,arguments)},{"../lists/tag-list-view":343,"../models/tag-view":365,"./dropdown-view":268,dup:164}],326:[function(e,t,n){arguments[4][165][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/data":86,"../base-view":259,"../components/content-container-view":266,"../components/dropdown-view":268,"../components/searchable-popup-invoker-view":316,"../lists/searchable-list-view":339,"../lists/tag-list-view":343,"../models/tag-view":365,dup:165,underscore:448}],327:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U;d=e("../../rule"),({BaseView:i}=e("../base-view")),({ListView:s}=e("../lists/list-view")),({NotifyPopupServerErrorView:u,NotifyPopupAddedOptionView:l,NotifyPopupUpdatedOptionView:c,NotifyPopupAddedSectionView:a,NotifyPopupUpdatedSectionView:p}=e("./notify-popup-view")),({Viewpoint:T,Section:h,ViewpointEdit:M,SectionEdit:m,ViewpointRevision:I,Image:o}=e("../../models")),({ViewpointList:L,SectionList:f,ImageList:r}=e("../../collections")),({convertURL:O,isURL:E}=e("../../utils/transforms")),D=function(e){return function(t){var n,i,o;return $(t.currentTarget).removeClass("error").nextAll(".Toaster-Error").find(".Toaster-ErrorText").remove(),(null!=(n=this.model.get("revision"))?n:this.model).set(e,$(t.currentTarget).val(),{silent:!0}),(o=null!=(i=this.getParentByView(k))?i:this).isSubmittable()?o.$("._toast-submittable").prop("disabled",!1):o.$("._toast-submittable").prop("disabled",!0)}},U=function(e,t){if(t)return t=_.once(t.bind(e)),e?("TransitionEvent"in window&&e.$el.one("transitionend",t),window.setTimeout(t,1e3)):t()},A=function(e){return _.delay(function(){var t;if(e=$(e).get(0))return e.focus(),t=e.value.length,e.setSelectionRange(t,t)},200)},P=function(){class e extends i{initialize(e={}){if(this.previousHeight=0,e.prerender&&"false"!==this.$el.attr("data-prerender")||(this.activeToastView=this.makeDefaultToast()),super.initialize(...arguments),this.activeToastView=this.getChildrenByView(k)[0],this.stopListening(),"undefined"!=typeof window&&null!==window)return _.defer(()=>this.activeToastView.$el.css("opacity",1))}makeDefaultToast(){if(this.DefaultToastView)return new this.DefaultToastView({model:this.model,collection:this.collection})}resize(){var e,t,n,i;if(t=this.previousToastView.$el.outerHeight(),e=this.activeToastView.$el.outerHeight(),!this.resizing&&e!==t)return this.resizing=!0,(n=this.$("._toaster")).css("height",e),this.activeToastView.$el.hasClass("collapsed")?(n.removeClass("maximize-mobile"),$("body").removeClass("has-popup")):(n.addClass("maximize-mobile"),$("body").addClass("has-popup")),U(this,function(){return this.resizing=!1}),(i=(()=>{var e;if(null!=(e=this.activeNotifyPopupView)&&e.position(),this.resizing)return window.requestAnimationFrame(i)}))()}setToast(e,t){var n,i;return this.transitioning?this:(delete this.setPendingToast,!(null!=(n=this.activeToastView)?n.complete:void 0)&&(null!=(i=this.activeToastView)?i.isDirty():void 0)?(this.setPendingToast=this.setToast.bind(this,e,t),this.$("._confirm-close").removeClass("hidden"),this):(this.transitioning=!0,this.previousToastView=this.activeToastView,this.previousHeight=this.$("._toaster").outerHeight(),this.activeToastView=e?new e(t):this.makeDefaultToast(),e?this.$el.addClass("toasterVisible"):this.$el.removeClass("toasterVisible"),this.setNotifyPopup(),this.update(),_.defer(()=>{var e;return null!=(e=this.previousToastView)&&e.$el.css("opacity",0),U(this.previousToastView,()=>{var e;return null!=(e=this.previousToastView)&&e.remove(),delete this.previousToastView,this.activeToastView.$el.css("opacity",1),this.transitioning=!1}),this.resize()}),this))}setNotifyPopup(e,t){var n;if(null!=(n=this.activeNotifyPopupView)&&n.remove(),this.activeNotifyPopupView=null,e)return t=_.defaults({follows:this.$("._toaster")},t),this.activeNotifyPopupView=new e(t)}}return e.prototype.Rule=function(){var e;return(e=class extends d{template(){return template("._ToasterView")}}).prototype.rule={"._activeToastView=":function(){var e;return null!=(e=this.activeToastView)?e:""},"._previousToastView=":function(){var e;return null!=(e=this.previousToastView)?e:""},"._toaster@style":function(){return`height: ${this.previousHeight}px;`}},e}.call(this),e.prototype.events={"click ._confirm-close-link":function(e){var t;return analytics.track("Confirmed Close Toast"),null!=(t=this.activeToastView)&&t.remove(),this.activeToastView.complete=!0,this.setPendingToast()},"click ._close-overlay-link":function(e){return analytics.track("Undo Close Toast"),this.$("._confirm-close").addClass("hidden")}},e}.call(this),k=function(){class e extends i{initialize(){var e,t;if(this.track("Opened"),super.initialize(...arguments),null==(e=this.options).originalAttributes&&(e.originalAttributes=null!=(t=this.model)?t.toJSON({valid:!0}):void 0),this.stopListening(this.model,"change repaint"),this.model&&(this.listenTo(this.model,"sync",()=>(this.track("Saved"),this.complete=!0,this.sync(),this.triggerNotifyPopup())),this.listenTo(this.model,"saveError",(e,t)=>{return this.getParentByView(P).setNotifyPopup(u)})),"undefined"!=typeof window&&null!==window)return window.router.onbeforeunload=this.beforeunload.bind(this)}track(e){if(e&&this.eventName)return analytics.track(`${e} ${this.eventName}`)}sync(){return this.getParentByView(P).setToast()}triggerNotifyPopup(){}submit(e){if(e=_.extend({remove:!0,scroll:"top",padding:100},e),this.isSubmittable()&&this.validate())return this.normalize(),this.$el.addClass("Loading"),this.model.once("sync saveError",()=>(this.$el.removeClass("Loading"),delete this.currentRequest)),this.currentRequest=this.model.save(null,e)}beforeunload(){if($.contains(document,this.el)&&this.isDirty())return"One sec! Are you sure that you want to abandon your hard work?"}isError(){return!1}isDirty(e){var t,n;return e=_.extend({valid:!0},e),this.model&&this.options.originalAttributes&&(n=!this.model.equals(this.options.originalAttributes,e)),t=null!=this.activeSidebarView&&this.activeSidebarView.isDirty(),n||t}isSubmittable(){return this.isDirty()&&null==this.currentRequest}normalize(){}validate(e){return this.submitted=!0,this.isError()?(this.update(),!1):(this.getParentByView(P).setNotifyPopup(),!0)}setSidebar(e,t){var n;return null!=(n=this.activeSidebarView)&&n.remove(),delete this.activeSidebarView,this.activeSidebarView=e?new e(t):void 0,this}}return e.prototype.Rule=function(){var e;return(e=class extends d{template(){return template("._ToastView")}}).prototype.rule={"._no-active-sidebar=":function(){if(this.activeSidebarView)return""},"._has-active-sidebar=":function(){if(!this.activeSidebarView)return""},"._question-title=":function(){var e;return null!=(e=this.model.parents("topic"))?e.get("revision").get("title"):void 0},"._option-title=":function(){var e;return null!=(e=this.model.parents("viewpoint"))?e.get("revision").get("title"):void 0},"._toast-submittable@disabled":function(){if(!this.isSubmittable())return"disabled"},"._ToastSidebarView=":function(){return this.activeSidebarView}},e}.call(this),e.prototype.events={"submit ._toast-form":function(e){return this.track("Submitted"),e.preventDefault(),e.stopPropagation(),this.submit()},"click ._submit-link":function(e){return this.track("Submitted"),this.submit()},"click ._close-link":function(e){return this.track("Closed"),this.getParentByView(P).setToast()},"beforeunload window":e.prototype.beforeunload},e}.call(this),S=function(){class e extends i{initialize(){var e,t;return super.initialize(...arguments),null==(e=this.options).originalAttributes&&(e.originalAttributes=null!=(t=this.model)?t.toJSON({valid:!0}):void 0),this.stopListening()}isDirty(e){if(e=_.extend({valid:!0},e),this.model&&this.options.originalAttributes)return!this.model.equals(this.options.originalAttributes,e)}close(){var e;return(e=this.getParentByView(k)).setSidebar(),e.update()}}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._ToastSidebarView")}},e.prototype.isError=k.prototype.isError,e.prototype.validate=k.prototype.validate,e}.call(this),g=function(){class e extends k{}return e.prototype.Rule=class extends k.prototype.Rule{template(){return template("._ToastCollapsedView")}},e}.call(this),b=function(){class e extends k{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return(e=this.model.get("revision").get("images")).chain().filter(function(e){return!e.get("hosted")}).each(function(e){return e.upload()}).value(),this.listenTo(e,"add remove reset sort change uploaded",()=>this.isSubmittable()?this.$("._toast-submittable").prop("disabled",!1):this.$("._toast-submittable").prop("disabled",!0)),A(this.$("._option-title-input"))}sync(){var e,t;return t=this.getParentByView(P),e=new h({},{collection:this.model.get("sections")}),this.$(".Toaster-MobileHeader").is(":visible")?t.setToast():t.setToast(C,{model:e}),this.model.collection.add(this.model)}triggerNotifyPopup(){return this.getParentByView(P).setNotifyPopup(l,{model:this.model})}isTitleMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("revision").get("title"))?e.trim():void 0)}isTitleExistingError(){var e,t,n;return n=this.model.get("revision").get("title"),t=this.model.parents("viewpoint"),this.submitted&&(null!=(e=this.model.parents("viewpoints"))?e.any(function(e){return t!==e&&n===e.get("revision").get("title")}):void 0)}isTitleError(){return this.isTitleMissingError()||this.isTitleExistingError()}isSiteURLInvalidError(){var e;return e=this.model.get("revision").get("siteURL"),this.submitted&&e&&!E(e)}isSiteURLError(){return this.isSiteURLInvalidError()}isImagesUnhostedError(){return this.model.get("revision").get("images").find(function(e){return!e.get("hosted")})}isImagesError(){return this.submitted&&this.isImagesUnhostedError()}isError(){return this.isSiteURLError()||this.isTitleError()||this.isImagesError()}isDirty(e){var t,n,i,o,r,s;return n=null!=(o=null!=(r=this.options.originalAttributes)&&null!=(s=r.revision)?s.images:void 0)?o:[],(t=this.model.get("revision").get("images"))&&n&&(i=!t.equals(n,_.extend({valid:!0},e))),i||super.isDirty(e)}isSubmittable(){return super.isSubmittable(...arguments)&&!this.isImagesUnhostedError()}normalize(){var e,t,n,i,o,r;return r=(n=this.model.get("revision")).get("title"),o=n.get("text"),i=n.get("siteURL"),e={},r&&(e.title=r.trim()),e.text=o,i&&(e.siteURL=O(i)),n.set(e,{silent:!0}),(t=n.get("images")).meta("count",t.length,{silent:!0}),t.each(function(e){var t,n,i;return i=e.get("siteURL"),n=e.get("text"),t={},i&&(t.source=O(i)),n&&(t.hosted=n),e.set(t,{silent:!0})})}}return e.prototype.Model=T,e.prototype.Rule=function(){var e;return(e=class extends k.prototype.Rule{template(){return template("._ToastOptionView")}}).prototype.rule={"._option-title-input@value":function(){return this.model.get("revision").get("title")},"._option-site-url-input@value":function(){return this.model.get("revision").get("siteURL")},"._option-price-input@value":function(){return this.model.get("revision").get("price")},"._option-title-required=":function(){if(!this.isTitleMissingError())return""},"._option-title-existing=":function(){if(!this.isTitleExistingError())return""},"._option-site-url-invalid=":function(){if(!this.isSiteURLInvalidError())return""},"._option-title-input@class+":function(){if(this.isTitleError())return"error"},"._option-site-url-input@class+":function(){if(this.isSiteURLError())return"error"},"._max-image-disabled@class+":function(){if(this.model.get("revision").get("images").length>=5)return"disabled"},"._ToastImageListView=":function(){return new x({collection:this.model.get("revision").get("images")})}},e}.call(this),e.prototype.eventName="Add Option Toast",e.prototype.events={"click ._show-image-sidebar-link":function(e){return this.setSidebar(V,{model:new o({source:""},{collection:this.model.get("revision").get("images")})}),this.update()},"click ._show-description-sidebar-link":function(e){return this.setSidebar(w,{model:this.model.get("revision")}),this.update()},"input ._option-title-input":D("title"),"input ._option-site-url-input":D("siteURL"),"input ._option-price-input":D("price")},e}.call(this),v=function(){class e extends b{initialize(e){var t;return e.viewpoint&&(t={revision:e.viewpoint.get("revision").clone({deep:!0})},e={collection:e.viewpoint.get("comments")},this.model=new M(t,e)),super.initialize(...arguments)}sync(){var e,t;return this.getParentByView(P).setToast(),e=this.model.parents("viewpoint"),null!=(t=this.model.get("revision"))&&(t.parent=e),e.set("revision",this.model.get("revision")),this}triggerNotifyPopup(){return this.getParentByView(P).setNotifyPopup(c,{model:this.model})}}return e.prototype.Model=M,e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._ToastEditOptionView")}},e.prototype.eventName="Edit Option Toast",e}.call(this),w=function(){class e extends S{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return A(this.$("._description-sidebar-input"))}submit(){if(this.validate())return this.close()}}return e.prototype.Model=I,e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{template(){return template("._ToastDescriptionSidebarView")}}).prototype.rule={"._description-sidebar-input":function(){return this.model.get("text")}},e}.call(this),e.prototype.events={"input ._description-sidebar-input":D("text"),"click ._add-description-link":e.prototype.submit,"click ._cancel-description-link":function(e){return this.model.set("text",this.options.originalAttributes.text,{silent:!0}),this.close()},"click ._remove-description-link":function(e){return this.model.set("text","",{silent:!0}),this.close()}},e}.call(this),R=function(){class e extends i{initialize(){return super.initialize(...arguments),this.listenTo(this.model,"uploaded progress failed",this.update)}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ToastImageView")}}).prototype.rule={"._is-uploading=":function(){if(null==this.model.uploadProgress)return""},"._not-uploading=":function(){if(null!=this.model.uploadProgress)return""},"._background-image@style+":function(){var e;if(e=this.model.getImageThumbnailURL())return`background-image: URL('${e}');`},"._width-percent@style+":function(){return`width: ${100*this.model.uploadProgress}%`},"._error-class@class+":function(){if(this.model.uploadError)return"error"},"._index=":function(){return this.model.collection.indexOf(this.model)+1}},e}.call(this),e.prototype.events={"click ._edit-image-link":function(e){var t;return(t=this.getParentByView(k)).setSidebar(V,{model:this.model}),t.update()}},e}.call(this),x=function(){class e extends s{}return e.prototype.Collection=r,e.prototype.ItemView=R,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ToastImageListView")}},e}.call(this),V=function(){class e extends S{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return A(this.$("._image-sidebar-url-input"))}update(){var e;return super.update(...arguments),this.loadedSourceURL=this.model.get("source"),(e=this.$("._image-sidebar")).on("error",()=>(e.addClass("error"),e.removeClass("loaded"),this.$(".Toaster-ImagePreview").removeClass("Loading"),this.$("._image-sidebar-broken-image-error").removeClass("hidden"))),e.on("load",()=>(e.addClass("loaded"),e.removeClass("error"),this.$(".Toaster-ImagePreview").removeClass("Loading"),this.$("._image-sidebar-broken-image-error").addClass("hidden"))),this.$("._image-sidebar-url-input").on("blur",t=>{var n;if((n=this.model.get("source"))!==this.loadedSourceURL)return this.loadedSourceURL=n,e.removeClass("error"),this.$("._image-sidebar-cloud-error").remove(),n?(this.$(".Toaster-ImagePreview").addClass("Loading"),e.attr("src",this.model.getImagePreviewURL())):(this.$(".Toaster-ImagePreview").removeClass("Loading"),e.removeAttr("src"))})}isImageURLMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("source"))?e.trim():void 0)}isImageURLInvalidError(){var e;return e=this.model.get("source"),this.submitted&&e&&!E(e)}isImageURLError(){return this.isImageURLInvalidError()||this.isImageURLMissingError()}isError(){return this.isImageURLError()}submit(){if(this.validate())return this.model.collection.add(this.model,{silent:!0}),this.model.upload(),this.close()}}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends S.prototype.Rule{template(){return template("._ToastImageSidebarView")}}).prototype.rule={"._is-new=":function(){if(this.model.collection.contains(this.model))return""},"._is-edit=":function(){if(!this.model.collection.contains(this.model))return""},"._image-sidebar-url-input@value":function(){return this.model.get("source")},"._image-sidebar@src":function(){return this.model.getImagePreviewURL()},"._image-sidebar-url-invalid=":function(){if(!this.isImageURLInvalidError())return""},"._image-sidebar-url-missing=":function(){if(!this.isImageURLMissingError())return""},"._image-sidebar-baddata-error=":function(){if("baddata"!==this.model.uploadError)return""},"._image-sidebar-size-error=":function(){if("size"!==this.model.uploadError)return""},"._image-sidebar-upload-error=":function(){if("upload"!==this.model.uploadError)return""},"._image-sidebar-user-error=":function(){if("user"!==this.model.uploadError)return""},"._image-sidebar-info-error=":function(){if("info"!==this.model.uploadError)return""},"._image-sidebar-deleted-error=":function(){if("deleted"!==this.model.uploadError)return""},"._image-sidebar-image-error=":function(){if("image"!==this.model.uploadError)return""},"._image-sidebar-url-input@class+":function(){if(this.isImageURLError())return"error"},"._image-sidebar-error-class@class+":function(){if(this.model.uploadError)return"error"}},e}.call(this),e.prototype.events={"input ._image-sidebar-url-input":function(e){var t,n,i;if(D("source").call(this,e),null!=(t=this.options.originalAttributes)?t.hosted:void 0)return(null!=(n=this.options.originalAttributes)?n.source:void 0)===this.model.get("source")?this.model.set("hosted",null!=(i=this.options.originalAttributes)?i.hosted:void 0,{silent:!0}):this.model.unset("hosted",{silent:!0})},"keydown ._image-sidebar-url-input":function(e){if(13===e.keyCode)return e.preventDefault(),this.update(),A(this.$("._image-sidebar-url-input"))},"click ._add-image-link":e.prototype.submit,"click ._cancel-image-link":function(e){return this.model.set(this.options.originalAttributes,{silent:!0}),this.close()},"click ._remove-image-link":function(e){return this.model.collection.remove(this.model),this.close()}},e}.call(this),C=function(){class e extends k{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return A(this.$("._section-title-input"))}sync(){var t,n;return n=this.getParentByView(P),this.$("._add-more-sections-input").prop("checked")&&this.$(".Toaster-Checkbox").is(":visible")?(t=new h({isCon:this.model.get("isCon")},{collection:this.model.collection}),n.setToast(e,{model:t})):n.setToast(),this.model.collection.add(this.model)}triggerNotifyPopup(){return this.getParentByView(P).setNotifyPopup(a,{model:this.model})}isTitleMissingError(){var e;return this.submitted&&!(null!=(e=this.model.get("revision").get("title"))?e.trim():void 0)}isTitleError(){return this.isTitleMissingError()}isError(){return this.isTitleError()}isDirty(e){return e=_.extend({omit:["isCon"]},e),super.isDirty(e)}normalize(){var e,t,n,i;return i=(t=this.model.get("revision")).get("title"),n=t.get("text"),e={},i&&(e.title=i.trim()),e.text=n,t.set(e,{silent:!0})}}return e.prototype.Model=h,e.prototype.Rule=function(){var e;return(e=class extends k.prototype.Rule{template(){return template("._ToastSectionView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("isCon"))return""},"._is-con=":function(){if(!this.model.get("isCon"))return""},"._set-pro-link@class+":function(){if(!this.model.get("isCon"))return"selected"},"._set-con-link@class+":function(){if(this.model.get("isCon"))return"selected"},"._section-title-input@value":function(){return this.model.get("revision").get("title")},"._section-description-input":function(){return this.model.get("revision").get("text")},"._add-more-sections-input@checked":function(){var e;if(null==(e=this.options.addMore)||e)return"checked"},"._section-title-required=":function(){if(!this.isTitleMissingError())return""},"._section-title-input@class+":function(){if(this.isTitleError())return"error"}},e}.call(this),e.prototype.eventName="Add Section Toast",e.prototype.events={"input ._section-title-input":D("title"),"input ._section-description-input":D("text"),"change ._add-more-sections-input":function(e){return this.options.addMore=e.currentTarget.checked},"click ._set-pro-link":function(e){return this.model.set("isCon",!1),this.update()},"click ._set-con-link":function(e){return this.model.set("isCon",!0),this.update()}},e}.call(this),y=function(){class e extends C{initialize(e){var t;return e.section&&(t={revision:e.section.get("revision").clone({deep:!0})},e={collection:e.section.get("comments")},this.model=new m(t,e)),super.initialize(...arguments)}sync(){return this.getParentByView(P).setToast(),this.model.get("revision").parent=this.model.parents("section"),this.model.parents("section").set("revision",this.model.get("revision"))}triggerNotifyPopup(){return this.getParentByView(P).setNotifyPopup(p,{model:this.model})}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._ToastEditSectionView")}}).prototype.rule={"._is-pro=":function(){if(this.model.parents("section").get("isCon"))return""},"._is-con=":function(){if(!this.model.parents("section").get("isCon"))return""}},e}.call(this),e.prototype.eventName="Edit Section Toast",e}.call(this),t.exports={ToasterView:P,ToastView:k,ToastSidebarView:S,ToastCollapsedView:g,ToastOptionView:b,ToastEditOptionView:v,ToastDescriptionSidebarView:w,ToastImageSidebarView:V,ToastImageView:R,ToastImageListView:x,ToastSectionView:C,ToastEditSectionView:y}},{"../../collections":2,"../../models":34,"../../rule":81,"../../utils/transforms":89,"../base-view":259,"../lists/list-view":334,"./notify-popup-view":291}],328:[function(e,t,n){var i,o,r,s,l,a,u;({PopupView:i}=e("./popup-view")),({User:u,Spec:o}=e("../../models")),a=function(){class e extends i{initialize(e){var t,n;return super.initialize(...arguments),this.triggers=e.triggers?$(e.triggers):this.follows,t=(()=>(this.close(),delete this.timeoutId,this.options.interactive?this.triggers.off("mouseleave",n):this.triggers.off("mouseleave",t))),n=(()=>this.timeoutId=setTimeout(t,this.options.tooltipTimeout)),this.options.interactive?(this.triggers.on("mouseleave",n),this.triggers.on("mouseover",e=>{if(null!=this.timeoutId)return e.preventDefault(),e.stopPropagation(),clearTimeout(this.timeoutId),delete this.timeoutId}),this.$el.on("mouseover",()=>{if(null!=this.timeoutId)return clearTimeout(this.timeoutId),delete this.timeoutId,this.$el.on("mouseleave",n)})):this.triggers.on("mouseleave",t)}position(){var e,t,n,i;if(super.position(...arguments),0!==this.$el.parents("body").length)return this.$el.addClass(this.options.anchor),t=this.$("._tooltip-arrow"),this.overflow&&null!=t&&t.css({left:`calc(50% + ${this.overflow}px)`}),e=this.options.anchor,n=$(null!=(i=this.options.follows.el)?i:this.options.follows),"below"===e&&this.$el.offset().top<n.offset().top&&this.$el.addClass("above").removeClass("below"),"above"===e&&this.$el.offset().top+this.$el.prop("offsetHeight")>n.offset().top+n.prop("offsetHeight")?this.$el.addClass("below").removeClass("above"):void 0}}return e.prototype.options={align:"center",anchor:"below",cover:!1,relative:!1,interactive:!1,tooltipTimeout:200},e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._TooltipView")}},e}.call(this),s=function(){class e extends a{}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("revision").get("title")}},e}.call(this),e}.call(this),l=function(){class e extends a{}return e.prototype.Model=u,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("displayName")||this.model.get("username")}},e}.call(this),e}.call(this),r=function(){class e extends a{}return e.prototype.options={tooltipTimeout:0},e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._text=":function(){return this.model.get("value")}},e}.call(this),e}.call(this),t.exports={TooltipView:a,TooltipTitleView:s,TooltipUserView:l,TooltipSpecView:r}},{"../../models":34,"./popup-view":294}],329:[function(e,t,n){var i,o,r,s;o=e("../../rule"),({SubscriptionList:r}=e("../../collections")),({BaseView:i}=e("../base-view")),s=function(){class e extends i{}return e.prototype.Collection=r,e.prototype.Rule=function(){var e;return(e=class extends o{template(){return template("._WatchView")}}).prototype.rule={"._is-watching=":function(){if(!this.collection.meta("subscribed"))return""},"._not-watching=":function(){if(this.collection.meta("subscribed"))return""}},e}.call(this),e.prototype.events={"click ._watch-link":function(e){return this.collection.subscribe(!0)},"click ._unwatch-link":function(e){return this.collection.subscribe(!1)}},e}.call(this),t.exports={WatchView:s}},{"../../collections":2,"../../rule":81,"../base-view":259}],330:[function(e,t,n){arguments[4][169][0].apply(n,arguments)},{"./components":275,"./lists":333,"./mixins":348,"./models":355,"./pages":378,"./threads":401,dup:169,underscore:448}],331:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;v=e("underscore"),({BaseView:i}=e("../base-view")),({ListView:g}=e("../lists/list-view")),({ExpandingTextareaMixinView:f}=e("../mixins/expanding-textarea-mixin-view")),({CommentView:d,CommentWithContextView:m,CommentReactionButtonMostImportantView:a,CommentReactionTooltipView:c,CommentReactionTooltipListView:u,CommentUserView:p}=e("../models/comment-view")),({Comment:o}=e("../../models")),({CommentList:r,ReactionList:w}=e("../../collections")),({generalizeStringURL:y}=e("../../utils/transforms")),l=function(){class e extends g{initialize(){super.initialize(...arguments),"undefined"==typeof window||window}createViewOptions(){return{filterByDisplayed:this.options.filterByDisplayed}}isComment(e){return e.get("text")&&e.get("text").trim()&&null==e.get("revision").get("title")}filter(e){return this.options.filterByDisplayed?e.get("isDisplayed")&&this.isComment(e):this.isComment(e)}}return e.prototype.Collection=r,e.prototype.ItemView=d,e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._CommentListView")}},e}.call(this),h=function(){class e extends l{}return e.prototype.Collection=r,e.prototype.ItemView=m,e.prototype.Rule=class extends l.prototype.Rule{},e}.call(this),s=function(){class e extends i{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"login logout",this.update),this.stopListening(this.collection,"add",this.update)}submit(){var e,t,n;if(this.$("._add-comment-form").removeClass("hasError"),n=this.$("._comment-text-input").val().trim())return this.$el.addClass("Loading"),t=this.collection.count(),(e=new o({text:n},{collection:this.collection})).save(null,{highlight:!1,add:!1}),e.once("saveError",()=>(this.$("._add-comment-form").addClass("hasError"),this.$el.removeClass("Loading"))),e.once("sync",()=>(this.$el.removeClass("Loading"),this.sendSubmitAnalytics(),e.set({isDisplayed:!0},{silent:!0}),t===this.collection.count()&&this.collection.meta("count",t+1,{silent:!0}),this.collection.add(e,{at:0}),this.$("._comment-text-input").val("")))}sendSubmitAnalytics(){var e,t,n,i;return t={},null!=(n=this.collection.parent)&&(e=y(null!=(i=n.url())?i:""),t.label=e),analytics.track("Submit Comment",t)}triggerResize(){return this.collection.trigger("resizeComments")}}return e.prototype.Collection=r,e.prototype.mixin(f),e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommentListAddCommentView")}}).prototype.rule={"._has-user=":function(){var e;if(!("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUser)?e.get("username"):void 0))return""},"._has-display-name=":function(){if(!("undefined"!=typeof window&&null!==window?window.currentUser.get("displayName"):void 0))return""},"._display-name=":function(){return("undefined"!=typeof window&&null!==window?window.currentUser.get("displayName"):void 0)||("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)},"._username=":function(){return"undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0},"._comment-text-input":function(){return this.text},"._submit-comment-link@class+":function(){if(!this.text)return"disabled"},"._CommentUserView=":function(){var e;return("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUser)?e.get("username"):void 0)?new p({model:window.currentUser}):""}},e}.call(this),e.prototype.events=v.assign({},f.prototype.events,{"click ._submit-comment-link":function(e){return this.submit()},"input ._comment-text-input":function(e){return this.text=this.$("._comment-text-input").val().trim(),this.text?this.$("._submit-comment-link").removeClass("disabled"):this.$("._submit-comment-link").addClass("disabled")}}),e}.call(this),t.exports={CommentListView:l,CommentWithContextListView:h,CommentListAddCommentView:s}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../lists/list-view":334,"../mixins/expanding-textarea-mixin-view":345,"../models/comment-view":352,underscore:448}],332:[function(e,t,n){var i,o,r,s;({ImageList:i}=e("../../collections")),({ListView:s}=e("../lists/list-view")),({ImageView:r}=e("../models/image-view")),o=function(){class e extends s{}return e.prototype.Collection=i,e.prototype.ItemView=r,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._ImageListView")}},e}.call(this),t.exports={ImageListView:o}},{"../../collections":2,"../lists/list-view":334,"../models/image-view":354}],333:[function(e,t,n){arguments[4][172][0].apply(n,arguments)},{"./comment-list-view":331,"./image-list-view":332,"./list-view":334,"./my-recommendation-list-view":335,"./option-list-view":336,"./question-list-view":337,"./reaction-list-view":338,"./searchable-list-view":339,"./section-list-view":340,"./sidebar-related-question-list-view":341,"./sidebar-tag-list-view":342,"./tag-list-view":343,"./user-list-view":344,dup:172,underscore:448}],334:[function(e,t,n){var i,o,r,s;r=e("../../rule"),e("../../collection"),e("../../model"),({BaseView:i}=e("../base-view")),s=e("underscore"),o=function(){class e extends i{update(){return super.update(...arguments),this.cachedViews=this.children}empty(e){if(!1!==e.remove)return super.empty(...arguments)}count(){return this.filter?s.filter(this.getModels(),this.filter,this).length:this.collection.count()}getModels(){return this.collection.models}getItems(){var e;return e=this.getModels(),this.filter&&(e=s.filter(e,this.filter,this)),this.sortBy&&(e=s.sortBy(e,this.sortBy,this)),null!=this.offset&&(e=e.slice(this.offset)),null!=this.limit&&(e=e.slice(0,this.limit)),e}getCachedItemView(e){var t;return(t=s.find(this.cachedViews,function(t){return t.model===e||t.collection===e}))?t.delegateEvents():t=this.createItemView(e),t}getItemView(e){return this.ItemView}createItemView(e,t){var n,i,o;return o=this.createViewOptions(),(n=this.getItemView(e)).prototype.Collection?o.collection=e:o.model=e,(i=new n(o)).parent=this,i}createViewOptions(){return{}}initialize(e={}){return e.filter&&(this.filter=e.filter),e.sortBy&&(this.sortBy=e.sortBy),e.limit&&(this.limit=e.limit),e.offset&&(this.offset=e.offset),super.initialize(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends r{}).prototype.rule={"._has-items=":function(){if(!s.filter(this.getModels(),this.filter,this).length)return""},"._no-items=":function(){if(s.filter(this.getModels(),this.filter,this).length)return""},"._has-more-count=":function(){if(!(null!=this.limit&&this.collection.count()-this.limit>0))return""},"._count=":function(){return this.count()},"._more-count=":function(){return Math.max(this.collection.count()-this.limit,0)},"._list=":function(){return this.getItems().map(this.getCachedItemView.bind(this))}},e}.call(this),e.prototype.filter=null,e}.call(this),t.exports={ListView:o}},{"../../collection":1,"../../model":33,"../../rule":81,"../base-view":259,underscore:448}],335:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g;e("underscore"),({CommunityRecommendationItemView:o,CommunityRecommendationUserView:r,CommunityRecommendationHighlightListView:i}=e("../threads/community-recommendation-thread-view")),({ListView:s}=e("../lists/list-view")),({MyRecommendationPanelView:u}=e("../components/my-recommendation-panel-view")),({PanelView:d}=e("../components/panel-view")),({ViewpointVote:m}=e("../../models")),({ViewpointList:h}=e("../../collections")),({splitUnit:g,shortenNumber:f}=e("../../utils/transforms")),l=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model,"newTestimonial",this.onNewRecommedation),this.listenTo(this.model.parents("votes"),"vote",()=>this.update())}openRecPanel(){var e;return null!=(e=new d({model:this.model.parents("viewpoint")}))?e.setContent(u,{model:this.model}):void 0}onNewRecommedation(){return this.highlight(this.model,{padding:40,speed:30}),analytics.track("My Rec New Testimonial Created")}fetchVote(e){var t,n,i;if(n=this.model.parents("viewpoint")||this.model.get("user").get("username")!==("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return null!=n.get("revision").get("text")?e():(this.$el.addClass("Loading"),i=(()=>(this.$el.removeClass("Loading"),e())),t=(()=>this.$el.removeClass("Loading")),n.fetch({success:i,error:t}))}getRecType(){return"My"}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._MyRecommendationItemView")}}).prototype.rule={"._CommunityRecommendationUserView=":function(){return new p({model:this.model.get("user")})},"._CommunityRecommendationHighlightListView=":function(){var e;return new c({collection:null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0})}},e}.call(this),e.prototype.events={"click ._edit-recommendation-link":function(e){return analytics.track("My Rec Edit Link Clicked"),this.fetchVote(()=>this.openRecPanel())}},e}.call(this),a=function(){class e extends s{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.collection.forEach(e=>this.listenTo(e.get("votes"),"vote repaint",this.update))}filter(e){var t;if("undefined"!=typeof window&&null!==window)return(t=this.getCurrentUserVote(e))&&t.isVoted()}getItems(){var e;return e=super.getItems(...arguments),"undefined"==typeof window||null===window?[]:e.map(this.getCurrentUserVote)}getCurrentUserVote(e){var t;return(t="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&e.get("votes").find(function(e){return e.get("user").get("username")===t})}}return e.prototype.Collection=h,e.prototype.ItemView=l,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._MyRecommendationListView")}},e}.call(this),p=function(){class e extends r{}return e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._karma-count=":function(){var e;return g(f("undefined"!=typeof window&&null!==window&&"function"==typeof(e=window.currentUser.get("karma")).meta?e.meta("total"):void 0)||0,0).value},"._karma-count-unit=":function(){var e;return g(f("undefined"!=typeof window&&null!==window&&"function"==typeof(e=window.currentUser.get("karma")).meta?e.meta("total"):void 0)||0,0).unit}},e}.call(this),e.prototype.events={"click ._user-link":function(e){return analytics.track("My Rec User Profile Link Clicked")}},e}.call(this),c=function(){class e extends i{filter(e){return e.get("votes").meta("delta")>0}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={MyRecommendationItemView:l,MyRecommendationListView:a,MyRecommendationUserView:p,MyRecommendationSectionListView:c}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../components/my-recommendation-panel-view":288,"../components/panel-view":293,"../lists/list-view":334,"../threads/community-recommendation-thread-view":398,underscore:448}],336:[function(e,t,n){var i,o,r,s,l,a,u;e("../../rule"),({Viewpoint:a}=e("../../models")),({ViewpointList:u}=e("../../collections")),({ListView:i}=e("./list-view")),({OptionView:r}=e("../models/option-view")),({ToasterView:l,ToastOptionView:s}=e("../components/toaster-view")),o=function(){class e extends i{}return e.prototype.Collection=u,e.prototype.ItemView=r,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionListView")}},e.prototype.events={"click ._add-option-link":function(){var e,t;return t=new a({},{collection:this.collection}),null!=(e=window.view.getChildrenByView(l)[0])?e.setToast(s,{model:t}):void 0}},e}.call(this),t.exports={OptionListView:o}},{"../../collections":2,"../../models":34,"../../rule":81,"../components/toaster-view":327,"../models/option-view":359,"./list-view":334}],337:[function(e,t,n){var i,o,r,s;e("../../rule"),({ListView:i}=e("./list-view")),({QuestionView:r}=e("../models/question-view")),({TopicList:s}=e("../../collections")),o=function(){class e extends i{}return e.prototype.Collection=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._QuestionListView")}},e.prototype.ItemView=r,e}.call(this),t.exports={QuestionListView:o}},{"../../collections":2,"../../rule":81,"../models/question-view":361,"./list-view":334}],338:[function(e,t,n){var i,o;({ListView:i}=e("./list-view")),o=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ReactionListView")}}).prototype.rule={"._is-reacted=":function(){if(!this.collection.meta("reacted"))return""},"._not-reacted=":function(){if(this.collection.meta("reacted"))return""},"._is-agreed=":function(){if("upvote"!==this.collection.key)return""},"._is-disagreed=":function(){if("downvote"!==this.collection.key)return""},"._is-duplicate=":function(){if("duplicate"!==this.collection.key)return""},"._is-flagged=":function(){if("flag"!==this.collection.key)return""},"._is-needs-improvement=":function(){if("needsImprovement"!==this.collection.key)return""},"._is-needs-more-info=":function(){if("needsMoreInfo"!==this.collection.key)return""},"._is-not-a-fit=":function(){if("notAFit"!==this.collection.key)return""},"._is-out-of-date=":function(){if("outOfDate"!==this.collection.key)return""},"._is-useful=":function(){if("useful"!==this.collection.key)return""},"._is-funny=":function(){if("funny"!==this.collection.key)return""}},e}.call(this),e}.call(this),t.exports={ReactionListView:o}},{"./list-view":334}],339:[function(e,t,n){arguments[4][178][0].apply(n,arguments)},{"./list-view":334,dup:178}],340:[function(e,t,n){var i,o,r,s,l,a,u;e("../../rule"),({Section:o}=e("../../models")),({SectionList:r}=e("../../collections")),({ListView:i}=e("./list-view")),({SectionView:l}=e("../models/section-view")),({ToasterView:u,ToastSectionView:a}=e("../components/toaster-view")),s=function(){class e extends i{}return e.prototype.Collection=r,e.prototype.ItemView=l,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._SectionListView")}},e.prototype.events={"click ._add-pro-link":function(e){var t,n;return n=new o({},{collection:this.collection}),null!=(t=window.view.getChildrenByView(u)[0])?t.setToast(a,{model:n}):void 0},"click ._add-con-link":function(e){var t,n;return n=new o({isCon:!0},{collection:this.collection}),null!=(t=window.view.getChildrenByView(u)[0])?t.setToast(a,{model:n}):void 0}},e}.call(this),t.exports={SectionListView:s}},{"../../collections":2,"../../models":34,"../../rule":81,"../components/toaster-view":327,"../models/section-view":363,"./list-view":334}],341:[function(e,t,n){var i,o,r,s,l,a;({QuestionView:o}=e("../models/question-view")),({QuestionListView:i}=e("./question-list-view")),({Topic:l}=e("../../models")),({improveURL:a}=e("../../utils/transforms")),r=function(){class e extends o{}return e.prototype.Model=l,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SidebarRelatedQuestionListQuestionView")}}).prototype.rule={"._question-title=":function(){var e;return e=(e=this.model.get("revision").get("title")||"").replace(/^what (are|is) the best/i,"Best").replace(/\?$/,""),"undefined"==typeof window||null===window?e:$(`<span>${e}</span>`)},"._question-link@href":function(){return a(this.model,this.model.get("communityURL"))}},e}.call(this),e.prototype.events={"click ._question-link":function(e){return analytics.track("Clicked Related Question")}},e}.call(this),s=function(){class e extends i{initialize(e){return this.collection=new this.Collection(function(){var e,t,n;for(n=[],e=0,t=this.limit;0<=t?e<t:e>t;0<=t?e++:e--)n.push(new l);return n}.call(this)),super.initialize(...arguments)}}return e.prototype.limit=10,e.prototype.ItemView=r,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SidebarRelatedQuestionListView")}}).prototype.rule={"@data-search":function(){return this.options.search}},e}.call(this),e}.call(this),t.exports={SidebarRelatedQuestionListQuestionView:r,SidebarRelatedQuestionListView:s}},{"../../models":34,"../../utils/transforms":89,"../models/question-view":361,"./question-list-view":337}],342:[function(e,t,n){var i,o,r,s,l;e("../../rule"),({TagList:r}=e("../../collections")),({TagListView:s}=e("./tag-list-view")),({TagView:l}=e("../models/tag-view")),o=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._SidebarTagView")}},e}.call(this),i=function(){class e extends s{}return e.prototype.Collection=r,e.prototype.ItemView=o,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SidebarTagListView")}},e}.call(this),t.exports={SidebarTagView:o,SidebarTagListView:i}},{"../../collections":2,"../../rule":81,"../models/tag-view":365,"./tag-list-view":343}],343:[function(e,t,n){var i,o,r,s;e("../../rule"),({TagList:o}=e("../../collections")),({ListView:i}=e("./list-view")),({TagView:s}=e("../models/tag-view")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._TagListView")}},e}.call(this),t.exports={TagListView:r}},{"../../collections":2,"../../rule":81,"../models/tag-view":365,"./list-view":334}],344:[function(e,t,n){var i,o,r,s;({UserList:o}=e("../../collections")),({ListView:i}=e("./list-view")),({UserView:s}=e("../models/user-view")),r=function(){class e extends i{}return e.prototype.Collection=o,e.prototype.ItemView=s,e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._UserListView")}},e}.call(this),t.exports={UserListView:r}},{"../../collections":2,"../models/user-view":366,"./list-view":334}],345:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{"../base-view":259,dup:184}],346:[function(e,t,n){arguments[4][185][0].apply(n,arguments)},{"../base-view":259,dup:185}],347:[function(e,t,n){arguments[4][186][0].apply(n,arguments)},{"../base-view":259,"../pages/page-view":387,dup:186}],348:[function(e,t,n){arguments[4][187][0].apply(n,arguments)},{"./expanding-textarea-mixin-view":345,"./fancy-input-mixin-view":346,"./image-lazy-loader-mixin-view":347,"./recommendation-panel-manager-mixin-view":349,"./sticky-nav-mixin-view":350,"./user-profile-input-mixin-view":351,dup:187,underscore:448}],349:[function(e,t,n){var i,o,r,s;({BaseView:i}=e("../base-view")),({PanelView:r}=e("../components/panel-view")),({MyRecommendationPanelView:o}=e("../components/my-recommendation-panel-view")),s=function(){class e extends i{managePanelForOption(e,t={}){return e.oldVote=e.get("votes").meta("delta"),e.get("votes").on("vote",()=>{var t,n,i,s;if((n=e.get("votes").meta("delta"))!==e.oldVote&&(e.oldVote=n,n))return"function"==typeof this.recPanelOpenedAnalytics&&this.recPanelOpenedAnalytics(),t=(s=e.get("votes")).getCurrentUserVote()||s.find(function(e){return!e.get("user").get("username")}),null!=(i=new r({model:e}))?i.setContent(o,{model:t}):void 0}),e.get("votes").on("voteSuccess",()=>{var n,i;if(e.oldVote=e.get("votes").meta("delta"),e.oldVote)return null!=(i=t.voteSuccess)&&"function"==typeof(n=i.bind(this))?n():void 0}),e.get("votes").on("voteError",()=>{var n,i;return e.oldVote=e.get("votes").meta("delta"),null!=(i=t.voteError)&&"function"==typeof(n=i.bind(this))?n():void 0})}}return e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={RecommendationPanelManagerMixinView:s}},{"../base-view":259,"../components/my-recommendation-panel-view":288,"../components/panel-view":293}],350:[function(e,t,n){arguments[4][189][0].apply(n,arguments)},{"../base-view":259,dup:189}],351:[function(e,t,n){arguments[4][190][0].apply(n,arguments)},{"../../utils/patterns":87,"../base-view":259,dup:190,underscore:448}],352:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/reaction-button-set-view":302,"../components/reaction-tooltip-view":304,"../lists/comment-list-view":331,"../mixins/expanding-textarea-mixin-view":345,"../models/user-view":366,dup:191,jquery:438,marked:440,moment:441,underscore:448,urijs:452}],353:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J;({BaseView:i}=e("../base-view")),({UserView:W}=e("./user-view")),({TooltipView:z}=e("../components/tooltip-view")),({Event:r,Topic:Q,Viewpoint:Y,Section:j,Comment:o,Vote:G}=e("../../models")),({improveURL:K}=e("../../utils/transforms")),J=e("moment"),H=e("urijs"),F=function(){class e extends i{getContentViewByAction(){var e,t;return"function"==typeof(e=this.actionToView)[t=this.model.get("action")]?e[t]():void 0}}return e.prototype.Model=r,e.prototype.actionToView={"Qsn.Create":function(){return f},"Opt.Create":function(){return m},"Sec.Create":function(){return g},"Qsn.Revise":function(){return C},"Opt.Revise":function(){return y},"Sec.Revise":function(){return A},"Qsn.Promote_Karma":function(){return S},"Comment_Qsn.Create":function(){return b},"Comment_Opt.Create":function(){return v},"Comment_Sec.Create":function(){return O},"Comment_Rec.Create":function(){return L},"Opt.Vote:Up":function(){return V},"Sec.Vote:Up":function(){return q},"Sec.Vote:Down":function(){return q},"Reaction_Qsn.Create:NeedsImprovement":function(){return P},"Reaction_Qsn.Create:Duplicate":function(){return k},"Reaction_Qsn.Create:NotAFit":function(){return T},"Reaction_Opt.Create:OutOfDate":function(){return x},"Reaction_Opt.Create:Flag":function(){return _},"Reaction_Sec.Create:NeedsImprovement":function(){return U},"Reaction_Sec.Create:OutOfDate":function(){return B},"Reaction_Sec.Create:Flag":function(){return D},"Reaction_Sec.Create:Useful":function(){return $},"Rec.React:Useful":function(){return I},"Sec.React:Useful":function(){return $}},e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._EventView")}}).prototype.rule={"._is-read=":function(){if(this.model.get("isread"))return""},"._EventUserView=":function(){return new N({model:this.model.get("user")})},"._EventContentView=":function(){var e;return"function"==typeof(e=this.getContentViewByAction())?new e({model:this.model}):void 0}},e}.call(this),e}.call(this),N=function(){class e extends W{}return e.prototype.Rule=class extends W.prototype.Rule{template(){return template("._EventUserView")}},e}.call(this),a=function(){class e extends i{getSectionLink(){return K(this.model.get("target").parents("viewpoint")).concat(`#${this.model.get("target").get("id")}`)}getTargetHistoryLink(){return K(this.model.get("target")).replace(/(~.*)$/,"").concat("history")}getTargetCommentsLink(){return K(this.model.get("target")).replace(/(\/)(?!.*\/)/,"#")}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._user-link@href":function(){return this.model.get("user").url()},"._first-name=":function(){var e;return null!=(e=this.model.get("user").get("displayName")||this.model.get("user").get("username"))?e.split(" ")[0]:void 0},"._target-title=":function(){var e;return null!=(e=this.model.get("target").get("revision").get("title"))?e.trim():void 0},"._target-link@rel":"nofollow","._target-link@href":function(){return this.getTargetLink()},"._time-ago=":function(){return J(new Date(this.model.get("time"))).fromNow()}},e}.call(this),e}.call(this),f=function(){class e extends a{getTargetLink(){return K(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventNewQuestionContentView")}},e}.call(this),m=function(){class e extends a{getTargetLink(){return K(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventNewOptionContentView")}},e}.call(this),g=function(){class e extends a{getTargetLink(){return this.getSectionLink()}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._EventNewSectionContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),c=function(){class e extends a{getTargetLink(){return this.getTargetHistoryLink()}}return e.prototype.Rule=class extends a.prototype.Rule{},e}.call(this),C=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EventQuestionEditContentView")}},e}.call(this),y=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._EventOptionEditContentView")}},e}.call(this),A=function(){class e extends c{}return e.prototype.Rule=function(){var e;return(e=class extends c.prototype.Rule{template(){return template("._EventSectionEditContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),S=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._EventQuestionPromoteContentView")}},e}.call(this),l=function(){class e extends a{getTargetLink(){return this.getTargetCommentsLink()}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{}).prototype.rule={"._target-title=":function(){var e,t;return null!=(t=null!=(e=this.model.get("target").collection)?e.parent:void 0)?t.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),b=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._EventQuestionCommentContentView")}},e}.call(this),v=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._EventOptionCommentContentView")}},e}.call(this),O=function(){class e extends l{}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._EventSectionCommentContentView")}}).prototype.rule={"._is-pro=":function(){var e;if(null!=(e=this.model.get("target").parents("section"))?e.get("isCon"):void 0)return""},"._is-con=":function(){var e;if(!(null!=(e=this.model.get("target").parents("section"))?e.get("isCon"):void 0))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),L=function(){class e extends l{getTargetLink(){return new H(K(this.model.get("target").parents("viewpoint"))).hash("recommendations")}}return e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{template(){return template("._EventRecommendationCommentContentView")}}).prototype.rule={"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0},"._creator-first-name=":function(){var e,t,n;return null!=(n=(null!=(e=null!=(t=this.model.get("target").parents("vote"))?t.get("user"):void 0)?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0))?n.split(" ")[0]:void 0}},e}.call(this),e}.call(this),V=function(){class e extends a{getTargetLink(){return K(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._EventOptionRecommendationContentView")}},e}.call(this),q=function(){class e extends a{getTargetLink(){return this.getSectionLink()}isAgree(){return"Up"===this.model.get("action").split(":")[1]}}return e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._EventSectionRecommendationContentView")}}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._is-agree=":function(){if(!this.isAgree())return""},"._is-disagree=":function(){if(this.isAgree())return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new s({isAgree:this.isAgree(),follows:e.target})}},e}.call(this),M=function(){class e extends a{getTargetLink(){return K(this.model.get("target"))}}return e.prototype.Rule=class extends a.prototype.Rule{},e.prototype.events={"mouseover ._reaction-tooltip-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=this.getEventReactionTooltip()}},e}.call(this),P=function(){class e extends M{getEventReactionTooltip(){return new h({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionNeedsClarificationContentView")}},e}.call(this),k=function(){class e extends M{getEventReactionTooltip(){return new u({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionDuplicateContentView")}},e}.call(this),T=function(){class e extends M{getEventReactionTooltip(){return new w({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventQuestionReactionNotAFitContentView")}},e}.call(this),x=function(){class e extends M{getEventReactionTooltip(){return new R({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventOptionReactionOutOfDateContentView")}},e}.call(this),_=function(){class e extends M{getEventReactionTooltip(){return new p({follows:event.target})}}return e.prototype.Rule=class extends M.prototype.Rule{template(){return template("._EventOptionReactionFlagContentView")}},e}.call(this),E=function(){class e extends M{getTargetLink(){return this.getSectionLink()}}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{}).prototype.rule={"._is-pro=":function(){if(this.model.get("target").get("isCon"))return""},"._is-con=":function(){if(!this.model.get("target").get("isCon"))return""},"._option-title=":function(){var e;return null!=(e=this.model.get("target").parents("viewpoint"))?e.get("revision").get("title").trim():void 0}},e}.call(this),e}.call(this),$=function(){class e extends E{getEventReactionTooltip(){return new d({follows:event.target})}}return e.prototype.Rule=class extends E.prototype.Rule{template(){return template("._EventSectionReactionMostImportantContentView")}},e}.call(this),U=function(){class e extends E{getEventReactionTooltip(){return new h({follows:event.target})}}return e.prototype.Rule=class extends E.prototype.Rule{template(){return template("._EventSectionReactionNeedsClarificationContentView")}},e}.call(this),B=function(){class e extends E{getEventReactionTooltip(){return new R({follows:event.target})}}return e.prototype.Rule=class extends E.prototype.Rule{template(){return template("._EventSectionReactionOutOfDateContentView")}},e}.call(this),D=function(){class e extends E{getEventReactionTooltip(){return new p({follows:event.target})}}return e.prototype.Rule=class extends E.prototype.Rule{template(){return template("._EventSectionReactionFlagContentView")}},e}.call(this),I=function(){class e extends M{getTargetLink(){return new H(K(this.model.get("target"))).hash("recommendations")}}return e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{template(){return template("._EventRecommendationReactionUsefulContentView")}}).prototype.rule={"._creator-first-name=":function(){var e,t;return null!=(t=(null!=(e=this.model.get("target").get("user"))?e.get("displayName"):void 0)||(null!=e?e.get("username"):void 0))?t.split(" ")[0]:void 0},"._option-title=":function(){return this.model.get("target").get("revision").get("title").trim()}},e}.call(this),e}.call(this),s=function(){class e extends z{}return e.prototype.Rule=function(){var e;return(e=class extends z.prototype.Rule{template(){return template("._EventAgreeTooltip")}}).prototype.rule={"._is-agree=":function(){if(!this.options.isAgree)return""},"._is-disagree=":function(){if(this.options.isAgree)return""}},e}.call(this),e}.call(this),h=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventNeedsClarificationTooltip")}},e}.call(this),u=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventDuplicateTooltip")}},e}.call(this),w=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventNotAFitTooltip")}},e}.call(this),R=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventOutOfDateTooltip")}},e}.call(this),p=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventFlagTooltip")}},e}.call(this),d=function(){class e extends z{}return e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._EventMostImportantTooltip")}},e}.call(this),t.exports={EventView:F,EventUserView:N,EventContentView:a,EventNewQuestionContentView:f,EventNewOptionContentView:m,EventNewSectionContentView:g,EventEditContentView:c,EventQuestionEditContentView:C,EventOptionEditContentView:y,EventSectionEditContentView:A,EventQuestionPromoteContentView:S,EventCommentContentView:l,EventQuestionCommentContentView:b,EventOptionCommentContentView:v,EventSectionCommentContentView:O,EventRecommendationCommentContentView:L,EventOptionRecommendationContentView:V,EventSectionRecommendationContentView:q,EventReactionContentView:M,EventQuestionReactionNeedsClarificationContentView:P,EventQuestionReactionDuplicateContentView:k,EventQuestionReactionNotAFitContentView:T,EventOptionReactionOutOfDateContentView:x,EventOptionReactionFlagContentView:_,EventSectionReactionContentView:E,EventSectionReactionMostImportantContentView:$,EventSectionReactionNeedsClarificationContentView:U,EventSectionReactionOutOfDateContentView:B,EventSectionReactionFlagContentView:D,EventRecommendationReactionUsefulContentView:I,EventAgreeTooltip:s,EventNeedsClarificationTooltip:h,EventDuplicateTooltip:u,EventNotAFitTooltip:w,EventOutOfDateTooltip:R,EventFlagTooltip:p,EventMostImportantTooltip:d}},{"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/tooltip-view":328,"./user-view":366,moment:441,urijs:452}],354:[function(e,t,n){var i,o,r;({Image:o}=e("../../models")),({BaseView:i}=e("../base-view")),r=function(){class t extends i{videoClickedAnalytics(){return analytics.track("Clicked Video")}}return t.prototype.Model=o,t.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._ImageView")}}).prototype.rule={"._is-video=":function(){if(!this.model.isVideo())return""},"._not-video=":function(){if(this.model.isVideo())return""},"._video-embed=":function(){return this.model.createVideoEmbed()},"._image-src@src":function(){return this.model.getImagePreviewURL()},"._image-full-src@src":function(){return this.model.getImageURL()}},e}.call(this),t.prototype.events={"click ._lightbox-link":function(){var t;return({LightboxView:t}=e("../components/lightbox-view")),new t({model:this.model})},"click ._load-video-link":function(){var e;if(e=this.model.createVideoEmbed({isAutoplay:!0}))return this.$("._embed-target").replaceWith(e),this.$("._load-video-link").css({display:"none"}),this.videoClickedAnalytics()}},t}.call(this),t.exports={ImageView:r}},{"../../models":34,"../base-view":259,"../components/lightbox-view":279}],355:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("./comment-view"),e("./event-view"),e("./image-view"),e("./karma-view"),e("./master-option-view"),e("./option-event-view"),e("./option-view"),e("./option-vote-view"),e("./question-view"),e("./section-event-view"),e("./section-view"),e("./spec-view"),e("./tag-view"),e("./user-view"))},{"./comment-view":352,"./event-view":353,"./image-view":354,"./karma-view":356,"./master-option-view":357,"./option-event-view":358,"./option-view":359,"./option-vote-view":360,"./question-view":361,"./section-event-view":362,"./section-view":363,"./spec-view":364,"./tag-view":365,"./user-view":366,underscore:448}],356:[function(e,t,n){arguments[4][196][0].apply(n,arguments)},{"../../models":34,"../../utils/transforms":89,"../base-view":259,"./event-view":353,dup:196}],357:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({MasterOption:o}=e("../../models")),r=function(){class e extends i{}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._MasterOptionView")}}).prototype.rule={"._option-title=":function(){return this.model.get("source").get("revision").get("title")},"._upvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("downvotes"))?e:0},"._master-option-link@href":function(){return this.model.url()},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("source").get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`}},e}.call(this),e}.call(this),t.exports={MasterOptionView:r}},{"../../models":34,"../base-view":259}],358:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A;({EventView:v,EventNewOptionContentView:i,EventNewSectionContentView:o,EventOptionEditContentView:s,EventSectionEditContentView:d,EventOptionCommentContentView:r,EventSectionCommentContentView:p,EventRecommendationCommentContentView:c,EventOptionRecommendationContentView:u,EventSectionRecommendationContentView:w,EventOptionReactionOutOfDateContentView:a,EventOptionReactionFlagContentView:l,EventSectionReactionMostImportantContentView:m,EventSectionReactionNeedsClarificationContentView:f,EventSectionReactionOutOfDateContentView:g,EventSectionReactionFlagContentView:h}=e("./event-view")),A=function(){class e extends v{}return e.prototype.actionToView={"Opt.Create":function(){return y},"Sec.Create":function(){return _},"Opt.Revise":function(){return V},"Sec.Revise":function(){return P},"Comment_Opt.Create":function(){return x},"Comment_Sec.Create":function(){return k},"Comment_Rec.Create":function(){return S},"Opt.Vote:Up":function(){return C},"Sec.Vote:Up":function(){return O},"Sec.Vote:Down":function(){return O},"Reaction_Opt.Create:OutOfDate":function(){return b},"Reaction_Opt.Create:Flag":function(){return R},"Reaction_Sec.Create:Useful":function(){return M},"Reaction_Sec.Create:NeedsImprovement":function(){return L},"Reaction_Sec.Create:OutOfDate":function(){return I},"Reaction_Sec.Create:Flag":function(){return T}},e.prototype.Rule=class extends v.prototype.Rule{},e}.call(this),y=function(){class e extends i{}return e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionEventNewOptionContentView")}},e}.call(this),_=function(){class e extends o{}return e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._OptionEventNewSectionContentView")}},e}.call(this),V=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._OptionEventOptionEditContentView")}},e}.call(this),P=function(){class e extends d{}return e.prototype.Rule=class extends d.prototype.Rule{template(){return template("._OptionEventSectionEditContentView")}},e}.call(this),x=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._OptionEventOptionCommentContentView")}},e}.call(this),k=function(){class e extends p{}return e.prototype.Rule=class extends p.prototype.Rule{template(){return template("._OptionEventSectionCommentContentView")}},e}.call(this),S=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._OptionEventRecommendationCommentContentView")}},e}.call(this),C=function(){class e extends u{}return e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._OptionEventOptionRecommendationContentView")}},e}.call(this),O=function(){class e extends w{}return e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._OptionEventSectionRecommendationContentView")}},e}.call(this),b=function(){class e extends a{}return e.prototype.Rule=class extends a.prototype.Rule{template(){return template("._OptionEventOptionReactionOutOfDateContentView")}},e}.call(this),R=function(){class e extends l{}return e.prototype.Rule=class extends l.prototype.Rule{template(){return template("._OptionEventOptionReactionFlagContentView")}},e}.call(this),M=function(){class e extends m{}return e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._OptionEventSectionReactionMostImportantContentView")}},e}.call(this),L=function(){class e extends f{}return e.prototype.Rule=class extends f.prototype.Rule{template(){return template("._OptionEventSectionReactionNeedsClarificationContentView")}},e}.call(this),I=function(){class e extends g{}return e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._OptionEventSectionReactionOutOfDateContentView")}},e}.call(this),T=function(){class e extends h{}return e.prototype.Rule=class extends h.prototype.Rule{template(){return template("._OptionEventSectionReactionFlagContentView")}},e}.call(this),t.exports={OptionEventView:A,OptionEventNewOptionContentView:y,OptionEventNewSectionContentView:_,OptionEventOptionEditContentView:V,OptionEventSectionEditContentView:P,OptionEventOptionCommentContentView:x,OptionEventSectionCommentContentView:k,OptionEventRecommendationCommentContentView:S,OptionEventOptionRecommendationContentView:C,OptionEventSectionRecommendationContentView:O,OptionEventOptionReactionOutOfDateContentView:b,OptionEventOptionReactionFlagContentView:R,OptionEventSectionReactionMostImportantContentView:M,OptionEventSectionReactionNeedsClarificationContentView:L,OptionEventSectionReactionOutOfDateContentView:I,OptionEventSectionReactionFlagContentView:T}},{"./event-view":353}],359:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y;u=e("../../rule"),({BaseView:o}=e("../base-view")),({ToasterView:h,ToastEditOptionView:p,ToastImageSidebarView:d,ToastDescriptionSidebarView:c}=e("../components/toaster-view")),({ReactionMenuOptionStepView:a,ReactionMenuDropdownView:l}=e("../components/reaction-menu-dropdown-view")),({Viewpoint:m,Image:r}=e("../../models")),f=e("underscore"),v=e("moment"),w=e("marked"),e("urijs"),({shortenNumber:y}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({improveURL:g}=e("../../utils/transforms")),s=function(){class e extends o{getOption(){return this.model}getMasterOption(){return this.model.get("masterOption")}sendOptionSiteLinkAnalytics(e={}){var t,n,i,o;if(o=(t=this.getOption()).get("revision").get("title"),i=t.get("revision").get("siteURL"),e=f.extend({},{label:o,optionTitle:o,destinationURL:i},e),analytics.track("Clicked Site Link",e),t.parents("viewpoints"))return n=t.parents("viewpoints").indexOf(t)+1,analytics.track(`Clicked Site Link Position ${n}`,e)}}return e.prototype.Model=m,e.prototype.Rule=function(){var e;return(e=class extends u{template(){return template("._OptionView")}}).prototype.rule={"._has-site-link=":function(){if(!this.getOption().get("revision").get("siteURL"))return""},"._no-site-link=":function(){if(this.getOption().get("revision").get("siteURL"))return""},"._has-image=":function(){if(!this.getOption().get("revision").get("images").length)return""},"._no-image=":function(){if(this.getOption().get("revision").get("images").length)return""},"._option-image-is-video=":function(){var e;if(!(null!=(e=this.getOption().get("revision").get("images").at(0))?e.isVideo():void 0))return""},"._has-body=":function(){if(!this.getOption().get("revision").get("text").trim())return""},"._no-body=":function(){if(this.getOption().get("revision").get("text").trim())return""},"._has-price=":function(){if(!this.getOption().get("revision").get("price"))return""},"._no-price=":function(){if(this.getOption().get("revision").get("price"))return""},"._has-specs=":function(){if(!this.getMasterOption().get("specs").count())return""},"._no-specs=":function(){if(this.getMasterOption().get("specs").count())return""},"._has-comments=":function(){if(!this.getOption().get("comments").count())return""},"._has-flagged=":function(){if(!this.getOption().get("sections").some(function(e){return e.get("reactionSet").get("flag").count()||!0===e.get("isPending")}))return""},"._has-out-of-date=":function(){if(!this.getOption().get("sections").some(function(e){var t;return(t=e.get("reactionSet")).get("outOfDate").count()&&!t.get("flag").count()}))return""},"._has-master-page-url=":function(){if(!this.getMasterOption().get("URL"))return""},"._meta-option-title@content":function(){return this.getOption().get("revision").get("title")},"._option-title=":function(){return this.getOption().get("revision").get("title")},"._option-body=":function(){if(this.getOption().get("revision").get("text").trim())return i(w(this.getOption().get("revision").get("text").trim()))},"._option-price=":function(){return this.getOption().get("revision").get("price")},"._option-link":function(){return{"@href":function(){return g(this.getOption())},"@title":function(){return this.getOption().get("revision").get("title")},"@rel":"nofollow"}},"._master-option-link@href":function(){return this.getMasterOption().url()},"._option-site-link":{"@href":function(){return this.getOption().get("revision").get("siteURL")},"@target":"_blank","@rel":"nofollow noopener"},"._option-comment-link@href":function(){return g(this.getOption().get("comments"))},"._option-activity-link@href":function(){return g(this.getOption().get("events"))},"._option-time-ago=":function(){return v(new Date(this.getOption().get("treeModified"))).fromNow()},"._option-image@src":function(){var e;return null!=(e=this.getOption().get("revision").get("images").at(0))?e.getImagePreviewURL():void 0},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.getOption().get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._meta-option-background-image-url@content":function(){var e;return null!=(e=this.getOption().get("revision").get("images").at(0))?e.getImagePreviewURL():void 0},"._option-comment-count=":function(){return this.getOption().get("comments").count()},"._option-vote-count=":function(){return y(this.getOption().get("votes").count())},"._option-upvote-count=":function(){return y(this.getOption().get("votes").meta("upvotes")||0)},"._option-downvote-count=":function(){return y(this.getOption().get("votes").meta("upvotes")||0)},"._option-id@id":function(){return this.getOption().get("id")},"._question-link@href":function(){return g(this.getOption().parents("topic"),this.getOption().parents("topic").get("communityURL"))}},e}.call(this),e.prototype.events={"click ._option-edit-link":function(e){var t;return null!=(t=window.view.getChildrenByView(h)[0])?t.setToast(p,{viewpoint:this.model}):void 0},"click ._option-edit-image-link":function(e){var t,n,i;return t=null!=(i=window.view.getChildrenByView(h)[0])?i.setToast(p,{viewpoint:this.model}).activeToastView:void 0,n=new r({source:""},{collection:t.model.get("revision").get("images")}),t.setSidebar(d,{model:n}).update()},"click ._option-edit-description-link":function(e){var t,n;return(t=null!=(n=window.view.getChildrenByView(h)[0])?n.setToast(p,{viewpoint:this.model}).activeToastView:void 0).setSidebar(c,{model:t.model.get("revision")}).update()},"click ._reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new(function(){var e;return(e=class extends l{}).prototype.DefaultStepView=a,e}.call(this))({model:this.model.get("reactionSet"),follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})},"click ._option-site-link":function(e){return this.sendOptionSiteLinkAnalytics()}},e}.call(this),t.exports={OptionView:s}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../rule":81,"../../utils/transforms":89,"../base-view":259,"../components/reaction-menu-dropdown-view":303,"../components/toaster-view":327,jquery:438,marked:440,moment:441,underscore:448,urijs:452}],360:[function(e,t,n){var i,o,r,s,l,a,u,c;({BaseView:i}=e("../base-view")),({ViewpointVote:r}=e("../../models")),a=e("marked"),u=new(e("marked-plaintext"))({spaces:!0}),({improveURL:l,decodeHTMLEntities:s,trimText:c}=e("../../utils/transforms")),o=function(){class e extends i{hasSections(){var e,t;return(null!=(t=null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0)?t.count():void 0)>0&&(null!=t?t.any(function(e){return e.get("votes").meta("delta")>0}):void 0)}getSourceOption(){return this.model.parents("viewpoint")}getPlainText(){var e;if(e=this.model.get("text").trim())return s(a(e,{renderer:u}))}}return e.prototype.Model=r,e.prototype.trimmedTextLength=310,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._is-upvote=":function(){if(!(this.model.get("delta")>0))return""},"._is-downvote=":function(){if(!(this.model.get("delta")<0))return""},"._has-recommendation-body=":function(){var e;if(!(null!=(e=this.model.get("text"))?e.trim():void 0))return""},"._has-comments=":function(){if(!this.model.get("comments").count())return""},"._has-pros-cons=":function(){if(!this.hasSections())return""},"._option-title=":function(){var e;return null!=(e=this.getSourceOption())?e.get("revision").get("title"):void 0},"._option-link":function(){return{"@href":function(){if(null!=this.getSourceOption())return l(this.getSourceOption())},"@title":function(){var e;return null!=(e=this.getSourceOption())?e.get("revision").get("title"):void 0},"@rel":"nofollow"}},"._comment-count=":function(){return this.model.get("comments").count()},"._recommendation-body-plain=":function(){var e;if(e=this.getPlainText())return c(e,this.trimmedTextLength,"...")}},e}.call(this),e}.call(this),t.exports={OptionVoteView:o}},{"../../models":34,"../../utils/transforms":89,"../base-view":259,marked:440,"marked-plaintext":439}],361:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d;({BaseView:o}=e("../base-view")),({ReactionMenuDropdownView:s,ReactionMenuQuestionStepView:l}=e("../components/reaction-menu-dropdown-view")),({Topic:a}=e("../../models")),e("underscore"),p=e("moment"),c=e("marked"),({improveURL:u,shortenNumber:d}=e("../../utils/transforms")),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),r=function(){class e extends o{}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._QuestionView")}}).prototype.rule={"._has-options=":function(){if(!this.model.get("viewpoints").count())return""},"._no-options=":function(){if(this.model.get("viewpoints").count())return""},"._has-comments=":function(){if(!this.model.get("comments").count())return""},"._has-body=":function(){if(!this.model.get("revision").get("text").trim())return""},"._no-body=":function(){if(this.model.get("revision").get("text").trim())return""},"._has-tags=":function(){if(!this.model.get("tags").length)return""},"._no-tags=":function(){if(this.model.get("tags").length)return""},"._has-recommendations=":function(){if(!this.model.get("communityRecommendations").count())return""},"._question-title=":function(){return this.model.get("revision").get("title")},"._question-title-short=":function(){return this.model.get("revision").get("title").replace(/what (are|is) the best/i,"Best").replace(/\?$/,"")},"._question-body=":function(){var e,t;if(t=this.model.get("revision").get("text").trim(),e=c(t),t)return i(e)},"._question-link@href":function(){return u(this.model,this.model.get("communityURL"))},"._question-compare-link@href":function(){return u(this.model,this.model.get("compareURL"))},"._question-edit-link@href":function(){return u(this.model.get("comments")).replace("comments","pending")},"._question-comment-link@href":function(){return u(this.model.get("comments"))},"._question-comment-count=":function(){return d(this.model.get("comments").count())},"._question-time-ago=":function(){return p(new Date(this.model.get("treeModified"))).fromNow()}},e}.call(this),e.prototype.events={"click ._question-more-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new(function(){var e;return(e=class extends s{}).prototype.DefaultStepView=l,e}.call(this))({model:this.model.get("reactionSet"),follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})}},e}.call(this),t.exports={QuestionView:r}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/reaction-menu-dropdown-view":303,jquery:438,marked:440,moment:441,underscore:448}],362:[function(e,t,n){arguments[4][203][0].apply(n,arguments)},{"./event-view":353,dup:203}],363:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m;({BaseView:o}=e("../base-view")),({RecommendationView:l}=e("../components/recommendation-view")),({ToasterView:p,ToastEditSectionView:c}=e("../components/toaster-view")),({MoreDropdownView:s}=e("../components/more-dropdown-view")),({Section:a,Comment:r}=e("../../models")),e("moment"),m=e("marked"),d=e("urijs"),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),({improveURL:h}=e("../../utils/transforms")),u=function(){class e extends o{getParentOption(){return this.model.parents("viewpoint")}}return e.prototype.Model=a,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._SectionView")}}).prototype.rule={"._has-comments=":function(){if(!this.model.get("comments").count())return""},"._has-votes=":function(){if(!this.model.get("votes").count())return""},"._has-upvotes=":function(){if(!this.model.get("votes").meta("upvotes"))return""},"._has-downvotes=":function(){if(!this.model.get("votes").meta("downvotes"))return""},"._has-body=":function(){var e;if(!(null!=(e=this.model.get("revision").get("text"))?e.trim():void 0))return""},"._no-body=":function(){var e;if(null!=(e=this.model.get("revision").get("text"))?e.trim():void 0)return""},"._no-votes=":function(){if(this.model.get("votes").count())return""},"._is-pro=":function(){if(this.model.get("isCon"))return""},"._is-con=":function(){if(!this.model.get("isCon"))return""},"._is-pending=":function(){if(!this.model.get("isPending"))return""},"._section-link":{"@href":function(){return new d(h(this.getParentOption())).fragment(this.model.get("id"))},"@rel":"nofollow"},"._section-comment-link@href":function(){return h(this.model.get("comments"))},"._section-id@id":function(){return this.model.get("id")},"._section-title=":function(){return this.model.get("revision").get("title")},"._section-body=":function(){if(this.model.get("revision").get("text").trim())return i(m(this.model.get("revision").get("text").trim()))},"._section-comment-count=":function(){return this.model.get("comments").count()}},e}.call(this),e.prototype.events={"click ._section-edit-link":function(e){var t;return null!=(t=window.view.getChildrenByView(p)[0])?t.setToast(c,{section:this.model}):void 0},"click ._section-description-edit-link":function(e){var t,n;return t=null!=(n=window.view.getChildrenByView(p)[0])?n.setToast(c,{section:this.model}).activeToastView:void 0,_.defer(function(){return t.$("._section-description-input").focus()})},"click ._section-more-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new s({model:this.model,follows:e.currentTarget})}},e}.call(this),t.exports={SectionView:u}},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/more-dropdown-view":286,"../components/recommendation-view":311,"../components/toaster-view":327,jquery:438,marked:440,moment:441,urijs:452}],364:[function(e,t,n){var i,o,r;({BaseView:i}=e("../base-view")),({Spec:o}=e("../../models")),r=function(){class e extends i{}return e.prototype.Model=o,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._SpecView")}}).prototype.rule={"._spec-key=":function(){return this.model.get("key")},"._spec-value=":function(){return this.model.get("value")}},e}.call(this),e}.call(this),t.exports={SpecView:r}},{"../../models":34,"../base-view":259}],365:[function(e,t,n){var i,o,r,s,l;o=e("../../rule"),({Tag:r}=e("../../models")),({BaseView:i}=e("../base-view")),e("moment"),({groupNumber:l}=e("../../utils/transforms")),s=function(){class e extends i{}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o{template(){return template("._TagView")}}).prototype.rule={"._has-count=":function(){if(!this.model.get("count"))return""},"._tag-link@href":function(){var e;return null!=(e=this.model.get("URL"))?e:`/tags/${this.model.get("id")}`},"._name=":function(){return this.model.get("name")},"._id=":function(){return this.model.get("id")},"._tag-count=":function(){return l(this.model.get("count"))}},e}.call(this),e}.call(this),t.exports={TagView:s}},{"../../models":34,"../../rule":81,"../../utils/transforms":89,"../base-view":259,moment:441}],366:[function(e,t,n){var i,o,r,s,l,a;o=e("../../rule"),({User:r}=e("../../models")),({BaseView:i}=e("../base-view")),({hashCode:l,shortenNumber:a}=e("../../utils/transforms")),s=function(){class e extends i{getUserDisplayName(){return this.model.get("displayName")||this.model.get("username")}}return e.prototype.Model=r,e.prototype.Rule=function(){var e;return(e=class extends o{template(){return template("._UserView")}}).prototype.rule={"._user-image":{"@src":function(){return this.model.getAvatarThumbnailURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-huge-image":{"@src":function(){return this.model.getAvatarPreviewURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-lazy-image":{"@data-lazy-src":function(){return this.model.getAvatarThumbnailURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-lazy-huge-image":{"@data-lazy-src":function(){return this.model.getAvatarPreviewURL()},"@alt":function(){return this.getUserDisplayName()}},"._user-initials":{"@data-initials":function(){return(this.getUserDisplayName()||"").charAt(0).toLowerCase()},"@data-background":function(){var e;return l(null!=(e=this.model.get("username"))?e:"")%12+1}},"._user-link@href":function(){return this.model.get("URL")},"._user-name=":function(){return this.getUserDisplayName()},"._user-notification-link@href":function(){return this.model.get("notifications").url()},"._user-karma-link@href":function(){return this.model.get("karma").url()},"._karma-count=":function(){return a(this.model.get("karma").meta("total")||0)},"._unread-notification-count=":function(){return this.model.get("notifications").meta("unreadCount")}},e}.call(this),e}.call(this),t.exports={UserView:s}},{"../../models":34,"../../rule":81,"../../utils/transforms":89,"../base-view":259}],367:[function(e,t,n){arguments[4][208][0].apply(n,arguments)},{"../../collections":2,"../components/recommendation-card-view":305,"../threads/activity-thread-view":397,"./page-view":387,dup:208,underscore:448,urijs:452}],368:[function(e,t,n){arguments[4][209][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../rule":81,"../../utils/data":86,"../components/question-tag-selector-view":300,"../lists/list-view":334,"../mixins/expanding-textarea-mixin-view":345,"../mixins/fancy-input-mixin-view":346,"../models/question-view":361,"./page-view":387,dup:209,underscore:448}],369:[function(e,t,n){(function(n){var i,o;e("underscore"),({PageView:o}=e("./page-view")),i=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._AdsTestPageView")}}).prototype.rule={"._has-ads=":function(){var e;if("true"!==(e=("undefined"!=typeof window&&null!==window?window:n).env).ENABLE_PLAYWIRE_ADS_TEST||null==e.PLAYWIRE_ADS_CONFIG_URL)return""}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard_atf",type:"leaderboard_atf"},{selectorId:"leaderboard_btf",type:"leaderboard_btf"},{selectorId:"med_rect_atf",type:"med_rect_atf"},{selectorId:"med_rect_btf",type:"med_rect_btf"},{selectorId:"sky_atf",type:"sky_atf"},{selectorId:"sky_btf",type:"sky_btf"},{type:"left_rail"},{type:"right_rail"}],e.prototype.conditionalAdUnits=[{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e}.call(this),t.exports={AdsTestPageView:i}}).call(this,e("_process"))},{"./page-view":387,_process:426,underscore:448}],370:[function(e,t,n){arguments[4][224][0].apply(n,arguments)},{"../components/login-modal-view":280,"./page-view":387,dup:224}],371:[function(e,t,n){arguments[4][225][0].apply(n,arguments)},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../lists/comment-list-view":331,"./post-page-view":390,dup:225,jquery:438,marked:440,underscore:448,urijs:452}],372:[function(e,t,n){arguments[4][226][0].apply(n,arguments)},{"../../collections":2,"../../model":33,"../../models":34,"../../utils/data":86,"../../utils/transforms":89,"../base-view":259,"../components/question-header-view":298,"../components/reaction-button-set-view":302,"../components/recommendation-view":311,"../components/toaster-view":327,"../components/tooltip-view":328,"../lists/list-view":334,"../lists/option-list-view":336,"../lists/section-list-view":340,"../mixins/recommendation-panel-manager-mixin-view":349,"../models/option-view":359,"../models/question-view":361,"../models/section-view":363,"../models/spec-view":364,"../pages/post-page-view":390,dup:226,marked:440,"marked-plaintext":439}],373:[function(e,t,n){arguments[4][227][0].apply(n,arguments)},{"../components/edit-avatar-dropdown-view":269,"../components/login-modal-view":280,"../components/modal-view":285,"../components/notify-popup-view":291,"../mixins/expanding-textarea-mixin-view":345,"../mixins/fancy-input-mixin-view":346,"../mixins/user-profile-input-mixin-view":351,"../models/user-view":366,"./page-view":387,dup:227,underscore:448}],374:[function(e,t,n){arguments[4][228][0].apply(n,arguments)},{"./page-view":387,dup:228}],375:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N;({PageView:b}=e("./page-view")),({BaseView:i}=e("../base-view")),({QuestionCardListView:C}=e("../components/question-card-view")),({RecommendationCardListView:k,RecommendationCardAnswerView:S}=e("../components/recommendation-card-view")),({RecommendationOptionCardContainerView:P}=e("../components/recommendation-option-card-view")),({ContributorsView:r}=e("../components/contributors-view")),({SidebarUserStatsView:T}=e("../components/sidebar-user-stats-view")),({MainHeaderView:V}=e("../components/main-header-view")),({ToasterView:A,ToastCollapsedView:O}=e("../components/toaster-view")),({TagSelectorHeaderView:I}=e("../components/tag-selector-view")),({ClaimBannerCardView:o}=e("../components/claim-banner-view")),({JoinTagSidebarView:w}=e("../components/join-tag-sidebar-view")),({LoginModalView:x,LoginModalContentView:v,LoginModalLoginContentView:y,LoginModalRegisterContentView:_}=e("../components/login-modal-view")),({TopicList:D,TagList:L}=e("../../collections")),({Model:R,Topic:E,Feed:s,TagFilter:M}=e("../../models")),({shortenNumber:q,splitUnit:N}=e("../../utils/transforms")),$=e("urijs"),B=e("moment"),U=e("underscore"),"undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),g=function(){class e extends b{title(){var e;switch(query.filter){case"top":e="Top Question";break;case"improve":e="Improve Question";break;default:e="Choose the best"}return query.page&&(e=`${e} - Page ${parseInt(query.page)+1}`),super.title(e)}initialize(){if(super.initialize(...arguments),this.stopListening(),"undefined"!=typeof window&&null!==window)return window.currentUser.get("username")?this.fetchUserTags():this.fetchFeed(),this.listenTo(window.currentUser,"change",()=>"undefined"!=typeof window&&null!==window&&window.currentUser.get("username")?window.currentUser.get("anonymous")?void 0:this.fetchUserTags():(this.model.clear(),delete window.localStorage.tagFilterData)),this.listenTo(this.model,"change repaint",()=>this.fetchFeed())}fetchFeed(){var e;return(e=this.getChildrenByView(a)[0]).model.clear({silent:!0}),e.model.set({URL:this.getFeedURL()},{silent:!0}),e.options.loading=!0,e.update(),delete e.options.loading,e.$("._is-loading").addClass("Loading"),e.model.fetch()}fetchUserTags(){if("undefined"!=typeof window&&null!==window)return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)?(window.localStorage.tagFilterData&&(this.model.set(this.model.parse(JSON.parse(window.localStorage.tagFilterData)),{silent:!0}),this.fetchFeed()),this.model.set("URL",`/users/${window.currentUser.get("username")}/tagFilter`,{silent:!0}),this.model.fetch({reset:!0,success:function(e,t){return window.localStorage.tagFilterData=JSON.stringify(t)}})):void 0}getFeedURL(){var e,t,n,i;return(i=new $("/feed")).addQuery("filter",null!=(n=this.query.filter)?n:"recs"),(t=this.model.get("include").pluck("id").join(","))&&i.addQuery("include_tags",t),(e=this.model.get("include").findWhere({id:"development"})?"":"development")&&i.addQuery("exclude_tags",e),i.toString()}}return e.prototype.Model=M,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._FrontPageView")}}).prototype.rule={"._FrontPageSplashHeaderView=":function(){return new h},"._FrontPageFeedView=":function(){return new a({model:new s({URL:this.getFeedURL()}),loading:!0})},"._FrontPageToasterView=":function(){return new f},"._TagSelectorHeaderView=":function(){return new I({model:this.model})}},e}.call(this),e}.call(this),h=function(){class e extends V{sendAnalytics(e,t={}){if(null!=e)return t=U.extend(t,{label:"Front Page Splash"}),super.sendAnalytics(e,t)}oAuthSignIn(e){return new x({ContentView:v,contentOptions:{method:e}})}}return e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._FrontPageSplashHeaderView")}},e.prototype.events={"click ._signup-link":function(e){return e.preventDefault(),new x({ContentView:_}),this.sendAnalytics("Clicked Join Button")},"click ._facebook-login-link":function(e){return this.oAuthSignIn("facebook")},"click ._google-login-link":function(e){return this.oAuthSignIn("google")}},e}.call(this),a=function(){class e extends i{}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageFeedView")}}).prototype.rule={"._is-loading=":function(){if(!this.options.loading)return""},"._not-loading=":function(){if(this.options.loading)return""},"._has-recent-recs=":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return""},"._not-recs-feed=":function(){if(!("undefined"!=typeof query&&null!==query?query.filter:void 0)||"recs"===("undefined"!=typeof query&&null!==query?query.filter:void 0))return""},"._is-recs-feed=":function(){if(("undefined"!=typeof query&&null!==query?query.filter:void 0)&&"recs"!==("undefined"!=typeof query&&null!==query?query.filter:void 0))return""},"._filter-recommendation-count=":function(){return N(q(this.model.get("filterVotesCount"),0)).value},"._filter-recommendation-count-unit=":function(){return N(q(this.model.get("filterVotesCount"),0)).unit},"._filter-edit-count=":function(){return N(q(this.model.get("filterUpdatesCount"),0)).value},"._filter-edit-count-unit=":function(){return N(q(this.model.get("filterUpdatesCount"),0)).unit},"._filter-update-time-ago-value=":function(){var e;return e=B(new Date(this.model.get("filterModified")),null,"en-abbr").fromNow(!0),N(e).value},"._filter-update-time-ago-unit=":function(){var e;return e=B(new Date(this.model.get("filterModified")),null,"en-abbr").fromNow(!0),N(e).unit},"._FrontPageTagSidebarView=":function(){return new m},"._FrontPageNavigationSidebarView=":function(){return new c({model:this.model})},"._FrontPageNavHeaderView=":function(){return new u({model:this.model})},"._QuestionCardListView=":function(){var e;return"recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0)?new P({collection:this.model.get("content")}):new p({collection:this.model.get("content")})},"._RecommendationCardAnswerView=":function(){var e,t,n;return({include_tags:t,exclude_tags:e}=new $(this.model.url()).query(!0)),n=decodeURIComponent(new $("/topics/random").query({include_tags:t,exclude_tags:e}).toString()),new S({model:new E({URL:n}),ajax:n})},"._RecommendationCardListView=":function(){var e;return e=new $(this.model.get("content").url()).path("/activity").search({filter:"recommended"}).toString(),new d({ajax:e})},"._ContributorsView=":function(){return new l({collection:this.model.get("users")})},"._ClaimBannerCardView=":function(){return new o}},e}.call(this),e}.call(this),p=function(){class e extends C{}return e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{}).prototype.rule={"._load-more-link@href":function(){var e,t;return new $(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0).path("")}},e}.call(this),e}.call(this),l=function(){class e extends r{}return e.prototype.limit=18,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{}).prototype.rule={"._has-more-users=":""},e}.call(this),e}.call(this),c=function(){class e extends i{}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageNavigationSidebarView")}}).prototype.rule={"._is-logged-in=":function(){if(null==("undefined"!=typeof window&&null!==window?window.currentUser.id:void 0))return""},"._not-logged-in=":function(){if(null!=("undefined"!=typeof window&&null!==window?window.currentUser.id:void 0))return""},"._recs-link@class+":function(){var e;if("recs"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._feed-link@class+":function(){var e;if("feed"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._top-link@class+":function(){var e;if("top"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._improve-link@class+":function(){var e;if("improve"===(null!=(e=this.model.get("content").meta("properties"))?e.filter:void 0))return"selected"},"._SidebarUserStatsView=":function(){return new T}},e}.call(this),e}.call(this),u=function(){class e extends c{}return e.prototype.Rule=class extends c.prototype.Rule{template(){return template("._FrontPageNavHeaderView")}},e}.call(this),d=function(){class e extends k{}return e.prototype.limit=3,e}.call(this),f=function(){class e extends A{}return e.prototype.DefaultToastView=O,e}.call(this),m=function(){class e extends i{initialize(){if(this.allTagList=new L([],{url:"/tags"}),super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.allTagList.fetch({silent:!0,success:()=>(this.fetched=!0,this.update())})}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._FrontPageTagSidebarView")}}).prototype.rule={"._JoinTagSidebarView=":function(){if(this.fetched)return new w({collection:this.allTagList})}},e}.call(this),e}.call(this),t.exports={FrontPageView:g,FrontPageSplashHeaderView:h,FrontPageFeedView:a,FrontPageQuestionCardListView:p,FrontPageNavHeaderView:u,FrontPageNavigationSidebarView:c,FrontPageRecommendationCardListView:d,FrontPageContributorsView:l,FrontPageToasterView:f,FrontPageTagSidebarView:m}},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/claim-banner-view":263,"../components/contributors-view":267,"../components/join-tag-sidebar-view":277,"../components/login-modal-view":280,"../components/main-header-view":282,"../components/question-card-view":296,"../components/recommendation-card-view":305,"../components/recommendation-option-card-view":309,"../components/sidebar-user-stats-view":319,"../components/tag-selector-view":326,"../components/toaster-view":327,"./page-view":387,jquery:438,moment:441,underscore:448,urijs:452}],376:[function(e,t,n){arguments[4][230][0].apply(n,arguments)},{"../base-view":259,"./option-page-view":386,"./page-view":387,dup:230}],377:[function(e,t,n){arguments[4][231][0].apply(n,arguments)},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"../../utils/transforms":89,"../lists/comment-list-view":331,"../models/comment-view":352,"../pages/comments-page-view":371,"../pages/page-view":387,dup:231,jquery:438}],378:[function(e,t,n){var i;i=e("underscore"),t.exports=i.extend({},e("../../views-v2/pages/ai-category-page-view"),e("../../views-v2/pages/ai-home-page-view"),e("../../views-v2/pages/ai-plugin-category-page-view"),e("../../views-v2/pages/ai-parent-category-page-view"),e("../../views-v2/pages/ai-plugin-details-page-view"),e("../../views-v2/pages/ai-plugin-error-page-view"),e("../../views-v2/pages/ai-plugin-main-popup-page-view"),e("../../views-v2/pages/ai-plugin-maintenance-page-view"),e("../../views-v2/pages/ai-plugin-not-found-page-view"),e("../../views-v2/pages/ai-plugin-parent-category-page-view"),e("../../views-v2/pages/ai-plugin-product-page-view"),e("../../views-v2/pages/ai-uninstall-page-view"),e("../../views-v2/pages/ai-welcome-page-view"),e("../../views-v2/pages/summary-page-view"),e("./activity-page-view"),e("./add-question-page-view"),e("./ads-test-page-view"),e("./claim-business-account-page-view"),e("./comments-page-view"),e("./compare-page-view"),e("./edit-profile-page-view"),e("./error-page-view"),e("./front-page-view"),e("./help-page-view"),e("./history-page-view"),e("./logs-page-view"),e("./maintenance-page-view"),e("./master-alternatives-page-view"),e("./master-compare-page-view"),e("./master-option-page-view"),e("./not-found-page-view"),e("./notifications-page-view"),e("./option-page-view"),e("./page-view"),e("./password-reset-page-view"),e("./post-activity-page-view"),e("./post-page-view"),e("./profile-page-view"),e("./search-page-view"),e("./sitemap-page-view"),e("./tag-page-view"),e("./update-question-page-view"))},{"../../views-v2/pages/ai-category-page-view":211,"../../views-v2/pages/ai-home-page-view":212,"../../views-v2/pages/ai-parent-category-page-view":213,"../../views-v2/pages/ai-plugin-category-page-view":214,"../../views-v2/pages/ai-plugin-details-page-view":215,"../../views-v2/pages/ai-plugin-error-page-view":216,"../../views-v2/pages/ai-plugin-main-popup-page-view":217,"../../views-v2/pages/ai-plugin-maintenance-page-view":218,"../../views-v2/pages/ai-plugin-not-found-page-view":219,"../../views-v2/pages/ai-plugin-parent-category-page-view":220,"../../views-v2/pages/ai-plugin-product-page-view":221,"../../views-v2/pages/ai-uninstall-page-view":222,"../../views-v2/pages/ai-welcome-page-view":223,"../../views-v2/pages/summary-page-view":248,"./activity-page-view":367,"./add-question-page-view":368,"./ads-test-page-view":369,"./claim-business-account-page-view":370,"./comments-page-view":371,"./compare-page-view":372,"./edit-profile-page-view":373,"./error-page-view":374,"./front-page-view":375,"./help-page-view":376,"./history-page-view":377,"./logs-page-view":379,"./maintenance-page-view":380,"./master-alternatives-page-view":381,"./master-compare-page-view":382,"./master-option-page-view":383,"./not-found-page-view":384,"./notifications-page-view":385,"./option-page-view":386,"./page-view":387,"./password-reset-page-view":388,"./post-activity-page-view":389,"./post-page-view":390,"./profile-page-view":391,"./search-page-view":392,"./sitemap-page-view":393,"./tag-page-view":395,"./update-question-page-view":396,underscore:448}],379:[function(e,t,n){arguments[4][233][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../base-view":259,"../components/modal-view":285,"../lists/list-view":334,"./page-view":387,dup:233,moment:441}],380:[function(e,t,n){arguments[4][234][0].apply(n,arguments)},{"./page-view":387,dup:234}],381:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U;({PageView:C}=e("./page-view")),({ListView:s}=e("../lists/list-view")),({MasterOptionView:b}=e("../models/master-option-view")),({MasterOptionDropdownView:V}=e("../components/master-option-dropdown-view")),({SummaryPageOptionView:O,SummaryPageOptionRecommendationView:P,SummaryPageOptionTabsView:I,SummaryPageOptionTabsContentListView:L,SummaryPageOptionSpecView:M,SummaryPageOptionSpecListView:T,SummaryPageSectionView:A}=e("../pages/summary-page-view")),({SummaryPageHeaderAdView:k}=e("../../views-v2/pages/summary-page-view")),({StickyNavMixinView:S}=e("../mixins/sticky-nav-mixin-view")),({JoinTagSidebarView:r}=e("../components/join-tag-sidebar-view")),({ImageCarouselView:o}=e("../components/image-carousel-view")),({AdSidebarAdView:i}=e("../components/ad-view")),({LustreAIPromoteFooterView:l}=e("../../views-v2/components/lustre-ai-promote-footer-view")),({MasterOptionAlternatives:x,MasterOption:_,Viewpoint:D}=e("../../models")),({MasterOptionList:R}=e("../../collections")),e("underscore"),E=e("urijs"),U=e("moment"),({improveURL:$}=e("../../utils/transforms")),y=function(){class e extends C{title(){return super.title(`${this.model.get("alternatives").length} best alternatives to ${this.model.get("masterOption").get("source").get("revision").get("title")} as of ${U().format("YYYY")}`)}}return e.prototype.Model=x,e.prototype.Rule=function(){var e;return(e=class extends C.prototype.Rule{template(){return template("._MasterAlternativesPageView")}}).prototype.rule={"._JoinTagSidebarView=":function(){return new r({collection:this.model.get("masterOption").get("tags")})},"._MasterAlternativesPageHeaderView=":function(){return new u({model:this.model.get("masterOption")})},"._MasterAlternativesPageOptionThreadView=":function(){return new g({collection:this.model.get("alternatives")})},"._LustreAIPromoteFooterView=":function(){return new l},"._MasterAlternativesPageSidebarAdView=":function(){return new v},"._SummaryPageHeaderAdView=":function(){return new k}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard-ad",type:"leaderboard_atf"}],e.prototype.conditionalAdUnits=[{selectorId:"sidebar-ad",type:"med_rect_atf"},{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e}.call(this),u=function(){class e extends b{}return e.prototype.Model=_,e.prototype.Rule=class extends b.prototype.Rule{template(){return template("._MasterAlternativesPageHeaderView")}},e}.call(this),p=function(){class e extends O{getOptionIndex(){var e,t;return null!=(e=this.model.parents("masterOption"))&&null!=(t=e.collection)?t.indexOf(e):void 0}}return e.prototype.adOffset=0,e.prototype.adInterval=4,e.prototype.Model=D,e.prototype.Rule=function(){var e;return(e=class extends O.prototype.Rule{}).prototype.rule={"._no-body=":function(){return""},"._reaction-dropdown-link=":function(){return""},"._has-slant-score=":function(){return""},"._option-link@href":function(){var e;return null!=(e=this.model.parents("masterOption"))?e.url():void 0},"._meta-option-rank@content=":function(){var e;return(e=this.model.parents("masterOption")).collection.indexOf(e)+1},"._SummaryPageOptionRecommendationView=":function(){return new d({collection:this.model.parents("masterOption").get("votes")})},"._SummaryPageOptionTabsView=":function(){return new f({model:this.model})},"._ImageCarouselView=":function(){return new c({collection:this.model.get("revision").get("images")})},"._SummaryPageSponsoredOptionView=":function(){return""}},e}.call(this),e}.call(this),g=function(){class e extends s{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=R,e.prototype.ItemView=p,e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{template(){return template("._MasterAlternativesPageOptionThreadView")}}).prototype.rule={"._meta-options-count@content":function(){return this.count()}},e}.call(this),e}.call(this),d=function(){class e extends P{}return e.prototype.Rule=class extends P.prototype.Rule{template(){return template("._MasterAlternativesPageOptionRecommendationView")}},e.prototype.events={"click ._upvote-link":function(e){},"click ._downvote-link":function(e){}},e}.call(this),w=function(){class e extends A{getParentOption(){return this.model.parents("source")}}return e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{}).prototype.rule={"._section-reaction-dropdown-link=":function(){return""},"._section-link@href":function(){var e;if(e=this.getParentOption())return new E(null!=e?e.url():void 0).fragment(this.model.get("id"))}},e}.call(this),e}.call(this),f=function(){class e extends I{getSpecs(){var e;return null!=(e=this.model.parents("masterOption"))?e.get("specs"):void 0}}return e.prototype.itemLimit=6,e.prototype.Rule=function(){var e;return(e=class extends I.prototype.Rule{}).prototype.rule={"._no-badge-class@class+":function(){return""},"._SummaryPageOptionTabsContentView=":function(){return new a({model:this.model,activeTabId:this.activeTabId||"all"})}},e}.call(this),e}.call(this),a=function(){class e extends L{getModels(){var e,t,n;return e=this.model.get("sections").models,(n=null!=(t=this.model.parents("masterOption"))?t.get("specs"):void 0)&&(e=e.concat(n)),e}getItemView(e){return this.isSection(e)?w:this.isSpecList(e)?super.getItemView(e):void 0}getSpecListView(){return h}}return e.prototype.Rule=class extends L.prototype.Rule{},e.prototype.getSpecs=f.prototype.getSpecs,e}.call(this),m=class extends M{},h=function(){class e extends T{}return e.prototype.ItemView=m,e.prototype.Rule=function(){var e;return(e=class extends T.prototype.Rule{}).prototype.rule={"._specs-link@href":function(){var e;return null!=(e=new E($(this.collection.parents("masterOption"))))?e.hash("specs"):void 0}},e}.call(this),e}.call(this),c=function(){class e extends o{}return e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{}).prototype.rule={"._ImageCarouselAddItemView=":function(){return""}},e}.call(this),e}.call(this),v=function(){class e extends i{}return e.prototype.adId="sidebar-ad",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={MasterAlternativesPageView:y,MasterAlternativesPageHeaderView:u,MasterAlternativesPageOptionItemView:p,MasterAlternativesPageOptionThreadView:g,MasterAlternativesPageOptionRecommendationView:d,MasterAlternativesPageSectionView:w,MasterAlternativesPageOptionTabsView:f,MasterAlternativesOptionTabsContentListView:a,MasterAlternativesPageOptionSpecView:m,MasterAlternativesPageOptionSpecListView:h,MasterAlternativesPageImageCarouselView:c,MasterAlternativesPageSidebarAdView:v}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../../views-v2/components/lustre-ai-promote-footer-view":117,"../../views-v2/pages/summary-page-view":248,"../components/ad-view":261,"../components/image-carousel-view":273,"../components/join-tag-sidebar-view":277,"../components/master-option-dropdown-view":284,"../lists/list-view":334,"../mixins/sticky-nav-mixin-view":350,"../models/master-option-view":357,"../pages/summary-page-view":394,"./page-view":387,moment:441,underscore:448,urijs:452}],382:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me,fe,ge,we,ve=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};({BaseView:r}=e("../base-view")),({ListView:u}=e("../lists/list-view")),({SpecListView:ae,SpecListItemView:le}=e("../components/spec-list-view")),({RecommendationView:ne}=e("../components/recommendation-view")),({PopupView:te}=e("../components/popup-view")),({RelatedProductListView:ie}=e("../components/related-product-list-view")),({PageView:ee}=e("./page-view")),({OptionView:Z}=e("../models/option-view")),({OptionPageNavigationSidebarView:J,OptionPageSectionListView:X}=e("./option-page-view")),({MasterOptionPageSectionView:G,MasterOptionPageQuestionView:Y}=e("./master-option-page-view")),({JoinTagSidebarView:a}=e("../components/join-tag-sidebar-view")),({JoinTagBannerView:l}=e("../components/join-tag-banner-view")),({StickySidebarPanelView:ue}=e("../components/sticky-sidebar-panel-view")),({AdView:o,AdSidebarAdView:i}=e("../components/ad-view")),({LustreAIPromoteFooterView:c}=e("../../views-v2/components/lustre-ai-promote-footer-view")),({Comparison:s,Section:oe,Viewpoint:de,MasterOption:H,Topic:ce}=e("../../models")),({MasterOptionList:W,SectionList:re,MasterOptionVoteList:K,TopicList:pe,SpecList:se}=e("../../collections")),({shortenNumber:we,ordinalNumber:ge}=e("../../utils/transforms")),he=e("underscore"),fe=e("moment"),me=function(e){var t,n,i;return n=e.at(0).get("topics"),t=e.at(1).get("topics"),i=n.filter(function(e){return t.some(function(t){return e.get("uuid")===t.get("uuid")})}),he.sortBy(i,function(e){return-e.get("optionsRecommendationCount")})},Q=function(){class e extends ee{getSharedRelatedProducts(e){var t,n,i;return n=this.model.get("masters").at(0).get("related"),t=this.model.get("masters").at(1).get("related"),i=n.filter(function(n){return!he.contains(e,n.get("uuid"))&&t.some(function(e){return n.get("uuid")===e.get("uuid")})}),new W(i)}getOtherRelatedProducts(e){var t;return t=null,this.model.get("masters").forEach(function(e){return t?t.add(e.get("related").models,{silent:!0}):t=e.get("related").clone()}),t.chain().filter(function(t){return!he.contains(e,t.get("uuid"))}).sortBy(function(e){return-1*e.get("votes").meta("upvotes")}).value()}getMutualRelatedProducts(){var e,t,n;return e=this.model.get("masters").pluck("uuid"),(n=this.getSharedRelatedProducts(e)).length>ie.prototype.limit?n:(t=this.getOtherRelatedProducts(e),n.add(t,{silent:!0}),n)}getCachedSharedQuestions(){return null!=this.sharedQuestions?this.sharedQuestions:this.sharedQuestions=me(this.model.get("masters"))}getTopOption(){var e,t,n;return null!=this.topOption?this.topOption:(n=this.getCachedSharedQuestions(),e=this.model.get("masters").at(0).get("topics").findWhere({uuid:n[0].get("uuid")}).get("ranking"),t=this.model.get("masters").at(1).get("topics").findWhere({uuid:n[0].get("uuid")}).get("ranking"),this.topOption=e<t?this.model.get("masters").at(0):this.model.get("masters").at(1))}getBottomOption(){var e;return null!=this.bottomOption?this.bottomOption:(e=this.getTopOption(),this.model.get("masters").at(0)===e?this.bottomOption=this.model.get("masters").at(1):this.bottomOption=this.model.get("masters").at(0))}title(){var e,t,n,i;for(i=this.model.get("masters").at(0).get("source").get("revision").get("title"),e=0,t=(n=this.model.get("masters").slice(1)).length;e<t;e++)i+=` vs ${n[e].get("source").get("revision").get("title")} detailed comparison as of ${fe().format("YYYY")}`;return super.title(i)}}return e.prototype.Model=s,e.prototype.Rule=function(){var e;return(e=class extends ee.prototype.Rule{template(){return template("._MasterComparePageView")}}).prototype.rule={"._has-top-pro-description=":function(){var e;if(!(null!=(e=this.getTopOption().get("source").get("sections").findWhere({isCon:!1}))?e.get("revision").get("text"):void 0))return""},"._first-option-title=":function(){return this.model.get("masters").at(0).get("source").get("revision").get("title")},"._second-option-title=":function(){return this.model.get("masters").at(1).get("source").get("revision").get("title")},"._top-option-title=":function(){return this.getTopOption().get("source").get("revision").get("title")},"._bottom-option-title=":function(){return this.getBottomOption().get("source").get("revision").get("title")},"._top-ranking=":function(){return ge(this.getTopOption().get("topics").findWhere({uuid:this.getCachedSharedQuestions()[0].get("uuid")}).get("ranking"))},"._bottom-ranking=":function(){return ge(this.getBottomOption().get("topics").findWhere({uuid:this.getCachedSharedQuestions()[0].get("uuid")}).get("ranking"))},"._top-question-title=":function(){return this.getCachedSharedQuestions()[0].get("revision").get("title")},"._top-pro-description=":function(){return this.getTopOption().get("source").get("sections").findWhere({isCon:!1}).get("revision").get("text")},"._has-specs=":function(){if(!this.model.get("masters").some(function(e){return e.get("specs").length>0}))return""},"._MasterComparePageNavigationSidebarView=":function(){return new V({collection:this.model.get("masters")})},"._MasterComparePageTitleListView=":function(){return new F({collection:this.model.get("masters")})},"._MasterComparePageHeaderListView=":function(){return new y({collection:this.model.get("masters")})},"._MasterComparePageSpecListsView=":function(){return new N({collection:this.model.get("masters")})},"._MasterComparePageSectionsView=":function(){return new U({collection:this.model.get("masters")})},"._MasterComparePageQuestionsView=":function(){return new M({collection:this.model.get("masters")})},"._RelatedProductListView=":function(){return new ie({collection:this.getMutualRelatedProducts()})},"._LustreAIPromoteFooterView=":function(){return new c},"._MasterComparePageTopContentAdView=":function(){return new z}},e}.call(this),e.prototype.adUnits=[{selectorId:"top-content-ad",type:"leaderboard_atf"},{selectorId:"content-ad",type:"leaderboard_btf"}],e.prototype.conditionalAdUnits=[{selectorId:"pro-content-ad",type:"leaderboard_btf"},{selectorId:"sidebar-ad",type:"sky_atf"}],e}.call(this),V=function(){class e extends r{initialize(){return super.initialize(...arguments),ue.prototype.initialize.apply(this)}}return e.prototype.Collection=W,e.prototype.Model=null,e.prototype.Rule=function(){var e;return(e=class extends J.prototype.Rule{template(){return template("._MasterComparePageNavigationSidebarView")}}).prototype.rule={"._has-specs=":function(){if(!this.collection.some(function(e){return e.get("specs").length>0}))return""},"._MasterComparePageSidebarAdView=":function(){return new B},"._MasterComparePageJoinTagSidebarView=":function(){return new x({collection:this.collection.at(0).get("tags")})}},e}.call(this),e.prototype.events=ue.prototype.events,e}.call(this),R=function(){class e extends Z{}return e.prototype.Rule=function(){var e;return(e=class extends Z.prototype.Rule{}).prototype.rule={"._master-option-link@href":function(){return this.model.parent.url()}},e}.call(this),e}.call(this),j=function(){class e extends R{getComparedOption(){var e;return e=this.model.parent.get("uuid"),this.model.parents("masters").find(function(t){return t.get("uuid")!==e})}}return e.prototype.Model=de,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._MasterComparePageTitleView")}}).prototype.rule={"._has-other-compare-options=":function(){if(!(this.getComparedOption().get("related").length>1))return""},"._no-other-compare-options=":function(){if(this.getComparedOption().get("related").length>1)return""},"._not-last-item=":function(){var e;if(0===(e=this.model.parent).collection.indexOf(e))return""}},e}.call(this),e.prototype.events={"click ._select-option-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new f({model:this.getComparedOption(),masterOptionUuid:this.model.parent.get("uuid"),follows:$(e.currentTarget).find("._dropdown-target"),align:"center",anchor:"below",cover:!1,relative:!1})}},e}.call(this),F=function(){class e extends u{getItems(){var e;return e=super.getItems(...arguments),he.map(e,function(e){return e.get("source")})}}return e.prototype.Collection=W,e.prototype.ItemView=j,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageTitleListView")}},e}.call(this),f=function(){class e extends te{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends te.prototype.Rule{template(){return template("._MasterComparePageComparedOptionsDropdownView")}}).prototype.rule={"._option-title=":function(){return this.model.get("source").get("revision").get("title")},"._MasterComparePageComparedOptionListView=":function(){return new h({collection:this.model.get("related"),masterOptionUuid:this.options.masterOptionUuid})}},e}.call(this),e}.call(this),m=function(){class e extends R{}return e.prototype.Model=de,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._MasterComparePageComparedOptionView")}}).prototype.rule={"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("images").at(0))?e.getImagePreviewURL():void 0)return`background-image: URL('${t}');`},"._option-compare-link@href":function(){return this.model.parent.get("compareURL")},"._option-upvote-count=":function(){return we(this.model.parent.get("votes").meta("upvotes")||0)}},e}.call(this),e}.call(this),h=function(){class e extends u{constructor(){super(...arguments),this.filter=this.filter.bind(this)}filter(t){return ve(this,e),t.get("uuid")!==this.options.masterOptionUuid}getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=W,e.prototype.ItemView=m,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageComparedOptionListView")}},e}.call(this),_=function(){class e extends R{}return e.prototype.Model=de,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._MasterComparePageHeaderView")}}).prototype.rule={"._meta-rating-count@content":function(){var e;return(null!=(e=this.model.parent)?e.getVotesCount():void 0)||0},"._meta-rating-value@content":function(){var e;return(null!=(e=this.model.parent)?e.getRatingValue():void 0)||0},"._MasterComparePageRecommendationView=":function(){return new L({collection:this.model.parent.get("votes")})}},e}.call(this),e}.call(this),y=function(){class e extends u{getItems(){var e;return e=super.getItems(...arguments),he.map(e,function(e){return e.get("source")})}}return e.prototype.Collection=W,e.prototype.ItemView=_,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageHeaderListView")}},e}.call(this),L=function(){class e extends ne{}return e.prototype.Collection=K,e.prototype.Rule=class extends ne.prototype.Rule{template(){return template("._MasterComparePageRecommendationView")}},e}.call(this),q=function(){class e extends u{}return e.prototype.Collection=se,e.prototype.ItemView=le,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageSpecListView")}},e}.call(this),N=function(){class e extends ae{initialize(){return this.sortSpecs(),super.initialize(...arguments)}setCollapsedHeight(){var e,t;return t=this.collapsedItemCount,e=this.$(`.SpecList-Item:nth-child(${t})`).map(function(){return($(this).position().top||0)+($(this).prop("scrollHeight")||0)}),this.collapsedHeight=he.max(e)||""}getItems(){return super.getItems(...arguments).map(function(e){return e.get("specs")})}sortSpecs(){var e,t,n,i,o,r,s,l,a,u,c,p;for(n=null!=(l=this.collection.at(0))?l.get("specs"):void 0,u=null!=(a=this.collection.at(1))?a.get("specs"):void 0,n.each(function(e){return e.set({masterIndexForSort:0},{silent:!0})}),u.each(function(e){return e.set({masterIndexForSort:1},{silent:!0})}),e=n.clone().add(u.models,{silent:!0}),t=e.countBy("key"),r=[],s=[],i=0,o=(c=e.sortBy(e=>{return`${this.collection.length-t[e.get("key")]}${e.get("key")}`})).length;i<o;i++)0===(p=c[i]).get("masterIndexForSort")?r.push(p):s.push(p);return n.reset(r,{silent:!0}),u.reset(s,{silent:!0})}}return e.prototype.Collection=W,e.prototype.ItemView=q,e.prototype.collapsedItemCount=4,e.prototype.Rule=function(){var e;return(e=class extends ae.prototype.Rule{template(){return template("._MasterComparePageSpecListsView")}}).prototype.rule={"._has-more-specs=":function(){if(!this.collection.some(e=>e.get("specs").length>this.collapsedItemCount))return""}},e}.call(this),e}.call(this),M=function(){class e extends r{getCachedSharedQuestions(){return null!=this.sharedQuestions?this.sharedQuestions:this.sharedQuestions=me(this.collection)}}return e.prototype.Collection=W,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._MasterComparePageQuestionsView")}}).prototype.rule={"._has-other-questions=":function(){if(!this.collection.some(e=>e.get("topics").length>this.getCachedSharedQuestions().length))return""},"._MasterComparePageCommonQuestionListView=":function(){return new p({collection:this.collection.at(0).get("topics"),sharedQuestions:this.getCachedSharedQuestions()})},"._MasterComparePageOtherQuestionsListView=":function(){return new S({collection:this.collection,sharedQuestions:this.getCachedSharedQuestions()})}},e}.call(this),e}.call(this),d=function(){class e extends Y{getQuestionUuid(){return this.model.get("uuid")}getComparedQuestionList(){var e;return null!=(e=this.model.parents("masters").at(1))?e.get("topics"):void 0}update(){return this.cachedData={comparedQuestion:this.getComparedQuestionList().find(e=>e.get("uuid")===this.getQuestionUuid())},super.update(...arguments),delete this.cachedData}}return e.prototype.Model=ce,e.prototype.Rule=function(){var e;return(e=class extends Y.prototype.Rule{template(){return template("._MasterComparePageCommonQuestionView")}}).prototype.rule={"._is-trending-second=":function(){if(!this.cachedData.comparedQuestion.get("trending"))return""},"._not-trending-second=":function(){if(this.cachedData.comparedQuestion.get("trending"))return""},"._rank-level-second@class+":function(){var e;return e=this.cachedData.comparedQuestion.get("ranking"),this.getRankingClass(e)},"._option-rank-in-question-second=":function(){return this.cachedData.comparedQuestion.get("ranking")}},e}.call(this),e}.call(this),p=function(){class e extends u{constructor(){super(...arguments),this.filter=this.filter.bind(this)}createViewOptions(){return{sharedQuestions:this.options.sharedQuestions}}filter(t){return ve(this,e),-1!==he.findIndex(this.options.sharedQuestions,function(e){return e.get("uuid")===t.get("uuid")})}sortBy(e){return-e.get("optionsRecommendationCount")}}return e.prototype.Collection=pe,e.prototype.ItemView=d,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageCommonQuestionListView")}},e}.call(this),C=function(){class e extends Y{}return e.prototype.Rule=class extends Y.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionView")}},e}.call(this),b=function(){class e extends u{constructor(){super(...arguments),this.filter=this.filter.bind(this)}filter(t){return ve(this,e),-1===he.findIndex(this.options.sharedQuestions,function(e){return e.get("uuid")===t.get("uuid")})}}return e.prototype.Collection=pe,e.prototype.ItemView=C,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionListView")}},e}.call(this),S=function(){class e extends u{getItems(){var e;return e=super.getItems(...arguments),he.map(e,function(e){return e.get("topics")})}createViewOptions(){return{sharedQuestions:this.options.sharedQuestions}}}return e.prototype.Collection=W,e.prototype.ItemView=b,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageOtherQuestionsListView")}},e}.call(this),U=function(){class e extends r{setActiveList(e){return this.$("._tabbed-list").each(function(t,n){var i;return(i=$(n.children[e])).siblings().removeClass("active"),i.addClass("active")})}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.$("._tab:first-child").addClass("active"),this.setActiveList(0),this.getChildrenByView(D).forEach(e=>this.listenTo(e,"select",e=>this.setActiveList(e)))}}return e.prototype.Collection=W,e.prototype.Rule=function(){var e;return(e=class extends r.prototype.Rule{template(){return template("._MasterComparePageSectionsView")}}).prototype.rule={"._has-3-pros":function(){var e;if(e=this.collection.map(function(e){return e.get("source").get("sections")}),!he.any(e,function(e){return e.countBy(function(e){return e.get("isCon")?"con":"pro"}).pro>=3}))return""},"._MasterComparePageSectionsTabListView=":function(){return new E({collection:this.collection})},"._MasterComparePageProsListView=":function(){return new T({collection:this.collection})},"._MasterComparePageConsListView=":function(){return new w({collection:this.collection})},"._MasterComparePageContentAdView=":function(){return new v},"._MasterComparePageProSectionContentAdView=":function(){return new P}},e}.call(this),e}.call(this),D=function(){class e extends Z{}return e.prototype.Model=de,e.prototype.Rule=class extends Z.prototype.Rule{template(){return template("._MasterComparePageSectionsTabView")}},e.prototype.events={"click ._set-active-tab-link":function(e){var t;return this.$el.siblings().removeClass("active"),this.$el.addClass("active"),t=this.$el.index(),this.trigger("select",t)}},e}.call(this),E=function(){class e extends u{getItems(){return super.getItems(...arguments).map(function(e){return e.get("source")})}}return e.prototype.Collection=W,e.prototype.ItemView=D,e.prototype.Rule=class extends u.prototype.Rule{template(){return template("._MasterComparePageSectionsTabListView")}},e}.call(this),O=function(){class e extends G{}return e.prototype.Rule=class extends G.prototype.Rule{template(){return template("._MasterComparePageSectionView")}},e}.call(this),I=function(){class e extends X{}return e.prototype.Collection=re,e.prototype.ItemView=O,e.prototype.Rule=class extends X.prototype.Rule{},e}.call(this),k=function(){class e extends I{filter(e){return!e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends I.prototype.Rule{template(){return template("._MasterComparePageProListView")}},e}.call(this),g=function(){class e extends I{filter(e){return e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends I.prototype.Rule{template(){return template("._MasterComparePageConListView")}},e}.call(this),A=function(){class e extends u{getItems(){var e;return e=super.getItems(...arguments),he.map(e,function(e){return e.get("source").get("sections")})}}return e.prototype.Collection=W,e.prototype.Rule=class extends u.prototype.Rule{},e}.call(this),T=function(){class e extends A{}return e.prototype.ItemView=k,e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._MasterComparePageProsListView")}},e}.call(this),w=function(){class e extends A{}return e.prototype.ItemView=g,e.prototype.Rule=class extends A.prototype.Rule{template(){return template("._MasterComparePageConsListView")}},e}.call(this),x=function(){class e extends a{initialize(){return l.prototype.initialize.apply(this)}}return e.prototype.Rule=class extends a.prototype.Rule{},e.prototype.events={},e}.call(this),v=function(){class e extends o{}return e.prototype.type="content",e.prototype.adId="content-ad",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MasterComparePageContentAdView")}},e}.call(this),P=function(){class e extends v{}return e.prototype.adId="pro-content-ad",e.prototype.Rule=class extends v.prototype.Rule{},e}.call(this),z=function(){class e extends o{}return e.prototype.type="content",e.prototype.adId="top-content-ad",e.prototype.Rule=class extends o.prototype.Rule{template(){return template("._MasterComparePageTopContentAdView")}},e}.call(this),B=function(){class e extends i{}return e.prototype.adId="sidebar-ad",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={MasterComparePageView:Q,MasterComparePageNavigationSidebarView:V,MasterComparePageOptionView:R,MasterComparePageTitleView:j,MasterComparePageTitleListView:F,MasterComparePageComparedOptionsDropdownView:f,MasterComparePageComparedOptionView:m,MasterComparePageComparedOptionListView:h,MasterComparePageHeaderView:_,MasterComparePageHeaderListView:y,MasterComparePageSpecListView:q,MasterComparePageSpecListsView:N,MasterComparePageSectionsView:U,MasterComparePageSectionsTabView:D,MasterComparePageSectionsTabListView:E,MasterComparePageQuestionsView:M,MasterComparePageCommonQuestionView:d,MasterComparePageCommonQuestionListView:p,MasterComparePageOtherQuestionView:C,MasterComparePageOtherQuestionListView:b,MasterComparePageOtherQuestionsListView:S,MasterComparePageSectionsListView:A,MasterComparePageProsListView:T,MasterComparePageConsListView:w,MasterComparePageSectionListView:I,MasterComparePageProListView:k,MasterComparePageConListView:g,MasterComparePageSectionView:O,MasterComparePageRecommendationView:L,MasterComparePageJoinTagSidebarView:x,MasterComparePageContentAdView:v,MasterComparePageProSectionContentAdView:P,MasterComparePageTopContentAdView:z,MasterComparePageSidebarAdView:B}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../../views-v2/components/lustre-ai-promote-footer-view":117,"../base-view":259,"../components/ad-view":261,"../components/join-tag-banner-view":276,"../components/join-tag-sidebar-view":277,"../components/popup-view":294,"../components/recommendation-view":311,"../components/related-product-list-view":312,"../components/spec-list-view":322,"../components/sticky-sidebar-panel-view":324,"../lists/list-view":334,"../models/option-view":359,"./master-option-page-view":383,"./option-page-view":386,"./page-view":387,moment:441,underscore:448}],383:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H;e("underscore"),({BaseView:o}=e("../base-view")),({PageView:E}=e("./page-view")),({OptionPageNavigationSidebarView:L,OptionPageSectionView:O,OptionPageSectionListView:I,OptionPageImageHeaderView:M}=e("./option-page-view")),({OptionView:A}=e("../models/option-view")),({QuestionView:$}=e("../models/question-view")),({ImageGalleryView:l,ImageGalleryThumbsCarouselView:s}=e("../components/image-gallery-view")),({JoinTagSidebarView:u}=e("../components/join-tag-sidebar-view")),({LustreAIPromoteFooterView:p}=e("../../views-v2/components/lustre-ai-promote-footer-view")),({CommonlyComparedView:r}=e("../components/commonly-compared-view")),({RelatedProductListView:U}=e("../components/related-product-list-view")),({SpecListView:j}=e("../components/spec-list-view")),({SpecEditorModalView:F}=e("../components/spec-editor-modal-view")),({AdView:i}=e("../components/ad-view")),({QuestionListView:D}=e("../lists/question-list-view")),({SidebarTagListView:N}=e("../lists/sidebar-tag-list-view")),({ListView:c}=e("../lists/list-view")),({MasterOption:d,Viewpoint:H,Section:B,Topic:z}=e("../../models")),({ImageList:a,SectionList:q,TopicList:Q,MasterOptionList:h}=e("../../collections")),T=function(){class e extends E{title(){return super.title(`${this.model.get("source").get("revision").get("title")} Review`)}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends E.prototype.Rule{template(){return template("._MasterOptionPageView")}}).prototype.rule={"._MasterOptionPageNavigationSidebarView=":function(){return new v({model:this.model})},"._MasterOptionPageSidebarView=":function(){return new P({model:this.model})},"._MasterOptionPageOptionView=":function(){return new y({model:this.model.get("source")})},"._RelatedProductListView=":function(){return new U({collection:this.model.get("related")})},"._LustreAIPromoteFooterView=":function(){return new p},"._MasterOptionPageFooterAdView=":function(){return new m}},e}.call(this),e.prototype.adUnits=[{selectorId:"footer-ad",type:"leaderboard_btf"}],e}.call(this),y=function(){class e extends A{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageOptionView")}}).prototype.rule={"._has-pros=":function(){if(!this.model.get("sections").some(function(e){return!e.get("isCon")&&!e.isMarked()}))return""},"._has-cons=":function(){if(!this.model.get("sections").some(function(e){return e.get("isCon")&&!e.isMarked()}))return""},"._has-specs=":function(){if(!(this.model.parent.get("specs").length>0))return""},"._no-specs=":function(){if(this.model.parent.get("specs").length>0)return""},"._has-questions=":function(){if(!(this.model.parent.get("topics").length>0))return""},"._has-related-products=":function(){if(!(this.model.parent.get("related").length>0))return""},"._is-valid-comparison=":function(){if(!(this.model.parent.get("topics").length>0))return""},"._upvote-count=":function(){var e;return null!=(e=this.model.parent.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.parent.get("votes").meta("downvotes"))?e:0},"._meta-rating-count@content":function(){var e;return(null!=(e=this.model.parent)?e.getVotesCount():void 0)||0},"._meta-rating-value@content":function(){var e;return(null!=(e=this.model.parent)?e.getRatingValue():void 0)||0},"._SpecListView=":function(){return new j({collection:this.model.parent.get("specs")})},"._MasterOptionPageImagesView=":function(){return new w({model:this.model})},"._MasterOptionPageQuestionRankView=":function(){return new V({collection:this.model.parent.get("topics")})},"._MasterOptionPageSectionProListView=":function(){return new S({collection:this.model.get("sections")})},"._MasterOptionPageSectionConListView=":function(){return new b({collection:this.model.get("sections")})},"._CommonlyComparedView=":function(){return new r({model:this.model.parent})}},e}.call(this),e.prototype.events={"click ._edit-specs-link":function(){return new F({model:this.model.parents("masterOption")})}},e}.call(this),k=function(){class e extends O{}return e.prototype.Model=B,e.prototype.Rule=class extends O.prototype.Rule{template(){return template("._MasterOptionPageSectionView")}},e}.call(this),C=function(){class e extends I{}return e.prototype.Collection=q,e.prototype.ItemView=k,e.prototype.Rule=class extends I.prototype.Rule{},e}.call(this),S=function(){class e extends C{filter(e){return!e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MasterOptionPageSectionProListView")}},e}.call(this),b=function(){class e extends C{filter(e){return e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends C.prototype.Rule{template(){return template("._MasterOptionPageSectionConListView")}},e}.call(this),v=function(){class e extends L{getOption(){return this.model.get("source")}}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends L.prototype.Rule{template(){return template("._MasterOptionPageNavigationSidebarView")}}).prototype.rule={"._upvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("upvotes"))?e:0},"._downvote-count=":function(){var e;return null!=(e=this.model.get("votes").meta("downvotes"))?e:0},"._has-site-link=":function(){if(!this.model.get("source").get("revision").get("siteURL"))return""},"._option-site-link":{"@href":function(){return this.model.get("source").get("revision").get("siteURL")},"@target":"_blank","@rel":"nofollow noopener"},"._no-price=":function(){if(this.model.get("source").get("revision").get("price"))return""},"._has-price=":function(){if(!this.model.get("source").get("revision").get("price"))return""},"._option-price=":function(){return this.model.get("source").get("revision").get("price")},"._has-pros=":function(){if(!this.model.get("source").get("sections").some(function(e){return!e.get("isCon")&&!e.isMarked()}))return""},"._has-cons=":function(){if(!this.model.get("source").get("sections").some(function(e){return e.get("isCon")&&!e.isMarked()}))return""},"._has-specs=":function(){if(!(this.model.get("specs").length>0))return""},"._has-questions=":function(){if(!(this.model.get("topics").length>0))return""}},e}.call(this),e}.call(this),P=function(){class e extends A{}return e.prototype.Model=d,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageSidebarView")}}).prototype.rule={"._has-tags=":function(){if(!(this.model.get("tags").length>0))return""},"._has-related-products=":function(){if(!(this.model.get("related").length>0))return""},"._is-valid-comparison=":function(){if(!(this.model.get("topics").length>0))return""},"._JoinTagSidebarView=":function(){return new u({collection:this.model.get("tags")})},"._SidebarTagListView=":function(){return new N({collection:this.model.get("tags")})},"._CommonlyComparedView=":function(){return new r({model:this.model})}},e}.call(this),e}.call(this),w=function(){class e extends A{}return e.prototype.Model=H,e.prototype.Rule=function(){var e;return(e=class extends A.prototype.Rule{template(){return template("._MasterOptionPageImagesView")}}).prototype.rule={"._ImageGalleryView=":function(){return new g({collection:this.model.get("revision").get("images")})}},e}.call(this),e}.call(this),g=function(){class e extends l{}return e.prototype.Collection=a,e.prototype.Rule=function(){var e;return(e=class extends l.prototype.Rule{}).prototype.rule={"._has-thumbnails=":function(){if(!(this.collection.length>1))return""},"._ImageGalleryThumbsCarouselView=":function(){return new f({collection:this.collection})}},e}.call(this),e}.call(this),f=function(){class e extends s{}return e.prototype.Rule=function(){var e;return(e=class extends s.prototype.Rule{}).prototype.rule={"._ImageGalleryThumbsCarouselAddItemView=":""},e}.call(this),e}.call(this),R=function(){class e extends ${getRankingClass(e){return 1===e?"first":2===e?"second":3===e?"third":4===e?"fourth":4<e&&e<=10?"middle":"low"}}return e.prototype.Model=z,e.prototype.Rule=function(){var e;return(e=class extends $.prototype.Rule{template(){return template("._MasterOptionPageQuestionView")}}).prototype.rule={"._is-trending=":function(){if(!this.model.get("trending"))return""},"._not-trending=":function(){if(this.model.get("trending"))return""},"._rank-level@class+":function(){var e;return e=this.model.get("ranking"),this.getRankingClass(e)},"._option-rank-in-question=":function(){return this.model.get("ranking")}},e}.call(this),e}.call(this),_=function(){class e extends D{filter(e){var t;return!(t=e.get("reactionSet")).get("duplicate").count()&&!t.get("needsImprovement").count()&&!t.get("notAFit").count()}}return e.prototype.Collection=Q,e.prototype.ItemView=R,e.prototype.limit=4,e.prototype.Rule=class extends D.prototype.Rule{template(){return template("._MasterOptionPageQuestionListView")}},e}.call(this),x=function(){class e extends _{}return e.prototype.offset=_.prototype.limit,e.prototype.limit=null,e.prototype.Rule=class extends _.prototype.Rule{template(){return template("._MasterOptionPageQuestionMoreListView")}},e}.call(this),V=function(){class e extends o{}return e.prototype.Collection=Q,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._MasterOptionPageQuestionRankView")}}).prototype.rule={"._has-more=":function(){if(!(this.collection.length>_.prototype.limit))return""},"._MasterOptionPageQuestionListView=":function(){return new _({collection:this.collection})},"._MasterOptionPageQuestionMoreListView=":function(){return new x({collection:this.collection})}},e}.call(this),e.prototype.events={"click ._view-all-link":function(e){var t,n;return t=(n=this.$(".OptionDetailed-QuestionList-MoreList")).prop("scrollHeight"),n.css("max-height",t),this.$("._MasterOptionPageQuestionListView").addClass("expanded"),this.$(".ExpandListButton._view-all-link").addClass("hidden"),this.$(".ExpandListButton._view-less-link").removeClass("hidden")},"click ._view-less-link":function(e){return this.$(".OptionDetailed-QuestionList-MoreList").css("max-height",0),this.$("._MasterOptionPageQuestionListView").removeClass("expanded"),this.$(".ExpandListButton._view-less-link").addClass("hidden"),this.$(".ExpandListButton._view-all-link").removeClass("hidden")}},e}.call(this),m=function(){class e extends i{}return e.prototype.type="footer",e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._MasterOptionPageFooterAdView")}},e}.call(this),t.exports={MasterOptionPageView:T,MasterOptionPageOptionView:y,MasterOptionPageSectionView:k,MasterOptionPageSectionListView:C,MasterOptionPageSectionProListView:S,MasterOptionPageSectionConListView:b,MasterOptionPageNavigationSidebarView:v,MasterOptionPageSidebarView:P,MasterOptionPageImagesView:w,MasterOptionPageImageGalleryView:g,MasterOptionPageImageGalleryThumbsCarouselView:f,MasterOptionPageQuestionView:R,MasterOptionPageQuestionListView:_,MasterOptionPageQuestionMoreListView:x,MasterOptionPageQuestionRankView:V,MasterOptionPageFooterAdView:m}},{"../../collections":2,"../../models":34,"../../views-v2/components/lustre-ai-promote-footer-view":117,"../base-view":259,"../components/ad-view":261,"../components/commonly-compared-view":264,"../components/image-gallery-view":274,"../components/join-tag-sidebar-view":277,"../components/related-product-list-view":312,"../components/spec-editor-modal-view":321,"../components/spec-list-view":322,"../lists/list-view":334,"../lists/question-list-view":337,"../lists/sidebar-tag-list-view":342,"../models/option-view":359,"../models/question-view":361,"./option-page-view":386,"./page-view":387,underscore:448}],384:[function(e,t,n){arguments[4][238][0].apply(n,arguments)},{"./page-view":387,dup:238}],385:[function(e,t,n){arguments[4][239][0].apply(n,arguments)},{"../../collections":2,"../components/notification-view":289,"../lists/list-view":334,"../threads/thread-view":404,"./page-view":387,dup:239,underscore:448}],386:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me;ce=e("underscore"),({improveURL:pe}=e("../../utils/transforms")),({BaseView:o}=e("../base-view")),({PostPageView:q}=e("./post-page-view")),({OptionView:B}=e("../models/option-view")),({SectionView:J}=e("../models/section-view")),({CommentListView:s,CommentListAddCommentView:r}=e("../lists/comment-list-view")),({OptionListView:g}=e("../lists/option-list-view")),({SectionListView:K}=e("../lists/section-list-view")),({MyRecommendationListView:f,MyRecommendationItemView:m}=e("../lists/my-recommendation-list-view")),({CommunityRecommendationsView:a}=e("../threads/community-recommendation-thread-view")),({ContributorsView:u}=e("../components/contributors-view")),({ImageGalleryView:c}=e("../components/image-gallery-view")),({JoinTagSidebarView:p}=e("../components/join-tag-sidebar-view")),({MultiUserView:h}=e("../components/multi-user-view")),({SlantScoreInteractableBadgeView:ee}=e("../components/slant-score-view")),({QuestionHeaderView:N}=e("../components/question-header-view")),({ReactionButtonSetView:z}=e("../components/reaction-button-set-view")),({RecommendationDrawerAgreeView:Q,RecommendationDrawerDisagreeView:H}=e("../components/recommendation-drawer-view")),({RecommendationView:Y}=e("../components/recommendation-view")),({SidebarAsyncOptionActivityView:X}=e("../components/sidebar-activity-view")),({SidebarRelatedQuestionListView:Z}=e("../lists/sidebar-related-question-list-view")),({SpecEditorModalView:te}=e("../components/spec-editor-modal-view")),({SpecListView:ne}=e("../components/spec-list-view")),({StickySidebarPanelView:ie}=e("../components/sticky-sidebar-panel-view")),({ToasterView:se,ToastCollapsedView:oe,ToastSectionView:re}=e("../components/toaster-view")),({ReactionBannerOptionFlagView:F,ReactionBannerOptionOutOfDateView:j}=e("../components/reaction-banner-view")),({AdSidebarAdView:i}=e("../components/ad-view")),({LustreAIPromoteFooterView:d}=e("../../views-v2/components/lustre-ai-promote-footer-view")),({Section:G,Topic:le,Viewpoint:ae}=e("../../models")),({CommentsList:l,ViewpointVoteList:ue}=e("../../collections")),({RecommendationPanelManagerMixinView:W}=e("../mixins/recommendation-panel-manager-mixin-view")),({shortenNumber:he,splitUnit:me}=e("../../utils/transforms")),de=e("moment"),U=function(){class e extends q{title(){var e,t,n;return t=this.model.get("revision").get("title"),n=null!=(e=this.getCurrentOption())?e.get("revision").get("title"):void 0,super.title(`${n} - ${t}`)}initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return"true"===new URI(window.location.toString()).search(!0).openSpecEditorModal?ce.defer(()=>new te({model:this.getCurrentOption().get("masterOption")})):void 0}getCurrentOption(){return this.model.get("viewpoints").findWhere({selected:!0})}}return e.prototype.Model=le,e.prototype.Rule=function(){var e;return(e=class extends q.prototype.Rule{template(){return template("._OptionPageView")}}).prototype.rule={"._QuestionHeaderView=":function(){return new N({model:this.model})},"._LustreAIPromoteFooterView=":function(){return new d},"._OptionPageOptionView=":function(){return new R({model:this.getCurrentOption()})},"._OptionPageNavigationSidebarView=":function(){return new V({model:this.getCurrentOption()})},"._OptionPageSidebarView=":function(){return new D({model:this.getCurrentOption()})},"._OptionPageToasterView=":function(){return new $({collection:this.getCurrentOption().get("sections"),openToaster:this.options.openToaster})}},e}.call(this),e.prototype.conditionalAdUnits=[{selectorId:"sidebar-ad",type:"med_rect_atf"},{selectorId:"sidebar-ad-2",type:"med_rect_btf"},{selectorId:"sidebar-left-ad",type:"sky_atf"}],e}.call(this),R=function(){class e extends B{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.managePanelForOption(this.model)}}return e.prototype.Model=ae,e.prototype.mixin(W),e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._OptionPageOptionView")}}).prototype.rule={"._OptionPageImageGalleryView=":function(){return new y({model:this.model})},"._OptionPageCommentsView=":function(){return new w({model:this.model})},"._SpecListView=":function(){return new ne({collection:this.model.get("masterOption").get("specs")})},"._OptionPageSectionProsListView=":function(){return new M({collection:this.model.get("sections")})},"._OptionPageSectionConsListView=":function(){return new P({collection:this.model.get("sections")})},"._OptionPageRecommendationView=":function(){return new S({model:this.model})},"._OptionPageFlaggedSectionListView=":function(){return new v({collection:this.model.get("sections")})},"._OptionPageOutOfDateSectionListView=":function(){return new C({collection:this.model.get("sections")})},"._OptionPageOptionVoteView=":function(){return new b({collection:this.model.get("votes")})},"._RecommendationDrawerAgreeView=":function(){return new Q({model:this.model})},"._RecommendationDrawerDisagreeView=":function(){return new H({model:this.model})},"._ReactionBannerOptionFlagView=":function(){return new F({collection:this.model.get("reactionSet").get("flag")})},"._ReactionBannerOptionOutOfDateView=":function(){return new j({collection:this.model.get("reactionSet").get("outOfDate")})},"._SlantScoreInteractableBadgeView=":function(){return new ee({model:this.model})}},e}.call(this),e.prototype.events={"click ._edit-specs-link":function(){return new te({model:this.model.get("masterOption")})}},e}.call(this),b=function(){class e extends Y{}return e.prototype.Rule=class extends Y.prototype.Rule{template(){return template("._OptionPageOptionVoteView")}},e}.call(this),D=function(){class e extends B{initialize(){return super.initialize(...arguments),this.listenTo(this.model.get("reactionSet").get("outOfDate"),"repaint",function(){return this.update()}),this.listenTo(this.model.get("reactionSet").get("flag"),"repaint",function(){return this.update()})}}return e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._OptionPageSidebarView")}}).prototype.rule={"._option-upvote-count=":function(){return me(he(this.model.get("communityRecommendations").meta("upvotes")||0,0)).value},"._option-upvote-count-unit=":function(){return me(he(this.model.get("communityRecommendations").meta("upvotes")||0,0)).unit},"._tree-edit-count=":function(){return me(he(this.model.get("treeUpdatesCount"),0)).value},"._tree-edit-count-unit=":function(){return me(he(this.model.get("treeUpdatesCount"),0)).unit},"._update-time-ago-value=":function(){var e;return e=de(new Date(this.model.get("treeModified")),null,"en-abbr").fromNow(!0),me(e).value},"._update-time-ago-unit=":function(){var e;return e=de(new Date(this.model.get("treeModified")),null,"en-abbr").fromNow(!0),me(e).unit},"._datetime@datetime":function(){return new Date(this.model.get("treeModified")).toISOString()},"._OptionPageSidebarOptionListView=":function(){return new O({collection:this.model.parents("topic").get("viewpoints")})},"._ContributorsView=":function(){return new u({collection:this.model.get("users")})},"._SidebarAsyncActivityView=":function(){return new X({collection:this.model.get("events")})},"._SidebarRelatedQuestionListView=":function(){var e,t;return t=null!=(e=this.model.parents("topic"))?e.getRelatedQuestionsUrl():void 0,new Z({ajax:t})},"._OptionPageSidebarAdView=":function(){return new I},"._OptionPageSidebarRelatedQuestionsAdView=":function(){return new E},"._JoinTagSidebarView=":function(){return new p({collection:this.model.get("tags")})}},e}.call(this),e}.call(this),A=function(){class e extends B{}return e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._OptionPageSidebarOptionView")}}).prototype.rule={"._is-selected@class+":function(){if(this.model.get("selected"))return"selected"}},e}.call(this),e}.call(this),O=function(){class e extends g{}return e.prototype.ItemView=A,e.prototype.Rule=class extends g.prototype.Rule{template(){return template("._OptionPageSidebarOptionListView")}},e}.call(this),V=function(){class e extends B{initialize(){if(super.initialize(...arguments),ie.prototype.initialize.apply(this),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("votes"),"vote",this.update)}hasRecs(){return this.hasCommunityRecommendations()||this.model.get("votes").any(function(e){return e.isVoted()})}hasCommunityRecommendations(){return this.model.get("communityRecommendations").count()&&this.model.get("communityRecommendations").any(function(e){return e.isVoted()&&("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)!==e.get("user").get("username")})}}return e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._OptionPageNavigationSidebarView")}}).prototype.rule={"._has-recs=":function(){if(!this.hasRecs())return""},"._OptionPageLeftSidebarAdView=":function(){return new _}},e}.call(this),e.prototype.events=ie.prototype.events,e}.call(this),L=function(){class e extends J{initialize(){if(super.initialize(...arguments),this.isCommentsCollapsed=!0,"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"login",()=>this.$("._has-logged-user").addClass("loggedIn")),this.listenTo(window.currentUser,"logout",()=>this.$("._has-logged-user").removeClass("loggedIn")),ce.defer(()=>{var e;if(null!=(e=window.currentUser)?e.get("username"):void 0)return this.$("._has-logged-user").addClass("loggedIn")})}toggleSectionComments(){var e;return this.isCommentsCollapsed=!this.isCommentsCollapsed,null!=(e=this.getChildrenByView(k)[0])&&e.toggle(),this.isCommentsCollapsed?(this.$("._section-toggle-comments-link").removeClass("selected"),analytics.track("Section Comments Collapsed")):(this.$("._section-toggle-comments-link").addClass("selected"),analytics.track("Section Comments Expanded"))}}return e.prototype.Model=G,e.prototype.Rule=function(){var e;return(e=class extends J.prototype.Rule{template(){return template("._OptionPageSectionView")}}).prototype.rule={"._has-logged-user@class+":function(){var e;if("undefined"!=typeof window&&null!==window&&null!=(e=window.currentUser)?e.get("username"):void 0)return"loggedIn"},"._OptionPageSectionCommentsView=":function(){return new k({collection:this.model.get("comments")})},"._ReactionButtonSetView=":function(){return new z({model:this.model.get("reactionSet")})},"._MultiUserView=":function(){return new h({collection:this.model.get("contributors")})}},e}.call(this),e.prototype.events={"click ._section-toggle-comments-link":function(e){return this.toggleSectionComments()}},e}.call(this),T=function(){class e extends K{filter(e){return!e.isMarked()}}return e.prototype.ItemView=L,e.prototype.Rule=function(){var e;return(e=class extends K.prototype.Rule{template(){return template("._OptionPageSectionListView")}}).prototype.rule={"._is-indented@class+":function(){if(ce.filter(this.collection.models,this.filter,this).length)return"avatarIndent"}},e}.call(this),e.prototype.events={"click ._add-pro-link":function(e){var t,n;return n=new G({},{collection:this.collection}),null!=(t=window.view.getChildrenByView(se)[0])?t.setToast(re,{model:n}):void 0},"click ._add-con-link":function(e){var t,n;return n=new G({isCon:!0},{collection:this.collection}),null!=(t=window.view.getChildrenByView(se)[0])?t.setToast(re,{model:n}):void 0}},e}.call(this),M=function(){class e extends T{filter(e){return!e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._OptionPageSectionProsListView")}},e}.call(this),P=function(){class e extends T{filter(e){return e.get("isCon")&&super.filter(...arguments)}}return e.prototype.Rule=function(){var e;return(e=class extends T.prototype.Rule{template(){return template("._OptionPageSectionConsListView")}}).prototype.rule={"._has-3-cons=":function(){if(!(this.count()>3))return""}},e}.call(this),e}.call(this),v=function(){class e extends T{filter(e){return e.get("reactionSet").get("flag").count()||e.get("isPending")}}return e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._OptionPageFlaggedSectionListView")}},e}.call(this),C=function(){class e extends T{filter(e){var t;return(t=e.get("reactionSet")).get("outOfDate").count()&&!t.get("flag").count()&&!e.get("isPending")}}return e.prototype.Rule=class extends T.prototype.Rule{template(){return template("._OptionPageOutOfDateSectionListView")}},e}.call(this),S=function(){class e extends o{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("votes"),"vote",this.onVote)}hasCommunityRecommendations(){return this.model.get("communityRecommendations").count()&&this.model.get("communityRecommendations").any(function(e){return e.isVoted()&&("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)!==e.get("user").get("username")})}hasRecs(){return this.hasCommunityRecommendations()||this.model.get("votes").any(function(e){return e.isVoted()})}onVote(){var e;return this.hasCommunityRecommendations()?null!=(e=this.getChildrenByView(x)[0])?e.update():void 0:this.update()}}return e.prototype.Model=ae,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageRecommendationView")}}).prototype.rule={"._has-recs=":function(){if(!this.hasRecs())return""},"._OptionPageMyRecommendationView=":function(){return new x({collection:this.model.get("votes")})},"._CommunityRecommendationsView=":function(){return new a({collection:this.model.get("communityRecommendations")})}},e}.call(this),e}.call(this),x=function(){class e extends o{getOwnRec(){var e;return e="undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0,this.collection.find(function(t){return t.get("user").get("username")===e&&t.isVoted()})}}return e.prototype.Collection=ue,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageMyRecommendationView")}}).prototype.rule={"._has-own-recommendation=":function(){if(!this.getOwnRec())return""},"._MyRecommendationItemView=":function(){return new m({model:this.getOwnRec()})}},e}.call(this),e}.call(this),k=function(){class e extends o{initialize(){if(super.initialize(...arguments),this.isCollapsed=!0,this.hasFetchedComments=!1,"undefined"!=typeof window&&null!==window)return this.listenTo(this.collection,"resizeComments",this.adjustSectionCommentsExpansion),this.listenTo(this.collection,"add",this.adjustSectionCommentsExpansion)}toggle(){var e,t,n;return e=this.getChildrenByView(r)[0],this.isCollapsed&&!this.hasFetchedComments&&(this.collection.count()?(this.$el.addClass("Loading"),n=(()=>{var e;return this.$el.removeClass("Loading"),this.hasFetchedComments=!0,this.commentCountLimit=3,this.setCommentIsDisplayedFlag(this.collection.toArray().reverse()),null!=(e=this.getChildrenByView(s)[0])&&e.update(),ce.defer(()=>this.adjustSectionCommentsExpansion())}),t=(()=>this.$el.removeClass("Loading")),this.collection.fetch({success:n,error:t,silent:!0})):null!=e&&e.update()),this.isCollapsed=!this.isCollapsed,null!=e?e.adjustTextareaHeight():void 0}adjustSectionCommentsExpansion(){return requestAnimationFrame(()=>{var e;return this.isCollapsed?(this.$el.css("max-height",0),this.$el.addClass("hidden")):(e=this.$el.prop("scrollHeight"),this.$el.css("max-height",e),this.$el.removeClass("hidden"))})}setCommentIsDisplayedFlag(e){if(!(this.commentCountLimit<=0))return e.forEach(e=>{var t;if(null==(null!=(t=e.get("revision"))?t.get("title"):void 0)&&this.commentCountLimit>0)return e.set({isDisplayed:!0},{silent:!0}),this.commentCountLimit--,this.setCommentIsDisplayedFlag(e.get("comments"))})}}return e.prototype.Collection=l,e.prototype.commentsLimit=3,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageSectionCommentsView")}}).prototype.rule={"._has-more-comments=":function(){if(!(this.collection.count()>this.commentsLimit))return""},"._has-multi-more-comments=":function(){if(!(this.collection.count()-this.commentsLimit>1))return""},"._comments-more-count=":function(){return this.collection.count()-this.commentsLimit},"._section-comment-link@href":function(){return pe(this.collection)},"._CommentListView=":function(){return new s({collection:this.collection,filterByDisplayed:!0})},"._CommentListAddCommentView=":function(){return new r({collection:this.collection})}},e}.call(this),e}.call(this),w=function(){class e extends o{}return e.prototype.Model=ae,e.prototype.Rule=function(){var e;return(e=class extends o.prototype.Rule{template(){return template("._OptionPageCommentsView")}}).prototype.rule={"._has-contributors":function(){var e;return e=this.model.get("users"),{"=":function(){if(!e.count())return""},"._has-two-contributors=":function(){if(2!==e.count())return""},"._has-three-plus-contributors=":function(){if(!(e.count()>2))return""},"._has-more-contributors=":function(){if(!(e.count()>3))return""},"._first-contributor-link@href":function(){var t;return null!=(t=e.at(0))?t.url():void 0},"._first-contributor-name=":function(){var t,n;return((null!=(t=e.at(0))?t.get("displayName"):void 0)||(null!=(n=e.at(0))?n.get("username"):void 0)).split(" ")[0]},"._second-contributor-link@href":function(){var t;return null!=(t=e.at(1))?t.url():void 0},"._second-contributor-name=":function(){var t,n;return((null!=(t=e.at(1))?t.get("displayName"):void 0)||(null!=(n=e.at(1))?n.get("username"):void 0)).split(" ")[0]},"._more-count=":function(){return e.count()-2}}},"._option-title=":function(){return this.model.get("revision").get("title")},"._CommentListView=":function(){return new s({collection:this.model.get("comments"),ajax:this.model.get("comments").url()})},"._CommentListAddCommentView=":function(){return new r({collection:this.model.get("comments")})}},e}.call(this),e}.call(this),y=function(){class e extends B{}return e.prototype.Rule=function(){var e;return(e=class extends B.prototype.Rule{template(){return template("._OptionPageImageGalleryView")}}).prototype.rule={"._ImageGalleryView=":function(){return new c({collection:this.model.get("revision").get("images")})}},e}.call(this),e}.call(this),$=function(){class e extends se{initialize(e){var t;if(super.initialize(...arguments),e.openToaster)return t=new G({},{collection:this.collection}),this.setToast(re,{model:t})}}return e.prototype.DefaultToastView=oe,e}.call(this),I=function(){class e extends i{}return e.prototype.adId="sidebar-ad",e.prototype.Rule=class extends i.prototype.Rule{template(){return template("._OptionPageSidebarAdView")}},e}.call(this),E=function(){class e extends I{}return e.prototype.adId="sidebar-ad-2",e.prototype.Rule=class extends I.prototype.Rule{},e}.call(this),_=function(){class e extends i{}return e.prototype.adId="sidebar-left-ad",e.prototype.Rule=class extends i.prototype.Rule{},e}.call(this),t.exports={OptionPageView:U,OptionPageOptionView:R,OptionPageOptionVoteView:b,OptionPageSidebarView:D,OptionPageSidebarOptionView:A,OptionPageSidebarOptionListView:O,OptionPageNavigationSidebarView:V,OptionPageSectionView:L,OptionPageSectionListView:T,OptionPageSectionConsListView:P,OptionPageSectionProsListView:M,OptionPageFlaggedSectionListView:v,OptionPageOutOfDateSectionListView:C,OptionPageRecommendationView:S,OptionPageMyRecommendationView:x,OptionPageSectionCommentsView:k,OptionPageCommentsView:w,OptionPageImageGalleryView:y,OptionPageToasterView:$,OptionPageSidebarAdView:I,OptionPageSidebarRelatedQuestionsAdView:E,OptionPageLeftSidebarAdView:_}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../../views-v2/components/lustre-ai-promote-footer-view":117,"../base-view":259,"../components/ad-view":261,"../components/contributors-view":267,"../components/image-gallery-view":274,"../components/join-tag-sidebar-view":277,"../components/multi-user-view":287,"../components/question-header-view":298,"../components/reaction-banner-view":301,"../components/reaction-button-set-view":302,"../components/recommendation-drawer-view":306,"../components/recommendation-view":311,"../components/sidebar-activity-view":317,"../components/slant-score-view":320,"../components/spec-editor-modal-view":321,"../components/spec-list-view":322,"../components/sticky-sidebar-panel-view":324,"../components/toaster-view":327,"../lists/comment-list-view":331,"../lists/my-recommendation-list-view":335,"../lists/option-list-view":336,"../lists/section-list-view":340,"../lists/sidebar-related-question-list-view":341,"../mixins/recommendation-panel-manager-mixin-view":349,"../models/option-view":359,"../models/section-view":363,"../threads/community-recommendation-thread-view":398,"./post-page-view":390,moment:441,underscore:448}],387:[function(e,t,n){var i,o;({BaseView:i}=e("../base-view")),o=function(){class e extends i{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&(this.loadAds(),this.initializeImageLazyLoader(),(e=window.currentUser)&&this.model))return this.listenTo(e,"login logout",function(){if(window.view===this)return e.fill(this.model)}),_.delay(()=>this.allowVideoAdClose(),5e3)}initializeImageLazyLoader(){var e;return e={rootMargin:"800px 0px"},this.lazyImageObserver=new IntersectionObserver(this.onIntersection,e)}onIntersection(e,t){return e.forEach(function(e){if(e.isIntersecting)return $(e.target).find("[data-lazy-src]").each(function(e,t){var n;return t.parentNode.classList.add("Loading"),t.src=t.dataset.lazySrc,delete t.dataset.lazySrc,n=function(e){return t.parentNode.classList.remove("Loading")},t.addEventListener("load",n,{once:!0}),t.addEventListener("error",n,{once:!0})}),t.unobserve(e.target)})}loadAds(){var e,t;return(null!=(e=window.tyche)?e.addUnits:void 0)?this.initAds():null!=(t=window.tyche)?t.onReady=(()=>this.initAds()):void 0}initAds(){var e,t,n;return window.tyche.destroyUnits("all"),e=null!=(n=this.adUnits)?n:[],t=this.getFilteredConditionalAds(),window.tyche.addUnits([...e,...t,...this.defaultAdUnits]).then(function(){return window.tyche.displayUnits()})}getFilteredConditionalAds(){var e;return(null!=(e=this.conditionalAdUnits)?e:[]).filter(function(e){var t,n;return({selectorId:n,isMobile:t}=e),(null!=n||null!=t)&&(n?$(`#${n}:visible`).length:null!=t?window.tyche.isMobile===t:void 0)})}allowVideoAdClose(){var e,t,n;if((n=document.getElementById("tyche_corner_video_container"))&&"undefined"!=typeof MutationObserver&&null!==MutationObserver)return t={childList:!0},e=function(e,t){var i,o,r;for(o of(r=[],e))"childList"===o.type&&(i=n.querySelector("#pw-close-btn"))?(i.id="",r.push(t.disconnect())):r.push(void 0);return r},new MutationObserver(e).observe(n,t)}}return e.prototype.Rule=class extends i.prototype.Rule{},e.prototype.defaultAdUnits=[{type:"corner_video"}],e.prototype.events={"click a[href]":function(e){return this.loadLink(e)}},e}.call(this),t.exports={PageView:o}},{"../base-view":259}],388:[function(e,t,n){arguments[4][242][0].apply(n,arguments)},{"../components/login-modal-view":280,"./page-view":387,dup:242}],389:[function(e,t,n){arguments[4][243][0].apply(n,arguments)},{"../../models":34,"../../utils/transforms":89,"../threads/event-thread-view":400,"./comments-page-view":371,dup:243}],390:[function(e,t,n){arguments[4][244][0].apply(n,arguments)},{"../components/question-header-view":298,"../models/question-view":361,"../pages/page-view":387,dup:244}],391:[function(e,t,n){arguments[4][245][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/activity-view":260,"../components/claim-banner-view":263,"../components/community-recommendation-panel-view":265,"../components/dropdown-view":268,"../components/edit-avatar-dropdown-view":269,"../components/my-recommendation-panel-view":288,"../components/panel-view":293,"../components/question-card-view":296,"../lists/list-view":334,"../mixins/sticky-nav-mixin-view":350,"../models/event-view":353,"../models/karma-view":356,"../models/option-view":359,"../models/user-view":366,"../threads/thread-view":404,"./page-view":387,dup:245,moment:441,underscore:448,urijs:452}],392:[function(e,t,n){arguments[4][246][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../components/master-option-card-view":283,"../components/question-card-view":296,"../components/recommendation-card-view":305,"../mixins/sticky-nav-mixin-view":350,"../threads/thread-view":404,"./page-view":387,dup:246,urijs:452}],393:[function(e,t,n){arguments[4][247][0].apply(n,arguments)},{"../../../../../server/compiled/templating/jquery":461,"../../models":34,"./page-view":387,dup:247,jquery:438,underscore:448,urijs:452}],394:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O,A,E,D,$,U,B,q,N,F,j,z,Q,H,W,Y,G,K,J,X,Z,ee,te,ne,ie,oe,re,se,le,ae,ue,ce,pe,de,he,me,fe,ge,we,ve,ye,_e,xe,Ve,Re,be,Ce,Se,ke,Pe,Te,Me,Le,Ie,Oe,Ae,Ee,De,$e,Ue,Be,qe,Ne,Fe,je,ze,Qe,He,We,Ye,Ge,Ke,Je,Xe,Ze,et,tt,nt;We=e("underscore"),({BaseView:a}=e("../base-view")),({PostPageView:b}=e("./post-page-view")),({QuestionView:k}=e("../models/question-view")),({OptionView:R}=e("../models/option-view")),({SectionView:N}=e("../models/section-view")),({SpecView:ee}=e("../models/spec-view")),({OptionThreadView:V}=e("../threads/option-thread-view")),({ListView:w}=e("../lists/list-view")),({CommunityRecommendationsView:c,CommunityRecommendationNoTextThreadView:u}=e("../threads/community-recommendation-thread-view")),({MyRecommendationListView:x}=e("../lists/my-recommendation-list-view")),({ContributorsView:p}=e("../components/contributors-view")),({FABRecommendView:m,FABRecommendButtonView:h}=e("../components/fab-view")),({JoinTagSidebarView:g}=e("../components/join-tag-sidebar-view")),({RecommendationCardAnswerView:I}=e("../components/recommendation-card-view")),({ReactionMenuDropdownView:P,ReactionMenuOptionStepView:T,ReactionMenuSectionStepView:M}=e("../components/reaction-menu-dropdown-view")),({RecommendationView:$}=e("../components/recommendation-view")),({RecommendationDrawerAgreeView:O,RecommendationDrawerDisagreeView:A}=e("../components/recommendation-drawer-view")),({RecommendationFormView:E}=e("../components/recommendation-form-view")),({PromoteQuestionCardView:C}=e("../components/promote-question-view")),({MultiUserView:_}=e("../components/multi-user-view")),({ToasterView:Be,ToastCollapsedView:De,ToastOptionView:$e,ToastSectionView:Ue}=e("../components/toaster-view")),({QuestionHeaderView:S}=e("../components/question-header-view")),({SidebarRelatedQuestionListView:z,SidebarRelatedQuestionListQuestionView:j}=e("../lists/sidebar-related-question-list-view")),({SearchablePopupInvokerView:B}=e("../components/searchable-popup-invoker-view")),({SearchOptionDropdownView:U}=e("../components/search-option-dropdown-view")),({SidebarAsyncActivityView:F}=e("../components/sidebar-activity-view")),({SpecTableView:Z,SpecTableHeaderCellView:G,SpecTableOptionRowView:X,SpecTableMoreDropdownView:J,SpecTableModalView:K}=e("../components/spec-table-view")),({TooltipView:Ne,TooltipTitleView:qe}=e("../components/tooltip-view")),({SlantScoreInteractableBadgeView:Q,SlantScoreInteractableSimpleBadgeView:H}=e("../components/slant-score-view")),({ModalView:y}=e("../components/modal-view")),({DropdownView:d}=e("../components/dropdown-view")),({ImageCarouselView:f}=e("../components/image-carousel-view")),({LustreAIPromoteFooterView:v}=e("../../views-v2/components/lustre-ai-promote-footer-view")),({AdView:s,AdInArticleAdView:o,AdSidebarAdView:r}=e("../components/ad-view")),({RecommendationPanelManagerMixinView:D}=e("../mixins/recommendation-panel-manager-mixin-view")),({shortenNumber:tt,trimText:nt,convertURL:Ye,isURL:Je,improveURL:Ke,decodeHTMLEntities:Ge}=e("../../utils/transforms")),({BADGES:l,TRANSITION_END_EVENT:Ee}=e("../../utils/constants")),({ViewpointList:Qe,SpecList:Y}=e("../../collections")),({Topic:Fe,Viewpoint:ze,Section:q,ReactionSet:L,Spec:W,Vote:He}=e("../../models")),Ze=e("moment"),Xe=e("marked"),je=e("urijs"),et=new(e("marked-plaintext"))({spaces:!0}),i="undefined"!=typeof window&&null!==window?e("jquery"):e("../../../../../server/compiled/templating/jquery"),Ae=function(){class e extends b{title(){var e,t;return this.model.get("viewpoints").count()?(t=this.model.get("viewpoints").filter(function(e){return e.get("badge")!==l.flagged}).length,(e=this.model.get("revision").get("title").replace(/what (are|is) the best/i,"Best"))!==this.model.get("revision").get("title")&&(e=t+" "+e.replace("?","")+" as of "+Ze().format("YYYY"))):e=this.model.get("revision").get("title"),super.title(e)}initialize(){var e,t;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window&&"true"===new je(window.location.toString()).search(!0).openToaster)return e=this.getChildrenByView(Le)[0],t=new ze({},{collection:e.collection}),e.setToast($e,{model:t})}}return e.prototype.Model=Fe,e.prototype.Rule=function(){var e;return(e=class extends k.prototype.Rule{template(){return template("._SummaryPageView")}}).prototype.rule={"._QuestionHeaderView=":function(){return new S({model:this.model})},"._LustreAIPromoteFooterView=":function(){return new v},"._SummaryPageSidebarView=":function(){return new Pe({model:this.model})},"._SummaryPageContentContainerView=":function(){return new ne({model:this.model})},"._RecommendationCardAnswerView=":function(){var e,t,n;return t=new je("/topics/random"),(e=this.model.get("tags").at(0).id)&&t.setSearch({filter_tags:e}),n=t.toString(),new I({model:new Fe({URL:n}),ajax:n})},"._SummaryPageToasterView=":function(){return new Le({collection:this.model.get("viewpoints"),openToaster:this.options.openToaster})}},e}.call(this),e.prototype.adUnits=[{selectorId:"leaderboard-ad",type:"leaderboard_atf"}],e.prototype.conditionalAdUnits=[{selectorId:"sidebar-ad",type:"med_rect_atf"},{selectorId:"sidebar-sticky-ad",type:"med_rect_btf"},{type:"desktop_in_article",isMobile:!1},{type:"mobile_in_article",isMobile:!0}],e.prototype.events={"click ._option-image-link":function(){return analytics.track("Image Click Summary")},"click ._option-title-link":function(){return analytics.track("Option Title Click Summary")},"click ._section-title-link":function(){return analytics.track("Pro/Con Title Click Summary")},"click ._section-description-link":function(){return analytics.track("Pro/Con Description Click Summary")}},e}.call(this),ne=function(){class e extends a{initialize(){return super.initialize(...arguments),this.model.get("viewpoints").each(this.managePanelForOption),this.model.get("viewpoints").on("add",this.managePanelForOption)}getTopOptionThreadView(){return new Oe({collection:this.model.get("viewpoints")})}getOptionThreadView(){return new ge({collection:this.model.get("viewpoints")})}getFlaggedOptionThreadView(){return new oe({collection:this.model.get("viewpoints")})}getFilteredOptions(){return this.model.get("viewpoints").filter(function(e){return e.get("badge")!==l.flagged})}getTopOptions(){return this.model.get("viewpoints").filter(function(e){var t;return(t=e.get("badge"))===l.best||t===l.excellent})}getOtherOptions(){return this.model.get("viewpoints").filter(function(e){var t;return(t=e.get("badge"))!==l.best&&t!==l.excellent&&t!==l.flagged})}openExplanationTooltip(e){var t;if(null==(t=this.explainTooltip)||!t.attached)return this.explainTooltip=new ie({model:this.model,follows:e.currentTarget}),analytics.track("Summary Page Info Tooltip Opened",{label:"others"})}openTopExplanationTooltip(e){var t;if(null==(t=this.topExplainTooltip)||!t.attached)return this.topExplainTooltip=new Ie({model:this.model,follows:e.currentTarget}),analytics.track("Summary Page Info Tooltip Opened",{label:"best"})}}return e.prototype.Model=Fe,e.prototype.mixin(D),e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageContentContainerView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.model.isGamingTopic())return""},"._not-gaming-question=":function(){if(this.model.isGamingTopic())return""},"._has-top-options=":function(){if(!this.getTopOptions().length)return""},"._no-top-options=":function(){if(this.getTopOptions().length)return""},"._has-other-options=":function(){if(!this.getOtherOptions().length)return""},"._has-one-top-option=":function(){if(1!==this.getTopOptions().length)return""},"._has-multi-top-options=":function(){if(!(this.getTopOptions().length>1))return""},"._has-multi-other-options=":function(){if(!(this.getOtherOptions().length>1))return""},"._has-options=":function(){if(0===this.getFilteredOptions().length)return""},"._no-options=":function(){if(0!==this.getFilteredOptions().length)return""},"._has-multi-options=":function(){if(!(this.getFilteredOptions().length>1))return""},"._top-options-count=":function(){return this.getTopOptions().length},"._other-options-count=":function(){return this.getOtherOptions().length},"._options-count=":function(){return tt(this.getFilteredOptions().length)},"._meta-option-count@content":function(){return this.getFilteredOptions().length},"._RecommendationFormView=":function(){return new E({collection:this.model.get("viewpoints")})},"._MyRecommendationListView=":function(){return new x({collection:this.model.get("viewpoints")})},"._SummaryPageSpecTableView=":function(){return new Me({model:this.model})},"._SummaryPageTopOptionThreadView=":function(){return this.getTopOptionThreadView()},"._SummaryPageOtherOptionThreadView=":function(){return this.getOptionThreadView()},"._SummaryPageRecommendationsView=":function(){return new Ve({model:this.model})},"._SummaryPageNoOptionsView=":function(){return new ae({model:this.model})},"._FABRecommendView=":function(){return new m({model:this.model})},"._SummaryPageRelatedQuestionListView=":function(){var e;return e=this.model.getRelatedQuestionsUrl(),new be({ajax:e})}},e}.call(this),e.prototype.events={"mouseover ._explain-tooltip-link":function(e){return this.openExplanationTooltip(e)},"click ._explain-tooltip-link":function(e){return this.openExplanationTooltip(e)},"mouseover ._top-explain-tooltip-link":function(e){return this.openTopExplanationTooltip(e)},"click ._top-explain-tooltip-link":function(e){return this.openTopExplanationTooltip(e)}},e}.call(this),Me=function(){class e extends Z{getFilteredOptionList(){var e;return e=this.options.limit,this.getSpecTableSourceCollection().filter(function(e){return e.get("badge")!==l.flagged}).slice(0,e)}hasMoreItems(){return this.getFilteredOptionList().length<this.getSpecTableSourceCollection().count()}hasMoreSpecs(){return this.model.getSpecKeys().length>4-this.options.specLimit}}return e.prototype.options={limit:5,specLimit:2},e.prototype.Rule=function(){var e;return(e=class extends Z.prototype.Rule{template(){return template("._SummaryPageSpecTableView")}}).prototype.rule={"._has-more-items=":function(){if(!this.hasMoreItems())return""},"._not-two-specs=":function(){if(this.model.getSpecKeys().length>=2)return""},"._spec-header-list=":function(){var e,t,n,i,o;for(o=[],e=0,n=(i=this.model.getSpecKeys().slice(0,this.options.specLimit)).length;e<n;e++)t=i[e],o.push(new G({model:new W({key:t})}));return o},"._spec-table-list=":function(){var e;return e=this.getFilteredOptionList(),We.map(e,function(e){return new Te({model:e})})}},e}.call(this),e.prototype.events={"click ._show-more-link":function(e){return new K({model:this.model})}},e}.call(this),Te=function(){class e extends X{}return e.prototype.options={specLimit:2},e.prototype.Rule=function(){var e;return(e=class extends X.prototype.Rule{template(){return template("._SummaryPageSpecTableOptionRowView")}}).prototype.rule={"._not-two-specs=":function(){if(this.getParentModel().getSpecKeys().length>=2)return""},"._option-background-image@style+":function(){var e,t;if(t=null!=(e=this.getOption().get("revision").get("images").at(0))?e.getImageThumbnailURL():void 0)return`background-image: URL('${t}');`},"@class+":function(){if(this.model.get("badge")===l.best||this.model.get("badge")===l.excellent)return"top"},"._SlantScoreInteractableSimpleBadgeView=":function(){return new H({model:this.model})}},e}.call(this),e.prototype.events={"click ._title-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return this.popup=new J({model:this.getOption(),follows:e.currentTarget})},"click ._summary-option-link":function(e){var t,n,o;return t=null!=(n=this.getOption())?n.get("id"):void 0,o=i(`#${t}`),i("html, body").animate({scrollTop:null!=o?o.offset().top:void 0},{duration:200,complete:function(){if(t)return"undefined"!=typeof window&&null!==window?window.location.hash=t:void 0}}),analytics.track("Summary Page Spec Table Option Link Clicked")},"mouseover .SpecTable-TitleCell":function(e){var t;if((t=e.currentTarget).scrollWidth>i(t).outerWidth())return new qe({model:this.getOption(),follows:t})}},e}.call(this),Pe=function(){class e extends k{}return e.prototype.Model=Fe,e.prototype.Rule=function(){var e;return(e=class extends k.prototype.Rule{template(){return template("._SummaryPageSidebarView")}}).prototype.rule={"._SidebarAsyncActivityView=":function(){return new F({collection:this.model.get("events")})},"._SidebarRelatedQuestionListView=":function(){var e;return e=this.model.getRelatedQuestionsUrl(),new z({ajax:e})},"._JoinTagSidebarView=":function(){return new g({collection:this.model.get("tags")})},"._SummaryPageSidebarAdView=":function(){return new Se},"._SummaryPageSidebarStickyAdView=":function(){return new ke}},e}.call(this),e.prototype.events={"click ._expand-description-link":function(e){return new we({model:this.model})}},e}.call(this),fe=function(){class e extends R{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("reactionSet").get("outOfDate"),"repaint",function(){return this.update()}),this.listenTo(this.model.get("reactionSet").get("flag"),"repaint",function(){return this.update()}),this.listenTo(this.model,"scrollTo",()=>i("html, body").animate({scrollTop:this.$el.position().top-40},300))}getOptionIndex(){return this.model.collection.indexOf(this.model)}}return e.prototype.adOffset=5,e.prototype.adInterval=4,e.prototype.Rule=function(){var e;return(e=class extends R.prototype.Rule{template(){return template("._SummaryPageOptionView")}}).prototype.rule={"._is-first-option=":function(){if(0!==this.getOptionIndex())return""},"._is-3rd-option=":function(){if(2!==this.getOptionIndex())return""},"._is-nth-option=":function(){var e;if((e=this.getOptionIndex())<this.adOffset||(e-this.adOffset)%this.adInterval!=0)return""},"._option-id@id":function(){return this.model.get("id")},"._no-media-class@class+":function(){if(0===this.getOption().get("revision").get("images").length)return"noMedia"},"._meta-option-rank@content=":function(){return this.model.collection.indexOf(this.model)+1},"._meta-option-text@content=":function(){var e,t,n;return n=(e=this.getOption()).get("revision").get("text").trim(),(t=e.get("sections").filter(function(e){return 0===e.get("reactionSet").get("flag").count()}).map(function(e){var t,n;return n=e.get("revision").get("title"),(t=e.get("revision").get("text").trim())?`${n}: ${t}`:n})).length&&(n+=`${null!=n?n:{" | ":""}}${t.join(" | ")}`),n||e.get("revision").get("title")},"._SummaryPageOptionTabsView=":function(){return new he({model:this.model})},"._SummaryPageOptionRecommendationView=":function(){return new ue({collection:this.model.get("votes")})},"._RecommendationDrawerAgreeView=":function(){return new O({model:this.model})},"._RecommendationDrawerDisagreeView=":function(){return new A({model:this.model})},"._SlantScoreInteractableBadgeView=":function(){return new Q({model:this.model})},"._ImageCarouselView=":function(){return new f({collection:this.getOption().get("revision").get("images")})},"._AdInArticleAdView=":function(){return new o}},e}.call(this),e.prototype.events={"click ._reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new ve({model:this.model.get("reactionSet"),follows:e.currentTarget}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})}},e}.call(this),le=function(){class e extends fe{}return e.prototype.Rule=function(){var e;return(e=class extends fe.prototype.Rule{}).prototype.rule={"._has-gallery=":function(){return""},"._ImageCarouselView=":function(){return""}},e}.call(this),e}.call(this),he=function(){class e extends a{initialize(){if(this.activeTabId="all",super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.activeTabId=this.$("._tab-link").first().data("tab-id"),this.listenTo(this.model.get("sections"),"add",function(){return this.update()})}update(){var e;return"undefined"!=typeof window&&null!==window?(this.updateSelectedTab(),e=(()=>{if(super.update(...arguments),this.updateSelectedTab(),this.isExpanded)return this.expandTabContent()}),this.tabAnimating?this.$("._tab-selected-indicator").one(Ee,e):e(),this.updateIndicatorPosition()):super.update(...arguments)}hasSections(){return this.model.get("sections").any(function(e){return!e.isMarked()})}getPros(){return this.model.get("sections").filter(function(e){return!1===e.get("isCon")&&!e.isMarked()})}getCons(){return this.model.get("sections").filter(function(e){return!0===e.get("isCon")&&!e.isMarked()})}hasSpecs(){var e;return(null!=(e=this.model.parents("topic"))?e.isGamingTopic():void 0)?this.hasGamingSpecs():this.getSpecs().count()}hasGamingSpecs(){var e;return null!=this.hasSpecsCached?this.hasSpecsCached:(e=se.prototype.gamingSpecKeys,this.hasSpecsCached=this.getSpecs().some(function(t){return We.contains(e,t.get("key"))}))}getSpecs(){return this.model.get("masterOption").get("specs")}getTotalCount(){var e;return e=this.getPros().length+this.getCons().length,e+=this.hasSpecs()?1:0}expandTabContent(){return this.$("._section-list").addClass("expanded"),this.$("._see-more-link").addClass("hidden"),this.$("._hide-more-link").removeClass("hidden"),We.each(this.getChildrenByView(Ce),function(e){return e.initializeSectionContent()})}collapseTabContent(){return this.$("._section-list").removeClass("expanded"),this.$("._see-more-link").removeClass("hidden"),this.$("._hide-more-link").addClass("hidden")}isReactedActivity(e,t){return e.get("reactionSet").get(t).count()>0}isOutOfDateActivity(e){return this.isReactedActivity(e,"outOfDate")}isFlaggedActivity(e){return this.isReactedActivity(e,"flag")}updateSelectedTab(){return this.$("._tab-link").removeClass("selected"),this.$(`._tab-link[data-tab-id='${this.activeTabId}']`).addClass("selected")}updateIndicatorPosition(){var e;if(e=this.getSelectedIndicatorStyles())return this.$("._tab-selected-indicator").css(e)}getSelectedIndicatorStyles(){var e;if("undefined"!=typeof window&&null!==window&&(e=this.$(`._tab-link[data-tab-id='${this.activeTabId}']`)).length)return{transform:`translateX(${e.position().left}px)`,width:e.width()+2*parseInt(e.css("padding-left"))}}}return e.prototype.badgedItemLimit=6,e.prototype.itemLimit=2,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageOptionTabsView")}}).prototype.rule={"._has-items=":function(){if(!this.hasSpecs()&&!this.hasSections())return""},"._is-regular-activity=":function(){if(this.isOutOfDateActivity(this.model)||this.isFlaggedActivity(this.model))return""},"._has-pros=":function(){if(!(this.getPros().length>0))return""},"._has-cons=":function(){if(!(this.getCons().length>0))return""},"._has-specs=":function(){if(!this.hasSpecs())return""},"._has-more-items=":function(){var e;switch(this.activeTabId){case"pros":e=this.getPros().length;break;case"cons":e=this.getCons().length;break;case"specs":e=1;break;default:e=this.getTotalCount()}if(!(e>(this.model.isAP()?this.badgedItemLimit:this.itemLimit)))return""},"._is-pros-active=":function(){if("pros"!==this.activeTabId)return""},"._is-cons-active=":function(){if("cons"!==this.activeTabId)return""},"._items-count=":function(){return this.getTotalCount()},"._pro-count=":function(){return this.getPros().length},"._con-count=":function(){return this.getCons().length},"._no-badge-class@class+":function(){if(!this.model.isAP())return"noBadge"},"._tab-selected-indicator@style+":function(){var e;return(e=this.getSelectedIndicatorStyles())?`width: ${e.width}px; transform: ${e.transform};`:""},"._SummaryPageOptionTabsContentView=":function(){return new de({model:this.model,activeTabId:this.activeTabId})}},e}.call(this),e.prototype.events={"click ._tab-link":function(e){var t;return(t=this.$(e.currentTarget).data("tabId"))&&(this.activeTabId=t,this.tabAnimating=!0,this.update(),this.tabAnimating=!1),analytics.track("Summary Page Option Tab Changed",{type:t})},"click ._see-more-link":function(){return this.isExpanded=!0,this.expandTabContent(),analytics.track("See More Click Summary")},"click ._hide-more-link":function(){var e,t,n,o;if(this.isExpanded=!1,this.collapseTabContent(),(null!=(t=this.$("._see-more-link").offset())?t.top:void 0)<(null!=(n=i(window))?n.scrollTop():void 0)&&(e=this.getParentByView(fe)))return i("html, body").scrollTop((null!=(o=e.$el.offset())?o.top:void 0)-40)}},e}.call(this),de=function(){class e extends w{initialize(){return this.sortCounts={},super.initialize(...arguments),this.collapseMicrocards()}getModels(){return this.model.get("sections").models.concat(this.model.get("masterOption").get("specs"))}getItemView(e){var t;return this.isSection(e)?Ce:this.isSpecList(e)?(null!=(t=this.model.parents("topic"))?t.isGamingTopic():void 0)?se:this.getSpecListView():void 0}filter(e){var t,n,i;return null==(t=null!=(n=this.filters[null!=(i=this.options)?i.activeTabId:void 0])?n.call(this,e):void 0)||t}sortBy(e){var t;return this.isSpecList(e)?1e3:(this.isPro(e)?t="pros":this.isCon(e)&&(t="cons"),null==this.sortCounts[t]&&(this.sortCounts[t]=Object.keys(this.sortCounts).length?1:0),this.sortCounts[t]+=2)}isSection(e){return e instanceof q}isPro(e){return this.isSection(e)&&!1===e.get("isCon")&&!e.isMarked()}isCon(e){return this.isSection(e)&&!0===e.get("isCon")&&!e.isMarked()}isSpecList(e){return e instanceof Y}getSpecListView(){return ce}collapseMicrocards(){return this.mobileCardsExpanded=!1,this.$el.addClass("mobileMicrocardsCollapsed"),this.$el.removeClass("mobileMicrocardsExpanded")}expandMicrocards(){return this.mobileCardsExpanded=!0,this.$el.addClass("mobileMicrocardsExpanded"),this.$el.removeClass("mobileMicrocardsCollapsed")}}return e.prototype.Model=ze,e.prototype.Rule=class extends w.prototype.Rule{template(){return template("._SummaryPageOptionTabsContentListView")}},e.prototype.filters={all:function(e){return this.isSection(e)?!e.isMarked():this.isSpecList(e)?this.hasSpecs():void 0},pros:function(e){return this.isPro(e)},cons:function(e){return this.isCon(e)},specs:function(e){return this.isSpecList(e)&&this.hasSpecs()}},e.prototype.hasSpecs=he.prototype.hasSpecs,e.prototype.hasGamingSpecs=he.prototype.hasGamingSpecs,e.prototype.getSpecs=he.prototype.getSpecs,e.prototype.events={"click ._expand-item-link":function(e){return this.mobileCardsExpanded?this.collapseMicrocards():this.expandMicrocards()},"touchend ._tabs-content-list":function(e){if(!this.scrollEventSent)return We.defer(()=>{if(this.$("._tabs-content-list").scrollLeft()>50)return this.scrollEventSent=!0,analytics.track("Microcard horizontally scrolled")})}},e}.call(this),me=function(){class e extends V{filter(e){return null!=e.get("revision").get("text")}update(){var e,t;return(this.firstPageLoaded||null==(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.prev:void 0))&&(this.firstPageLoaded=!0),super.update(...arguments)}}return e.prototype.Collection=Qe,e.prototype.ItemView=fe,e.prototype.options={infiniteScroll:!1},e.prototype.Rule=function(){var e;return(e=class extends V.prototype.Rule{template(){return template("._SummaryPageOptionThreadView")}}).prototype.rule={"._load-more-link":{"=":function(){var e;if(null==(null!=(e=this.collection.meta("properties"))?e.page.next:void 0))return""},"@href":function(){var e;return e=new je(this.collection.meta("properties").page.next).query(),new je(Ke(this.collection.parents("topic"))).query(e)}},"._has-previous-page=":function(){if(this.firstPageLoaded)return""},"._question-link@href":function(){return Ke(this.collection.parents("topic"),this.collection.parents("topic").get("communityURL"))},"._SummaryPageAddOptionView=":function(){return new te({collection:this.collection})}},e}.call(this),e}.call(this),Oe=function(){class e extends me{filter(e){return(e.get("badge")===l.best||e.get("badge")===l.excellent)&&super.filter(...arguments)}}return e.prototype.Rule=class extends me.prototype.Rule{template(){return template("._SummaryPageTopOptionThreadView")}},e}.call(this),ge=function(){class e extends me{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.collection,"moreViewpointsLoaded",this.update)}filter(e){return super.filter(...arguments)&&e.get("badge")!==l.best&&e.get("badge")!==l.excellent&&e.get("badge")!==l.flagged}}return e.prototype.Rule=function(){var e;return(e=class extends me.prototype.Rule{template(){return template("._SummaryPageOtherOptionThreadView")}}).prototype.rule={"._has-flagged-options=":function(){if(!this.collection.findWhere({badge:l.flagged}))return""},"._SummaryPageFlaggedOptionThreadView=":function(){return new oe({collection:this.collection})},"._FABRecommendButtonView=":function(){return new h({model:this.collection.parents("topic")})}},e}.call(this),e}.call(this),oe=function(){class e extends me{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.collapseFlaggedList()}filter(e){return super.filter(...arguments)&&e.get("badge")===l.flagged}expandFlaggedList(){var e,t;return this.expanded=!0,e=(t=this.$("._collapsible-list")).prop("scrollHeight"),t.css({"max-height":e}),this.$("._expand-flagged-options-link").addClass("hidden"),this.$("._collapse-flagged-options-link").removeClass("hidden")}collapseFlaggedList(){return this.expanded=!1,this.$("._collapsible-list").css({"max-height":0}),this.$("._expand-flagged-options-link").removeClass("hidden"),this.$("._collapse-flagged-options-link").addClass("hidden")}}return e.prototype.ItemView=le,e.prototype.Rule=class extends me.prototype.Rule{template(){return template("._SummaryPageFlaggedOptionThreadView")}},e.prototype.events={"click ._expand-flagged-options-link":function(e){return this.fetched?this.expandFlaggedList():(this.$el.addClass("Loading"),this.collection.fetch({data:{filter:"flagged"},remove:!1,silent:!0,success:()=>(this.fetched=!0,this.update(),this.$el.removeClass("Loading"),We.delay(()=>this.expandFlaggedList(),100)),error:()=>this.$el.removeClass("Loading")}),analytics.track("Flagged Options Section Expanded"))},"click ._collapse-flagged-options-link":function(e){return this.collapseFlaggedList()},"resize window":function(e){if(this.expanded)return this.expandFlaggedList()}},e}.call(this),Ve=function(){class e extends a{}return e.prototype.Model=Fe,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageRecommendationsView")}}).prototype.rule={"._recommendations-count=":function(){return this.model.get("communityRecommendations").count()||""},"._ContributorsView=":function(){return new p({collection:this.model.get("users")})},"._RecommendationFormView=":function(){return new E({collection:this.model.get("viewpoints")})},"._PromoteQuestionCardView=":function(){return new C({model:this.model})},"._MyRecommendationListView=":function(){return new x({collection:this.model.get("viewpoints")})},"._CommunityRecommendationsView=":function(){return new c({collection:this.model.get("communityRecommendations")})}},e}.call(this),e}.call(this),xe=function(){class e extends M{}return e.prototype.Model=L,e.prototype.Rule=function(){var e;return(e=class extends M.prototype.Rule{}).prototype.rule={"._no-comments=":function(){if(this.model.parents("section").get("comments").count())return""}},e}.call(this),e}.call(this),_e=function(){class e extends P{}return e.prototype.Model=L,e.prototype.Rule=class extends P.prototype.Rule{},e.prototype.DefaultStepView=xe,e}.call(this),ye=function(){class e extends T{}return e.prototype.Model=L,e.prototype.Rule=class extends T.prototype.Rule{},e}.call(this),ve=function(){class e extends P{}return e.prototype.Model=L,e.prototype.Rule=class extends P.prototype.Rule{},e.prototype.DefaultStepView=ye,e}.call(this),Ce=function(){class e extends N{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return We.defer(()=>this.initializeSectionContent())}initializeSectionContent(){var e,t;return t=this.$("._item-content"),e=Math.round(t.prop("scrollHeight")),this.originalHeight||(this.originalHeight=Math.round(t.height())),this.originalHeight<e?t.addClass("expandable"):t.removeClass("expandable"),414<e?t.addClass("hasMore"):t.removeClass("hasMore")}expandSectionContent(){var e,t;return e=(t=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<e&&(t.css("max-height",e),t.removeClass("collapsed")),this.expanded=!0}collapseSectionContent(){var e,t;return e=(t=this.$("._item-content")).prop("scrollHeight"),this.originalHeight<e&&(t.removeAttr("style"),t.addClass("collapsed")),this.expanded=!1}toggleSectionContent(){if(this.$("._item-content").hasClass("expandable"))return this.expanded?this.collapseSectionContent():(this.expandSectionContent(),analytics.track("Microcard Content Expanded"))}}return e.prototype.Rule=function(){var e;return(e=class extends N.prototype.Rule{template(){return template("._SummaryPageSectionView")}}).prototype.rule={"._section-body=":function(){var e,t;if(t=null!=(e=this.model.get("revision").get("text"))?e:"")return Ge(Xe(t,{renderer:et}))},"@class+":function(){return!0===this.model.get("isCon")?"con":"pro"},"._MultiUserView=":function(){return new _({collection:this.model.get("contributors")})}},e}.call(this),e.prototype.events={"click ._section-reaction-dropdown-link":function(e){var t;if(null==(t=this.popup)||!t.attached)return i(e.currentTarget).addClass("selected"),this.popup=new _e({model:this.model.get("reactionSet"),follows:e.currentTarget,align:"left"}),this.listenToOnce(this.popup,"dropdown-close",function(){return i(e.currentTarget).removeClass("selected")})},"resize window":function(){return this.initializeSectionContent(),this.expanded?this.expandSectionContent():this.collapseSectionContent()},"click ._expand-item-link":function(e){return this.toggleSectionContent(),!0},"click ._section-link":function(e){return analytics.track("Summary Page Section Microcard See All Link Clicked")}},e}.call(this),pe=function(){class e extends ee{}return e.prototype.Model=W,e.prototype.Rule=class extends ee.prototype.Rule{template(){return template("._SummaryPageOptionSpecView")}},e}.call(this),ce=function(){class e extends w{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return We.defer(()=>this.initializeSectionContent())}}return e.prototype.Collection=Y,e.prototype.ItemView=pe,e.prototype.limit=4,e.prototype.Rule=function(){var e;return(e=class extends w.prototype.Rule{template(){return template("._SummaryPageOptionSpecListView")}}).prototype.rule={"._has-more-specs=":function(){if(!(this.collection.length>this.limit))return""},"._specs-link@href":function(){var e,t;if(e=this.collection.parents("viewpoint"))return null!=(t=new je(Ke(e)))?t.hash("specs"):void 0}},e}.call(this),e.prototype.initializeSectionContent=Ce.prototype.initializeSectionContent,e.prototype.expandSectionContent=Ce.prototype.expandSectionContent,e.prototype.collapseSectionContent=Ce.prototype.collapseSectionContent,e.prototype.toggleSectionContent=Ce.prototype.toggleSectionContent,e.prototype.events=We.assign({},Ce.prototype.events,{"click ._specs-link":function(e){return analytics.track("Summary Page Specs Microcard See All Link Clicked")}}),e}.call(this),se=function(){class e extends ce{filter(e){return We.contains(this.gamingSpecKeys,e.get("key"))}sortBy(e){return"Steam Rating"===e.get("key")?0:1}}return e.prototype.gamingSpecKeys=["Steam Rating","Genre","Co-Op","Controller Support"],e.prototype.limit=null,e.prototype.Rule=function(){var e;return(e=class extends ce.prototype.Rule{}).prototype.rule={"._has-more-specs=":function(){if(!this.collection.any(e=>!We.contains(this.gamingSpecKeys,e.get("key"))))return""}},e}.call(this),e}.call(this),ue=function(){class e extends ${}return e.prototype.Rule=class extends $.prototype.Rule{template(){return template("._SummaryPageOptionRecommendationView")}},e}.call(this),Le=function(){class e extends Be{initialize(e){var t;if(super.initialize(...arguments),e.openToaster)return t=new ze({},{collection:this.collection}),this.setToast($e,{model:t})}}return e.prototype.DefaultToastView=De,e}.call(this),te=function(){class e extends B{createPopupView(e){return new U({collection:this.collection,follows:e,align:"left",searchQuery:e.val()})}search(e){var t;return null!=(t=this.popup)?t.search(e):void 0}}return e.prototype.Collection=Qe,e.prototype.Rule=class extends B.prototype.Rule{template(){return template("._SummaryPageAddOptionView")}},e}.call(this),ae=function(){class e extends a{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(window.currentUser,"change",this.update),We.defer(()=>this.update())}}return e.prototype.Model=Fe,e.prototype.Rule=function(){var e;return(e=class extends a.prototype.Rule{template(){return template("._SummaryPageNoOptionsView")}}).prototype.rule={"._is-asked=":function(){if("undefined"==typeof window||null===window||this.model.get("createdEvent").get("user").id!==window.currentUser.id)return""}},e}.call(this),e.prototype.events={"click ._share-google-link":function(e){return this.model.postToGoogle()},"click ._share-facebook-link":function(e){return this.model.postToFacebook()},"click ._share-twitter-link":function(e){return this.model.postToTwitter()}},e}.call(this),we=function(){class e extends y{}return e.prototype.Model=Fe,e.prototype.Rule=class extends k.prototype.Rule{template(){return template("._SummaryPageQuestionDescriptionModalView")}},e}.call(this),ie=function(){class e extends Ne{initialize(){return this.analyticsTimeoutId=setTimeout(this.sendReadAnalytics,1500),super.initialize(...arguments)}close(){return this.analyticsTimeoutId&&clearTimeout(this.analyticsTimeoutId),super.close(...arguments)}sendReadAnalytics(){return analytics.track("Summary Page Info Tooltip Read",{label:"others"})}getFilteredOptions(){return ne.prototype.getFilteredOptions.apply(this)}getTopOptions(){return ne.prototype.getTopOptions.apply(this)}getOtherOptions(){return ne.prototype.getOtherOptions.apply(this)}}return e.prototype.Model=Fe,e.prototype.options={interactive:!0},e.prototype.Rule=function(){var e;return(e=class extends Ne.prototype.Rule{template(){return template("._SummaryPageExplanationTooltipView")}}).prototype.rule={"._is-gaming-question=":function(){if(!this.model.isGamingTopic())return""},"._not-gaming-question=":function(){if(this.model.isGamingTopic())return""},"._has-top-options=":function(){if(!this.getTopOptions().length)return""},"._no-top-options=":function(){if(this.getTopOptions().length)return""},"._has-other-options=":function(){if(!this.getOtherOptions().length)return""},"._has-one-top-option=":function(){if(1!==this.getTopOptions().length)return""},"._has-multi-top-options=":function(){if(!(this.getTopOptions().length>1))return""},"._has-one-other-option=":function(){if(1!==this.getOtherOptions().length)return""},"._has-multi-other-options=":function(){if(!(this.getOtherOptions().length>1))return""},"._has-options=":function(){if(0===this.getFilteredOptions().length)return""},"._no-options=":function(){if(0!==this.getFilteredOptions().length)return""},"._has-multi-options=":function(){if(!(this.getFilteredOptions().length>1))return""},"._top-options-count=":function(){return this.getTopOptions().length},"._other-options-count=":function(){return this.getOtherOptions().length},"._options-count=":function(){return tt(this.getFilteredOptions().length)},"._recommendations-count=":function(){return this.model.get("communityRecommendations").count()||""}},e}.call(this),e}.call(this),Ie=function(){class e extends ie{sendReadAnalytics(){return analytics.track("Summary Page Info Tooltip Read",{label:"best"})}}return e.prototype.Rule=class extends ie.prototype.Rule{template(){return template("._SummaryPageTopExplanationTooltipView")}},e}.call(this),Re=function(){class e extends j{}return e.prototype.Rule=class extends j.prototype.Rule{template(){return template("._SummaryPageRelatedQuestionListQuestionView")}},e.prototype.events={"click ._question-link":function(){return analytics.track("Related Question Card Link Clicked")}},e}.call(this),be=function(){class e extends z{}return e.prototype.ItemView=Re,e.prototype.Rule=class extends z.prototype.Rule{template(){return template("._SummaryPageRelatedQuestionListView")}},e}.call(this),re=function(){class e extends s{}return e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._SummaryPageHeaderAdView")}},e}.call(this),Se=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SummaryPageSidebarAdView")}},e}.call(this),ke=function(){class e extends r{}return e.prototype.Rule=class extends r.prototype.Rule{template(){return template("._SummaryPageSidebarStickyAdView")}},e}.call(this),t.exports={SummaryPageView:Ae,SummaryPageSpecTableView:Me,SummaryPageSpecTableOptionRowView:Te,SummaryPageSidebarView:Pe,SummaryPageContentContainerView:ne,SummaryPageOptionView:fe,SummaryPageMinimalOptionView:le,SummaryPageOptionTabsView:he,SummaryPageOptionTabsContentListView:de,SummaryPageOptionSpecView:pe,SummaryPageOptionSpecListView:ce,SummaryPageMediaOptionSpecListView:se,SummaryPageOptionThreadView:me,SummaryPageTopOptionThreadView:Oe,SummaryPageOtherOptionThreadView:ge,SummaryPageFlaggedOptionThreadView:oe,SummaryPageRecommendationsView:Ve,SummaryPageReactionMenuSectionStepView:xe,SummaryPageReactionMenuSectionDropdownView:_e,SummaryPageReactionMenuOptionStepView:ye,SummaryPageReactionMenuOptionDropdownView:ve,SummaryPageSectionView:Ce,SummaryPageOptionRecommendationView:ue,SummaryPageToasterView:Le,SummaryPageAddOptionView:te,SummaryPageNoOptionsView:ae,SummaryPageQuestionDescriptionModalView:we,SummaryPageExplanationTooltipView:ie,SummaryPageTopExplanationTooltipView:Ie,SummaryPageRelatedQuestionListQuestionView:Re,SummaryPageRelatedQuestionListView:be,SummaryPageHeaderAdView:re,SummaryPageSidebarAdView:Se,SummaryPageSidebarStickyAdView:ke}},{"../../../../../server/compiled/templating/jquery":461,"../../collections":2,"../../models":34,"../../utils/constants":85,"../../utils/transforms":89,"../../views-v2/components/lustre-ai-promote-footer-view":117,"../base-view":259,"../components/ad-view":261,"../components/contributors-view":267,"../components/dropdown-view":268,"../components/fab-view":271,"../components/image-carousel-view":273,"../components/join-tag-sidebar-view":277,"../components/modal-view":285,"../components/multi-user-view":287,"../components/promote-question-view":295,"../components/question-header-view":298,"../components/reaction-menu-dropdown-view":303,"../components/recommendation-card-view":305,"../components/recommendation-drawer-view":306,"../components/recommendation-form-view":308,"../components/recommendation-view":311,"../components/search-option-dropdown-view":314,"../components/searchable-popup-invoker-view":316,"../components/sidebar-activity-view":317,"../components/slant-score-view":320,"../components/spec-table-view":323,"../components/toaster-view":327,"../components/tooltip-view":328,"../lists/list-view":334,"../lists/my-recommendation-list-view":335,"../lists/sidebar-related-question-list-view":341,"../mixins/recommendation-panel-manager-mixin-view":349,"../models/option-view":359,"../models/question-view":361,"../models/section-view":363,"../models/spec-view":364,"../threads/community-recommendation-thread-view":398,"../threads/option-thread-view":402,"./post-page-view":390,jquery:438,marked:440,"marked-plaintext":439,moment:441,underscore:448,urijs:452}],395:[function(e,t,n){arguments[4][249][0].apply(n,arguments)},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/question-card-view":296,"../components/recommendation-card-view":305,"../components/recommendation-option-card-view":309,"../components/sidebar-tag-filter-view":318,"../components/tag-dropdown-view":325,"../components/toaster-view":327,"../lists/tag-list-view":343,"../models/tag-view":365,"./page-view":387,dup:249,moment:441,underscore:448,urijs:452}],396:[function(e,t,n){arguments[4][250][0].apply(n,arguments)},{"../components/question-editor-view":297,"../models/question-view":361,"./post-page-view":390,dup:250}],397:[function(e,t,n){arguments[4][251][0].apply(n,arguments)},{"../../collections":2,"../components/activity-view":260,"../models/event-view":353,"./thread-view":404,dup:251}],398:[function(e,t,n){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S,k,P,T,M,L,I,O;({BaseView:i}=e("../base-view")),({PanelView:g}=e("../components/panel-view")),({ListView:m}=e("../lists/list-view")),({ThreadView:V}=e("../threads/thread-view")),({UserView:b}=e("../models/user-view")),({SectionView:x}=e("../models/section-view")),({OptionVoteView:f}=e("../models/option-vote-view")),({CommunityRecommendationPanelView:l}=e("../components/community-recommendation-panel-view")),({ReactionTextButtonUsefulView:v}=e("../components/reaction-button-set-view")),({ViewpointVote:C,User:R,Section:y,ReactionSet:w}=e("../../models")),({VoteList:S,SectionList:_}=e("../../collections")),({improveURL:T,splitUnit:I,shortenNumber:L,trimText:O,decodeHTMLEntities:P}=e("../../utils/transforms")),k=e("underscore"),M=e("moment"),e("marked"),new(e("marked-plaintext"))({spaces:!0}),h=function(){class e extends i{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.stopListening(this.collection),null!=(e=this.collection.parents("topic"))?e.get("viewpoints").each(e=>(this.listenTo(e.get("votes"),"vote",this.onVote),this.listenTo(e.get("votes"),"recommendationTextChange",this.onRecommendationTextChange))):void 0}setUserCommunityRecommendation(e,t){var n,i,o,r,s;if(s=null!=(i=e.parents("viewpoint"))?i.get("id"):void 0,null!=(r=this.collection.find(function(e){var t;return e.get("user").get("username")===("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)&&(null!=(t=e.parents("viewpoint"))?t.get("id"):void 0)===s}))&&null!=(n=null!=(o=e.at(0))?o.get(t):void 0))return r.set(t,n)}onVote(e){return this.setUserCommunityRecommendation(e,"delta")}onRecommendationTextChange(e){return this.setUserCommunityRecommendation(e,"text")}}return e.prototype.Collection=S,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommunityRecommendationsView")}}).prototype.rule={"._CommunityRecommendationThreadView=":function(){return new p({collection:this.collection})},"._CommunityRecommendationNoTextThreadView=":function(){return new s({collection:this.collection})}},e}.call(this),e}.call(this),r=function(){class e extends f{initialize(){if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return this.listenTo(this.model.get("comments"),"add",this.update)}openRecPanel(){var e;return null!=(e=new g)&&e.setContent(l,{model:this.model}),e}fetchVote(e){var t,n;return this.fetched?e():(this.$el.addClass("Loading"),n=(()=>(this.fetched=!0,this.$el.removeClass("Loading"),e())),t=(()=>this.$el.removeClass("Loading")),this.model.fetch({silent:!0,success:n,error:t}))}getRecType(){return"Community"}}return e.prototype.Model=C,e.prototype.Rule=function(){var e;return(e=class extends f.prototype.Rule{template(){return template("._CommunityRecommendationItemView")}}).prototype.rule={"._is-empty-recommendation=":function(){var e;if((null!=(e=this.model.get("text"))?e.trim():void 0)||this.hasSections())return""},"._time-ago=":function(){return M(new Date(this.model.get("created"))).fromNow()},"._user-first-name=":function(){var e;return null!=(e=this.model.get("user").get("displayName")||this.model.get("username"))?e.split(" ")[0]:void 0},"._is-downvote-class@class+":function(){if(this.model.get("delta")<0)return"downVote"},"._CommunityRecommendationUserView=":function(){return new d({model:this.model.get("user")})},"._CommunityRecommendationHighlightListView=":function(){var e;return new o({collection:null!=(e=this.model.parents("viewpoint"))?e.get("sections"):void 0})},"._CommunityRecommendationReactionsView=":function(){return new u({model:this.model.get("reactionSet")})}},e}.call(this),e.prototype.events={"click ._full-recommendation-link":function(){return this.fetchVote(()=>this.openRecPanel()),analytics.track("Community Rec Expand Link Clicked")},"click ._recommendation-comments-link":function(){return this.fetchVote(()=>{var e;return null!=(e=this.openRecPanel())?e.scrollTo("._comments-section"):void 0}),analytics.track(`${this.getRecType()} Rec Comments Link Clicked`)},"click ._option-link":function(){return analytics.track(`${this.getRecType()} Rec Option Title Clicked`)}},e}.call(this),p=function(){class e extends V{initialize(){var e;if(super.initialize(...arguments),"undefined"!=typeof window&&null!==window)return null!=(e=this.collection.parents("topic"))&&e.get("viewpoints").forEach(e=>this.listenTo(e.get("votes"),"vote repaint",this.update)),this.listenTo(this.collection,"votesLoaded",this.update)}filter(e){return("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0)!==e.get("user").get("username")&&e.isVoted()&&this.isOfType(e)}isOfType(e){return e.get("text").trim()}}return e.prototype.Collection=S,e.prototype.options={infiniteScroll:!1},e.prototype.ItemView=r,e.prototype.Rule=class extends V.prototype.Rule{template(){return template("._CommunityRecommendationThreadView")}},e}.call(this),s=function(){class e extends p{initialize(){return this.isExpanded=!1,super.initialize(...arguments)}update(){if(super.update(...arguments),"undefined"!=typeof window&&null!==window)return this.isExpanded?this.$(".CommunityRecommendation-List").removeClass("collapsed"):void 0}isOfType(e){return!e.get("text").trim()}}return e.prototype.Rule=function(){var e;return(e=class extends p.prototype.Rule{template(){return template("._CommunityRecommendationNoTextThreadView")}}).prototype.rule={"._has-recommendations=":function(){if(!this.collection.count())return""},"._has-more-items=":function(){var e,t;if(null==(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0)&&(this.isExpanded||!k.any(this.getItems(),this.isOfType)))return""},"._is-showing-recommendations=":function(){if(!(this.isExpanded||this.collection.meta("featuredRecsCount")>0))return""},"._not-showing-recommendations=":function(){if(this.isExpanded||this.collection.meta("featuredRecsCount")>0)return""},"._displayed-recommendations-count=":function(){return this.isExpanded?this.collection.length:this.collection.filter(function(e){var t;return(null!=(t=e.get("text"))?t.trim():void 0)&&e.isVoted()}).length},"._total-recommendations-count=":function(){return this.collection.count()}},e}.call(this),e.prototype.events={"click ._load-more-link":function(e){var t,n,i;return e.stopImmediatePropagation(),e.preventDefault(),analytics.track("Community Recs Load More Button Clicked"),t=this.collection.length>this.collection.meta("featuredRecsCount"),this.isExpanded||!t?(this.collection.once("sync",()=>this.collection.trigger("votesLoaded")),void this.loadMore()):(this.isExpanded=!0,null!=(null!=(n=this.collection.meta("properties"))&&null!=(i=n.page)?i.next:void 0)&&this.count()<4?this.loadMore():this.update())},"click ._show-recommendations-link":function(e){return this.isExpanded=!0,analytics.track("Community Recs Show All Button Clicked"),this.update()}},e}.call(this),d=function(){class e extends b{}return e.prototype.Model=R,e.prototype.Rule=function(){var e;return(e=class extends b.prototype.Rule{template(){return template("._CommunityRecommendationUserView")}}).prototype.rule={"._is-own-recommendation=":function(){if(this.model.get("username")!==("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._not-own-recommendation=":function(){if(this.model.get("username")===("undefined"!=typeof window&&null!==window?window.currentUser.get("username"):void 0))return""},"._user-first-name=":function(){var e;return null!=(e=this.model.get("displayName")||this.model.get("username"))?e.split(" ")[0]:void 0},"._created-time-ago=":function(){return M(new Date(this.model.get("created"))).fromNow(!0)},"._total-recs-count=":function(){return I(L(this.model.get("testimonial_recs")||0,0)).value},"._total-recs-count-unit=":function(){return I(L(this.model.get("testimonial_recs")||0,0)).unit},"._karma-count=":function(){return I(L(this.model.get("testimonial_karma")||0,0)).value},"._karma-count-unit=":function(){return I(L(this.model.get("testimonial_karma")||0,0)).unit}},e}.call(this),e.prototype.events={"click ._user-link":function(e){return analytics.track("Community Rec User Profile Link Clicked")}},e}.call(this),c=function(){class e extends x{}return e.prototype.Model=y,e.prototype.Rule=class extends x.prototype.Rule{template(){return template("._CommunityRecommendationSectionView")}},e}.call(this),o=function(){class e extends m{filter(e){return e.get("votes").meta("delta")>0&&!e.isMarked()}}return e.prototype.Collection=_,e.prototype.ItemView=c,e.prototype.Rule=class extends m.prototype.Rule{template(){return template("._CommunityRecommendationHighlightListView")}},e}.call(this),u=function(){class e extends i{}return e.prototype.Model=w,e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{template(){return template("._CommunityRecommendationReactionsView")}}).prototype.rule={"._CommunityRecommendationReactionButtonUsefulView=":function(){return new a({collection:this.model.get("useful")})}},e}.call(this),e}.call(this),a=function(){class e extends v{sendReactedAnalytics(){return super.sendReactedAnalytics("Recommendation Card")}}return e.prototype.Rule=class extends v.prototype.Rule{},e}.call(this),t.exports={CommunityRecommendationsView:h,CommunityRecommendationItemView:r,CommunityRecommendationThreadView:p,CommunityRecommendationNoTextThreadView:s,CommunityRecommendationUserView:d,CommunityRecommendationSectionView:c,CommunityRecommendationHighlightListView:o,CommunityRecommendationReactionsView:u,CommunityRecommendationReactionButtonUsefulView:a}},{"../../collections":2,"../../models":34,"../../utils/transforms":89,"../base-view":259,"../components/community-recommendation-panel-view":265,"../components/panel-view":293,"../components/reaction-button-set-view":302,"../lists/list-view":334,"../models/option-vote-view":360,"../models/section-view":363,"../models/user-view":366,"../threads/thread-view":404,marked:440,"marked-plaintext":439,moment:441,underscore:448}],399:[function(e,t,n){arguments[4][253][0].apply(n,arguments)},{"./thread-view":404,dup:253}],400:[function(e,t,n){arguments[4][254][0].apply(n,arguments)},{"../../collections":2,"../models/event-view":353,"../models/option-event-view":358,"../models/section-event-view":362,"./thread-view":404,dup:254}],401:[function(e,t,n){arguments[4][255][0].apply(n,arguments)},{"./activity-thread-view":397,"./community-recommendation-thread-view":398,"./dropdown-thread-view":399,"./event-thread-view":400,"./option-thread-view":402,"./question-thread-view":403,"./thread-view":404,dup:255,underscore:448}],402:[function(e,t,n){var i,o,r,s;({OptionList:i}=e("../../collections")),({ThreadView:s}=e("./thread-view")),({OptionView:r}=e("../models/option-view")),o=function(){class e extends s{}return e.prototype.Collection=i,e.prototype.ItemView=r,e.prototype.Rule=class extends s.prototype.Rule{template(){return template("._OptionThreadView")}},e}.call(this),t.exports={OptionThreadView:o}},{"../../collections":2,"../models/option-view":359,"./thread-view":404}],403:[function(e,t,n){arguments[4][257][0].apply(n,arguments)},{"../../collections":2,"../models/question-view":361,"./thread-view":404,dup:257}],404:[function(e,t,n){var i,o;e("../../rule"),e("../../model"),e("../../collection"),({ListView:i}=e("../lists/list-view")),e("underscore"),o=function(){class e extends i{checkScroll(){var e,t,n,i;if(!1!==this.options.infiniteScroll&&this.$el.is(":visible"))return n=(e=$(window)).scrollTop()+(i=e.height()),t=this.$el.position().top+this.$el.height(),!this.isLoading&&n+4*i>t?(this.isLoading=!0,this.loadMore()):void 0}loadMore(){var e;if(this.collection.loadMore())return(e=this.$("._load-more-link")).addClass("Loading"),this.collection.once("sync error",(t,n)=>(this.isLoading=!1,e.removeClass("Loading"),this.onMoreContentLoaded()))}onMoreContentLoaded(){return this.update()}}return e.prototype.Rule=function(){var e;return(e=class extends i.prototype.Rule{}).prototype.rule={"._has-more-items=":function(){var e,t;if(null==(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0))return""},"._no-more-items=":function(){var e,t;if(null!=(null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0))return""},"._load-more-link@href":function(){var e,t;return null!=(e=this.collection.meta("properties"))&&null!=(t=e.page)?t.next:void 0}},e}.call(this),e.prototype.events={"scroll document":function(e){return this.checkScroll()},"resize window":function(e){return this.checkScroll()},"click ._load-more-link":function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.loadMore()}},e}.call(this),t.exports={ThreadView:o}},{"../../collection":1,"../../model":33,"../../rule":81,"../lists/list-view":334,underscore:448}],405:[function(e,t,n){(function(n){t.exports=a;var i=e("./errors"),o=e("./exitPromise.js"),r=e("./IndexCore.js"),s=e("./store.js"),l=n.env.RESET_APP_DATA_TIMER&&parseInt(n.env.RESET_APP_DATA_TIMER,10)||12e4;function a(t,n,o){var r=e("debug")("algoliasearch"),s=e("./clone.js"),l=e("isarray"),a=e("./map.js"),c="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==o._allowEmptyCredentials&&!t)throw new i.AlgoliaSearchError("Please provide an application ID. "+c);if(!0!==o._allowEmptyCredentials&&!n)throw new i.AlgoliaSearchError("Please provide an API key. "+c);this.applicationID=t,this.apiKey=n,this.hosts={read:[],write:[]};var p=(o=o||{}).protocol||"https:";if(this._timeouts=o.timeouts||{connect:1e3,read:2e3,write:3e4},o.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=o.timeout),/:$/.test(p)||(p+=":"),"http:"!==o.protocol&&"https:"!==o.protocol)throw new i.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+o.protocol+"`)");if(this._checkAppIdData(),o.hosts)l(o.hosts)?(this.hosts.read=s(o.hosts),this.hosts.write=s(o.hosts)):(this.hosts.read=s(o.hosts.read),this.hosts.write=s(o.hosts.write));else{var d=a(this._shuffleResult,function(e){return t+"-"+e+".algolianet.com"});this.hosts.read=[this.applicationID+"-dsn.algolia.net"].concat(d),this.hosts.write=[this.applicationID+".algolia.net"].concat(d)}this.hosts.read=a(this.hosts.read,u(p)),this.hosts.write=a(this.hosts.write,u(p)),this.extraHeaders=[],this.cache=o._cache||{},this._ua=o._ua,this._useCache=!(void 0!==o._useCache&&!o._cache)||o._useCache,this._useFallback=void 0===o.useFallback||o.useFallback,this._setTimeout=o._setTimeout,r("init done, %j",this)}function u(e){return function(t){return e+"//"+t.toLowerCase()}}function c(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function p(e){var t={};for(var n in e){var i;if(Object.prototype.hasOwnProperty.call(e,n))i="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=i}return t}a.prototype.initIndex=function(e){return new r(this,e)},a.prototype.setExtraHeader=function(e,t){this.extraHeaders.push({name:e.toLowerCase(),value:t})},a.prototype.addAlgoliaAgent=function(e){-1===this._ua.indexOf(";"+e)&&(this._ua+=";"+e)},a.prototype._jsonRequest=function(t){this._checkAppIdData();var n,r,s=e("debug")("algoliasearch:"+t.url),l=t.additionalUA||"",a=t.cache,u=this,d=0,h=!1,m=u._useFallback&&u._request.fallback&&t.fallback;this.apiKey.length>500&&void 0!==t.body&&(void 0!==t.body.params||void 0!==t.body.requests)?(t.body.apiKey=this.apiKey,r=this._computeRequestHeaders(l,!1)):r=this._computeRequestHeaders(l),void 0!==t.body&&(n=c(t.body)),s("request start");var f=[];var g=function e(o,g){u._checkAppIdData();var w,v=new Date;if(u._useCache&&(w=t.url),u._useCache&&n&&(w+="_body_"+g.body),u._useCache&&a&&void 0!==a[w])return s("serving response from cache"),u._promise.resolve(JSON.parse(a[w]));if(d>=u.hosts[t.hostType].length)return!m||h?(s("could not get any response"),u._promise.reject(new i.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+u.applicationID,{debugData:f}))):(s("switching to fallback"),d=0,g.method=t.fallback.method,g.url=t.fallback.url,g.jsonBody=t.fallback.body,g.jsonBody&&(g.body=c(g.jsonBody)),r=u._computeRequestHeaders(l),g.timeouts=u._getTimeoutsForRequest(t.hostType),u._setHostIndexByType(0,t.hostType),h=!0,e(u._request.fallback,g));var y=u._getHostByType(t.hostType),_=y+g.url,x={body:g.body,jsonBody:g.jsonBody,method:g.method,headers:r,timeouts:g.timeouts,debug:s};return s("method: %s, url: %s, headers: %j, timeouts: %d",x.method,_,x.headers,x.timeouts),o===u._request.fallback&&s("using fallback"),o.call(u,_,x).then(function(e){var t=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;s("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,t,e.headers);var o=2===Math.floor(t/100),l=new Date;if(f.push({currentHost:y,headers:p(r),content:n||null,contentLength:void 0!==n?n.length:null,method:g.method,timeouts:g.timeouts,url:g.url,startTime:v,endTime:l,duration:l-v,statusCode:t}),o)return u._useCache&&a&&(a[w]=e.responseText),e.body;if(4!==Math.floor(t/100))return d+=1,V();s("unrecoverable error");var c=new i.AlgoliaSearchError(e.body&&e.body.message,{debugData:f,statusCode:t});return u._promise.reject(c)},function(l){s("error: %s, stack: %s",l.message,l.stack);var a=new Date;return f.push({currentHost:y,headers:p(r),content:n||null,contentLength:void 0!==n?n.length:null,method:g.method,timeouts:g.timeouts,url:g.url,startTime:v,endTime:a,duration:a-v}),l instanceof i.AlgoliaSearchError||(l=new i.Unknown(l&&l.message,l)),d+=1,l instanceof i.Unknown||l instanceof i.UnparsableJSON||d>=u.hosts[t.hostType].length&&(h||!m)?(l.debugData=f,u._promise.reject(l)):l instanceof i.RequestTimeout?(s("retrying request with higher timeout"),u._incrementHostIndex(t.hostType),u._incrementTimeoutMultipler(),g.timeouts=u._getTimeoutsForRequest(t.hostType),e(o,g)):V()});function V(){return s("retrying request"),u._incrementHostIndex(t.hostType),e(o,g)}}(u._request,{url:t.url,method:t.method,body:n,jsonBody:t.body,timeouts:u._getTimeoutsForRequest(t.hostType)});if(!t.callback)return g;g.then(function(e){o(function(){t.callback(null,e)},u._setTimeout||setTimeout)},function(e){o(function(){t.callback(e)},u._setTimeout||setTimeout)})},a.prototype._getSearchParams=function(e,t){if(null==e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?c(e[n]):e[n]));return t},a.prototype._computeRequestHeaders=function(t,n){var i=e("foreach"),o={"x-algolia-agent":t?this._ua+";"+t:this._ua,"x-algolia-application-id":this.applicationID};return!1!==n&&(o["x-algolia-api-key"]=this.apiKey),this.userToken&&(o["x-algolia-usertoken"]=this.userToken),this.securityTags&&(o["x-algolia-tagfilters"]=this.securityTags),this.extraHeaders&&i(this.extraHeaders,function(e){o[e.name]=e.value}),o},a.prototype.search=function(t,n,i){var o=e("isarray"),r=e("./map.js");if(!o(t))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof n?(i=n,n={}):void 0===n&&(n={});var s=this,l={requests:r(t,function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:s._getSearchParams(e.params,t)}})},a=r(l.requests,function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)}).join("&"),u="/1/indexes/*/queries";return void 0!==n.strategy&&(u+="?strategy="+n.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:u,body:l,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:a}},callback:i})},a.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var i=[],o=0;o<e[n].length;++o)i.push(e[n][o]);t.push("("+i.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},a.prototype.setUserToken=function(e){this.userToken=e},a.prototype.clearCache=function(){this.cache={}},a.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},a.prototype.setTimeouts=function(e){this._timeouts=e},a.prototype.getTimeouts=function(){return this._timeouts},a.prototype._getAppIdData=function(){var e=s.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},a.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),s.set(this.applicationID,e)},a.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>l?this._resetInitialAppIdData(e):e},a.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||function(e){var t,n,i=e.length;for(;0!==i;)n=Math.floor(Math.random()*i),t=e[i-=1],e[i]=e[n],e[n]=t;return e}([1,2,3]),this._setAppIdData(t)},a.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},a.prototype._partialAppIdDataUpdate=function(t){var n=e("foreach"),i=this._getAppIdData();return n(t,function(e,t){i[t]=e}),this._setAppIdData(i)},a.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},a.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},a.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},a.prototype._setHostIndexByType=function(t,n){var i=e("./clone")(this._hostIndexes);return i[n]=t,this._partialAppIdDataUpdate({hostIndexes:i}),t},a.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},a.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},a.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}}).call(this,e("_process"))},{"./IndexCore.js":406,"./clone":413,"./clone.js":413,"./errors":416,"./exitPromise.js":417,"./map.js":418,"./store.js":422,_process:426,debug:428,foreach:432,isarray:437}],406:[function(e,t,n){var i=e("./buildSearchMethod.js"),o=e("./deprecate.js"),r=e("./deprecatedMessage.js");function s(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}t.exports=s,s.prototype.clearCache=function(){this.cache={}},s.prototype.search=i("query"),s.prototype.similarSearch=i("similarQuery"),s.prototype.browse=function(t,n,i){var o,r,s=e("./merge.js");0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(o=0,i=arguments[0],t=void 0):"number"==typeof arguments[0]?(o=arguments[0],"number"==typeof arguments[1]?r=arguments[1]:"function"==typeof arguments[1]&&(i=arguments[1],r=void 0),t=void 0,n=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(i=arguments[1]),n=arguments[0],t=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(i=arguments[1],n=void 0),n=s({},n||{},{page:o,hitsPerPage:r,query:t});var l=this.as._getSearchParams(n,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{params:l},hostType:"read",callback:i})},s.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},s.prototype.searchForFacetValues=function(t,n){var i=e("./clone.js"),o=e("./omit.js");if(void 0===t.facetName||void 0===t.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var r=t.facetName,s=o(i(t),function(e){return"facetName"===e}),l=this.as._getSearchParams(s,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(r)+"/query",hostType:"read",body:{params:l},callback:n})},s.prototype.searchFacet=o(function(e,t){return this.searchForFacetValues(e,t)},r("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),s.prototype._search=function(e,t,n,i){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:i})},s.prototype.getObject=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var i="";if(void 0!==t){i="?attributes=";for(var o=0;o<t.length;++o)0!==o&&(i+=","),i+=t[o]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e)+i,hostType:"read",callback:n})},s.prototype.getObjects=function(t,n,i){var o=e("isarray"),r=e("./map.js");if(!o(t))throw new Error("Usage: index.getObjects(arrayOfObjectIDs[, callback])");var s=this;1!==arguments.length&&"function"!=typeof n||(i=n,n=void 0);var l={requests:r(t,function(e){var t={indexName:s.indexName,objectID:e};return n&&(t.attributesToRetrieve=n.join(",")),t})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:l,callback:i})},s.prototype.as=null,s.prototype.indexName=null,s.prototype.typeAheadArgs=null,s.prototype.typeAheadValueOption=null},{"./buildSearchMethod.js":412,"./clone.js":413,"./deprecate.js":414,"./deprecatedMessage.js":415,"./map.js":418,"./merge.js":419,"./omit.js":420,isarray:437}],407:[function(e,t,n){"use strict";var i=e("../../AlgoliaSearchCore.js"),o=e("../createAlgoliasearch.js");t.exports=o(i,"(lite) ")},{"../../AlgoliaSearchCore.js":405,"../createAlgoliasearch.js":408}],408:[function(e,t,n){"use strict";var i=e("global"),o=i.Promise||e("es6-promise").Promise;t.exports=function(t,n){var r=e("inherits"),s=e("../errors"),l=e("./inline-headers"),a=e("./jsonp-request"),u=e("../places.js");function c(t,n,i){var o=e("../clone.js"),r=e("./get-document-protocol");return void 0===(i=o(i||{})).protocol&&(i.protocol=r()),i._ua=i._ua||c.ua,new d(t,n,i)}n=n||"",c.version=e("../version.js"),c.ua="Algolia for vanilla JavaScript "+n+c.version,c.initPlaces=u(c),i.__algolia={debug:e("debug"),algoliasearch:c};var p={hasXMLHttpRequest:"XMLHttpRequest"in i,hasXDomainRequest:"XDomainRequest"in i};function d(){t.apply(this,arguments)}return p.hasXMLHttpRequest&&(p.cors="withCredentials"in new XMLHttpRequest),r(d,t),d.prototype._request=function(e,t){return new o(function(n,i){if(p.cors||p.hasXDomainRequest){e=l(e,t.headers);var o,r,a=t.body,u=p.cors?new XMLHttpRequest:new XDomainRequest,c=!1;o=setTimeout(d,t.timeouts.connect),u.onprogress=function(){c||h()},"onreadystatechange"in u&&(u.onreadystatechange=function(){!c&&u.readyState>1&&h()}),u.onload=function(){if(r)return;var e;clearTimeout(o);try{e={body:JSON.parse(u.responseText),responseText:u.responseText,statusCode:u.status,headers:u.getAllResponseHeaders&&u.getAllResponseHeaders()||{}}}catch(t){e=new s.UnparsableJSON({more:u.responseText})}e instanceof s.UnparsableJSON?i(e):n(e)},u.onerror=function(e){if(r)return;clearTimeout(o),i(new s.Network({more:e}))},u instanceof XMLHttpRequest?u.open(t.method,e,!0):u.open(t.method,e),p.cors&&(a&&("POST"===t.method?u.setRequestHeader("content-type","application/x-www-form-urlencoded"):u.setRequestHeader("content-type","application/json")),u.setRequestHeader("accept","application/json")),u.send(a)}else i(new s.Network("CORS not supported"));function d(){r=!0,u.abort(),i(new s.RequestTimeout)}function h(){c=!0,clearTimeout(o),o=setTimeout(d,t.timeouts.complete)}})},d.prototype._request.fallback=function(e,t){return e=l(e,t.headers),new o(function(n,i){a(e,t,function(e,t){e?i(e):n(t)})})},d.prototype._promise={reject:function(e){return o.reject(e)},resolve:function(e){return o.resolve(e)},delay:function(e){return new o(function(t){setTimeout(t,e)})}},c}},{"../clone.js":413,"../errors":416,"../places.js":421,"../version.js":423,"./get-document-protocol":409,"./inline-headers":410,"./jsonp-request":411,debug:428,"es6-promise":430,global:433,inherits:435}],409:[function(e,t,n){"use strict";t.exports=function(){var e=window.document.location.protocol;"http:"!==e&&"https:"!==e&&(e="http:");return e}},{}],410:[function(e,t,n){"use strict";t.exports=function(e,t){/\?/.test(e)?e+="&":e+="?";return e+i(t)};var i=e("querystring-es3/encode")},{"querystring-es3/encode":445}],411:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("GET"!==t.method)return void n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));t.debug("JSONP: start");var r=!1,s=!1;o+=1;var l=document.getElementsByTagName("head")[0],a=document.createElement("script"),u="algoliaJSONP_"+o,c=!1;window[u]=function(e){!function(){try{delete window[u],delete window[u+"_loaded"]}catch(e){window[u]=window[u+"_loaded"]=void 0}}(),s?t.debug("JSONP: Late answer, ignoring"):(r=!0,h(),n(null,{body:e}))},e+="&callback="+u,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var p=setTimeout(function(){t.debug("JSONP: Script timeout"),s=!0,h(),n(new i.RequestTimeout)},t.timeouts.complete);function d(){t.debug("JSONP: success"),c||s||(c=!0,r||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),h(),n(new i.JSONPScriptFail)))}function h(){clearTimeout(p),a.onload=null,a.onreadystatechange=null,a.onerror=null,l.removeChild(a)}a.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||d()},a.onload=d,a.onerror=function(){if(t.debug("JSONP: Script error"),c||s)return;h(),n(new i.JSONPScriptError)},a.async=!0,a.defer=!0,a.src=e,l.appendChild(a)};var i=e("../errors"),o=0},{"../errors":416}],412:[function(e,t,n){t.exports=function(e,t){return function(n,o,r){if("function"==typeof n&&"object"==typeof o||"object"==typeof r)throw new i.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(r=n,n=""):1!==arguments.length&&"function"!=typeof o||(r=o,o=void 0),"object"==typeof n&&null!==n?(o=n,n=void 0):null==n&&(n="");var s,l="";return void 0!==n&&(l+=e+"="+encodeURIComponent(n)),void 0!==o&&(o.additionalUA&&(s=o.additionalUA,delete o.additionalUA),l=this.as._getSearchParams(o,l)),this._search(l,t,r,s)}};var i=e("./errors.js")},{"./errors.js":416}],413:[function(e,t,n){t.exports=function(e){return JSON.parse(JSON.stringify(e))}},{}],414:[function(e,t,n){t.exports=function(e,t){var n=!1;return function(){return n||(console.log(t),n=!0),e.apply(this,arguments)}}},{}],415:[function(e,t,n){t.exports=function(e,t){var n=e.toLowerCase().replace(".","").replace("()","");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-js/wiki/Deprecated#"+n}},{}],416:[function(e,t,n){"use strict";var i=e("inherits");function o(t,n){var i=e("foreach"),o=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):o.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=t||"Unknown error",n&&i(n,function(e,t){o[t]=e})}function r(e,t){function n(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(t),o.apply(this,n),this.name="AlgoliaSearch"+e+"Error"}return i(n,o),n}i(o,Error),t.exports={AlgoliaSearchError:o,UnparsableJSON:r("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:r("RequestTimeout","Request timedout before getting a response"),Network:r("Network","Network issue, see err.more for details"),JSONPScriptFail:r("JSONPScriptFail","<script> was loaded but did not call our provided callback"),JSONPScriptError:r("JSONPScriptError","<script> unable to load due to an `error` event on it"),Unknown:r("Unknown","Unknown error occured")}},{foreach:432,inherits:435}],417:[function(e,t,n){t.exports=function(e,t){t(e,0)}},{}],418:[function(e,t,n){var i=e("foreach");t.exports=function(e,t){var n=[];return i(e,function(i,o){n.push(t(i,o,e))}),n}},{foreach:432}],419:[function(e,t,n){var i=e("foreach");t.exports=function e(t){var n=Array.prototype.slice.call(arguments);return i(n,function(n){for(var i in n)n.hasOwnProperty(i)&&("object"==typeof t[i]&&"object"==typeof n[i]?t[i]=e({},t[i],n[i]):void 0!==n[i]&&(t[i]=n[i]))}),t}},{foreach:432}],420:[function(e,t,n){t.exports=function(t,n){var i=e("object-keys"),o=e("foreach"),r={};return o(i(t),function(e){!0!==n(e)&&(r[e]=t[e])}),r}},{foreach:432,"object-keys":443}],421:[function(e,t,n){t.exports=function(t){return function(n,o,r){var s=e("./clone.js");(r=r&&s(r)||{}).hosts=r.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof n&&void 0!==n||(n="",o="",r._allowEmptyCredentials=!0);var l=t(n,o,r),a=l.initIndex("places");return a.search=i("query","/1/places/query"),a}};var i=e("./buildSearchMethod.js")},{"./buildSearchMethod.js":412,"./clone.js":413}],422:[function(e,t,n){(function(n){var i,o=e("debug")("algoliasearch:src/hostIndexState.js"),r="algoliasearch-client-js",s={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},l={set:function(e,t){s.set(e,t);try{var i=JSON.parse(n.localStorage[r]);return i[e]=t,n.localStorage[r]=JSON.stringify(i),i[e]}catch(t){return a(e,t)}},get:function(e){try{return JSON.parse(n.localStorage[r])[e]||null}catch(t){return a(e,t)}}};function a(e,t){return o("localStorage failed with",t),function(){try{n.localStorage.removeItem(r)}catch(e){}}(),(i=s).get(e)}function u(e,t){return 1===arguments.length?i.get(e):i.set(e,t)}function c(){try{return"localStorage"in n&&null!==n.localStorage&&(n.localStorage[r]||n.localStorage.setItem(r,JSON.stringify({})),!0)}catch(e){return!1}}i=c()?l:s,t.exports={get:u,set:u,supportsLocalStorage:c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:428}],423:[function(e,t,n){"use strict";t.exports="3.22.3"},{}],424:[function(e,t,n){(function(){var t,i=this,o=i.Backbone,r=[],s=r.push,l=r.slice,a=r.splice;(t=void 0!==n?n:i.Backbone={}).VERSION="1.0.0";var u=i._;u||void 0===e||(u=e("underscore")),t.$=i.jQuery||i.Zepto||i.ender||i.$,t.noConflict=function(){return i.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var c=t.Events={on:function(e,t,n){return d(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var i=this,o=u.once(function(){i.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var i,o,r,s,l,a,c,p;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(l=0,a=(s=e?[e]:u.keys(this._events)).length;l<a;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=i=[],t||n)for(c=0,p=r.length;c<p;c++)o=r[c],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=l.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&h(n,t),i&&h(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var o=!t&&!n;for(var r in"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e),i)i[r].off(t,n,this),o&&delete this._listeners[r];return this}},p=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(p.test(n)){for(var r=n.split(p),s=0,l=r.length;s<l;s++)e[t].apply(e,[r[s]].concat(i));return!1}return!0},h=function(e,t){var n,i=-1,o=e.length,r=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s,l);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t)}};u.each({listenTo:"on",listenToOnce:"once"},function(e,t){c[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=u.uniqueId("l"))]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,u.extend(t,c);var m=t.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,f)),t.parse&&(i=this.parse(i,t)||{}),(n=u.result(this,"defaults"))&&(i=u.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];u.extend(m.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,o,r,s,l,a,c,p;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;for(i in r=n.unset,l=n.silent,s=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=u.clone(this.attributes),this.changed={}),p=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[i],u.isEqual(p[i],t)||s.push(i),u.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,r?delete p[i]:p[i]=t;if(!l){s.length&&(this._pending=!0);for(var d=0,h=s.length;d<h;d++)this.trigger("change:"+s[d],this,p[s[d]],n)}if(a)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&u.clone(this.changed);var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)u.isEqual(i[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?u.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){if(!t.set(t.parse(i,e),e))return!1;n&&n(t,i,e),t.trigger("sync",t,i,e)},A(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,o,r,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=u.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=u.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var l=this,a=n.success;return n.success=function(e){l.attributes=s;var t=l.parse(e,n);if(n.wait&&(t=u.extend(i||{},t)),u.isObject(t)&&!l.set(t,n))return!1;a&&a(l,e,n),l.trigger("sync",l,e,n)},A(this,n),"patch"===(o=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),r=this.sync(o,this,n),i&&n.wait&&(this.attributes=s),r},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(o){(e.wait||t.isNew())&&i(),n&&n(t,o,e),t.isNew()||t.trigger("sync",t,o,e)},this.isNew())return e.success(),!1;A(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||O();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1)}});u.each(["keys","values","pairs","invert","pick","omit"],function(e){m.prototype[e]=function(){var t=l.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var g=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};u.extend(g.prototype,c,{model:m,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},v))},remove:function(e,t){var n,i,o,r;for(t||(t={}),n=0,i=(e=u.isArray(e)?e.slice():[e]).length;n<i;n++)(r=this.get(e[n]))&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),this._removeReference(r));return this},set:function(e,t){var n,i,o,r,l;(t=u.defaults(t||{},w)).parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var c=t.at,p=this.comparator&&null==c&&!1!==t.sort,d=u.isString(this.comparator)?this.comparator:null,h=[],m=[],f={};for(n=0,i=e.length;n<i;n++)(o=this._prepareModel(e[n],t))&&((r=this.get(o))?(t.remove&&(f[r.cid]=!0),t.merge&&(r.set(o.attributes,t),p&&!l&&r.hasChanged(d)&&(l=!0))):t.add&&(h.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,i=this.length;n<i;++n)f[(o=this.models[n]).cid]||m.push(o);m.length&&this.remove(m,t)}if(h.length&&(p&&(l=!0),this.length+=h.length,null!=c?a.apply(this.models,[c,0].concat(h)):s.apply(this.models,h)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=h.length;n<i;n++)(o=h[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,i,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?u.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},A(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?u.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(o){t.wait&&n.add(e,t),i&&i(e,o,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof m)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});u.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){g.prototype[e]=function(){var t=l.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});u.each(["groupBy","countBy","sortBy"],function(e){g.prototype[e]=function(t,n){var i=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,i,n)}});var y=t.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(y.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(u.isFunction(n)||(n=this[e[t]]),n){var i=t.match(_),o=i[1],r=i[2];n=u.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e.class=u.result(this,"className"));var n=t.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var o=V[e];u.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(i.url||(r.url=u.result(n,"url")||O()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",i.emulateJSON&&(r.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(u.extend(r,i));return n.trigger("request",n,l,i),l};var V={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var R=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,S=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(R.prototype,c,{initialize:function(){},route:function(e,n,i){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return t.history.route(e,function(r){var s=o._extractParameters(e,r);i&&i.apply(o,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),t.history.trigger("route",o,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var e,t=u.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(b,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,L=/msie [\w.]+/,I=/\/$/;P.started=!1,u.extend(P.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(I,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(T,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=L.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(M,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var r=this.location,s=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&r.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!P.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new P;m.extend=g.extend=R.extend=y.extend=P.extend=function(e,t){var n,i=this;n=e&&u.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},u.extend(n,i,t);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&u.extend(n.prototype,e),n.__super__=i.prototype,n};var O=function(){throw new Error('A "url" property or function must be specified')},A=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}).call(this)},{underscore:448}],425:[function(e,t,n){},{}],426:[function(e,t,n){var i,o,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{o="function"==typeof clearTimeout?clearTimeout:l}catch(e){o=l}}();var u,c=[],p=!1,d=-1;function h(){p&&u&&(p=!1,u.length?c=u.concat(c):d=-1,c.length&&m())}function m(){if(!p){var e=a(h);p=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===l||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||p||a(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],427:[function(e,t,n){var i,o;i=this,o=function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";for(var i in Object.defineProperty(t,"__esModule",{value:!0}),t.DataType={TEXT_PLAIN:"text/plain",TEXT_HTML:"text/html"},t.DataTypeLookup=new Set,t.DataType)t.DataTypeLookup.add(t.DataType[i])},function(e,t,n){"use strict";function i(e){var t=new w,n=function(e,t,n){h("listener called"),e.success=!0,t.forEach(function(t,i){n.clipboardData.setData(i,t),i===p.DataType.TEXT_PLAIN&&n.clipboardData.getData(i)!=t&&(h("setting text/plain failed"),e.success=!1)}),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t}function o(e,t){s(e);var n=i(t);return l(),n}function r(e){h("copyTextUsingDOM");var t=document.createElement("div"),n=t.attachShadow({mode:"open"});document.body.appendChild(t);var i=document.createElement("span");i.innerText=e,n.appendChild(i),s(i);var o=document.execCommand("copy");return l(),document.body.removeChild(t),o}function s(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}function l(){document.getSelection().removeAllRanges()}function a(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function u(){return new c.Promise(function(e,t){var n=window.clipboardData.getData("Text");""===n?t(new Error("Empty clipboard or could not read plain text from clipboard")):e(n)})}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),p=n(0),d=n(6),h=function(e){},m=!0,f=(console.warn||console.log).bind(console,"[clipboard-polyfill]"),g=function(){function e(){}return e.setDebugLog=function(e){h=e},e.suppressMissingPlainTextWarning=function(){m=!1},e.write=function(e){return m&&!e.getData(p.DataType.TEXT_PLAIN)&&f("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressMissingPlainTextWarning() to suppress this warning."),new c.Promise(function(t,n){if(a())(function(e){var t=e.getData("text/plain");if(void 0!==t)return window.clipboardData.setData("Text",t);throw"No `text/plain` value was specified."})(e)?t():n(new Error("Copying failed, possibly because the user rejected it."));else{var s=i(e);if(s.success)return h("regular execCopy worked"),void t();if(navigator.userAgent.indexOf("Edge")>-1)return h('UA "Edge" => assuming success'),void t();if((s=o(document.body,e)).success)return h("copyUsingTempSelection worked"),void t();if((s=function(e){var t=document.createElement("div");t.textContent="temporary element",document.body.appendChild(t);var n=o(t,e);return document.body.removeChild(t),n}(e)).success)return h("copyUsingTempElem worked"),void t();var l=e.getData(p.DataType.TEXT_PLAIN);if(void 0!==l&&r(l))return h("copyTextUsingDOM worked"),void t();n(new Error("Copy command failed."))}})},e.writeText=function(e){var t=new d.default;return t.setData(p.DataType.TEXT_PLAIN,e),this.write(t)},e.read=function(){return new c.Promise(function(e,t){a()?u().then(function(t){return e(d.default.fromText(t))},t):t("Read is not supported in your browser.")})},e.readText=function(){return a()?u():new c.Promise(function(e,t){t("Read is not supported in your browser.")})},e.copy=function(e){var t=this;return f("The clipboard.copy() API is deprecated and may be removed in a future version. Please switch to clipboard.write() or clipboard.writeText()."),new c.Promise(function(n,i){var o;if("string"==typeof e)o=d.default.fromText(e);else if(e instanceof HTMLElement)o=d.default.fromElement(e);else{if(!(e instanceof Object))return void i("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.");o=d.default.fromObject(e)}t.write(o)})},e.paste=function(){return f("The clipboard.paste() API is deprecated and may be removed in a future version. Please switch to clipboard.read() or clipboard.readText()."),this.readText()},e.DT=d.default,e}();t.default=g;var w=function(){return function(){this.success=!1}}();e.exports=g},function(e,t,n){(function(t,i){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e}function o(){var e=setTimeout;return function(){return e(r,1)}}function r(){for(var e=0;e<R;e+=2)(0,I[e])(I[e+1]),I[e]=void 0,I[e+1]=void 0;R=0}function s(e,t){var n=arguments,i=this,o=new this.constructor(a);void 0===o[A]&&y(o);var r=i._state;return r?function(){var e=n[r-1];S(function(){return v(r,o,e,i._result)})}():f(i,o,e,t),o}function l(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(a);return p(t,e),t}function a(){}function u(e){try{return e.then}catch(e){return U.error=e,U}}function c(t,n,i){n.constructor===t.constructor&&i===s&&n.constructor.resolve===l?function(e,t){t._state===D?h(e,t._result):t._state===$?m(e,t._result):f(t,void 0,function(t){return p(e,t)},function(t){return m(e,t)})}(t,n):i===U?(m(t,U.error),U.error=null):void 0===i?h(t,n):e(i)?function(e,t,n){S(function(e){var i=!1,o=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?p(e,n):h(e,n))},function(t){i||(i=!0,m(e,t))},e._label);!i&&o&&(i=!0,m(e,o))},e)}(t,n,i):h(t,n)}function p(e,t){e===t?m(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?c(e,t,u(t)):h(e,t)}function d(e){e._onerror&&e._onerror(e._result),g(e)}function h(e,t){e._state===E&&(e._result=t,e._state=D,0!==e._subscribers.length&&S(g,e))}function m(e,t){e._state===E&&(e._state=$,e._result=t,S(d,e))}function f(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+D]=n,o[r+$]=i,0===r&&e._state&&S(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?v(n,i,o,r):o(r);e._subscribers.length=0}}function w(){this.error=null}function v(t,n,i,o){var r=e(i),s=void 0,l=void 0,a=void 0,u=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return B.error=e,B}}(i,o))===B?(u=!0,l=s.error,s.error=null):a=!0,n===s)return void m(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,a=!0;n._state!==E||(r&&a?p(n,s):u?m(n,l):t===D?h(n,s):t===$&&m(n,s))}function y(e){e[A]=q++,e._state=void 0,e._result=void 0,e._subscribers=[]}function _(e,t){this._instanceConstructor=e,this.promise=new e(a),this.promise[A]||y(this.promise),V(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):m(this.promise,new Error("Array Methods must be provided an Array"))}function x(e){this[A]=q++,this._result=this._state=void 0,this._subscribers=[],a!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof x?function(e,t){try{t(function(t){p(e,t)},function(t){m(e,t)})}catch(t){m(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},R=0,b=void 0,C=void 0,S=function(e,t){I[R]=e,I[R+1]=t,2===(R+=2)&&(C?C(r):O())},k="undefined"!=typeof window?window:void 0,P=k||{},T=P.MutationObserver||P.WebKitMutationObserver,M="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),L="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3),O=void 0;O=M?function(){return t.nextTick(r)}:T?function(){var e=0,t=new T(r),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():L?function(){var e=new MessageChannel;return e.port1.onmessage=r,function(){return e.port2.postMessage(0)}}():void 0===k?function(){try{var e=n(5);return void 0!==(b=e.runOnLoop||e.runOnContext)?function(){b(r)}:o()}catch(e){return o()}}():o();var A=Math.random().toString(36).substring(16),E=void 0,D=1,$=2,U=new w,B=new w,q=0;return _.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},_.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===l){var o=u(e);if(o===s&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===x){var r=new n(a);c(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},_.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===E&&(this._remaining--,e===$?m(i,n):this._result[t]=n),0===this._remaining&&h(i,this._result)},_.prototype._willSettleAt=function(e,t){var n=this;f(e,void 0,function(e){return n._settledAt(D,t,e)},function(e){return n._settledAt($,t,e)})},x.all=function(e){return new _(this,e).promise},x.race=function(e){var t=this;return new t(V(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},x.resolve=l,x.reject=function(e){var t=new this(a);return m(t,e),t},x._setScheduler=function(e){C=e},x._setAsap=function(e){S=e},x._asap=S,x.prototype={constructor:x,then:s,catch:function(e){return this.then(null,e)}},x.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=x},x.Promise=x,x})}).call(t,n(3),n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(){m&&d&&(m=!1,d.length?h=d.concat(h):f=-1,h.length&&s())}function s(){if(!m){var e=o(r);m=!0;for(var t=h.length;t;){for(d=h,h=[];++f<t;)d&&d[f].run();f=-1,t=h.length}d=null,m=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function a(){}var u,c,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(e){c=i}}();var d,h=[],m=!1,f=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.prependListener=a,p.prependOnceListener=a,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=(console.warn||console.log).bind(console,"[clipboard-polyfill]"),r=function(){function e(){this.m=new Map}return e.prototype.setData=function(e,t){i.DataTypeLookup.has(e)||o("Unknown data type: "+e),this.m.set(e,t)},e.prototype.getData=function(e){return this.m.get(e)},e.prototype.forEach=function(e){return this.m.forEach(e)},e.fromText=function(t){var n=new e;return n.setData(i.DataType.TEXT_PLAIN,t),n},e.fromObject=function(t){var n=new e;for(var i in t)n.setData(i,t[i]);return n},e.fromElement=function(t){var n=new e;return n.setData(i.DataType.TEXT_PLAIN,t.innerText),n.setData(i.DataType.TEXT_HTML,(new XMLSerializer).serializeToString(t)),n},e}();t.default=r}])},"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.clipboard=o():i.clipboard=o()},{}],428:[function(e,t,n){(function(i){function o(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=o,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(o())}).call(this,e("_process"))},{"./debug":429,_process:426}],429:[function(e,t,n){var i;function o(e){function t(){if(t.enabled){var e=t,o=+new Date,r=o-(i||o);e.diff=r,e.prev=i,e.curr=o,i=o;for(var s=new Array(arguments.length),l=0;l<s.length;l++)s[l]=arguments[l];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,i){if("%%"===t)return t;a++;var o=n.formatters[i];if("function"==typeof o){var r=s[a];t=o.call(e,r),s.splice(a,1),a--}return t}),n.formatArgs.call(e,s),(t.log||n.log||console.log.bind(console)).apply(e,s)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=function(e){var t,i=0;for(t in e)i=(i<<5)-i+e.charCodeAt(t),i|=0;return n.colors[Math.abs(i)%n.colors.length]}(e),"function"==typeof n.init&&n.init(t),t}(n=t.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),i=t.length,o=0;o<i;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={}},{ms:442}],430:[function(e,t,n){(function(i,o){!function(e,i){"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.ES6Promise=i()}(this,function(){"use strict";function t(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,s=void 0,l=void 0,a=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(l?l(g):x())};var u="undefined"!=typeof window?window:void 0,c=u||{},p=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){var e=setTimeout;return function(){return e(g,1)}}var f=new Array(1e3);function g(){for(var e=0;e<r;e+=2){(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0}r=0}var w,v,y,_,x=void 0;function V(e,t){var n=this,i=new this.constructor(C);void 0===i[b]&&q(i);var o=n._state;if(o){var r=arguments[o-1];a(function(){return U(o,i,r,n._result)})}else D(n,i,e,t);return i}function R(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return I(t,e),t}d?x=function(){return i.nextTick(g)}:p?(v=0,y=new p(g),_=document.createTextNode(""),y.observe(_,{characterData:!0}),x=function(){_.data=v=++v%2}):h?((w=new MessageChannel).port1.onmessage=g,x=function(){return w.port2.postMessage(0)}):x=void 0===u&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(s=e.runOnLoop||e.runOnContext)?function(){s(g)}:m()}catch(e){return m()}}():m();var b=Math.random().toString(36).substring(2);function C(){}var S=void 0,k=1,P=2,T={error:null};function M(e){try{return e.then}catch(e){return T.error=e,T}}function L(e,n,i){n.constructor===e.constructor&&i===V&&n.constructor.resolve===R?function(e,t){t._state===k?A(e,t._result):t._state===P?E(e,t._result):D(t,void 0,function(t){return I(e,t)},function(t){return E(e,t)})}(e,n):i===T?(E(e,T.error),T.error=null):void 0===i?A(e,n):t(i)?function(e,t,n){a(function(e){var i=!1,o=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?I(e,n):A(e,n))},function(t){i||(i=!0,E(e,t))},e._label);!i&&o&&(i=!0,E(e,o))},e)}(e,n,i):A(e,n)}function I(e,t){var n,i;e===t?E(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!==i&&"function"!==i?A(e,t):L(e,t,M(t)))}function O(e){e._onerror&&e._onerror(e._result),$(e)}function A(e,t){e._state===S&&(e._result=t,e._state=k,0!==e._subscribers.length&&a($,e))}function E(e,t){e._state===S&&(e._state=P,e._result=t,a(O,e))}function D(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+k]=n,o[r+P]=i,0===r&&e._state&&a($,e)}function $(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?U(n,i,o,r):o(r);e._subscribers.length=0}}function U(e,n,i,o){var r=t(i),s=void 0,l=void 0,a=void 0,u=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return T.error=e,T}}(i,o))===T?(u=!0,l=s.error,s.error=null):a=!0,n===s)return void E(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,a=!0;n._state!==S||(r&&a?I(n,s):u?E(n,l):e===k?A(n,s):e===P&&E(n,s))}var B=0;function q(e){e[b]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var N=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[b]||q(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===R){var o=M(e);if(o===V&&e._state!==S)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===F){var r=new n(C);L(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===S&&(this._remaining--,e===P?E(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;D(e,void 0,function(e){return n._settledAt(k,t,e)},function(e){return n._settledAt(P,t,e)})},e}();var F=function(){function e(t){this[b]=B++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){I(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return F.prototype.then=V,F.all=function(e){return new N(this,e).promise},F.race=function(e){var t=this;return n(e)?new t(function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},F.resolve=R,F.reject=function(e){var t=new this(C);return E(t,e),t},F._setScheduler=function(e){l=e},F._setAsap=function(e){a=e},F._asap=a,F.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=F},F.Promise=F,F})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:426}],431:[function(e,t,n){var i,o;i=this,o=function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,i){if(null!==e)if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===+e.length){for(var o=0,r=e.length;o<r;o++)if(n.call(i,e[o],o,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(i,e[s],s,e)==={})return},this.map=function(e,t,i){var o=[];return null==e?o:n&&e.map===n?e.map(t,i):(this.each(e,function(e,n,r){o[o.length]=t.call(i,e,n,r)}),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution)&&(void 0!==this.getScreenResolution()&&e.push(this.getScreenResolution().join("x")));return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,i,o,r,s,l,a,u;for(n=3&e.length,i=e.length-n,o=t,s=3432918353,l=461845907,u=0;u<i;)a=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,o=27492+(65535&(r=5*(65535&(o=(o^=a=(65535&(a=(a=(65535&a)*s+(((a>>>16)*s&65535)<<16)&4294967295)<<15|a>>>17))*l+(((a>>>16)*l&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(a=0,n){case 3:a^=(255&e.charCodeAt(u+2))<<16;case 2:a^=(255&e.charCodeAt(u+1))<<8;case 1:o^=a=(65535&(a=(a=(65535&(a^=255&e.charCodeAt(u)))*s+(((a>>>16)*s&65535)<<16)&4294967295)<<15|a>>>17))*l+(((a>>>16)*l&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){return this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},e},void 0!==t&&t.exports?t.exports=o():"function"==typeof define&&define.amd?define(o):i.Fingerprint=o()},{}],432:[function(e,t,n){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function(e,t,n){if("[object Function]"!==o.call(t))throw new TypeError("iterator must be a function");var r=e.length;if(r===+r)for(var s=0;s<r;s++)t.call(n,e[s],s,e);else for(var l in e)i.call(e,l)&&t.call(n,e[l],l,e)}},{}],433:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],434:[function(e,t,n){"use strict";function i(e,t){var n,i;if(0===t.length)return e;for(n=0,i=t.length;n<i;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e<0?-2*e:e}function o(e,t,n,r){var s,l=i(i(i(e,n),(s=t,Object.prototype.toString.call(s))),typeof t);return null===t?i(l,"null"):void 0===t?i(l,"undefined"):"object"==typeof t?-1!==r.indexOf(t)?i(l,"[Circular]"+n):(r.push(t),function(e,t,n){return Object.keys(t).sort().reduce(function(e,i){return o(e,t[i],i,n)},e)}(l,t,r)):i(l,t.toString())}t.exports=function(e){return function(e,t){for(;e.length<t;)e="0"+e;return e}(o(0,e,"",[]).toString(16),8)}},{}],435:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],436:[function(e,t,n){!function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},o.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(e,"resize",this._checkForIntersections,!0),r(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),n=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var r=o.element,s=l(r),a=this._rootContainsTarget(r),u=o.entry,c=t&&a&&this._computeTargetAndRootIntersection(r,n),p=o.entry=new i({time:e.performance&&performance.now&&performance.now(),target:r,boundingClientRect:s,rootBounds:n,intersectionRect:c});u?t&&a?this._hasCrossedThreshold(u,p)&&this._queuedEntries.push(p):u&&u.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var o,r,s,a,c,p,d,h,m=l(n),f=u(n),g=!1;!g;){var w=null,v=1==f.nodeType?e.getComputedStyle(f):{};if("none"==v.display)return;if(f==this.root||f==t?(g=!0,w=i):f!=t.body&&f!=t.documentElement&&"visible"!=v.overflow&&(w=l(f)),w&&(o=w,r=m,s=void 0,a=void 0,c=void 0,p=void 0,d=void 0,h=void 0,s=Math.max(o.top,r.top),a=Math.min(o.bottom,r.bottom),c=Math.max(o.left,r.left),p=Math.min(o.right,r.right),h=a-s,!(m=(d=p-c)>=0&&h>=0&&{top:s,bottom:a,left:c,right:p,width:d,height:h})))break;f=u(f)}return m}},o.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==n||r==i||r<n!=r<i)return!0}},o.prototype._rootIsInDom=function(){return!this.root||a(t,this.root)},o.prototype._rootContainsTarget=function(e){return a(this.root||t,e)},o.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},o.prototype._unregisterInstance=function(){var e=n.indexOf(this);-1!=e&&n.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=i}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,o=i.width*i.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n,i,o,r=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout(function(){n(),o=null},i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e,t){for(var n=t;n;){if(n==e)return!0;n=u(n)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},{}],437:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],438:[function(e,t,n){!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],i=e.document,o=Object.getPrototypeOf,r=n.slice,s=n.concat,l=n.push,a=n.indexOf,u={},c=u.toString,p=u.hasOwnProperty,d=p.toString,h=d.call(Object),m={},f=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},w={type:!0,src:!0,noModule:!0};function v(e,t,n){var o,r=(t=t||i).createElement("script");if(r.text=e,n)for(o in w)n[o]&&(r[o]=n[o]);t.head.appendChild(r).parentNode.removeChild(r)}function y(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[c.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function V(e){var t=!!e&&"length"in e&&e.length,n=y(e);return!f(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.3.1",constructor:_,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},_.extend=_.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},l=1,a=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"==typeof s||f(s)||(s={}),l===a&&(s=this,l--);l<a;l++)if(null!=(e=arguments[l]))for(t in e)n=s[t],s!==(i=e[t])&&(u&&i&&(_.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&_.isPlainObject(n)?n:{},s[t]=_.extend(u,r,i)):void 0!==i&&(s[t]=i));return s},_.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=o(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&d.call(n)===h)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){v(e)},each:function(e,t){var n,i=0;if(V(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(V(Object(e))?_.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,l=[];if(V(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&l.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&l.push(o);return s.apply([],l)},guid:1,support:m}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=n[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var R=function(e){var t,n,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_="sizzle"+1*new Date,x=e.document,V=0,R=0,b=se(),C=se(),S=se(),k=function(e,t){return e===t&&(p=!0),0},P={}.hasOwnProperty,T=[],M=T.pop,L=T.push,I=T.push,O=T.slice,A=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},E="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",$="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+D+"*("+$+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+D+"*\\]",B=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",q=new RegExp(D+"+","g"),N=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),F=new RegExp("^"+D+"*,"+D+"*"),j=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),z=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),Q=new RegExp(B),H=new RegExp("^"+$+"$"),W={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+E+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){d()},oe=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{I.apply(T=O.call(x.childNodes),x.childNodes),T[x.childNodes.length].nodeType}catch(e){I={apply:T.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(e,t,i,o){var r,l,u,c,p,m,w,v=t&&t.ownerDocument,V=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==V&&9!==V&&11!==V)return i;if(!o&&((t?t.ownerDocument||t:x)!==h&&d(t),t=t||h,f)){if(11!==V&&(p=J.exec(e)))if(r=p[1]){if(9===V){if(!(u=t.getElementById(r)))return i;if(u.id===r)return i.push(u),i}else if(v&&(u=v.getElementById(r))&&y(t,u)&&u.id===r)return i.push(u),i}else{if(p[2])return I.apply(i,t.getElementsByTagName(e)),i;if((r=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!S[e+" "]&&(!g||!g.test(e))){if(1!==V)v=t,w=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=_),l=(m=s(e)).length;l--;)m[l]="#"+c+" "+we(m[l]);w=m.join(","),v=X.test(e)&&fe(t.parentNode)||t}if(w)try{return I.apply(i,v.querySelectorAll(w)),i}catch(e){}finally{c===_&&t.removeAttribute("id")}}}return a(e.replace(N,"$1"),t,i,o)}function se(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[_]=!0,e}function ae(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le(function(t){return t=+t,le(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=re.support={},r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=re.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:x;return s!==h&&9===s.nodeType&&s.documentElement?(m=(h=s).documentElement,f=!r(h),x!==h&&(o=h.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ae(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(h.getElementsByClassName),n.getById=ae(function(e){return m.appendChild(e).id=_,!h.getElementsByName||!h.getElementsByName(_).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},w=[],g=[],(n.qsa=K.test(h.querySelectorAll))&&(ae(function(e){m.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+D+"*(?:value|"+E+")"),e.querySelectorAll("[id~="+_+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")}),ae(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+D+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),m.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=K.test(v=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ae(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),w.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),w=w.length&&new RegExp(w.join("|")),t=K.test(m.compareDocumentPosition),y=t||K.test(m.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return p=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===h||e.ownerDocument===x&&y(x,e)?-1:t===h||t.ownerDocument===x&&y(x,t)?1:c?A(c,e)-A(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],l=[t];if(!o||!r)return e===h?-1:t===h?1:o?-1:r?1:c?A(c,e)-A(c,t):0;if(o===r)return ce(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?ce(s[i],l[i]):s[i]===x?-1:l[i]===x?1:0},h):h},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&d(e),t=t.replace(z,"='$1']"),n.matchesSelector&&f&&!S[t+" "]&&(!w||!w.test(t))&&(!g||!g.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return re(t,h,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==h&&d(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==h&&d(e);var o=i.attrHandle[t.toLowerCase()],r=o&&P.call(i.attrHandle,t.toLowerCase())?o(e,t,!f):void 0;return void 0!==r?r:n.attributes||!f?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.escape=function(e){return(e+"").replace(te,ne)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,i=[],o=0,r=0;if(p=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(k),p){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return c=null,e},o=re.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=re.selectors={cacheLength:50,createPseudo:le,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Q.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&b(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=re.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(q," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),l="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,a){var u,c,p,d,h,m,f=r!==s?"nextSibling":"previousSibling",g=t.parentNode,w=l&&t.nodeName.toLowerCase(),v=!a&&!l,y=!1;if(g){if(r){for(;f;){for(d=t;d=d[f];)if(l?d.nodeName.toLowerCase()===w:1===d.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[s?g.firstChild:g.lastChild],s&&v){for(y=(h=(u=(c=(p=(d=g)[_]||(d[_]={}))[d.uniqueID]||(p[d.uniqueID]={}))[e]||[])[0]===V&&u[1])&&u[2],d=h&&g.childNodes[h];d=++h&&d&&d[f]||(y=h=0)||m.pop();)if(1===d.nodeType&&++y&&d===t){c[e]=[V,h,y];break}}else if(v&&(y=h=(u=(c=(p=(d=t)[_]||(d[_]={}))[d.uniqueID]||(p[d.uniqueID]={}))[e]||[])[0]===V&&u[1]),!1===y)for(;(d=++h&&d&&d[f]||(y=h=0)||m.pop())&&((l?d.nodeName.toLowerCase()!==w:1!==d.nodeType)||!++y||(v&&((c=(p=d[_]||(d[_]={}))[d.uniqueID]||(p[d.uniqueID]={}))[e]=[V,y]),d!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[_]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var i,r=o(e,t),s=r.length;s--;)e[i=A(e,r[s])]=!(n[i]=r[s])}):function(e){return o(e,0,n)}):o}},pseudos:{not:le(function(e){var t=[],n=[],i=l(e.replace(N,"$1"));return i[_]?le(function(e,t,n,o){for(var r,s=i(e,null,o,[]),l=e.length;l--;)(r=s[l])&&(e[l]=!(t[l]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return re(e,t).length>0}}),contains:le(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:le(function(e){return H.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===m},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:me(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=de(t);function ge(){}function we(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ve(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,l=R++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,a){var u,c,p,d=[V,l];if(a){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(c=(p=t[_]||(t[_]={}))[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=c[r])&&u[0]===V&&u[1]===l)return d[2]=u[2];if(c[r]=d,d[2]=e(t,n,a))return!0}return!1}}function ye(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function _e(e,t,n,i,o){for(var r,s=[],l=0,a=e.length,u=null!=t;l<a;l++)(r=e[l])&&(n&&!n(r,i,o)||(s.push(r),u&&t.push(l)));return s}function xe(e,t,n,i,o,r){return i&&!i[_]&&(i=xe(i)),o&&!o[_]&&(o=xe(o,r)),le(function(r,s,l,a){var u,c,p,d=[],h=[],m=s.length,f=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)re(e,t[i],n);return n}(t||"*",l.nodeType?[l]:l,[]),g=!e||!r&&t?f:_e(f,d,e,l,a),w=n?o||(r?e:m||i)?[]:s:g;if(n&&n(g,w,l,a),i)for(u=_e(w,h),i(u,[],l,a),c=u.length;c--;)(p=u[c])&&(w[h[c]]=!(g[h[c]]=p));if(r){if(o||e){if(o){for(u=[],c=w.length;c--;)(p=w[c])&&u.push(g[c]=p);o(null,w=[],u,a)}for(c=w.length;c--;)(p=w[c])&&(u=o?A(r,p):d[c])>-1&&(r[u]=!(s[u]=p))}}else w=_e(w===s?w.splice(m,w.length):w),o?o(null,s,w,a):I.apply(s,w)})}function Ve(e){for(var t,n,o,r=e.length,s=i.relative[e[0].type],l=s||i.relative[" "],a=s?1:0,c=ve(function(e){return e===t},l,!0),p=ve(function(e){return A(t,e)>-1},l,!0),d=[function(e,n,i){var o=!s&&(i||n!==u)||((t=n).nodeType?c(e,n,i):p(e,n,i));return t=null,o}];a<r;a++)if(n=i.relative[e[a].type])d=[ve(ye(d),n)];else{if((n=i.filter[e[a].type].apply(null,e[a].matches))[_]){for(o=++a;o<r&&!i.relative[e[o].type];o++);return xe(a>1&&ye(d),a>1&&we(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(N,"$1"),n,a<o&&Ve(e.slice(a,o)),o<r&&Ve(e=e.slice(o)),o<r&&we(e))}d.push(n)}return ye(d)}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,s=re.tokenize=function(e,t){var n,o,r,s,l,a,u,c=C[e+" "];if(c)return t?0:c.slice(0);for(l=e,a=[],u=i.preFilter;l;){for(s in n&&!(o=F.exec(l))||(o&&(l=l.slice(o[0].length)||l),a.push(r=[])),n=!1,(o=j.exec(l))&&(n=o.shift(),r.push({value:n,type:o[0].replace(N," ")}),l=l.slice(n.length)),i.filter)!(o=W[s].exec(l))||u[s]&&!(o=u[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),l=l.slice(n.length));if(!n)break}return t?l.length:l?re.error(e):C(e,a).slice(0)},l=re.compile=function(e,t){var n,o=[],r=[],l=S[e+" "];if(!l){for(t||(t=s(e)),n=t.length;n--;)(l=Ve(t[n]))[_]?o.push(l):r.push(l);(l=S(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,s,l,a,c){var p,m,g,w=0,v="0",y=r&&[],_=[],x=u,R=r||o&&i.find.TAG("*",c),b=V+=null==x?1:Math.random()||.1,C=R.length;for(c&&(u=s===h||s||c);v!==C&&null!=(p=R[v]);v++){if(o&&p){for(m=0,s||p.ownerDocument===h||(d(p),l=!f);g=e[m++];)if(g(p,s||h,l)){a.push(p);break}c&&(V=b)}n&&((p=!g&&p)&&w--,r&&y.push(p))}if(w+=v,n&&v!==w){for(m=0;g=t[m++];)g(y,_,s,l);if(r){if(w>0)for(;v--;)y[v]||_[v]||(_[v]=M.call(a));_=_e(_)}I.apply(a,_),c&&!r&&_.length>0&&w+t.length>1&&re.uniqueSort(a)}return c&&(V=b,u=x),y};return n?le(r):r}(r,o))).selector=e}return l},a=re.select=function(e,t,n,o){var r,a,u,c,p,d="function"==typeof e&&e,h=!o&&s(e=d.selector||e);if(n=n||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&f&&i.relative[a[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(Z,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=W.needsContext.test(e)?0:a.length;r--&&(u=a[r],!i.relative[c=u.type]);)if((p=i.find[c])&&(o=p(u.matches[0].replace(Z,ee),X.test(a[0].type)&&fe(t.parentNode)||t))){if(a.splice(r,1),!(e=o.length&&we(a)))return I.apply(n,o),n;break}}return(d||l(e,h))(o,t,!f,n,!t||X.test(e)&&fe(t.parentNode)||t),n},n.sortStable=_.split("").sort(k).join("")===_,n.detectDuplicates=!!p,d(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||ue(E,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),re}(e);_.find=R,_.expr=R.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=R.uniqueSort,_.text=R.getText,_.isXMLDoc=R.isXML,_.contains=R.contains,_.escapeSelector=R.escape;var b=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&_(e).is(n))break;i.push(e)}return i},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=_.expr.match.needsContext;function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,t,n){return f(t)?_.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?_.grep(e,function(e){return e===t!==n}):"string"!=typeof t?_.grep(e,function(e){return a.call(t,e)>-1!==n}):_.filter(t,e,n)}_.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?_.find.matchesSelector(i,e)?[i]:[]:_.find.matches(e,_.grep(t,function(e){return 1===e.nodeType}))},_.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(_(e).filter(function(){for(t=0;t<i;t++)if(_.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)_.find(e,o[t],n);return i>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&S.test(e)?_(e):e||[],!1).length}});var M,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var o,r;if(!e)return this;if(n=n||M,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),P.test(o[1])&&_.isPlainObject(t))for(o in t)f(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(r=i.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,M=_(i);var I=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&_(e);if(!S.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?_.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?a.call(_(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b(e,"parentNode")},parentsUntil:function(e,t,n){return b(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return b(e,"nextSibling")},prevAll:function(e){return b(e,"previousSibling")},nextUntil:function(e,t,n){return b(e,"nextSibling",n)},prevUntil:function(e,t,n){return b(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return k(e,"iframe")?e.contentDocument:(k(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},function(e,t){_.fn[e]=function(n,i){var o=_.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=_.filter(i,o)),this.length>1&&(O[e]||_.uniqueSort(o),I.test(e)&&o.reverse()),this.pushStack(o)}});var E=/[^\x20\t\r\n\f]+/g;function D(e){return e}function $(e){throw e}function U(e,t,n,i){var o;try{e&&f(o=e.promise)?o.call(e).done(t).fail(n):e&&f(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(E)||[],function(e,n){t[n]=!0}),t}(e):_.extend({},e);var t,n,i,o,r=[],s=[],l=-1,a=function(){for(o=o||e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<r.length;)!1===r[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},u={add:function(){return r&&(n&&!t&&(l=r.length-1,s.push(n)),function t(n){_.each(n,function(n,i){f(i)?e.unique&&u.has(i)||r.push(i):i&&i.length&&"string"!==y(i)&&t(i)})}(arguments),n&&!t&&a()),this},remove:function(){return _.each(arguments,function(e,t){for(var n;(n=_.inArray(t,r,n))>-1;)r.splice(n,1),n<=l&&l--}),this},has:function(e){return e?_.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||a()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},_.extend({Deferred:function(t){var n=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return _.Deferred(function(t){_.each(n,function(n,i){var o=f(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=o&&o.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,i,o){var r=0;function s(t,n,i,o){return function(){var l=this,a=arguments,u=function(){var e,u;if(!(t<r)){if((e=i.apply(l,a))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,f(u)?o?u.call(e,s(r,n,D,o),s(r,n,$,o)):(r++,u.call(e,s(r,n,D,o),s(r,n,$,o),s(r,n,D,n.notifyWith))):(i!==D&&(l=void 0,a=[e]),(o||n.resolveWith)(l,a))}},c=o?u:function(){try{u()}catch(e){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(e,c.stackTrace),t+1>=r&&(i!==$&&(l=void 0,a=[e]),n.rejectWith(l,a))}};t?c():(_.Deferred.getStackHook&&(c.stackTrace=_.Deferred.getStackHook()),e.setTimeout(c))}}return _.Deferred(function(e){n[0][3].add(s(0,e,f(o)?o:D,e.notifyWith)),n[1][3].add(s(0,e,f(t)?t:D)),n[2][3].add(s(0,e,f(i)?i:$))}).promise()},promise:function(e){return null!=e?_.extend(e,o):o}},r={};return _.each(n,function(e,t){var s=t[2],l=t[5];o[t[1]]=s.add,l&&s.add(function(){i=l},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),s.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),s=_.Deferred(),l=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?r.call(arguments):n,--t||s.resolveWith(i,o)}};if(t<=1&&(U(e,s.done(l(n)).resolve,s.reject,!t),"pending"===s.state()||f(o[n]&&o[n].then)))return s.then();for(;n--;)U(o[n],l(n),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},_.readyException=function(t){e.setTimeout(function(){throw t})};var q=_.Deferred();function N(){i.removeEventListener("DOMContentLoaded",N),e.removeEventListener("load",N),_.ready()}_.fn.ready=function(e){return q.then(e).catch(function(e){_.readyException(e)}),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||q.resolveWith(i,[_]))}}),_.ready.then=q.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?e.setTimeout(_.ready):(i.addEventListener("DOMContentLoaded",N),e.addEventListener("load",N));var F=function(e,t,n,i,o,r,s){var l=0,a=e.length,u=null==n;if("object"===y(n))for(l in o=!0,n)F(e,t,l,n[l],!0,r,s);else if(void 0!==i&&(o=!0,f(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(_(e),n)})),t))for(;l<a;l++)t(e[l],n,s?i:i.call(e[l],l,t(e[l],n)));return o?e:u?t.call(e):a?t(e[0],n):r},j=/^-ms-/,z=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function H(e){return e.replace(j,"ms-").replace(z,Q)}var W=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=_.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},W(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[H(t)]=n;else for(i in t)o[H(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][H(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(H):(t=H(t))in i?[t]:t.match(E)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||_.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var G=new Y,K=new Y,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Z(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(X,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return K.hasData(e)||G.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return G.access(e,t,n)},_removeData:function(e,t){G.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=K.get(r),1===r.nodeType&&!G.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=H(i.slice(5)),Z(r,i,o[i]));G.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){K.set(this,e)}):F(this,function(t){var n;if(r&&void 0===t)return void 0!==(n=K.get(r,e))?n:void 0!==(n=Z(r,e))?n:void 0;this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),_.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=G.get(e,t),n&&(!i||Array.isArray(n)?i=G.access(e,t,_.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),i=n.length,o=n.shift(),r=_._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){_.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return G.get(e,n)||G.access(e,n,{empty:_.Callbacks("once memory").add(function(){G.remove(e,[t+"queue",n])})})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each(function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)})},dequeue:function(e){return this.each(function(){_.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=_.Deferred(),r=this,s=this.length,l=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=G.get(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(l));return l(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_.contains(e.ownerDocument,e)&&"none"===_.css(e,"display")},oe=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in o=n.apply(e,i||[]),t)e.style[r]=s[r];return o};function re(e,t,n,i){var o,r,s=20,l=i?function(){return i.cur()}:function(){return _.css(e,t,"")},a=l(),u=n&&n[3]||(_.cssNumber[t]?"":"px"),c=(_.cssNumber[t]||"px"!==u&&+a)&&te.exec(_.css(e,t));if(c&&c[3]!==u){for(a/=2,u=u||c[3],c=+a||1;s--;)_.style(e,t,c+u),(1-r)*(1-(r=l()/a||.5))<=0&&(s=0),c/=r;c*=2,_.style(e,t,c+u),n=n||[]}return n&&(c=+c||+a||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=o)),o}var se={};function le(e){var t,n=e.ownerDocument,i=e.nodeName,o=se[i];return o||(t=n.body.appendChild(n.createElement(i)),o=_.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),se[i]=o,o)}function ae(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=G.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&ie(i)&&(o[r]=le(i))):"none"!==n&&(o[r]="none",G.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}_.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?_(this).show():_(this).hide()})}});var ue=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pe=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?_.merge([e],n):n}function me(e,t){for(var n=0,i=e.length;n<i;n++)G.set(e[n],"globalEval",!t||G.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var fe,ge,we=/<|&#?\w+;/;function ve(e,t,n,i,o){for(var r,s,l,a,u,c,p=t.createDocumentFragment(),d=[],h=0,m=e.length;h<m;h++)if((r=e[h])||0===r)if("object"===y(r))_.merge(d,r.nodeType?[r]:r);else if(we.test(r)){for(s=s||p.appendChild(t.createElement("div")),l=(ce.exec(r)||["",""])[1].toLowerCase(),a=de[l]||de._default,s.innerHTML=a[1]+_.htmlPrefilter(r)+a[2],c=a[0];c--;)s=s.lastChild;_.merge(d,s.childNodes),(s=p.firstChild).textContent=""}else d.push(t.createTextNode(r));for(p.textContent="",h=0;r=d[h++];)if(i&&_.inArray(r,i)>-1)o&&o.push(r);else if(u=_.contains(r.ownerDocument,r),s=he(p.appendChild(r),"script"),u&&me(s),n)for(c=0;r=s[c++];)pe.test(r.type||"")&&n.push(r);return p}fe=i.createDocumentFragment().appendChild(i.createElement("div")),(ge=i.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),fe.appendChild(ge),m.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue;var ye=i.documentElement,_e=/^key/,xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ve=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function be(){return!1}function Ce(){try{return i.activeElement}catch(e){}}function Se(e,t,n,i,o,r){var s,l;if("object"==typeof t){for(l in"string"!=typeof n&&(i=i||n,n=void 0),t)Se(e,l,n,i,t[l],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=be;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return _().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=_.guid++)),e.each(function(){_.event.add(this,t,o,i,n)})}_.event={global:{},add:function(e,t,n,i,o){var r,s,l,a,u,c,p,d,h,m,f,g=G.get(e);if(g)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&_.find.matchesSelector(ye,o),n.guid||(n.guid=_.guid++),(a=g.events)||(a=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(E)||[""]).length;u--;)h=f=(l=Ve.exec(t[u])||[])[1],m=(l[2]||"").split(".").sort(),h&&(p=_.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=_.event.special[h]||{},c=_.extend({type:h,origType:f,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&_.expr.match.needsContext.test(o),namespace:m.join(".")},r),(d=a[h])||((d=a[h]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,i,m,s)||e.addEventListener&&e.addEventListener(h,s)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),_.event.global[h]=!0)},remove:function(e,t,n,i,o){var r,s,l,a,u,c,p,d,h,m,f,g=G.hasData(e)&&G.get(e);if(g&&(a=g.events)){for(u=(t=(t||"").match(E)||[""]).length;u--;)if(h=f=(l=Ve.exec(t[u])||[])[1],m=(l[2]||"").split(".").sort(),h){for(p=_.event.special[h]||{},d=a[h=(i?p.delegateType:p.bindType)||h]||[],l=l[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)c=d[r],!o&&f!==c.origType||n&&n.guid!==c.guid||l&&!l.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(e,c));s&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,m,g.handle)||_.removeEvent(e,h,g.handle),delete a[h])}else for(h in a)_.event.remove(e,h+t[u],n,i,!0);_.isEmptyObject(a)&&G.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,l=_.event.fix(e),a=new Array(arguments.length),u=(G.get(this,"events")||{})[l.type]||[],c=_.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=_.event.handlers.call(this,l,u),t=0;(o=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(i=((_.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,o,r,s,l=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(r=[],s={},n=0;n<a;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?_(o,this).index(u)>-1:_.find(o,this,null,[u]).length),s[o]&&r.push(i);r.length&&l.push({elem:u,handlers:r})}return u=this,a<t.length&&l.push({elem:u,handlers:t.slice(a)}),l},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ce()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ce()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&k(this,"input"))return this.click(),!1},_default:function(e){return k(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:be,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:be,isPropagationStopped:be,isImmediatePropagationStopped:be,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return i&&(i===this||_.contains(this,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),_.fn.extend({on:function(e,t,n,i){return Se(this,e,t,n,i)},one:function(e,t,n,i){return Se(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,_(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=be),this.each(function(){_.event.remove(this,e,n,t)})}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pe=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ae(e,t){var n,i,o,r,s,l,a,u;if(1===t.nodeType){if(G.hasData(e)&&(r=G.access(e),s=G.set(t,r),u=r.events))for(o in delete s.handle,s.events={},u)for(n=0,i=u[o].length;n<i;n++)_.event.add(t,o,u[o][n]);K.hasData(e)&&(l=K.access(e),a=_.extend({},l),K.set(t,a))}}function Ee(e,t,n,i){t=s.apply([],t);var o,r,l,a,u,c,p=0,d=e.length,h=d-1,g=t[0],w=f(g);if(w||d>1&&"string"==typeof g&&!m.checkClone&&Te.test(g))return e.each(function(o){var r=e.eq(o);w&&(t[0]=g.call(this,o,r.html())),Ee(r,t,n,i)});if(d&&(r=(o=ve(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=(l=_.map(he(o,"script"),Ie)).length;p<d;p++)u=o,p!==h&&(u=_.clone(u,!0,!0),a&&_.merge(l,he(u,"script"))),n.call(e[p],u,p);if(a)for(c=l[l.length-1].ownerDocument,_.map(l,Oe),p=0;p<a;p++)u=l[p],pe.test(u.type||"")&&!G.access(u,"globalEval")&&_.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?_._evalUrl&&_._evalUrl(u.src):v(u.textContent.replace(Me,""),c,u))}return e}function De(e,t,n){for(var i,o=t?_.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||_.cleanData(he(i)),i.parentNode&&(n&&_.contains(i.ownerDocument,i)&&me(he(i,"script")),i.parentNode.removeChild(i));return e}_.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,l,a,u,c=e.cloneNode(!0),p=_.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(s=he(c),i=0,o=(r=he(e)).length;i<o;i++)l=r[i],a=s[i],u=void 0,"input"===(u=a.nodeName.toLowerCase())&&ue.test(l.type)?a.checked=l.checked:"input"!==u&&"textarea"!==u||(a.defaultValue=l.defaultValue);if(t)if(n)for(r=r||he(e),s=s||he(c),i=0,o=r.length;i<o;i++)Ae(r[i],s[i]);else Ae(e,c);return(s=he(c,"script")).length>0&&me(s,!p&&he(e,"script")),c},cleanData:function(e){for(var t,n,i,o=_.event.special,r=0;void 0!==(n=e[r]);r++)if(W(n)){if(t=n[G.expando]){if(t.events)for(i in t.events)o[i]?_.event.remove(n,i):_.removeEvent(n,i,t.handle);n[G.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),_.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return F(this,function(e){return void 0===e?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ee(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Ee(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return _.clone(this,e,t)})},html:function(e){return F(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!de[(ce.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ee(this,arguments,function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(he(this)),n&&n.replaceChild(t,this))},e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){_.fn[e]=function(e){for(var n,i=[],o=_(e),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),_(o[s])[t](n),l.apply(i,n.get());return this.pushStack(i)}});var $e=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ue=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(ne.join("|"),"i");function qe(e,t,n){var i,o,r,s,l=e.style;return(n=n||Ue(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||_.contains(e.ownerDocument,e)||(s=_.style(e,t)),!m.pixelBoxStyles()&&$e.test(s)&&Be.test(t)&&(i=l.width,o=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=n.width,l.width=i,l.minWidth=o,l.maxWidth=r)),void 0!==s?s+"":s}function Ne(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ye.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);o="1%"!==t.top,a=12===n(t.marginLeft),c.style.right="60%",l=36===n(t.right),r=36===n(t.width),c.style.position="absolute",s=36===c.offsetWidth||"absolute",ye.removeChild(u),c=null}}function n(e){return Math.round(parseFloat(e))}var o,r,s,l,a,u=i.createElement("div"),c=i.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,_.extend(m,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),l},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),s}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,je=/^--/,ze={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"},He=["Webkit","Moz","ms"],We=i.createElement("div").style;function Ye(e){var t=_.cssProps[e];return t||(t=_.cssProps[e]=function(e){if(e in We)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in We)return e}(e)||e),t}function Ge(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ke(e,t,n,i,o,r){var s="width"===t?1:0,l=0,a=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(a+=_.css(e,n+ne[s],!0,o)),i?("content"===n&&(a-=_.css(e,"padding"+ne[s],!0,o)),"margin"!==n&&(a-=_.css(e,"border"+ne[s]+"Width",!0,o))):(a+=_.css(e,"padding"+ne[s],!0,o),"padding"!==n?a+=_.css(e,"border"+ne[s]+"Width",!0,o):l+=_.css(e,"border"+ne[s]+"Width",!0,o));return!i&&r>=0&&(a+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-a-l-.5))),a}function Je(e,t,n){var i=Ue(e),o=qe(e,t,i),r="border-box"===_.css(e,"boxSizing",!1,i),s=r;if($e.test(o)){if(!n)return o;o="auto"}return s=s&&(m.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===_.css(e,"display",!1,i))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(o=parseFloat(o)||0)+Ke(e,t,n||(r?"border":"content"),s,i,o)+"px"}function Xe(e,t,n,i,o){return new Xe.prototype.init(e,t,n,i,o)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,l=H(t),a=je.test(t),u=e.style;if(a||(t=Ye(l)),s=_.cssHooks[t]||_.cssHooks[l],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:u[t];"string"===(r=typeof n)&&(o=te.exec(n))&&o[1]&&(n=re(e,t,o),r="number"),null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(_.cssNumber[l]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(a?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var o,r,s,l=H(t);return je.test(t)||(t=Ye(l)),(s=_.cssHooks[t]||_.cssHooks[l])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=qe(e,t,i)),"normal"===o&&t in Qe&&(o=Qe[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),_.each(["height","width"],function(e,t){_.cssHooks[t]={get:function(e,n,i){if(n)return!Fe.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,t,i):oe(e,ze,function(){return Je(e,t,i)})},set:function(e,n,i){var o,r=Ue(e),s="border-box"===_.css(e,"boxSizing",!1,r),l=i&&Ke(e,t,i,s,r);return s&&m.scrollboxSize()===r.position&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-Ke(e,t,"border",!1,r)-.5)),l&&(o=te.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Ge(0,n,l)}}}),_.cssHooks.marginLeft=Ne(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(e,t){_.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+ne[i]+t]=r[i]||r[i-2]||r[0];return o}},"margin"!==e&&(_.cssHooks[e+t].set=Ge)}),_.fn.extend({css:function(e,t){return F(this,function(e,t,n){var i,o,r={},s=0;if(Array.isArray(t)){for(i=Ue(e),o=t.length;s<o;s++)r[t[s]]=_.css(e,t[s],!1,i);return r}return void 0!==n?_.style(e,t,n):_.css(e,t)},e,t,arguments.length>1)}}),_.Tween=Xe,Xe.prototype={constructor:Xe,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(_.cssNumber[n]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,n=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xe.propHooks._default.set(this),this}},Xe.prototype.init.prototype=Xe.prototype,Xe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},Xe.propHooks.scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=Xe.prototype.init,_.fx.step={};var Ze,et,tt=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function it(){et&&(!1===i.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,_.fx.interval),_.fx.tick())}function ot(){return e.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function rt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=ne[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function st(e,t,n){for(var i,o=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function lt(e,t,n){var i,o,r=0,s=lt.prefilters.length,l=_.Deferred().always(function(){delete a.elem}),a=function(){if(o)return!1;for(var t=Ze||ot(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),r=0,s=u.tweens.length;r<s;r++)u.tweens[r].run(i);return l.notifyWith(e,[u,i,n]),i<1&&s?n:(s||l.notifyWith(e,[u,1,0]),l.resolveWith(e,[u]),!1)},u=l.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ze||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var i=_.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)u.tweens[n].run(1);return t?(l.notifyWith(e,[u,1,0]),l.resolveWith(e,[u,t])):l.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,i,o,r,s;for(n in e)if(o=t[i=H(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=_.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(c,u.opts.specialEasing);r<s;r++)if(i=lt.prefilters[r].call(u,e,c,u.opts))return f(i.stop)&&(_._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return _.map(c,st,u),f(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),_.fx.timer(_.extend(a,{elem:e,anim:u,queue:u.opts.queue})),u}_.Animation=_.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return re(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(E);for(var n,i=0,o=e.length;i<o;i++)n=e[i],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,r,s,l,a,u,c,p="width"in t||"height"in t,d=this,h={},m=e.style,f=e.nodeType&&ie(e),g=G.get(e,"fxshow");for(i in n.queue||(null==(s=_._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,_.queue(e,"fx").length||s.empty.fire()})})),t)if(o=t[i],tt.test(o)){if(delete t[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;f=!0}h[i]=g&&g[i]||_.style(e,i)}if((a=!_.isEmptyObject(t))||!_.isEmptyObject(h))for(i in p&&1===e.nodeType&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],null==(u=g&&g.display)&&(u=G.get(e,"display")),"none"===(c=_.css(e,"display"))&&(u?c=u:(ae([e],!0),u=e.style.display||u,c=_.css(e,"display"),ae([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===_.css(e,"float")&&(a||(d.done(function(){m.display=u}),null==u&&(c=m.display,u="none"===c?"":c)),m.display="inline-block")),n.overflow&&(m.overflow="hidden",d.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]})),a=!1,h)a||(g?"hidden"in g&&(f=g.hidden):g=G.access(e,"fxshow",{display:u}),r&&(g.hidden=!f),f&&ae([e],!0),d.done(function(){for(i in f||ae([e]),G.remove(e,"fxshow"),h)_.style(e,i,h[i])})),a=st(f?g[i]:0,i,d),i in g||(g[i]=a.start,f&&(a.end=a.start,a.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),_.speed=function(e,t,n){var i=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||f(e)&&e,duration:e,easing:n&&t||t&&!f(t)&&t};return _.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in _.fx.speeds?i.duration=_.fx.speeds[i.duration]:i.duration=_.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f(i.old)&&i.old.call(this),i.queue&&_.dequeue(this,i.queue)},i},_.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=_.isEmptyObject(e),r=_.speed(t,n,i),s=function(){var t=lt(this,_.extend({},e),r);(o||G.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=_.timers,s=G.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&nt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||_.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=G.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=_.timers,s=i?i.length:0;for(n.finish=!0,_.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),_.each(["toggle","show","hide"],function(e,t){var n=_.fn[t];_.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(rt(t,!0),e,i,o)}}),_.each({slideDown:rt("show"),slideUp:rt("hide"),slideToggle:rt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){_.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),Ze=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){et||(et=!0,it())},_.fx.stop=function(){et=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(t,n){return t=_.fx&&_.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=i.createElement("input"),t=i.createElement("select").appendChild(i.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=i.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var at,ut=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return F(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){_.removeAttr(this,e)})}}),_.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?_.prop(e,t,n):(1===r&&_.isXMLDoc(e)||(o=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?at:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=_.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(E);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),at={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||_.find.attr;ut[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=ut[s],ut[s]=o,o=null!=n(e,t,i)?s:null,ut[s]=r),o}});var ct=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function dt(e){return(e.match(E)||[]).join(" ")}function ht(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(E)||[]}_.fn.extend({prop:function(e,t){return F(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[_.propFix[e]||e]})}}),_.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&_.isXMLDoc(e)||(t=_.propFix[t]||t,o=_.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(e){var t,n,i,o,r,s,l,a=0;if(f(e))return this.each(function(t){_(this).addClass(e.call(this,t,ht(this)))});if((t=mt(e)).length)for(;n=this[a++];)if(o=ht(n),i=1===n.nodeType&&" "+dt(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(l=dt(i))&&n.setAttribute("class",l)}return this},removeClass:function(e){var t,n,i,o,r,s,l,a=0;if(f(e))return this.each(function(t){_(this).removeClass(e.call(this,t,ht(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[a++];)if(o=ht(n),i=1===n.nodeType&&" "+dt(o)+" "){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(l=dt(i))&&n.setAttribute("class",l)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):f(e)?this.each(function(n){_(this).toggleClass(e.call(this,n,ht(this),t),t)}):this.each(function(){var t,o,r,s;if(i)for(o=0,r=_(this),s=mt(e);t=s[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=ht(this))&&G.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":G.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+dt(ht(n))+" ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g;_.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=f(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,_(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=_.map(o,function(e){return null==e?"":e+""})),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=_.valHooks[o.type]||_.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(ft,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:dt(_.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,s="select-one"===e.type,l=s?null:[],a=s?r+1:o.length;for(i=r<0?a:s?r:0;i<a;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=_(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,i,o=e.options,r=_.makeArray(t),s=o.length;s--;)((i=o[s]).selected=_.inArray(_.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},m.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in e;var gt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(t,n,o,r){var s,l,a,u,c,d,h,m,w=[o||i],v=p.call(t,"type")?t.type:t,y=p.call(t,"namespace")?t.namespace.split("."):[];if(l=m=a=o=o||i,3!==o.nodeType&&8!==o.nodeType&&!gt.test(v+_.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),c=v.indexOf(":")<0&&"on"+v,(t=t[_.expando]?t:new _.Event(v,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:_.makeArray(n,[t]),h=_.event.special[v]||{},r||!h.trigger||!1!==h.trigger.apply(o,n))){if(!r&&!h.noBubble&&!g(o)){for(u=h.delegateType||v,gt.test(u+v)||(l=l.parentNode);l;l=l.parentNode)w.push(l),a=l;a===(o.ownerDocument||i)&&w.push(a.defaultView||a.parentWindow||e)}for(s=0;(l=w[s++])&&!t.isPropagationStopped();)m=l,t.type=s>1?u:h.bindType||v,(d=(G.get(l,"events")||{})[t.type]&&G.get(l,"handle"))&&d.apply(l,n),(d=c&&l[c])&&d.apply&&W(l)&&(t.result=d.apply(l,n),!1===t.result&&t.preventDefault());return t.type=v,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(w.pop(),n)||!W(o)||c&&f(o[v])&&!g(o)&&((a=o[c])&&(o[c]=null),_.event.triggered=v,t.isPropagationStopped()&&m.addEventListener(v,wt),o[v](),t.isPropagationStopped()&&m.removeEventListener(v,wt),_.event.triggered=void 0,a&&(o[c]=a)),t.result}},simulate:function(e,t,n){var i=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(i,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each(function(){_.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),m.focusin||_.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=G.access(i,t);o||i.addEventListener(e,n,!0),G.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=G.access(i,t)-1;o?G.access(i,t,o):(i.removeEventListener(e,n,!0),G.remove(i,t))}}});var vt=e.location,yt=Date.now(),_t=/\?/;_.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+t),n};var xt=/\[\]$/,Vt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,bt=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,i){var o;if(Array.isArray(t))_.each(t,function(t,o){n||xt.test(e)?i(e,o):Ct(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==y(t))i(e,t);else for(o in t)Ct(e+"["+o+"]",t[o],n,i)}_.param=function(e,t){var n,i=[],o=function(e,t){var n=f(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,function(){o(this.name,this.value)});else for(n in e)Ct(n,e[n],t,o);return i.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&bt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}});var St=/%20/g,kt=/#.*$/,Pt=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Lt=/^\/\//,It={},Ot={},At="*/".concat("*"),Et=i.createElement("a");function Dt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(E)||[];if(f(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function $t(e,t,n,i){var o={},r=e===Ot;function s(l){var a;return o[l]=!0,_.each(e[l]||[],function(e,l){var u=l(t,n,i);return"string"!=typeof u||r||o[u]?r?!(a=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),a}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Ut(e,t){var n,i,o=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&_.extend(!0,e,i),e}Et.href=vt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":At,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,_.ajaxSettings),t):Ut(_.ajaxSettings,e)},ajaxPrefilter:Dt(It),ajaxTransport:Dt(Ot),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,s,l,a,u,c,p,d,h,m=_.ajaxSetup({},n),f=m.context||m,g=m.context&&(f.nodeType||f.jquery)?_(f):_.event,w=_.Deferred(),v=_.Callbacks("once memory"),y=m.statusCode||{},x={},V={},R="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=Tt.exec(s);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=V[e.toLowerCase()]=V[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)b.always(e[b.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||R;return o&&o.abort(t),C(0,t),this}};if(w.promise(b),m.url=((t||m.url||vt.href)+"").replace(Lt,vt.protocol+"//"),m.type=n.method||n.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(E)||[""],null==m.crossDomain){u=i.createElement("a");try{u.href=m.url,u.href=u.href,m.crossDomain=Et.protocol+"//"+Et.host!=u.protocol+"//"+u.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=_.param(m.data,m.traditional)),$t(It,m,n,b),c)return b;for(d in(p=_.event&&m.global)&&0==_.active++&&_.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mt.test(m.type),r=m.url.replace(kt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(St,"+")):(h=m.url.slice(r.length),m.data&&(m.processData||"string"==typeof m.data)&&(r+=(_t.test(r)?"&":"?")+m.data,delete m.data),!1===m.cache&&(r=r.replace(Pt,"$1"),h=(_t.test(r)?"&":"?")+"_="+yt+++h),m.url=r+h),m.ifModified&&(_.lastModified[r]&&b.setRequestHeader("If-Modified-Since",_.lastModified[r]),_.etag[r]&&b.setRequestHeader("If-None-Match",_.etag[r])),(m.data&&m.hasContent&&!1!==m.contentType||n.contentType)&&b.setRequestHeader("Content-Type",m.contentType),b.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+At+"; q=0.01":""):m.accepts["*"]),m.headers)b.setRequestHeader(d,m.headers[d]);if(m.beforeSend&&(!1===m.beforeSend.call(f,b,m)||c))return b.abort();if(R="abort",v.add(m.complete),b.done(m.success),b.fail(m.error),o=$t(Ot,m,n,b)){if(b.readyState=1,p&&g.trigger("ajaxSend",[b,m]),c)return b;m.async&&m.timeout>0&&(a=e.setTimeout(function(){b.abort("timeout")},m.timeout));try{c=!1,o.send(x,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,n,i,l){var u,d,h,x,V,R=n;c||(c=!0,a&&e.clearTimeout(a),o=void 0,s=l||"",b.readyState=t>0?4:0,u=t>=200&&t<300||304===t,i&&(x=function(e,t,n){for(var i,o,r,s,l=e.contents,a=e.dataTypes;"*"===a[0];)a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in l)if(l[o]&&l[o].test(i)){a.unshift(o);break}if(a[0]in n)r=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==a[0]&&a.unshift(r),n[r]}(m,b,i)),x=function(e,t,n,i){var o,r,s,l,a,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!a&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=r,r=c.shift())if("*"===r)r=a;else if("*"!==a&&a!==r){if(!(s=u[a+" "+r]||u["* "+r]))for(o in u)if((l=o.split(" "))[1]===r&&(s=u[a+" "+l[0]]||u["* "+l[0]])){!0===s?s=u[o]:!0!==u[o]&&(r=l[0],c.unshift(l[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+a+" to "+r}}}return{state:"success",data:t}}(m,x,b,u),u?(m.ifModified&&((V=b.getResponseHeader("Last-Modified"))&&(_.lastModified[r]=V),(V=b.getResponseHeader("etag"))&&(_.etag[r]=V)),204===t||"HEAD"===m.type?R="nocontent":304===t?R="notmodified":(R=x.state,d=x.data,u=!(h=x.error))):(h=R,!t&&R||(R="error",t<0&&(t=0))),b.status=t,b.statusText=(n||R)+"",u?w.resolveWith(f,[d,R,b]):w.rejectWith(f,[b,R,h]),b.statusCode(y),y=void 0,p&&g.trigger(u?"ajaxSuccess":"ajaxError",[b,m,u?d:h]),v.fireWith(f,[b,R]),p&&(g.trigger("ajaxComplete",[b,m]),--_.active||_.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],function(e,t){_[t]=function(e,n,i,o){return f(n)&&(o=o||i,i=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:o,data:n,success:i},_.isPlainObject(e)&&e))}}),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return f(e)?this.each(function(t){_(this).wrapInner(e.call(this,t))}):this.each(function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=f(e);return this.each(function(n){_(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},qt=_.ajaxSettings.xhr();m.cors=!!qt&&"withCredentials"in qt,m.ajax=qt=!!qt,_.ajaxTransport(function(t){var n,i;if(m.cors||qt&&!t.crossDomain)return{send:function(o,r){var s,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)l[s]=t.xhrFields[s];for(s in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(s,o[s]);n=function(e){return function(){n&&(n=i=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?r(0,"error"):r(l.status,l.statusText):r(Bt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=n(),i=l.onerror=l.ontimeout=n("error"),void 0!==l.onabort?l.onabort=i:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),_.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),_.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(o,r){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){n&&n()}}});var Nt,Ft=[],jt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||_.expando+"_"+yt++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,l=!1!==t.jsonp&&(jt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&jt.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(jt,"$1"+o):!1!==t.jsonp&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||_.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){void 0===r?_(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ft.push(o)),s&&f(r)&&r(s[0]),s=r=void 0}),"script"}),m.createHTMLDocument=((Nt=i.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Nt.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((o=(t=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,t.head.appendChild(o)):t=i),s=!n&&[],(r=P.exec(e))?[t.createElement(r[1])]:(r=ve([e],t,s),s&&s.length&&_(s).remove(),_.merge([],r.childNodes)));var o,r,s},_.fn.load=function(e,t,n){var i,o,r,s=this,l=e.indexOf(" ");return l>-1&&(i=dt(e.slice(l)),e=e.slice(0,l)),f(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&_.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?_("<div>").append(_.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){_.fn[t]=function(e){return this.on(t,e)}}),_.expr.pseudos.animated=function(e){return _.grep(_.timers,function(t){return e===t.elem}).length},_.offset={setOffset:function(e,t,n){var i,o,r,s,l,a,u=_.css(e,"position"),c=_(e),p={};"static"===u&&(e.style.position="relative"),l=c.offset(),r=_.css(e,"top"),a=_.css(e,"left"),("absolute"===u||"fixed"===u)&&(r+a).indexOf("auto")>-1?(s=(i=c.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(a)||0),f(t)&&(t=t.call(e,n,_.extend({},l))),null!=t.top&&(p.top=t.top-l.top+s),null!=t.left&&(p.left=t.left-l.left+o),"using"in t?t.using.call(e,p):c.css(p)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){_.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===_.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),o.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-_.css(i,"marginTop",!0),left:t.left-o.left-_.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||ye})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;_.fn[e]=function(i){return F(this,function(e,i,o){var r;if(g(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o},e,i,arguments.length)}}),_.each(["top","left"],function(e,t){_.cssHooks[t]=Ne(m.pixelPosition,function(e,n){if(n)return n=qe(e,t),$e.test(n)?_(e).position()[t]+"px":n})}),_.each({Height:"height",Width:"width"},function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){_.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),l=n||(!0===o||!0===r?"margin":"border");return F(this,function(t,n,o){var r;return g(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?_.css(t,n,l):_.style(t,n,o,l)},t,s?o:void 0,s)}})}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),_.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),f(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||_.guid++,o},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=k,_.isFunction=f,_.isWindow=g,_.camelCase=H,_.type=y,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var zt=e.jQuery,Qt=e.$;return _.noConflict=function(t){return e.$===_&&(e.$=Qt),t&&e.jQuery===_&&(e.jQuery=zt),_},t||(e.jQuery=e.$=_),_})},{}],439:[function(e,t,n){function i(e){this.options=e||{},this.whitespaceDelimiter=this.options.spaces?" ":"\n"}i.prototype.code=function(e,t,n){return this.whitespaceDelimiter+this.whitespaceDelimiter+e+this.whitespaceDelimiter+this.whitespaceDelimiter},i.prototype.blockquote=function(e){return"\t"+e+this.whitespaceDelimiter},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return e},i.prototype.hr=function(){return this.whitespaceDelimiter+this.whitespaceDelimiter},i.prototype.list=function(e,t){return e},i.prototype.listitem=function(e){return"\t"+e+this.whitespaceDelimiter},i.prototype.paragraph=function(e){return this.whitespaceDelimiter+e+this.whitespaceDelimiter},i.prototype.table=function(e,t){return this.whitespaceDelimiter+e+this.whitespaceDelimiter+t+this.whitespaceDelimiter},i.prototype.tablerow=function(e){return e+this.whitespaceDelimiter},i.prototype.tablecell=function(e,t){return e+"\t"},i.prototype.strong=function(e){return e},i.prototype.em=function(e){return e},i.prototype.codespan=function(e){return e},i.prototype.br=function(){return this.whitespaceDelimiter+this.whitespaceDelimiter},i.prototype.del=function(e){return e},i.prototype.link=function(e,t,n){return n},i.prototype.image=function(e,t,n){return n},i.prototype.text=function(e){return e},t.exports=i},{}],440:[function(e,t,n){(function(e){!function(e){"use strict";var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:g,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function o(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_.defaults,this.rules=i.normal,this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.tables?this.rules=i.tables:this.rules=i.gfm)}i._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,i._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,i.def=d(i.def).replace("label",i._label).replace("title",i._title).getRegex(),i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=d(i.item,"gm").replace(/bull/g,i.bullet).getRegex(),i.list=d(i.list).replace(/bull/g,i.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+i.def.source+")").getRegex(),i._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",i._comment=/<!--(?!-?>)[\s\S]*?-->/,i.html=d(i.html,"i").replace("comment",i._comment).replace("tag",i._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),i.paragraph=d(i.paragraph).replace("hr",i.hr).replace("heading",i.heading).replace("lheading",i.lheading).replace("tag",i._tag).getRegex(),i.blockquote=d(i.blockquote).replace("paragraph",i.paragraph).getRegex(),i.normal=w({},i),i.gfm=w({},i.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),i.gfm.paragraph=d(i.paragraph).replace("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|"+i.list.source.replace("\\1","\\3")+"|").getRegex(),i.tables=w({},i.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),i.pedantic=w({},i.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",i._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),o.rules=i,o.lex=function(e,t){return new o(t).lex(e)},o.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},o.prototype.token=function(e,t){var n,o,r,s,l,a,u,c,p,d,h,m,f,g,w,_;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:y(r,"\n")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(t&&(r=this.rules.nptable.exec(e))&&(a={type:"table",header:v(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(r[0].length),h=0;h<a.align.length;h++)/^ *-+: *$/.test(a.align[h])?a.align[h]="right":/^ *:-+: *$/.test(a.align[h])?a.align[h]="center":/^ *:-+ *$/.test(a.align[h])?a.align[h]="left":a.align[h]=null;for(h=0;h<a.cells.length;h++)a.cells[h]=v(a.cells[h],a.header.length);this.tokens.push(a)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),u={type:"list_start",ordered:g=(s=r[2]).length>1,start:g?+s:"",loose:!1},this.tokens.push(u),c=[],n=!1,f=(r=r[0].match(this.rules.item)).length,h=0;h<f;h++)d=(a=r[h]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(d-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+d+"}","gm"),"")),this.options.smartLists&&h!==f-1&&(s===(l=i.bullet.exec(r[h+1])[0])||s.length>1&&l.length>1||(e=r.slice(h+1).join("\n")+e,h=f-1)),o=n||/\n\n(?!\s*$)/.test(a),h!==f-1&&(n="\n"===a.charAt(a.length-1),o||(o=n)),o&&(u.loose=!0),_=void 0,(w=/^\[[ xX]\] /.test(a))&&(_=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:w,checked:_,loose:o},c.push(p),this.tokens.push(p),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(u.loose)for(f=c.length,h=0;h<f;h++)c[h].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),m=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[m]||(this.tokens.links[m]={href:r[2],title:r[3]});else if(t&&(r=this.rules.table.exec(e))&&(a={type:"table",header:v(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(r[0].length),h=0;h<a.align.length;h++)/^ *-+: *$/.test(a.align[h])?a.align[h]="right":/^ *:-+: *$/.test(a.align[h])?a.align[h]="center":/^ *:-+ *$/.test(a.align[h])?a.align[h]="left":a.align[h]=null;for(h=0;h<a.cells.length;h++)a.cells[h]=v(a.cells[h].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\s.])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\s.])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:g,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function s(e,t){if(this.options=t||_.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new l,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.options.breaks?this.rules=r.breaks:this.rules=r.gfm)}function l(e){this.options=e||_.defaults}function a(){}function u(e){this.tokens=[],this.token=null,this.options=e||_.defaults,this.options.renderer=this.options.renderer||new l,this.renderer=this.options.renderer,this.renderer.options=this.options}function c(e,t){if(t){if(c.escapeTest.test(e))return e.replace(c.escapeReplace,function(e){return c.replacements[e]})}else if(c.escapeTestNoEncode.test(e))return e.replace(c.escapeReplaceNoEncode,function(e){return c.replacements[e]});return e}function p(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function d(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function h(e,t,n){if(e){try{var i=decodeURIComponent(p(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!f.test(n)&&(n=function(e,t){m[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?m[" "+e]=e+"/":m[" "+e]=y(e,"/",!0));return e=m[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}r._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=d(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=d(r.tag).replace("comment",i._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,r._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=d(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=d(r.reflink).replace("label",r._label).getRegex(),r.normal=w({},r),r.pedantic=w({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=w({},r.normal,{escape:d(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:d(r.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),r.gfm.url=d(r.gfm.url).replace("email",r.gfm._extended_email).getRegex(),r.breaks=w({},r.gfm,{br:d(r.br).replace("{2,}","*").getRegex(),text:d(r.gfm.text).replace("{2,}","*").getRegex()}),s.rules=r,s.output=function(e,t,n){return new s(t,n).output(e)},s.prototype.output=function(e){for(var t,n,i,o,r,l,a="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),a+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),i="@"===r[2]?"mailto:"+(n=c(this.mangle(r[1]))):n=c(r[1]),a+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.inRawBlock=!1),e=e.substring(r[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):c(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,i=r[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i))?(i=t[1],o=t[3]):o="":o=r[3]?r[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(r,{href:s.escapes(i),title:s.escapes(o)}),this.inLink=!1;else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e))){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),a+=this.renderer.strong(this.output(r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),a+=this.renderer.em(this.output(r[6]||r[5]||r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),a+=this.renderer.codespan(c(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),a+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),a+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.inRawBlock?a+=this.renderer.text(r[0]):a+=this.renderer.text(c(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===r[2])i="mailto:"+(n=c(r[0]));else{do{l=r[0],r[0]=this.rules._backpedal.exec(r[0])[0]}while(l!==r[0]);n=c(r[0]),i="www."===r[1]?"http://"+n:n}e=e.substring(r[0].length),a+=this.renderer.link(i,null,n)}return a},s.escapes=function(e){return e?e.replace(s.rules._escapes,"$1"):e},s.prototype.outputLink=function(e,t){var n=t.href,i=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,c(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},s.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,o=0;o<i;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},l.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+c(t,!0)+'">'+(n?e:c(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:c(e,!0))+"</code></pre>"},l.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},l.prototype.html=function(e){return e},l.prototype.heading=function(e,t,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},l.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},l.prototype.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},l.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},l.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},l.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},l.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},l.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},l.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},l.prototype.strong=function(e){return"<strong>"+e+"</strong>"},l.prototype.em=function(e){return"<em>"+e+"</em>"},l.prototype.codespan=function(e){return"<code>"+e+"</code>"},l.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},l.prototype.del=function(e){return"<del>"+e+"</del>"},l.prototype.link=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+c(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},l.prototype.image=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},l.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,n){return""+n},a.prototype.br=function(){return""},u.parse=function(e,t){return new u(t).parse(e)},u.prototype.parse=function(e){this.inline=new s(e.links,this.options),this.inlineText=new s(e.links,w({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},u.prototype.next=function(){return this.token=this.tokens.pop()},u.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},u.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},u.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,p(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,o="",r="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});r+=this.renderer.tablerow(n)}return this.renderer.table(o,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var s=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s,l);case"list_item_start":r="";var a=this.token.loose;for(this.token.task&&(r+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)r+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},c.escapeTest=/[&<>"']/,c.escapeReplace=/[&<>"']/g,c.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,c.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var m={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function w(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function v(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var i=!1,o=t;--o>=0&&"\\"===n[o];)i=!i;return i?"|":" |"}).split(/ \|/),i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var i=0;i<e.length;){var o=e.charAt(e.length-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,e.length-i)}function _(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null);var i,r,s=(t=w({},_.defaults,t||{})).highlight,l=0;try{i=o.lex(e,t)}catch(e){return n(e)}r=i.length;var a=function(e){if(e)return t.highlight=s,n(e);var o;try{o=u.parse(i,t)}catch(t){e=t}return t.highlight=s,e?n(e):n(null,o)};if(!s||s.length<3)return a();if(delete t.highlight,!r)return a();for(;l<i.length;l++)!function(e){"code"!==e.type?--r||a():s(e.text,e.lang,function(t,n){return t?a(t):null==n||n===e.text?--r||a():(e.text=n,e.escaped=!0,void(--r||a()))})}(i[l])}else try{return t&&(t=w({},_.defaults,t)),u.parse(o.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||_.defaults).silent)return"<p>An error occurred:</p><pre>"+c(e.message+"",!0)+"</pre>";throw e}}g.exec=g,_.options=_.setOptions=function(e){return w(_.defaults,e),_},_.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new l,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},_.defaults=_.getDefaults(),_.Parser=u,_.parser=u.parse,_.Renderer=l,_.TextRenderer=a,_.Lexer=o,_.lexer=o.lex,_.InlineLexer=s,_.inlineLexer=s.output,_.parse=_,void 0!==t&&"object"==typeof n?t.exports=_:"function"==typeof define&&define.amd?define(function(){return _}):e.marked=_}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],441:[function(e,t,n){var i,o;i=this,o=function(){"use strict";var n,i;function o(){return n.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)p(t,n)&&(e[n]=t[n]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,i){return Tt(e,t,n,i,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function f(e){if(null==e._isValid){var t=m(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function g(e){var t=h(NaN);return null!=e?d(m(t),e):m(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var w=o.momentProperties=[];function v(e,t){var n,i,o;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=m(t)),l(t._locale)||(e._locale=t._locale),w.length>0)for(n=0;n<w.length;n++)l(o=t[i=w[n]])||(e[i]=o);return e}var y=!1;function _(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,o.updateOffset(this),y=!1)}function x(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function V(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function R(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=V(t)),n}function b(e,t,n){var i,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&R(e[i])!==R(t[i]))&&s++;return s+r}function C(e){!1===o.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return d(function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,e),n){for(var i,r=[],s=0;s<arguments.length;s++){if(i="","object"==typeof arguments[s]){for(var l in i+="\n["+s+"] ",arguments[0])i+=l+": "+arguments[0][l]+", ";i=i.slice(0,-2)}else i=arguments[s];r.push(i)}C(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var k,P={};function T(e,t){null!=o.deprecationHandler&&o.deprecationHandler(e,t),P[e]||(C(t),P[e]=!0)}function M(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function L(e,t){var n,i=d({},e);for(n in t)p(t,n)&&(s(e[n])&&s(t[n])?(i[n]={},d(i[n],e[n]),d(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)p(e,n)&&!p(t,n)&&s(e[n])&&(i[n]=d({},i[n]));return i}function I(e){null!=e&&this.set(e)}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)p(e,t)&&n.push(t);return n};var O={};function A(e,t){var n=e.toLowerCase();O[n]=O[n+"s"]=O[t]=e}function E(e){return"string"==typeof e?O[e]||O[e.toLowerCase()]:void 0}function D(e){var t,n,i={};for(n in e)p(e,n)&&(t=E(n))&&(i[t]=e[n]);return i}var $={};function U(e,t){$[e]=t}function B(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}var q=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},j={};function z(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(j[e]=o),t&&(j[t[0]]=function(){return B(o.apply(this,arguments),t[1],t[2])}),n&&(j[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function Q(e,t){return e.isValid()?(t=H(t,e.localeData()),F[t]=F[t]||function(e){var t,n,i,o=e.match(q);for(t=0,n=o.length;t<n;t++)j[o[t]]?o[t]=j[o[t]]:o[t]=(i=o[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,r="";for(i=0;i<n;i++)r+=M(o[i])?o[i].call(t,e):o[i];return r}}(t),F[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(N.lastIndex=0;n>=0&&N.test(e);)e=e.replace(N,i),N.lastIndex=0,n-=1;return e}var W=/\d/,Y=/\d\d/,G=/\d{3}/,K=/\d{4}/,J=/[+-]?\d{6}/,X=/\d\d?/,Z=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,te=/\d{1,3}/,ne=/\d{1,4}/,ie=/[+-]?\d{1,6}/,oe=/\d+/,re=/[+-]?\d+/,se=/Z|[+-]\d\d:?\d\d/gi,le=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ue={};function ce(e,t,n){ue[e]=M(t)?t:function(e,i){return e&&n?n:t}}function pe(e,t){return p(ue,e)?ue[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,o){return t||n||i||o})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function me(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),a(t)&&(i=function(e,n){n[t]=R(e)}),n=0;n<e.length;n++)he[e[n]]=i}function fe(e,t){me(e,function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)})}function ge(e,t,n){null!=t&&p(he,e)&&he[e](t,n._a,n,e)}var we=0,ve=1,ye=2,_e=3,xe=4,Ve=5,Re=6,be=7,Ce=8;function Se(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}z("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),A("year","y"),U("year",1),ce("Y",re),ce("YY",X,Y),ce("YYYY",ne,K),ce("YYYYY",ie,J),ce("YYYYYY",ie,J),me(["YYYYY","YYYYYY"],we),me("YYYY",function(e,t){t[we]=2===e.length?o.parseTwoDigitYear(e):R(e)}),me("YY",function(e,t){t[we]=o.parseTwoDigitYear(e)}),me("Y",function(e,t){t[we]=parseInt(e,10)}),o.parseTwoDigitYear=function(e){return R(e)+(R(e)>68?1900:2e3)};var Pe,Te=Me("FullYear",!0);function Me(e,t){return function(n){return null!=n?(Ie(this,e,n),o.updateOffset(this,t),this):Le(this,e)}}function Le(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Oe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Oe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?ke(e)?29:28:31-i%7%2}Pe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),z("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),U("month",8),ce("M",X),ce("MM",X,Y),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),me(["M","MM"],function(e,t){t[ve]=R(e)-1}),me(["MMM","MMMM"],function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[ve]=o:m(n).invalidMonth=e});var Ae=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),De="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function $e(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=R(t);else if(!a(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?($e(this,e),o.updateOffset(this,!0),this):Le(this,"Month")}var Be=ae,qe=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],r=[];for(t=0;t<12;t++)n=h([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),r.sort(e),t=0;t<12;t++)i[t]=de(i[t]),o[t]=de(o[t]);for(t=0;t<24;t++)r[t]=de(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Fe(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function je(e,t,n){var i=7+t-n;return-((7+Fe(e,0,i).getUTCDay()-t)%7)+i-1}function ze(e,t,n,i,o){var r,s,l=1+7*(t-1)+(7+n-i)%7+je(e,i,o);return l<=0?s=Se(r=e-1)+l:l>Se(e)?(r=e+1,s=l-Se(e)):(r=e,s=l),{year:r,dayOfYear:s}}function Qe(e,t,n){var i,o,r=je(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1;return s<1?i=s+He(o=e.year()-1,t,n):s>He(e.year(),t,n)?(i=s-He(e.year(),t,n),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function He(e,t,n){var i=je(e,t,n),o=je(e+1,t,n);return(Se(e)-i+o)/7}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),U("week",5),U("isoWeek",5),ce("w",X),ce("ww",X,Y),ce("W",X),ce("WW",X,Y),fe(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=R(e)}),z("d",0,"do","day"),z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),ce("d",X),ce("e",X),ce("E",X),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:m(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,i){t[i]=R(e)});var We="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ye="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ke=ae,Je=ae,Xe=ae;function Ze(){function e(e,t){return t.length-e.length}var t,n,i,o,r,s=[],l=[],a=[],u=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),i=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),r=this.weekdays(n,""),s.push(i),l.push(o),a.push(r),u.push(i),u.push(o),u.push(r);for(s.sort(e),l.sort(e),a.sort(e),u.sort(e),t=0;t<7;t++)l[t]=de(l[t]),a[t]=de(a[t]),u[t]=de(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function et(){return this.hours()%12||12}function tt(e,t){z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function nt(e,t){return t._meridiemParse}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,et),z("k",["kk",2],0,function(){return this.hours()||24}),z("hmm",0,0,function(){return""+et.apply(this)+B(this.minutes(),2)}),z("hmmss",0,0,function(){return""+et.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),tt("a",!0),tt("A",!1),A("hour","h"),U("hour",13),ce("a",nt),ce("A",nt),ce("H",X),ce("h",X),ce("k",X),ce("HH",X,Y),ce("hh",X,Y),ce("kk",X,Y),ce("hmm",Z),ce("hmmss",ee),ce("Hmm",Z),ce("Hmmss",ee),me(["H","HH"],_e),me(["k","kk"],function(e,t,n){var i=R(e);t[_e]=24===i?0:i}),me(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),me(["h","hh"],function(e,t,n){t[_e]=R(e),m(n).bigHour=!0}),me("hmm",function(e,t,n){var i=e.length-2;t[_e]=R(e.substr(0,i)),t[xe]=R(e.substr(i)),m(n).bigHour=!0}),me("hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[_e]=R(e.substr(0,i)),t[xe]=R(e.substr(i,2)),t[Ve]=R(e.substr(o)),m(n).bigHour=!0}),me("Hmm",function(e,t,n){var i=e.length-2;t[_e]=R(e.substr(0,i)),t[xe]=R(e.substr(i))}),me("Hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[_e]=R(e.substr(0,i)),t[xe]=R(e.substr(i,2)),t[Ve]=R(e.substr(o))});var it,ot=Me("Hours",!0),rt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:De,week:{dow:0,doy:6},weekdays:We,weekdaysMin:Ge,weekdaysShort:Ye,meridiemParse:/[ap]\.?m?\.?/i},st={},lt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ut(n){var i=null;if(!st[n]&&void 0!==t&&t&&t.exports)try{i=it._abbr,e("./locale/"+n),ct(i)}catch(e){}return st[n]}function ct(e,t){var n;return e&&((n=l(t)?dt(e):pt(e,t))?it=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),it._abbr}function pt(e,t){if(null!==t){var n,i=rt;if(t.abbr=e,null!=st[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=st[e]._config;else if(null!=t.parentLocale)if(null!=st[t.parentLocale])i=st[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return lt[t.parentLocale]||(lt[t.parentLocale]=[]),lt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return st[e]=new I(L(i,t)),lt[e]&&lt[e].forEach(function(e){pt(e.name,e.config)}),ct(e),st[e]}return delete st[e],null}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return it;if(!r(e)){if(t=ut(e))return t;e=[e]}return function(e){for(var t,n,i,o,r=0;r<e.length;){for(t=(o=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;t>0;){if(i=ut(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&b(o,n,!0)>=t-1)break;t--}r++}return it}(e)}function ht(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[ye]<1||n[ye]>Oe(n[we],n[ve])?ye:n[_e]<0||n[_e]>24||24===n[_e]&&(0!==n[xe]||0!==n[Ve]||0!==n[Re])?_e:n[xe]<0||n[xe]>59?xe:n[Ve]<0||n[Ve]>59?Ve:n[Re]<0||n[Re]>999?Re:-1,m(e)._overflowDayOfYear&&(t<we||t>ye)&&(t=ye),m(e)._overflowWeeks&&-1===t&&(t=be),m(e)._overflowWeekday&&-1===t&&(t=Ce),m(e).overflow=t),e}function mt(e,t,n){return null!=e?e:null!=t?t:n}function ft(e){var t,n,i,r,s,l=[];if(!e._d){for(i=function(e){var t=new Date(o.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ye]&&null==e._a[ve]&&function(e){var t,n,i,o,r,s,l,a;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,s=4,n=mt(t.GG,e._a[we],Qe(Mt(),1,4).year),i=mt(t.W,1),((o=mt(t.E,1))<1||o>7)&&(a=!0);else{r=e._locale._week.dow,s=e._locale._week.doy;var u=Qe(Mt(),r,s);n=mt(t.gg,e._a[we],u.year),i=mt(t.w,u.week),null!=t.d?((o=t.d)<0||o>6)&&(a=!0):null!=t.e?(o=t.e+r,(t.e<0||t.e>6)&&(a=!0)):o=r}i<1||i>He(n,r,s)?m(e)._overflowWeeks=!0:null!=a?m(e)._overflowWeekday=!0:(l=ze(n,i,o,r,s),e._a[we]=l.year,e._dayOfYear=l.dayOfYear)}(e),null!=e._dayOfYear&&(s=mt(e._a[we],i[we]),(e._dayOfYear>Se(s)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Fe(s,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=l[t]=i[t];for(;t<7;t++)e._a[t]=l[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_e]&&0===e._a[xe]&&0===e._a[Ve]&&0===e._a[Re]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?Fe:function(e,t,n,i,o,r,s){var l=new Date(e,t,n,i,o,r,s);return e<100&&e>=0&&isFinite(l.getFullYear())&&l.setFullYear(e),l}).apply(null,l),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}var gt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],_t=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xt=/^\/?Date\((\-?\d+)/i;function Vt(e){var t,n,i,o,r,s,l=e._i,a=gt.exec(l)||wt.exec(l);if(a){for(m(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(a[1])){o=yt[t][0],i=!1!==yt[t][2];break}if(null==o)return void(e._isValid=!1);if(a[3]){for(t=0,n=_t.length;t<n;t++)if(_t[t][1].exec(a[3])){r=(a[2]||" ")+_t[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(a[4]){if(!vt.exec(a[4]))return void(e._isValid=!1);s="Z"}e._f=o+(r||"")+(s||""),kt(e)}else e._isValid=!1}var Rt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function bt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function St(e){var t,n,i,o,r,s,l,a=Rt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(a){var u=(t=a[4],n=a[3],i=a[2],o=a[5],r=a[6],s=a[7],l=[bt(t),De.indexOf(n),parseInt(i,10),parseInt(o,10),parseInt(r,10)],s&&l.push(parseInt(s,10)),l);if(!function(e,t,n){return!e||Ye.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(a[1],u,e))return;e._a=u,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}(a[8],a[9],a[10]),e._d=Fe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==o.ISO_8601)if(e._f!==o.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,r,s,l=""+e._i,a=l.length,u=0;for(i=H(e._f,e._locale).match(q)||[],t=0;t<i.length;t++)r=i[t],(n=(l.match(pe(r,e))||[])[0])&&((s=l.substr(0,l.indexOf(n))).length>0&&m(e).unusedInput.push(s),l=l.slice(l.indexOf(n)+n.length),u+=n.length),j[r]?(n?m(e).empty=!1:m(e).unusedTokens.push(r),ge(r,n,e)):e._strict&&!n&&m(e).unusedTokens.push(r);m(e).charsLeftOver=a-u,l.length>0&&m(e).unusedInput.push(l),e._a[_e]<=12&&!0===m(e).bigHour&&e._a[_e]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[_e]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[_e],e._meridiem),ft(e),ht(e)}else St(e);else Vt(e)}function Pt(e){var t=e._i,n=e._f;return e._locale=e._locale||dt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),x(t)?new _(ht(t)):(u(t)?e._d=t:r(n)?function(e){var t,n,i,o,r;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)r=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],kt(t),f(t)&&(r+=m(t).charsLeftOver,r+=10*m(t).unusedTokens.length,m(t).score=r,(null==i||r<i)&&(i=r,n=t));d(e,n||t)}(e):n?kt(e):function(e){var t=e._i;l(t)?e._d=new Date(o.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=xt.exec(e._i);null===t?(Vt(e),!1===e._isValid&&(delete e._isValid,St(e),!1===e._isValid&&(delete e._isValid,o.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=c(t.slice(0),function(e){return parseInt(e,10)}),ft(e)):s(t)?function(e){if(!e._d){var t=D(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ft(e)}}(e):a(t)?e._d=new Date(t):o.createFromInputFallback(e)}(e),f(e)||(e._d=null),e))}function Tt(e,t,n,i,o){var l,a={};return!0!==n&&!1!==n||(i=n,n=void 0),(s(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||r(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=n,a._i=e,a._f=t,a._strict=i,(l=new _(ht(Pt(a))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Mt(e,t,n,i){return Tt(e,t,n,i,!1)}o.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),o.ISO_8601=function(){},o.RFC_2822=function(){};var Lt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Mt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),It=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Mt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()});function Ot(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Mt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var At=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Et(e){var t=D(e),n=t.year||0,i=t.quarter||0,o=t.month||0,r=t.week||t.isoWeek||0,s=t.day||0,l=t.hour||0,a=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Pe.call(At,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<At.length;++i)if(e[At[i]]){if(n)return!1;parseFloat(e[At[i]])!==R(e[At[i]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*u+6e4*a+1e3*l*60*60,this._days=+s+7*r,this._months=+o+3*i+12*n,this._data={},this._locale=dt(),this._bubble()}function Dt(e){return e instanceof Et}function $t(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ut(e,t){z(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)})}Ut("Z",":"),Ut("ZZ",""),ce("Z",le),ce("ZZ",le),me(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=qt(le,e)});var Bt=/([\+\-]|\d\d)/gi;function qt(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Bt)||["-",0,0],o=60*i[1]+R(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Nt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(x(e)||u(e)?e.valueOf():Mt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),o.updateOffset(n,!1),n):Mt(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function jt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}o.updateOffset=function(){};var zt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Qt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ht(e,t){var n,i,o,r=e,s=null;return Dt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(r={},t?r[t]=e:r.milliseconds=e):(s=zt.exec(e))?(n="-"===s[1]?-1:1,r={y:0,d:R(s[ye])*n,h:R(s[_e])*n,m:R(s[xe])*n,s:R(s[Ve])*n,ms:R($t(1e3*s[Re]))*n}):(s=Qt.exec(e))?(n="-"===s[1]?-1:1,r={y:Wt(s[2],n),M:Wt(s[3],n),w:Wt(s[4],n),d:Wt(s[5],n),h:Wt(s[6],n),m:Wt(s[7],n),s:Wt(s[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nt(t,e),e.isBefore(t)?n=Yt(e,t):((n=Yt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Mt(r.from),Mt(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),i=new Et(r),Dt(e)&&p(e,"_locale")&&(i._locale=e._locale),i}function Wt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Yt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Gt(e,t){return function(n,i){var o;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),Kt(this,Ht(n="string"==typeof n?+n:n,i),e),this}}function Kt(e,t,n,i){var r=t._milliseconds,s=$t(t._days),l=$t(t._months);e.isValid()&&(i=null==i||i,l&&$e(e,Le(e,"Month")+l*n),s&&Ie(e,"Date",Le(e,"Date")+s*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&o.updateOffset(e,s||l))}Ht.fn=Et.prototype,Ht.invalid=function(){return Ht(NaN)};var Jt=Gt(1,"add"),Xt=Gt(-1,"subtract");function Zt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function en(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tn=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function nn(){return this._locale}function on(e,t){z(0,[e,e.length],0,t)}function rn(e,t,n,i,o){var r;return null==e?Qe(this,i,o).year:(t>(r=He(e,i,o))&&(t=r),function(e,t,n,i,o){var r=ze(e,t,n,i,o),s=Fe(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,e,t,n,i,o))}z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),on("gggg","weekYear"),on("ggggg","weekYear"),on("GGGG","isoWeekYear"),on("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),ce("G",re),ce("g",re),ce("GG",X,Y),ce("gg",X,Y),ce("GGGG",ne,K),ce("gggg",ne,K),ce("GGGGG",ie,J),ce("ggggg",ie,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=R(e)}),fe(["gg","GG"],function(e,t,n,i){t[i]=o.parseTwoDigitYear(e)}),z("Q",0,"Qo","quarter"),A("quarter","Q"),U("quarter",7),ce("Q",W),me("Q",function(e,t){t[ve]=3*(R(e)-1)}),z("D",["DD",2],"Do","date"),A("date","D"),U("date",9),ce("D",X),ce("DD",X,Y),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),me(["D","DD"],ye),me("Do",function(e,t){t[ye]=R(e.match(X)[0])});var sn=Me("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),U("dayOfYear",4),ce("DDD",te),ce("DDDD",G),me(["DDD","DDDD"],function(e,t,n){n._dayOfYear=R(e)}),z("m",["mm",2],0,"minute"),A("minute","m"),U("minute",14),ce("m",X),ce("mm",X,Y),me(["m","mm"],xe);var ln=Me("Minutes",!1);z("s",["ss",2],0,"second"),A("second","s"),U("second",15),ce("s",X),ce("ss",X,Y),me(["s","ss"],Ve);var an,un=Me("Seconds",!1);for(z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),U("millisecond",16),ce("S",te,W),ce("SS",te,Y),ce("SSS",te,G),an="SSSS";an.length<=9;an+="S")ce(an,oe);function cn(e,t){t[Re]=R(1e3*("0."+e))}for(an="S";an.length<=9;an+="S")me(an,cn);var pn=Me("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var dn=_.prototype;function hn(e){return e}dn.add=Jt,dn.calendar=function(e,t){var n=e||Mt(),i=Nt(n,this).startOf("day"),r=o.calendarFormat(this,i)||"sameElse",s=t&&(M(t[r])?t[r].call(this,n):t[r]);return this.format(s||this.localeData().calendar(r,this,Mt(n)))},dn.clone=function(){return new _(this)},dn.diff=function(e,t,n){var i,o,r;if(!this.isValid())return NaN;if(!(i=Nt(e,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),t=E(t)){case"year":r=Zt(this,i)/12;break;case"month":r=Zt(this,i);break;case"quarter":r=Zt(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-o)/864e5;break;case"week":r=(this-i-o)/6048e5;break;default:r=this-i}return n?r:V(r)},dn.endOf=function(e){return void 0===(e=E(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},dn.format=function(e){e||(e=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var t=Q(this,e);return this.localeData().postformat(t)},dn.from=function(e,t){return this.isValid()&&(x(e)&&e.isValid()||Mt(e).isValid())?Ht({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},dn.fromNow=function(e){return this.from(Mt(),e)},dn.to=function(e,t){return this.isValid()&&(x(e)&&e.isValid()||Mt(e).isValid())?Ht({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},dn.toNow=function(e){return this.to(Mt(),e)},dn.get=function(e){return M(this[e=E(e)])?this[e]():this},dn.invalidAt=function(){return m(this).overflow},dn.isAfter=function(e,t){var n=x(e)?e:Mt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},dn.isBefore=function(e,t){var n=x(e)?e:Mt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},dn.isBetween=function(e,t,n,i){var o=x(e)?e:Mt(e),r=x(t)?t:Mt(t);return!!(this.isValid()&&o.isValid()&&r.isValid())&&("("===(i=i||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===i[1]?this.isBefore(r,n):!this.isAfter(r,n))},dn.isSame=function(e,t){var n,i=x(e)?e:Mt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},dn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},dn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},dn.isValid=function(){return f(this)},dn.lang=tn,dn.locale=en,dn.localeData=nn,dn.max=It,dn.min=Lt,dn.parsingFlags=function(){return d({},m(this))},dn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:$[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=D(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(M(this[e=E(e)]))return this[e](t);return this},dn.startOf=function(e){switch(e=E(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},dn.subtract=Xt,dn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},dn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},dn.toDate=function(){return new Date(this.valueOf())},dn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Q(n,"Z")):Q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+o)},dn.toJSON=function(){return this.isValid()?this.toISOString():null},dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},dn.unix=function(){return Math.floor(this.valueOf()/1e3)},dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},dn.year=Te,dn.isLeapYear=function(){return ke(this.year())},dn.weekYear=function(e){return rn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},dn.isoWeekYear=function(e){return rn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},dn.quarter=dn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},dn.month=Ue,dn.daysInMonth=function(){return Oe(this.year(),this.month())},dn.week=dn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},dn.isoWeek=dn.isoWeeks=function(e){var t=Qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},dn.weeksInYear=function(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)},dn.isoWeeksInYear=function(){return He(this.year(),1,4)},dn.date=sn,dn.day=dn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},dn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},dn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},dn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},dn.hour=dn.hours=ot,dn.minute=dn.minutes=ln,dn.second=dn.seconds=un,dn.millisecond=dn.milliseconds=pn,dn.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=qt(le,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Ft(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Kt(this,Ht(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Ft(this)},dn.utc=function(e){return this.utcOffset(0,e)},dn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this},dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=qt(se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},dn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Mt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},dn.isUtc=jt,dn.isUTC=jt,dn.zoneAbbr=function(){return this._isUTC?"UTC":""},dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},dn.dates=S("dates accessor is deprecated. Use date instead.",sn),dn.months=S("months accessor is deprecated. Use month instead",Ue),dn.years=S("years accessor is deprecated. Use year instead",Te),dn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),dn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Pt(e))._a){var t=e._isUTC?h(e._a):Mt(e._a);this._isDSTShifted=this.isValid()&&b(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var mn=I.prototype;function fn(e,t,n,i){var o=dt(),r=h().set(i,t);return o[n](r,e)}function gn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return fn(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=fn(e,i,n,"month");return o}function wn(e,t,n,i){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var o,r=dt(),s=e?r._week.dow:0;if(null!=n)return fn(t,(n+s)%7,i,"day");var l=[];for(o=0;o<7;o++)l[o]=fn(t,(o+s)%7,i,"day");return l}mn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return M(i)?i.call(t,n):i},mn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},mn.invalidDate=function(){return this._invalidDate},mn.ordinal=function(e){return this._ordinal.replace("%d",e)},mn.preparse=hn,mn.postformat=hn,mn.relativeTime=function(e,t,n,i){var o=this._relativeTime[n];return M(o)?o(e,t,n,i):o.replace(/%d/i,e)},mn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return M(n)?n(t):n.replace(/%s/i,t)},mn.set=function(e){var t,n;for(n in e)M(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ae).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},mn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ae.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mn.monthsParse=function(e,t,n){var i,o,r;if(this._monthsParseExact)return function(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=Pe.call(this._shortMonthsParse,s))?o:null:-1!==(o=Pe.call(this._longMonthsParse,s))?o:null:"MMM"===t?-1!==(o=Pe.call(this._shortMonthsParse,s))?o:-1!==(o=Pe.call(this._longMonthsParse,s))?o:null:-1!==(o=Pe.call(this._longMonthsParse,s))?o:-1!==(o=Pe.call(this._shortMonthsParse,s))?o:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},mn.monthsRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=qe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},mn.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=Be),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},mn.week=function(e){return Qe(e,this._week.dow,this._week.doy).week},mn.firstDayOfYear=function(){return this._week.doy},mn.firstDayOfWeek=function(){return this._week.dow},mn.weekdays=function(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone},mn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},mn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},mn.weekdaysParse=function(e,t,n){var i,o,r;if(this._weekdaysParseExact)return function(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=Pe.call(this._weekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Pe.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=Pe.call(this._minWeekdaysParse,s))?o:null:"dddd"===t?-1!==(o=Pe.call(this._weekdaysParse,s))?o:-1!==(o=Pe.call(this._shortWeekdaysParse,s))?o:-1!==(o=Pe.call(this._minWeekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Pe.call(this._shortWeekdaysParse,s))?o:-1!==(o=Pe.call(this._weekdaysParse,s))?o:-1!==(o=Pe.call(this._minWeekdaysParse,s))?o:null:-1!==(o=Pe.call(this._minWeekdaysParse,s))?o:-1!==(o=Pe.call(this._weekdaysParse,s))?o:-1!==(o=Pe.call(this._shortWeekdaysParse,s))?o:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},mn.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},mn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},mn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ct("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===R(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),o.lang=S("moment.lang is deprecated. Use moment.locale instead.",ct),o.langData=S("moment.langData is deprecated. Use moment.localeData instead.",dt);var vn=Math.abs;function yn(e,t,n,i){var o=Ht(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function _n(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Vn(e){return 146097*e/4800}function Rn(e){return function(){return this.as(e)}}var bn=Rn("ms"),Cn=Rn("s"),Sn=Rn("m"),kn=Rn("h"),Pn=Rn("d"),Tn=Rn("w"),Mn=Rn("M"),Ln=Rn("y");function In(e){return function(){return this.isValid()?this._data[e]:NaN}}var On=In("milliseconds"),An=In("seconds"),En=In("minutes"),Dn=In("hours"),$n=In("days"),Un=In("months"),Bn=In("years"),qn=Math.round,Nn={ss:44,s:45,m:45,h:22,d:26,M:11},Fn=Math.abs;function jn(e){return(e>0)-(e<0)||+e}function zn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Fn(this._milliseconds)/1e3,i=Fn(this._days),o=Fn(this._months);e=V(n/60),t=V(e/60),n%=60,e%=60;var r=V(o/12),s=o%=12,l=i,a=t,u=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",p=this.asSeconds();if(!p)return"P0D";var d=p<0?"-":"",h=jn(this._months)!==jn(p)?"-":"",m=jn(this._days)!==jn(p)?"-":"",f=jn(this._milliseconds)!==jn(p)?"-":"";return d+"P"+(r?h+r+"Y":"")+(s?h+s+"M":"")+(l?m+l+"D":"")+(a||u||c?"T":"")+(a?f+a+"H":"")+(u?f+u+"M":"")+(c?f+c+"S":"")}var Qn=Et.prototype;return Qn.isValid=function(){return this._isValid},Qn.abs=function(){var e=this._data;return this._milliseconds=vn(this._milliseconds),this._days=vn(this._days),this._months=vn(this._months),e.milliseconds=vn(e.milliseconds),e.seconds=vn(e.seconds),e.minutes=vn(e.minutes),e.hours=vn(e.hours),e.months=vn(e.months),e.years=vn(e.years),this},Qn.add=function(e,t){return yn(this,e,t,1)},Qn.subtract=function(e,t){return yn(this,e,t,-1)},Qn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=E(e))||"year"===e)return t=this._days+i/864e5,n=this._months+xn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Vn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Qn.asMilliseconds=bn,Qn.asSeconds=Cn,Qn.asMinutes=Sn,Qn.asHours=kn,Qn.asDays=Pn,Qn.asWeeks=Tn,Qn.asMonths=Mn,Qn.asYears=Ln,Qn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*R(this._months/12):NaN},Qn._bubble=function(){var e,t,n,i,o,r=this._milliseconds,s=this._days,l=this._months,a=this._data;return r>=0&&s>=0&&l>=0||r<=0&&s<=0&&l<=0||(r+=864e5*_n(Vn(l)+s),s=0,l=0),a.milliseconds=r%1e3,e=V(r/1e3),a.seconds=e%60,t=V(e/60),a.minutes=t%60,n=V(t/60),a.hours=n%24,s+=V(n/24),l+=o=V(xn(s)),s-=_n(Vn(o)),i=V(l/12),l%=12,a.days=s,a.months=l,a.years=i,this},Qn.clone=function(){return Ht(this)},Qn.get=function(e){return e=E(e),this.isValid()?this[e+"s"]():NaN},Qn.milliseconds=On,Qn.seconds=An,Qn.minutes=En,Qn.hours=Dn,Qn.days=$n,Qn.weeks=function(){return V(this.days()/7)},Qn.months=Un,Qn.years=Bn,Qn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var i=Ht(e).abs(),o=qn(i.as("s")),r=qn(i.as("m")),s=qn(i.as("h")),l=qn(i.as("d")),a=qn(i.as("M")),u=qn(i.as("y")),c=o<=Nn.ss&&["s",o]||o<Nn.s&&["ss",o]||r<=1&&["m"]||r<Nn.m&&["mm",r]||s<=1&&["h"]||s<Nn.h&&["hh",s]||l<=1&&["d"]||l<Nn.d&&["dd",l]||a<=1&&["M"]||a<Nn.M&&["MM",a]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,function(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}.apply(null,c)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Qn.toISOString=zn,Qn.toString=zn,Qn.toJSON=zn,Qn.locale=en,Qn.localeData=nn,Qn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zn),Qn.lang=tn,z("X",0,0,"unix"),z("x",0,0,"valueOf"),ce("x",re),ce("X",/[+-]?\d+(\.\d{1,3})?/),me("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),me("x",function(e,t,n){n._d=new Date(R(e))}),o.version="2.23.0",n=Mt,o.fn=dn,o.min=function(){return Ot("isBefore",[].slice.call(arguments,0))},o.max=function(){return Ot("isAfter",[].slice.call(arguments,0))},o.now=function(){return Date.now?Date.now():+new Date},o.utc=h,o.unix=function(e){return Mt(1e3*e)},o.months=function(e,t){return gn(e,t,"months")},o.isDate=u,o.locale=ct,o.invalid=g,o.duration=Ht,o.isMoment=x,o.weekdays=function(e,t,n){return wn(e,t,n,"weekdays")},o.parseZone=function(){return Mt.apply(null,arguments).parseZone()},o.localeData=dt,o.isDuration=Dt,o.monthsShort=function(e,t){return gn(e,t,"monthsShort")},o.weekdaysMin=function(e,t,n){return wn(e,t,n,"weekdaysMin")},o.defineLocale=pt,o.updateLocale=function(e,t){if(null!=t){var n,i,o=rt;null!=(i=ut(e))&&(o=i._config),(n=new I(t=L(o,t))).parentLocale=st[e],st[e]=n,ct(e)}else null!=st[e]&&(null!=st[e].parentLocale?st[e]=st[e].parentLocale:null!=st[e]&&delete st[e]);return st[e]},o.locales=function(){return k(st)},o.weekdaysShort=function(e,t,n){return wn(e,t,n,"weekdaysShort")},o.normalizeUnits=E,o.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},o.relativeTimeThreshold=function(e,t){return void 0!==Nn[e]&&(void 0===t?Nn[e]:(Nn[e]=t,"s"===e&&(Nn.ss=t-1),!0))},o.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},o.prototype=dn,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},o},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):i.moment=o()},{}],442:[function(e,t,n){var i=1e3,o=60*i,r=60*o,s=24*r,l=365.25*s;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?a(n=e,s,"day")||a(n,r,"hour")||a(n,o,"minute")||a(n,i,"second")||n+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],443:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=Array.prototype.slice,s=e("./isArguments"),l=Object.prototype.propertyIsEnumerable,a=!l.call({toString:null},"toString"),u=l.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),m=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=s(e),l=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var m=u&&n;if(l&&e.length>0&&!i.call(e,0))for(var f=0;f<e.length;++f)d.push(String(f));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var w in e)m&&"prototype"===w||!i.call(e,w)||d.push(String(w));if(a)for(var v=function(e){if("undefined"==typeof window||!h)return p(e);try{return p(e)}catch(e){return!1}}(e),y=0;y<c.length;++y)v&&"constructor"===c[y]||!i.call(e,c[y])||d.push(c[y]);return d};m.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var e=Object.keys;Object.keys=function(t){return s(t)?e(r.call(t)):e(t)}}}else Object.keys=m;return Object.keys||m},t.exports=m},{"./isArguments":444}],444:[function(e,t,n){"use strict";var i=Object.prototype.toString;t.exports=function(e){var t=i.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===i.call(e.callee)),n}},{}],445:[function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var l=encodeURIComponent(i(s))+n;return o(e[s])?r(e[s],function(e){return l+encodeURIComponent(i(e))}).join(t):l+encodeURIComponent(i(e[s]))}).join(t):l?encodeURIComponent(i(l))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],446:[function(e,t,n){(function(){var e;return e=function(){var e,t,n,i,o,r,s;function l(e,t){e&&(this.rule=e),t&&(this.template=t)}return l.prototype.render=function(t,r){var s,a,u,c,p,d,h,m,f,g,w,v,y,_,x=this;for(c in this.constructor.env||l.env,r=r?i(r):i(this.template).cloneNode(!0),p=o(r,{}),m=this.hasOwnProperty("rule")?this.rule:e(this)){if(h=m[c],g=(y=this.constructor.split(c))[0],s=y[1],d=y[2],g&&"#"!==(_=g[0])&&"."!==_&&(g=g.toUpperCase()),g)for(u=v=(f=p[g]||[]).length-1;v>=0;u=v+=-1)w=f[u],n(r,w)||f.splice(u,1);else f=[r];a=function(e){try{return x.constructor.parse(h,t,e,x)}catch(e){console.error("RuleError: ",e.stack)}},this.constructor.add(a,f,s,d)}return r},l.parse=function(e,t,n,i){var o,r,s,a,u,c,p;if(o=this.constructor.env||l.env,e instanceof Function)return this.parse(e.call(t,n,i),t,n,i);if(e instanceof Array){for(a=[],u=0,c=e.length;u<c;u++)r=e[u],a=a.concat(this.parse(r,t,n,i));return a}return e instanceof l?e.hasOwnProperty("template")?e.render(t):void e.render(t,n.selection):e instanceof o.Node||null==e?e:(null!=(p=o.$)?p.fn.isPrototypeOf(e):void 0)?e.get():e.toString!==Object.prototype.toString?e.toString():Object.prototype.isPrototypeOf(e)?((s=new this(e)).parent=i,this.parse.call(this,s,t,n,i)):void 0},l.add=function(e,t,n,i){var o,r,s,a,u,c,p,d,h,m,f,g,w;for(s=this.constructor.env||l.env,c=[],e instanceof Function||(e=function(e){return e}.bind(this,e)),h=0,f=t.length;h<f;h++)if(null!=(o=e({selection:p=t[h],attribute:n,position:i}))&&p instanceof s.Element)if(null!=n&&null!=o)o instanceof Array&&(o=o.join("")),u=null!=(w=p.getAttribute(n))?w:"",p.setAttribute(n,"<"===i?o+u:">"===i?u+o:"-"===i?o+" "+u:"+"===i?u+" "+o:o);else{if(a=d=p,"-"!==i&&"+"!==i&&"="!==i||(a=p.parentElement),"+"===i&&(d=p.nextSibling),"<"===i&&(d=p.firstChild),">"!==i&&null!=i||(d=null),null==i)for(;null!=p.firstChild;)p.removeChild(p.firstChild);for(o instanceof Array||(o=[o]),m=0,g=o.length;m<g;m++)r=(r=o[m])instanceof s.Node?r:s.document.createTextNode(r),"+"===i&&c.push(p),c.push(r),"-"===i&&c.push(p),a instanceof s.HTMLElement&&a.insertBefore(r,d);"="===i&&null!=a&&a.removeChild(d)}return"-"!==i&&"+"!==i&&"="!==i||null!=n?t:c},l.split=function(e){var t,n,i;return"-"===(t=e.slice(-1))||"+"===t||"<"===t||">"===t||"="===t?e=e.slice(0,-1):t=void 0,""===(n=(i=e.split("@",2))[0])&&(n=void 0),[n,i[1],t]},l.env="undefined"!=typeof window&&null!==window?window:void 0,null!=(r=Array.prototype.indexOf)?r:function(e){var t,n,i,o;for(t=i=0,o=this.length;i<o;t=++i)return n=this[t],t in this&&n===e?t:-1},function(e){var t,n;return t=this.constructor.env||l.env,(null!=(n=t.document.createElement("div").querySelectorAll)?n:function(e){return t.$(this).find(e).get()})(e)}.bind(l),t=null!=(s=Object.getPrototypeOf)?s:function(e){var t,n;return n=e.constructor.prototype,(e.hasOwnProperty(e!==n)||e===n)&&(t=e.constructor,delete e.constructor,n=e.constructor.prototype,e.constructor=t),n},i=function(e){var t;return(null!=(t=(this.constructor.env||l.env).$)?t.fn.isPrototypeOf(e):void 0)?e.get(0):e instanceof Function?i(e()):e[0]?e[0]:e}.bind(l),e=function(n){var i,o,r,s;if(n.hasOwnProperty("constructor")&&n.constructor===l)return{};if(r=e(t(n)),n.hasOwnProperty("rule"))for(i in s=n.rule)o=s[i],delete r[i],r[i]=o;return r},o=function(e,t){var n,i,r,s,l,a,u,c;for(null==t&&(t={}),n=e.firstElementChild;n;){if("string"==typeof n.getAttribute("class"))for(r=0,s=(l=n.getAttribute("class").split(" ")).length;r<s;r++)(null!=(a=t[i="."+(i=l[r])])?a:t[i]=[]).push(n);""!==n.id&&(null!=(u=t[i="#"+n.id])?u:t[i]=[]).push(n),(null!=(c=t[i=n.tagName.toUpperCase()])?c:t[i]=[]).push(n),o(n,t),n=n.nextElementSibling}return t},n=function(e,t){var n;for(n=t;n=n.parentElement;)if(n===e)return!0;return!1},l}(),null!=t&&this.module!==t?t.exports=e:window.Rule=e,e}).call(this)},{}],447:[function(e,t,n){function i(e){e=e||{};this.Timeout=e.timeout||1,this.EditCost=e.editCost||4}i.Diff,i.prototype.main=function(e,t,n,i){void 0===i&&(i=this.Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var r=n,s=this.commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.commonSuffix(e,t);var a=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.compute_(e,t,r,o);return l&&u.unshift([0,l]),a&&u.push([0,a]),this.cleanupMerge(u),u},i.prototype.compute_=function(e,t,n,i){var o;if(!e)return[[1,t]];if(!t)return[[-1,e]];var r=e.length>t.length?e:t,s=e.length>t.length?t:e,l=r.indexOf(s);if(-1!=l)return o=[[1,r.substring(0,l)],[0,s],[1,r.substring(l+s.length)]],e.length>t.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[[-1,e],[1,t]];var a=this.halfMatch_(e,t);if(a){var u=a[0],c=a[1],p=a[2],d=a[3],h=a[4],m=this.main(u,p,n,i),f=this.main(c,d,n,i);return m.concat([[0,h]],f)}return n&&e.length>100&&t.length>100?this.lineMode_(e,t,i):this.bisect_(e,t,i)},i.prototype.lineMode_=function(e,t,n){e=(c=this.linesToChars_(e,t)).chars1,t=c.chars2;var i=c.lineArray,o=this.main(e,t,!1,n);this.charsToLines_(o,i),this.cleanupSemantic(o),o.push([0,""]);for(var r=0,s=0,l=0,a="",u="";r<o.length;){switch(o[r][0]){case 1:l++,u+=o[r][1];break;case-1:s++,a+=o[r][1];break;case 0:if(s>=1&&l>=1){o.splice(r-s-l,s+l),r=r-s-l;for(var c,p=(c=this.main(a,u,!1,n)).length-1;p>=0;p--)o.splice(r,0,c[p]);r+=c.length}l=0,s=0,a="",u=""}r++}return o.pop(),o},i.prototype.bisect_=function(e,t,n){for(var i=e.length,o=t.length,r=Math.ceil((i+o)/2),s=r,l=2*r,a=new Array(l),u=new Array(l),c=0;c<l;c++)a[c]=-1,u[c]=-1;a[s+1]=0,u[s+1]=0;for(var p=i-o,d=p%2!=0,h=0,m=0,f=0,g=0,w=0;w<r&&!((new Date).getTime()>n);w++){for(var v=-w+h;v<=w-m;v+=2){for(var y=s+v,_=(C=v==-w||v!=w&&a[y-1]<a[y+1]?a[y+1]:a[y-1]+1)-v;C<i&&_<o&&e.charAt(C)==t.charAt(_);)C++,_++;if(a[y]=C,C>i)m+=2;else if(_>o)h+=2;else if(d){if((R=s+p-v)>=0&&R<l&&-1!=u[R])if(C>=(V=i-u[R]))return this.bisectSplit_(e,t,C,_,n)}}for(var x=-w+f;x<=w-g;x+=2){for(var V,R=s+x,b=(V=x==-w||x!=w&&u[R-1]<u[R+1]?u[R+1]:u[R-1]+1)-x;V<i&&b<o&&e.charAt(i-V-1)==t.charAt(o-b-1);)V++,b++;if(u[R]=V,V>i)g+=2;else if(b>o)f+=2;else if(!d){if((y=s+p-x)>=0&&y<l&&-1!=a[y]){var C;_=s+(C=a[y])-y;if(C>=(V=i-V))return this.bisectSplit_(e,t,C,_,n)}}}}return[[-1,e],[1,t]]},i.prototype.bisectSplit_=function(e,t,n,i,o){var r=e.substring(0,n),s=t.substring(0,i),l=e.substring(n),a=t.substring(i),u=this.main(r,s,!1,o),c=this.main(l,a,!1,o);return u.concat(c)},i.prototype.linesToChars_=function(e,t){var n=[],i={};function o(e){for(var t="",o=0,r=-1,s=n.length;r<e.length-1;){-1==(r=e.indexOf("\n",o))&&(r=e.length-1);var l=e.substring(o,r+1);o=r+1,(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(t+=String.fromCharCode(s),i[l]=s,n[s++]=l)}return t}return n[0]="",{chars1:o(e),chars2:o(t),lineArray:n}},i.prototype.charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],r=0;r<i.length;r++)o[r]=t[i.charCodeAt(r)];e[n][1]=o.join("")}},i.prototype.commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(r,o)==t.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},i.prototype.commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},i.prototype.commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var o=Math.min(n,i);if(e==t)return o;for(var r=0,s=1;;){var l=e.substring(o-s),a=t.indexOf(l);if(-1==a)return r;s+=a,0!=a&&e.substring(o-s)!=t.substring(0,s)||(r=s,s++)}},i.prototype.halfMatch_=function(e,t){if(this.Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var o=this;function r(e,t,n){for(var i,r,s,l,a=e.substring(n,n+Math.floor(e.length/4)),u=-1,c="";-1!=(u=t.indexOf(a,u+1));){var p=o.commonPrefix(e.substring(n),t.substring(u)),d=o.commonSuffix(e.substring(0,n),t.substring(0,u));c.length<d+p&&(c=t.substring(u-d,u)+t.substring(u,u+p),i=e.substring(0,n-d),r=e.substring(n+p),s=t.substring(0,u-d),l=t.substring(u+p))}return 2*c.length>=e.length?[i,r,s,l,c]:null}var s,l,a,u,c,p=r(n,i,Math.ceil(n.length/4)),d=r(n,i,Math.ceil(n.length/2));return p||d?(s=d?p&&p[4].length>d[4].length?p:d:p,e.length>t.length?(l=s[0],a=s[1],u=s[2],c=s[3]):(u=s[0],c=s[1],l=s[2],a=s[3]),[l,a,u,c,s[4]]):null},i.prototype.cleanupSemantic=function(e){for(var t=!1,n=[],i=0,o=null,r=0,s=0,l=0,a=0,u=0;r<e.length;)0==e[r][0]?(n[i++]=r,s=a,l=u,a=0,u=0,o=e[r][1]):(1==e[r][0]?a+=e[r][1].length:u+=e[r][1].length,o&&o.length<=Math.max(s,l)&&o.length<=Math.max(a,u)&&(e.splice(n[i-1],0,[-1,o]),e[n[i-1]+1][0]=1,i--,r=--i>0?n[i-1]:-1,s=0,l=0,a=0,u=0,o=null,t=!0)),r++;for(t&&this.cleanupMerge(e),this.cleanupSemanticLossless(e),r=1;r<e.length;){if(-1==e[r-1][0]&&1==e[r][0]){var c=e[r-1][1],p=e[r][1],d=this.commonOverlap_(c,p),h=this.commonOverlap_(p,c);d>=h?(d>=c.length/2||d>=p.length/2)&&(e.splice(r,0,[0,p.substring(0,d)]),e[r-1][1]=c.substring(0,c.length-d),e[r+1][1]=p.substring(d),r++):(h>=c.length/2||h>=p.length/2)&&(e.splice(r,0,[0,c.substring(0,h)]),e[r-1][0]=1,e[r-1][1]=p.substring(0,p.length-h),e[r+1][0]=-1,e[r+1][1]=c.substring(h),r++),r++}r++}},i.prototype.cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),o=t.charAt(0),r=n.match(i.nonAlphaNumericRegex_),s=o.match(i.nonAlphaNumericRegex_),l=r&&n.match(i.whitespaceRegex_),a=s&&o.match(i.whitespaceRegex_),u=l&&n.match(i.linebreakRegex_),c=a&&o.match(i.linebreakRegex_),p=u&&e.match(i.blanklineEndRegex_),d=c&&t.match(i.blanklineStartRegex_);return p||d?5:u||c?4:r&&!l&&a?3:l||a?2:r||s?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var o=e[n-1][1],r=e[n][1],s=e[n+1][1],l=this.commonSuffix(o,r);if(l){var a=r.substring(r.length-l);o=o.substring(0,o.length-l),r=a+r.substring(0,r.length-l),s=a+s}for(var u=o,c=r,p=s,d=t(o,r)+t(r,s);r.charAt(0)===s.charAt(0);){o+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var h=t(o,r)+t(r,s);h>=d&&(d=h,u=o,c=r,p=s)}e[n-1][1]!=u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=c,p?e[n+1][1]=p:(e.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,o=null,r=0,s=!1,l=!1,a=!1,u=!1;r<e.length;)0==e[r][0]?(e[r][1].length<this.EditCost&&(a||u)?(n[i++]=r,s=a,l=u,o=e[r][1]):(i=0,o=null),a=u=!1):(-1==e[r][0]?u=!0:a=!0,o&&(s&&l&&a&&u||o.length<this.EditCost/2&&s+l+a+u==3)&&(e.splice(n[i-1],0,[-1,o]),e[n[i-1]+1][0]=1,i--,o=null,s&&l?(a=u=!0,i=0):(r=--i>0?n[i-1]:-1,a=u=!1),t=!0)),r++;t&&this.cleanupMerge(e)},i.prototype.cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,i=0,o=0,r="",s="";n<e.length;)switch(e[n][0]){case 1:o++,s+=e[n][1],n++;break;case-1:i++,r+=e[n][1],n++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(t=this.commonPrefix(s,r))&&(n-i-o>0&&0==e[n-i-o-1][0]?e[n-i-o-1][1]+=s.substring(0,t):(e.splice(0,0,[0,s.substring(0,t)]),n++),s=s.substring(t),r=r.substring(t)),0!==(t=this.commonSuffix(s,r))&&(e[n][1]=s.substring(s.length-t)+e[n][1],s=s.substring(0,s.length-t),r=r.substring(0,r.length-t))),0===i?e.splice(n-o,i+o,[1,s]):0===o?e.splice(n-i,i+o,[-1,r]):e.splice(n-i-o,i+o,[-1,r],[1,s]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,i=0,r="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.cleanupMerge(e)},i.prototype.xIndex=function(e,t){var n,i=0,o=0,r=0,s=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(o+=e[n][1].length),!(i>t));n++)r=i,s=o;return e.length!=n&&-1===e[n][0]?s:s+(t-r)},i.prototype.prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,o=/>/g,r=/\n/g,s=0;s<e.length;s++){var l=e[s][0],a=e[s][1].replace(n,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(r,"<br/>");switch(l){case 1:t[s]="<ins>"+a+"</ins>";break;case-1:t[s]="<del>"+a+"</del>";break;case 0:t[s]="<span>"+a+"</span>"}}return t.join("")},i.prototype.text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.levenshtein=function(e){for(var t=0,n=0,i=0,o=0;o<e.length;o++){var r=e[o][0],s=e[o][1];switch(r){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},i.prototype.toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},i.prototype.fromDelta=function(e,t){for(var n=[],i=0,o=0,r=t.split(/\t/g),s=0;s<r.length;s++){var l=r[s].substring(1);switch(r[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(l)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var a=parseInt(l,10);if(isNaN(a)||a<0)throw new Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(o,o+=a);"="==r[s].charAt(0)?n[i++]=[0,u]:n[i++]=[-1,u];break;default:if(r[s])throw new Error("Invalid diff operation in diff_fromDelta: "+r[s])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return n},this.diff=i,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0,t.exports=i},{}],448:[function(e,t,n){(function(e){!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,r=Array.prototype,s=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,a=r.push,u=r.slice,c=s.toString,p=s.hasOwnProperty,d=Array.isArray,h=Object.keys,m=Object.create,f=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};void 0===n||n.nodeType?i._=g:(void 0!==t&&!t.nodeType&&t.exports&&(n=t.exports=g),n._=g),g.VERSION="1.9.1";var w,v=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return g.iteratee!==w?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?v(e,t,n):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=w=function(e,t){return y(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var r=Array(t+1);for(o=0;o<t;o++)r[o]=arguments[o];return r[t]=i,e.apply(this,r)}},x=function(e){if(!g.isObject(e))return{};if(m)return m(e);f.prototype=e;var t=new f;return f.prototype=null,t},V=function(e){return function(t){return null==t?void 0:t[e]}},R=function(e,t){return null!=e&&p.call(e,t)},b=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},C=Math.pow(2,53)-1,S=V("length"),k=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=C};g.each=g.forEach=function(e,t,n){var i,o;if(t=v(t,n),k(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var r=g.keys(e);for(i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e)}return e},g.map=g.collect=function(e,t,n){t=y(t,n);for(var i=!k(e)&&g.keys(e),o=(i||e).length,r=Array(o),s=0;s<o;s++){var l=i?i[s]:s;r[s]=t(e[l],l,e)}return r};var P=function(e){return function(t,n,i,o){var r=arguments.length>=3;return function(t,n,i,o){var r=!k(t)&&g.keys(t),s=(r||t).length,l=e>0?0:s-1;for(o||(i=t[r?r[l]:l],l+=e);l>=0&&l<s;l+=e){var a=r?r[l]:l;i=n(i,t[a],a,t)}return i}(t,v(n,o,4),i,r)}};g.reduce=g.foldl=g.inject=P(1),g.reduceRight=g.foldr=P(-1),g.find=g.detect=function(e,t,n){var i=(k(e)?g.findIndex:g.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},g.filter=g.select=function(e,t,n){var i=[];return t=y(t,n),g.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},g.reject=function(e,t,n){return g.filter(e,g.negate(y(t)),n)},g.every=g.all=function(e,t,n){t=y(t,n);for(var i=!k(e)&&g.keys(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0},g.some=g.any=function(e,t,n){t=y(t,n);for(var i=!k(e)&&g.keys(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,n,i){return k(e)||(e=g.values(e)),("number"!=typeof n||i)&&(n=0),g.indexOf(e,t,n)>=0},g.invoke=_(function(e,t,n){var i,o;return g.isFunction(t)?o=t:g.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),g.map(e,function(e){var r=o;if(!r){if(i&&i.length&&(e=b(e,i)),null==e)return;r=e[t]}return null==r?r:r.apply(e,n)})}),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,n){var i,o,r=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var l=0,a=(e=k(e)?e:g.values(e)).length;l<a;l++)null!=(i=e[l])&&i>r&&(r=i);else t=y(t,n),g.each(e,function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&r===-1/0)&&(r=e,s=o)});return r},g.min=function(e,t,n){var i,o,r=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var l=0,a=(e=k(e)?e:g.values(e)).length;l<a;l++)null!=(i=e[l])&&i<r&&(r=i);else t=y(t,n),g.each(e,function(e,n,i){((o=t(e,n,i))<s||o===1/0&&r===1/0)&&(r=e,s=o)});return r},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,n){if(null==t||n)return k(e)||(e=g.values(e)),e[g.random(e.length-1)];var i=k(e)?g.clone(e):g.values(e),o=S(i);t=Math.max(Math.min(t,o),0);for(var r=o-1,s=0;s<t;s++){var l=g.random(s,r),a=i[s];i[s]=i[l],i[l]=a}return i.slice(0,t)},g.sortBy=function(e,t,n){var i=0;return t=y(t,n),g.pluck(g.map(e,function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var T=function(e,t){return function(n,i,o){var r=t?[[],[]]:{};return i=y(i,o),g.each(n,function(t,o){var s=i(t,o,n);e(r,t,s)}),r}};g.groupBy=T(function(e,t,n){R(e,n)?e[n].push(t):e[n]=[t]}),g.indexBy=T(function(e,t,n){e[n]=t}),g.countBy=T(function(e,t,n){R(e,n)?e[n]++:e[n]=1});var M=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?u.call(e):g.isString(e)?e.match(M):k(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:k(e)?e.length:g.keys(e).length},g.partition=T(function(e,t,n){e[n?0:1].push(t)},!0),g.first=g.head=g.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},g.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var L=function(e,t,n,i){for(var o=(i=i||[]).length,r=0,s=S(e);r<s;r++){var l=e[r];if(k(l)&&(g.isArray(l)||g.isArguments(l)))if(t)for(var a=0,u=l.length;a<u;)i[o++]=l[a++];else L(l,t,n,i),o=i.length;else n||(i[o++]=l)}return i};g.flatten=function(e,t){return L(e,t,!1)},g.without=_(function(e,t){return g.difference(e,t)}),g.uniq=g.unique=function(e,t,n,i){g.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=y(n,i));for(var o=[],r=[],s=0,l=S(e);s<l;s++){var a=e[s],u=n?n(a,s,e):a;t&&!n?(s&&r===u||o.push(a),r=u):n?g.contains(r,u)||(r.push(u),o.push(a)):g.contains(o,a)||o.push(a)}return o},g.union=_(function(e){return g.uniq(L(e,!0,!0))}),g.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=S(e);i<o;i++){var r=e[i];if(!g.contains(t,r)){var s;for(s=1;s<n&&g.contains(arguments[s],r);s++);s===n&&t.push(r)}}return t},g.difference=_(function(e,t){return t=L(t,!0,!0),g.filter(e,function(e){return!g.contains(t,e)})}),g.unzip=function(e){for(var t=e&&g.max(e,S).length||0,n=Array(t),i=0;i<t;i++)n[i]=g.pluck(e,i);return n},g.zip=_(g.unzip),g.object=function(e,t){for(var n={},i=0,o=S(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var I=function(e){return function(t,n,i){n=y(n,i);for(var o=S(t),r=e>0?0:o-1;r>=0&&r<o;r+=e)if(n(t[r],r,t))return r;return-1}};g.findIndex=I(1),g.findLastIndex=I(-1),g.sortedIndex=function(e,t,n,i){for(var o=(n=y(n,i,1))(t),r=0,s=S(e);r<s;){var l=Math.floor((r+s)/2);n(e[l])<o?r=l+1:s=l}return r};var O=function(e,t,n){return function(i,o,r){var s=0,l=S(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+l,s):l=r>=0?Math.min(r+1,l):r+l+1;else if(n&&r&&l)return i[r=n(i,o)]===o?r:-1;if(o!=o)return(r=t(u.call(i,s,l),g.isNaN))>=0?r+s:-1;for(r=e>0?s:l-1;r>=0&&r<l;r+=e)if(i[r]===o)return r;return-1}};g.indexOf=O(1,g.findIndex,g.sortedIndex),g.lastIndexOf=O(-1,g.findLastIndex),g.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;r<i;r++,e+=n)o[r]=e;return o},g.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(u.call(e,i,i+=t));return n};var A=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=x(e.prototype),s=e.apply(r,o);return g.isObject(s)?s:r};g.bind=_(function(e,t,n){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var i=_(function(o){return A(e,i,t,this,n.concat(o))});return i}),g.partial=_(function(e,t){var n=g.partial.placeholder,i=function(){for(var o=0,r=t.length,s=Array(r),l=0;l<r;l++)s[l]=t[l]===n?arguments[o++]:t[l];for(;o<arguments.length;)s.push(arguments[o++]);return A(e,i,this,this,s)};return i}),g.partial.placeholder=g,g.bindAll=_(function(e,t){var n=(t=L(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=g.bind(e[i],e)}}),g.memoize=function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return R(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},g.delay=_(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,n){var i,o,r,s,l=0;n||(n={});var a=function(){l=!1===n.leading?0:g.now(),i=null,s=e.apply(o,r),i||(o=r=null)},u=function(){var u=g.now();l||!1!==n.leading||(l=u);var c=t-(u-l);return o=this,r=arguments,c<=0||c>t?(i&&(clearTimeout(i),i=null),l=u,s=e.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(a,c)),s};return u.cancel=function(){clearTimeout(i),l=0,i=o=r=null},u},g.debounce=function(e,t,n){var i,o,r=function(t,n){i=null,n&&(o=e.apply(t,n))},s=_(function(s){if(i&&clearTimeout(i),n){var l=!i;i=setTimeout(r,t),l&&(o=e.apply(this,s))}else i=g.delay(r,t,this,s);return o});return s.cancel=function(){clearTimeout(i),i=null},s},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},g.once=g.partial(g.before,2),g.restArguments=_;var E=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],$=function(e,t){var n=D.length,i=e.constructor,o=g.isFunction(i)&&i.prototype||s,r="constructor";for(R(e,r)&&!g.contains(t,r)&&t.push(r);n--;)(r=D[n])in e&&e[r]!==o[r]&&!g.contains(t,r)&&t.push(r)};g.keys=function(e){if(!g.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)R(e,n)&&t.push(n);return E&&$(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var n in e)t.push(n);return E&&$(e,t),t},g.values=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i},g.mapObject=function(e,t,n){t=y(t,n);for(var i=g.keys(e),o=i.length,r={},s=0;s<o;s++){var l=i[s];r[l]=t(e[l],l,e)}return r},g.pairs=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},g.invert=function(e){for(var t={},n=g.keys(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},g.functions=g.methods=function(e){var t=[];for(var n in e)g.isFunction(e[n])&&t.push(n);return t.sort()};var U=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=e(r),l=s.length,a=0;a<l;a++){var u=s[a];t&&void 0!==n[u]||(n[u]=r[u])}return n}};g.extend=U(g.allKeys),g.extendOwn=g.assign=U(g.keys),g.findKey=function(e,t,n){t=y(t,n);for(var i,o=g.keys(e),r=0,s=o.length;r<s;r++)if(t(e[i=o[r]],i,e))return i};var B,q,N=function(e,t,n){return t in n};g.pick=_(function(e,t){var n={},i=t[0];if(null==e)return n;g.isFunction(i)?(t.length>1&&(i=v(i,t[1])),t=g.allKeys(e)):(i=N,t=L(t,!1,!1),e=Object(e));for(var o=0,r=t.length;o<r;o++){var s=t[o],l=e[s];i(l,s,e)&&(n[s]=l)}return n}),g.omit=_(function(e,t){var n,i=t[0];return g.isFunction(i)?(i=g.negate(i),t.length>1&&(n=t[1])):(t=g.map(L(t,!1,!1),String),i=function(e,n){return!g.contains(t,n)}),g.pick(e,i,n)}),g.defaults=U(g.allKeys,!0),g.create=function(e,t){var n=x(e);return t&&g.extendOwn(n,t),n},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var n=g.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;r<i;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0},B=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&q(e,t,n,i)},q=function(e,t,n,i){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var o=c.call(e);if(o!==c.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return i[u]===t;if(n.push(e),i.push(t),r){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],n,i))return!1}else{var p,d=g.keys(e);if(u=d.length,g.keys(t).length!==u)return!1;for(;u--;)if(p=d[u],!R(t,p)||!B(e[p],t[p],n,i))return!1}return n.pop(),i.pop(),!0},g.isEqual=function(e,t){return B(e,t)},g.isEmpty=function(e){return null==e||(k(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=d||function(e){return"[object Array]"===c.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){g["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),g.isArguments(arguments)||(g.isArguments=function(e){return R(e,"callee")});var F=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof F&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return R(e,t);for(var n=t.length,i=0;i<n;i++){var o=t[i];if(null==e||!p.call(e,o))return!1;e=e[o]}return!!n},g.noConflict=function(){return i._=o,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return b(t,e)}:V(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?b(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,n){var i=Array(Math.max(0,e));t=v(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=g.invert(j),Q=function(e){var t=function(t){return e[t]},n="(?:"+g.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};g.escape=Q(j),g.unescape=Q(z),g.result=function(e,t,n){g.isArray(t)||(t=[t]);var i=t.length;if(!i)return g.isFunction(n)?n.call(e):n;for(var o=0;o<i;o++){var r=null==e?void 0:e[t[o]];void 0===r&&(r=n,o=i),e=g.isFunction(r)?r.call(e):r}return e};var H=0;g.uniqueId=function(e){var t=++H+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,K=function(e){return"\\"+Y[e]};g.template=function(e,t,n){!t&&n&&(t=n),t=g.defaults({},t,g.templateSettings);var i,o=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(o,function(t,n,i,o,l){return s+=e.slice(r,l).replace(G,K),r=l+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var l=function(e){return i.call(this,e,g)},a=t.variable||"obj";return l.source="function("+a+"){\n"+s+"}",l},g.chain=function(e){var t=g(e);return t._chain=!0,t};var J=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),function(t){var n=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),J(this,n.apply(g,e))}}),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];g.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],J(this,n)}}),g.each(["concat","join","slice"],function(e){var t=r[e];g.prototype[e]=function(){return J(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],449:[function(e,t,n){!function(e,n){(function(){var n;n={},"object"==typeof t&&"object"==typeof t.exports?t.exports=n:window.uploadcare=n,e.namespace=function(t,n){var i,o,r,s,l;if(o=e,t)for(r=0,s=(l=t.split(".")).length;r<s;r++)o[i=l[r]]||(o[i]={}),o=o[i];return n(o)},e.expose=function(t,i){var o,r,s,l,a,u,c;for(o=(s=t.split(".")).pop(),a=n,l=e,u=0,c=s.length;u<c;u++)a[r=s[u]]||(a[r]={}),a=a[r],l=null!=l?l[r]:void 0;return a[o]=i||l[o]}}).call(this),function(){var t;e.version="2.8.2",e.jQuery=jQuery,(t=e.expose)("version"),t("jQuery"),t("plugin",function(t){return t(e)}),t("whenReady",function(e){return e()})}.call(this),window.XDomainRequest&&jQuery.ajaxTransport(function(e){var t;if(e.crossDomain&&e.async)return e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout),{send:function(n,i){function o(e,n,o,r){t.onload=t.onerror=t.ontimeout=function(){},t=void 0,i(e,n,o,r)}(t=new XDomainRequest).onload=function(){o(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){o(404,"Not Found")},t.onprogress=function(){},t.ontimeout=function(){o(0,"timeout")},t.timeout=e.xdrTimeout||Number.MAX_VALUE,t.open(e.type,e.url.replace(/^https?:/,"")),t.send(e.hasContent&&e.data||null)},abort:function(){t&&(t.onerror=function(){},t.abort())}}}),function(){e.namespace("utils.abilities",function(e){var t,n,i,o,r;e.fileAPI=!!(window.File&&window.FileList&&window.FileReader),e.sendFileAPI=!(!window.FormData||!e.fileAPI),e.dragAndDrop="draggable"in(r=document.createElement("div"))||"ondragstart"in r&&"ondrop"in r,e.canvas=function(){var e;return!(!(e=document.createElement("canvas")).getContext||!e.getContext("2d"))}(),e.fileDragAndDrop=e.fileAPI&&e.dragAndDrop,e.iOSVersion=null,(t=/^[^(]+\(iP(?:hone|od|ad);\s*(.+?)\)/.exec(navigator.userAgent))&&(i=/OS (\d)_(\d)/.exec(t[1]))&&(e.iOSVersion=+i[1]+i[2]/10),e.Blob=!1;try{new window.Blob&&(e.Blob=window.Blob)}catch(e){}return n=window.URL||window.webkitURL||!1,e.URL=n&&n.createObjectURL&&n,e.FileReader=(null!=(o=window.FileReader)?o.prototype.readAsArrayBuffer:void 0)&&window.FileReader})}.call(this),function(){var t,n={}.hasOwnProperty,i=function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i]);function o(){this.constructor=e}return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){return function(){return e.apply(t,arguments)}},s=[].slice;t=e.jQuery,e.namespace("utils",function(e){return e.Collection=function(){function e(e){var n,i,o;for(null==e&&(e=[]),this.onAdd=t.Callbacks(),this.onRemove=t.Callbacks(),this.onSort=t.Callbacks(),this.onReplace=t.Callbacks(),this.__items=[],i=0,o=e.length;i<o;i++)n=e[i],this.add(n)}return e.prototype.add=function(e){return this.__add(e,this.__items.length)},e.prototype.__add=function(e,t){return this.__items.splice(t,0,e),this.onAdd.fire(e,t)},e.prototype.remove=function(e){var n;if(-1!==(n=t.inArray(e,this.__items)))return this.__remove(e,n)},e.prototype.__remove=function(e,t){return this.__items.splice(t,1),this.onRemove.fire(e,t)},e.prototype.clear=function(){var e,t,n,i,o,r;for(n=this.get(),this.__items.length=0,r=[],e=i=0,o=n.length;i<o;e=++i)t=n[e],r.push(this.onRemove.fire(t,e));return r},e.prototype.replace=function(e,n){var i;if(e!==n&&-1!==(i=t.inArray(e,this.__items)))return this.__replace(e,n,i)},e.prototype.__replace=function(e,t,n){return this.__items[n]=t,this.onReplace.fire(e,t,n)},e.prototype.sort=function(e){return this.__items.sort(e),this.onSort.fire()},e.prototype.get=function(e){return null!=e?this.__items[e]:this.__items.slice(0)},e.prototype.length=function(){return this.__items.length},e}(),e.UniqCollection=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.add=function(e){if(!(o.call(this.__items,e)>=0))return t.__super__.add.apply(this,arguments)},t.prototype.__replace=function(e,n,i){return o.call(this.__items,n)>=0?this.remove(e):t.__super__.__replace.apply(this,arguments)},t}(e.Collection),e.CollectionOfPromises=function(e){function n(){this.onAnyProgress=r(this.onAnyProgress,this),this.onAnyFail=r(this.onAnyFail,this),this.onAnyDone=r(this.onAnyDone,this),this.anyDoneList=t.Callbacks(),this.anyFailList=t.Callbacks(),this.anyProgressList=t.Callbacks(),this.anyProgressList.add(function(e,n){return t(e).data("lastProgress",n)}),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.onAnyDone=function(e){var t,n,i,o,r;for(this.anyDoneList.add(e),r=[],n=0,i=(o=this.__items).length;n<i;n++)"resolved"===(t=o[n]).state()?r.push(t.done(function(){return e.apply(null,[t].concat(s.call(arguments)))})):r.push(void 0);return r},n.prototype.onAnyFail=function(e){var t,n,i,o,r;for(this.anyFailList.add(e),r=[],n=0,i=(o=this.__items).length;n<i;n++)"rejected"===(t=o[n]).state()?r.push(t.fail(function(){return e.apply(null,[t].concat(s.call(arguments)))})):r.push(void 0);return r},n.prototype.onAnyProgress=function(e){var n,i,o,r,s;for(this.anyProgressList.add(e),s=[],i=0,o=(r=this.__items).length;i<o;i++)n=r[i],s.push(e(n,t(n).data("lastProgress")));return s},n.prototype.lastProgresses=function(){var e,n,i,o,r;for(r=[],n=0,i=(o=this.__items).length;n<i;n++)e=o[n],r.push(t(e).data("lastProgress"));return r},n.prototype.add=function(e){if(e&&e.then)return n.__super__.add.apply(this,arguments),this.__watchItem(e)},n.prototype.__replace=function(e,t,i){return t&&t.then?(n.__super__.__replace.apply(this,arguments),this.__watchItem(t)):this.remove(e)},n.prototype.__watchItem=function(e){var t,n=this;return t=function(t){return function(){if(o.call(n.__items,e)>=0)return t.fire.apply(t,[e].concat(s.call(arguments)))}},e.then(t(this.anyDoneList),t(this.anyFailList),t(this.anyProgressList))},n}(e.UniqCollection)})}.call(this),function(){var t=[].slice;e.namespace("utils",function(e){var n,i;return e.log=function(){var e;return null!=(e=window.console)&&"function"==typeof e.log?e.log.apply(e,arguments):void 0},e.debug=function(){var n,i;return(null!=(n=window.console)?n.debug:void 0)?(i=window.console).debug.apply(i,arguments):e.log.apply(e,["Debug:"].concat(t.call(arguments)))},e.warn=function(){var n,i;return(null!=(n=window.console)?n.warn:void 0)?(i=window.console).warn.apply(i,arguments):e.log.apply(e,["Warning:"].concat(t.call(arguments)))},i={},e.warnOnce=function(t){if(null==i[t])return i[t]=!0,e.warn(t)},n={publicKey:"Global public key not set. Uploads may not work!\nAdd this to the <head> tag to set your key:\n\n<script>\nUPLOADCARE_PUBLIC_KEY = 'your_public_key';\n<\/script>"},e.commonWarning=function(t){if(null!=n[t])return e.warnOnce(n[t])}})}.call(this),function(){var t;t=e.jQuery,e.namespace("utils",function(e){var n;return n={},t(window).on("message",function(e){var t,i,o,r,s,l,a;t=e.originalEvent;try{o=JSON.parse(t.data)}catch(e){return}if(o.type in n){for(a=[],r=0,s=(l=n[o.type]).length;r<s;r++)i=l[r],t.source===i[0]?a.push(i[1](o)):a.push(void 0);return a}}),e.registerMessage=function(e,t,i){return e in n||(n[e]=[]),n[e].push([t,i])},e.unregisterMessage=function(e,i){if(e in n)return n[e]=t.grep(n[e],function(e){return e[0]!==i})}})}.call(this),function(){var t,n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=[].slice;t=e.jQuery,e.namespace("utils",function(e){var o;return e.unique=function(e){var t,i,o,r;for(i=[],o=0,r=e.length;o<r;o++)t=e[o],n.call(i,t)<0&&i.push(t);return i},e.imageLoader=function(e){var n;return n=t.Deferred(),t(new Image).on("load",n.resolve).on("error",n.reject).attr("src",e),n.promise()},e.videoLoader=function(e){var n;return n=t.Deferred(),t("<video/>").on("loadeddata",n.resolve).on("error",n.reject).attr("src",e).load(),n.promise()},e.defer=function(e){return setTimeout(e,0)},e.gcd=function(e,t){for(var n;t;)n=e%t,e=t,t=n;return e},e.once=function(e){var t,n;return t=!1,n=null,function(){return t||(n=e.apply(this,arguments),t=!0),n}},e.wrapToPromise=function(e){return t.Deferred().resolve(e).promise()},e.then=function(e,n,i,o){var r,s;return s=t.Deferred(),r=function(e,t){return e&&t?function(){return t.call(this,e.apply(this,arguments))}:e||t},e.then(r(n,s.resolve),r(i,s.reject),r(o,s.notify)),s.promise()},e.bindAll=function(e,n){var i;return i={},t.each(n,function(n,o){var r;return r=e[o],t.isFunction(r)?i[o]=function(){var t;return(t=r.apply(e,arguments))===e?i:t}:i[o]=r}),i},e.upperCase=function(e){return e.replace(/([A-Z])/g,"_$1").toUpperCase()},e.publicCallbacks=function(e){var t;return(t=e.add).add=e.add,t.remove=e.remove,t},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t;return t=16*Math.random()|0,("x"===e?t:3&t|8).toString(16)})},e.splitUrlRegex=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)\??([^\#]*)\#?(.*)$/,e.uuidRegex=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,e.groupIdRegex=new RegExp(e.uuidRegex.source+"~[0-9]+","i"),e.cdnUrlRegex=new RegExp("^/?("+e.uuidRegex.source+")(?:/(-/(?:[^/]+/)+)?([^/]*))?$","i"),e.splitCdnUrl=function(t){return e.cdnUrlRegex.exec(e.splitUrlRegex.exec(t)[3])},e.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},e.globRegexp=function(n,i){var o;return null==i&&(i="i"),o=t.map(n.split("*"),e.escapeRegExp),new RegExp("^"+o.join(".+")+"$",i)},e.normalizeUrl=function(e){var t;return"http:"!==(t=document.location.protocol)&&(t="https:"),e.replace(/^\/\//,t+"//").replace(/\/+$/,"")},e.fitText=function(e,t){var n,i;return e.length>t?(n=Math.ceil((t-3)/2),i=Math.floor((t-3)/2),e.slice(0,n)+"..."+e.slice(-i)):e},e.fitSizeInCdnLimit=function(t){return e.fitSize(t,[2048,2048])},e.fitSize=function(e,t,n){var i,o;return e[0]>t[0]||e[1]>t[1]||n?(o=t[0]/e[0],i=t[1]/e[1],!t[0]||t[1]&&o>i?[Math.round(i*e[0]),t[1]]:[t[0],Math.round(o*e[1])]):e.slice()},e.applyCropSelectionToFile=function(e,t,n,i){var o,r,s,l,a,u,c;return u=i.width,r=i.height,l=t.preferedSize,s="",(c=u===n[0]&&r===n[1])||(s+="-/crop/"+u+"x"+r+"/"+i.left+","+i.top+"/"),o=t.downscale&&(u>l[0]||r>l[1]),a=t.upscale&&(u<l[0]||r<l[1]),o||a?(i.sw=l[0],i.sh=l[1],s+="-/resize/"+l.join("x")+"/"):c||(s+="-/preview/"),e.then(function(e){return e.cdnUrlModifiers=s,e.cdnUrl=""+e.originalUrl+(s||""),e.crop=i,e})},e.fileInput=function(e,n,i){var o,r,s;return r=null,""===(o=n.inputAcceptTypes)&&(o=n.imagesOnly?"image/*":null),(s=function(){return r=(n.multiple?t('<input type="file" multiple>'):t('<input type="file">')).attr("accept",o).css({position:"absolute",top:0,opacity:0,margin:0,padding:0,width:"auto",height:"auto",cursor:e.css("cursor")}).on("change",function(){return i(this),t(this).hide(),s()}),e.append(r)})(),e.css({position:"relative",overflow:"hidden"}).mousemove(function(e){var n,i,o,s;return n=(s=t(this).offset()).left,i=s.top,o=r.width(),r.css({left:e.pageX-n-o+10,top:e.pageY-i-10})})},e.fileSelectDialog=function(e,n,i){var o;return""===(o=n.inputAcceptTypes)&&(o=n.imagesOnly?"image/*":null),t(n.multiple?'<input type="file" multiple>':'<input type="file">').attr("accept",o).css({position:"fixed",bottom:0,opacity:0}).on("change",function(){return i(this),t(this).remove()}).appendTo(e).focus().click().hide()},e.fileSizeLabels="B KB MB GB TB PB EB ZB YB".split(" "),e.readableFileSize=function(t,n,i,o){var r,s,l;if(null==n&&(n=""),null==i&&(i=""),null==o&&(o=""),t=parseInt(t,10),isNaN(t))return n;for(2,s=0,l=1e3-5*Math.pow(10,2-Math.max(2,3));t>l&&s<e.fileSizeLabels.length-1;)s++,t/=1024;return t+=1e-15,r=Math.max(0,2-Math.floor(t).toFixed(0).length),""+i+(t=Number(t.toFixed(r)))+" "+e.fileSizeLabels[s]+o},e.ajaxDefaults={dataType:"json",crossDomain:!0,cache:!1},e.jsonp=function(n,i,o){return t.isPlainObject(i)&&(o=i,i="GET"),t.ajax(t.extend({url:n,type:i,data:o},e.ajaxDefaults)).then(function(e){var n;return e.error?(n=e.error.content||e.error,t.Deferred().reject(n)):e},function(t,i,o){var r;return r=i+" ("+o+")",e.warn("JSONP unexpected error: "+r+" while loading "+n),r})},e.canvasToBlob=function(e,t,n,i){var o,r,s,l,a,u;if(HTMLCanvasElement.prototype.toBlob)return e.toBlob(i,t,n);for(s=(s=e.toDataURL(t,n)).split(","),r=atob(s[1]),o=new Uint8Array(r.length),l=a=0,u=r.length;a<u;l=a+=1)o[l]=r.charCodeAt(l);return i(new Blob([o],{type:/:(.+\/.+);/.exec(s[0])[1]}))},e.taskRunner=function(t){var n,i,o;return o=0,n=[],i=function(){var t;return n.length?(t=n.shift(),e.defer(function(){return t(i)})):o-=1},function(r){return!t||o<t?(o+=1,e.defer(function(){return r(i)})):n.push(r)}},o=[["notify","progress",2],["resolve","done",0],["reject","fail",1]],e.fixedPipe=function(){var e,n;return n=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t.Deferred(function(i){return t.each(o,function(o,r){var s;return s=t.isFunction(e[r[2]])&&e[r[2]],n[r[1]](function(){var e;return(e=s&&s.apply(this,arguments))&&t.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})})}).promise()}})}.call(this),function(){var t,i,o,r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=e.expose,o=e.utils,t=e.jQuery,e.namespace("settings",function(s){var l,a,u,c,p,d,h,m,f,g;return m={tabs:{all:"file camera url facebook gdrive dropbox instagram evernote flickr skydrive box vk huddle",default:(a={live:!0,manualStart:!1,locale:null,localePluralize:null,localeTranslations:null,systemDialog:!1,crop:!1,previewStep:!1,imagesOnly:!1,clearable:!1,multiple:!1,multipleMax:0,multipleMin:1,multipleMaxStrict:!1,imageShrink:!1,pathValue:!0,tabs:"file camera url facebook gdrive dropbox instagram evernote flickr skydrive",preferredTypes:"",inputAcceptTypes:"",doNotStore:!1,publicKey:null,pusherKey:"79ae88bd931ea68464d9",cdnBase:"https://ucarecdn.com",urlBase:"https://upload.uploadcare.com",socialBase:"https://social.uploadcare.com",imagePreviewMaxSize:26214400,multipartMinSize:26214400,multipartPartSize:5242880,multipartMinLastPartSize:1048576,multipartConcurrency:4,multipartMaxAttempts:3,parallelDirectUploads:10,passWindowOpen:!1,scriptBase:n,debugUploads:!1}).tabs}},f=function(e){return t.isArray(e)||(e=(e=t.trim(e))?e.split(" "):[]),e},l=function(e,t){var n,i,r,s,l,a,u,c;for(l=0,u=t.length;l<u;l++){if(i=t[l],s=r=f(e[i]),m.hasOwnProperty(i))for(s=[],a=0,c=r.length;a<c;a++)n=r[a],m[i].hasOwnProperty(n)?s=s.concat(f(m[i][n])):s.push(n);e[i]=o.unique(s)}return e},g=function(e,t){var n,i,r;for(i=0,r=t.length;i<r;i++)null!=e[n=t[i]]&&(e[n]=o.normalizeUrl(e[n]));return e},u=function(e,n){var i,o,r,s;for(r=0,s=n.length;r<s;r++)null!=e[i=n[r]]&&(o=e[i],"string"===t.type(o)?(o=t.trim(o).toLowerCase(),e[i]=!("false"===o||"disabled"===o)):e[i]=!!o);return e},c=function(e,t){var n,i,o;for(i=0,o=t.length;i<o;i++)null!=e[n=t[i]]&&(e[n]=parseInt(e[n]));return e},d=function(e){var n;return{downscale:"x"===(n=/^([0-9]+)([x:])([0-9]+)\s*(|upscale|minimum)$/i.exec(t.trim(e.toLowerCase()))||[])[2],upscale:!!n[4],notLess:"minimum"===n[4],preferedSize:n.length?[+n[1],+n[3]]:void 0}},h=function(e){var n,i;return!!(n=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i.exec(t.trim(e.toLowerCase()))||[]).length&&((i=n[1]*n[2])>5e6?(o.warnOnce("Shrinked size can not be larger than 5MP. You have set "+n[1]+"x"+n[2]+" ("+Math.ceil(i/1e3/100)/10+"MP)."),!1):{quality:n[3]?n[3]/100:void 0,size:i})},p=function(e){return l(e,["tabs","preferredTypes"]),g(e,["cdnBase","socialBase","urlBase","scriptBase"]),u(e,["doNotStore","imagesOnly","multiple","clearable","pathValue","previewStep","systemDialog","debugUploads","multipleMaxStrict"]),c(e,["multipleMax","multipleMin","multipartMinSize","multipartPartSize","multipartMinLastPartSize","multipartConcurrency","multipartMaxAttempts","parallelDirectUploads"]),!1===e.crop||t.isArray(e.crop)||(/^(disabled?|false|null)$/i.test(e.crop)?e.crop=!1:t.isPlainObject(e.crop)?e.crop=[e.crop]:e.crop=t.map((""+e.crop).split(","),d)),e.imageShrink&&!t.isPlainObject(e.imageShrink)&&(e.imageShrink=h(e.imageShrink)),(e.crop||e.multiple)&&(e.previewStep=!0),o.abilities.sendFileAPI||(e.systemDialog=!1),e.validators&&(e.validators=e.validators.slice()),e},i("defaults",t.extend({allTabs:m.tabs.all},a)),s.globals=function(){var e,t,n;for(e in n={},a)void 0!==(t=window["UPLOADCARE_"+o.upperCase(e)])&&(n[e]=t);return n},s.common=o.once(function(e,n){var i;return n||(a=t.extend(a,s.globals())),(i=p(t.extend(a,e||{}))).publicKey||o.commonWarning("publicKey"),s.waitForSettings.fire(i),i}),s.build=function(e){var n;return n=t.extend({},s.common()),t.isEmptyObject(e)||(n=p(t.extend(n,e))),n},s.waitForSettings=t.Callbacks("once memory"),s.CssCollector=function(){function e(){this.urls=[],this.styles=[]}return e.prototype.addUrl=function(e){if(!/^https?:\/\//i.test(e))throw new Error("Embedded urls should be absolute. "+e);if(!(r.call(this.urls,e)>=0))return this.urls.push(e)},e.prototype.addStyle=function(e){return this.styles.push(e)},e}(),e.tabsCss=new s.CssCollector,a._emptyKeyText='<div class="uploadcare-dialog-message-center">\n<div class="uploadcare-dialog-big-title">Hello!</div>\n<div class="uploadcare-dialog-large-text">\n  <div>Your <a class="uploadcare-link" href="https://uploadcare.com/dashboard/">public key</a> is not set.</div>\n  <div>Add this to the &lt;head&gt; tag to start uploading files:</div>\n  <div class="uploadcare-pre">&lt;script&gt;\nUPLOADCARE_PUBLIC_KEY = \'your_public_key\';\n&lt;/script&gt;</div>\n</div>\n</div>'})}.call(this),function(){e.namespace("locale.translations",function(e){return e.en={uploading:"Uploading... Please wait.",loadingInfo:"Loading info...",errors:{default:"Error",baddata:"Incorrect value",size:"File too big",upload:"Can’t upload",user:"Upload canceled",info:"Can’t load info",image:"Only images allowed",createGroup:"Can’t create file group",deleted:"File was deleted"},draghere:"Drop a file here",file:{one:"%1 file",other:"%1 files"},buttons:{cancel:"Cancel",remove:"Remove",choose:{files:{one:"Choose a file",other:"Choose files"},images:{one:"Choose an image",other:"Choose images"}}},dialog:{done:"Done",showFiles:"Show files",tabs:{names:{"empty-pubkey":"Welcome",preview:"Preview",file:"Local Files",url:"Arbitrary Links",camera:"Camera",facebook:"Facebook",dropbox:"Dropbox",gdrive:"Google Drive",instagram:"Instagram",vk:"VK",evernote:"Evernote",box:"Box",skydrive:"OneDrive",flickr:"Flickr",huddle:"Huddle"},file:{drag:"Drop a file here",nodrop:"Upload files from your computer",cloudsTip:"Cloud storages<br>and social networks",or:"or",button:"Choose a local file",also:"You can also choose it from"},url:{title:"Files from the Web",line1:"Grab any file off the web.",line2:"Just provide the link.",input:"Paste your link here...",button:"Upload"},camera:{capture:"Take a photo",mirror:"Mirror",startRecord:"Record a video",stopRecord:"Stop",cancelRecord:"Cancel",retry:"Request permissions again",pleaseAllow:{title:"Please allow access to your camera",text:"You have been prompted to allow camera access from this site. In order to take pictures with your camera you must approve this request."},notFound:{title:"No camera detected",text:"Looks like you have no camera connected to this device."}},preview:{unknownName:"unknown",change:"Cancel",back:"Back",done:"Add",unknown:{title:"Uploading... Please wait for a preview.",done:"Skip preview and accept"},regular:{title:"Add this file?",line1:"You are about to add the file above.",line2:"Please confirm."},image:{title:"Add this image?",change:"Cancel"},crop:{title:"Crop and add this image",done:"Done",free:"free"},video:{title:"Add this video?",change:"Cancel"},error:{default:{title:"Oops!",text:"Something went wrong during the upload.",back:"Please try again"},image:{title:"Only image files are accepted.",text:"Please try again with another file.",back:"Choose image"},size:{title:"The file you selected exceeds the limit.",text:"Please try again with another file."},loadImage:{title:"Error",text:"Can’t load image"}},multiple:{title:"You’ve chosen %files%",question:"Do you want to add all of these files?",tooManyFiles:"You’ve chosen too many files. %max% is maximum.",tooFewFiles:"You’ve chosen %files%. At least %min% required.",clear:"Remove all",done:"Done"}}},footer:{text:"powered by",link:"uploadcare"}}}}),e.namespace("locale.pluralize",function(e){return e.en=function(e){return 1===e?"one":"other"}})}.call(this),function(){var t,n,i;i=e.utils,n=e.settings,t=e.jQuery,e.namespace("locale",function(e){var o,r,s,l;return"en",r={lang:"en",translations:e.translations.en,pluralize:e.pluralize.en},l=function(n){var i;return{lang:i=n.locale||r.lang,translations:t.extend(!0,{},e.translations[i],n.localeTranslations),pluralize:t.isFunction(n.localePluralize)?n.localePluralize:e.pluralize[i]}},o=i.once(function(){return l(n.build())}),e.rebuild=function(e){var t;return t=l(n.build(e)),o=function(){return t}},s=function(e,t){var n,i,o,r;for(o=0,r=(n=e.split(".")).length;o<r;o++){if(i=n[o],null==t)return null;t=t[i]}return t},e.t=function(e,t){var n,i,l;return n=o(),null==(i=s(e,n.translations))&&n.lang!==r.lang&&(i=s(e,(n=r).translations)),null!=t&&(i=null!=n.pluralize?(null!=(l=i[n.pluralize(t)])?l.replace("%1",t):void 0)||t:""),i||""}})}.call(this),function(){var t,n,i,o=function(e,t){return function(){return e.apply(t,arguments)}},r=[].slice;n=e.namespace,e.settings,t=e.jQuery,i=e.utils,n("files",function(e){return e.BaseFile=function(){function e(e,n,i){var r;this.settings=n,this.sourceInfo=null!=i?i:{},this.__extendApi=o(this.__extendApi,this),this.__cancel=o(this.__cancel,this),this.__resolveApi=o(this.__resolveApi,this),this.__rejectApi=o(this.__rejectApi,this),this.__runValidators=o(this.__runValidators,this),this.__fileInfo=o(this.__fileInfo,this),this.__handleFileData=o(this.__handleFileData,this),this.__updateInfo=o(this.__updateInfo,this),this.__completeUpload=o(this.__completeUpload,this),this.fileId=null,this.fileName=null,this.sanitizedName=null,this.fileSize=null,this.isStored=null,this.cdnUrlModifiers=null,this.isImage=null,this.imageInfo=null,this.mimeType=null,this.s3Bucket=null,(r=this.sourceInfo).source||(r.source=this.sourceName),this.onInfoReady=t.Callbacks("once memory"),this.__setupValidation(),this.__initApi()}return e.prototype.__startUpload=function(){return t.Deferred().resolve()},e.prototype.__completeUpload=function(){var e,t,n,o,r=this;return n=0,this.settings.debugUploads&&(i.debug("Load file info.",this.fileId,this.settings.publicKey),t=setInterval(function(){return i.debug("Still waiting for file ready.",n,r.fileId,r.settings.publicKey)},5e3),this.apiDeferred.done(function(){return i.debug("File uploaded.",n,r.fileId,r.settings.publicKey)}).always(function(){return clearInterval(t)})),o=100,(e=function(){if("pending"===r.apiDeferred.state())return n+=1,r.__updateInfo().done(function(){return setTimeout(e,o),o+=50})})()},e.prototype.__updateInfo=function(){var e=this;return i.jsonp(this.settings.urlBase+"/info/",{jsonerrors:1,file_id:this.fileId,pub_key:this.settings.publicKey,wait_is_ready:+this.onInfoReady.fired()}).fail(function(t){return e.settings.debugUploads&&i.log("Can't load file info. Probably removed.",e.fileId,e.settings.publicKey,t),e.__rejectApi("info")}).done(this.__handleFileData)},e.prototype.__handleFileData=function(e){if(this.fileName=e.original_filename,this.sanitizedName=e.filename,this.fileSize=e.size,this.isImage=e.is_image,this.imageInfo=e.image_info,this.mimeType=e.mime_type,this.isStored=e.is_stored,this.s3Bucket=e.s3_bucket,e.default_effects&&(this.cdnUrlModifiers="-/"+e.default_effects),this.s3Bucket&&this.cdnUrlModifiers&&this.__rejectApi("baddata"),this.onInfoReady.fired()||this.onInfoReady.fire(this.__fileInfo()),e.is_ready)return this.__resolveApi()},e.prototype.__progressInfo=function(){var e;return{state:this.__progressState,uploadProgress:this.__progress,progress:"ready"===(e=this.__progressState)||"error"===e?1:.9*this.__progress,incompleteFileInfo:this.__fileInfo()}},e.prototype.__fileInfo=function(){var e;return e=this.s3Bucket?"https://"+this.s3Bucket+".s3.amazonaws.com/"+this.fileId+"/"+this.sanitizedName:this.settings.cdnBase+"/"+this.fileId+"/",{uuid:this.fileId,name:this.fileName,size:this.fileSize,isStored:this.isStored,isImage:!this.s3Bucket&&this.isImage,originalImageInfo:this.imageInfo,mimeType:this.mimeType,originalUrl:this.fileId?e:null,cdnUrl:this.fileId?""+e+(this.cdnUrlModifiers||""):null,cdnUrlModifiers:this.cdnUrlModifiers,sourceInfo:this.sourceInfo}},e.prototype.__setupValidation=function(){return this.validators=this.settings.validators||this.settings.__validators||[],this.settings.imagesOnly&&this.validators.push(function(e){if(!1===e.isImage)throw new Error("image")}),this.onInfoReady.add(this.__runValidators)},e.prototype.__runValidators=function(e){var t,n,i,o,r,s;e=e||this.__fileInfo();try{for(r=this.validators,s=[],i=0,o=r.length;i<o;i++)n=r[i],s.push(n(e));return s}catch(e){return t=e,this.__rejectApi(t.message)}},e.prototype.__initApi=function(){return this.apiDeferred=t.Deferred(),this.__progressState="uploading",this.__progress=0,this.__notifyApi()},e.prototype.__notifyApi=function(){return this.apiDeferred.notify(this.__progressInfo())},e.prototype.__rejectApi=function(e){return this.__progressState="error",this.__notifyApi(),this.apiDeferred.reject(e,this.__fileInfo())},e.prototype.__resolveApi=function(){return this.__progressState="ready",this.__notifyApi(),this.apiDeferred.resolve(this.__fileInfo())},e.prototype.__cancel=function(){return this.__rejectApi("user")},e.prototype.__extendApi=function(e){var t=this;return e.cancel=this.__cancel,e.pipe=e.then=function(){return t.__extendApi(i.fixedPipe.apply(i,[e].concat(r.call(arguments))))},e},e.prototype.promise=function(){var e,t=this;return this.__apiPromise||(this.__apiPromise=this.__extendApi(this.apiDeferred.promise()),this.__runValidators(),"pending"===this.apiDeferred.state()&&((e=this.__startUpload()).done(function(){return t.__progressState="uploaded",t.__progress=1,t.__notifyApi(),t.__completeUpload()}),e.progress(function(e){if(e>t.__progress)return t.__progress=e,t.__notifyApi()}),e.fail(function(){return t.__rejectApi("upload")}),this.apiDeferred.always(e.reject))),this.__apiPromise},e}()}),n("utils",function(t){return t.isFile=function(e){return e&&e.done&&e.fail&&e.cancel},t.valueToFile=function(n,i){return n&&!t.isFile(n)&&(n=e.fileFrom("uploaded",n,i)),n||null}})}.call(this),function(){var t,n,i,o,r,s;t=e.jQuery,r=e.utils,s=e.utils.abilities,n=s.Blob,i=s.FileReader,o=s.URL,e.namespace("utils.image",function(e){var s,l;return s=window.DataView,l=r.taskRunner(1),e.shrinkFile=function(i,a){var u;return u=t.Deferred(),o&&s&&n?(l(function(t){var n;return u.always(t),(n=r.imageLoader(o.createObjectURL(i))).always(function(e){return o.revokeObjectURL(e.target.src)}),n.fail(function(){return u.reject("not image")}),n.done(function(t){return u.notify(.1),e.getExif(i).always(function(i){var o;return u.notify(.2),o="resolved"===this.state(),(n=e.shrinkImage(t.target,a)).progress(function(e){return u.notify(.2+.6*e)}),n.fail(u.reject),n.done(function(t){var s,l;return s="image/jpeg",l=a.quality||.8,!o&&e.hasTransparency(t)&&(s="image/png",l=void 0),r.canvasToBlob(t,s,l,function(o){return t.width=t.height=1,u.notify(.9),i?((n=e.replaceJpegChunk(o,225,[i.buffer])).done(u.resolve),n.fail(function(){return u.resolve(o)})):u.resolve(o)})}),t=null})})}),u.promise()):u.reject("support")},e.shrinkImage=function(e,n){var i,o,s,l,a,u,c,p;return i=t.Deferred(),.71,.71*e.width*e.height*.71<n.size?i.reject("not required"):(c=s=e.width,u=e.height,l=c/u,p=Math.floor(Math.sqrt(n.size*l)),o=Math.floor(n.size/Math.sqrt(n.size*l)),5e6,4096,(a=function(){if(!(c<=p))return r.defer(function(){var t;return c=Math.round(.71*c),u=Math.round(.71*u),.71*c<p&&(c=p,u=o),c*u>5e6&&(c=Math.floor(Math.sqrt(5e6*l)),u=Math.floor(5e6/Math.sqrt(5e6*l))),c>4096&&(c=4096,u=Math.round(c/l)),u>4096&&(u=4096,c=Math.round(l*u)),(t=document.createElement("canvas")).width=c,t.height=u,t.getContext("2d").drawImage(e,0,0,c,u),e.src="//:0",e.width=e.height=1,e=t,i.notify((s-c)/(s-p)),a()});i.resolve(e)})(),i.promise())},e.drawFileToCanvas=function(n,i,s,l,a){var u,c;return u=t.Deferred(),o?((c=r.imageLoader(o.createObjectURL(n))).always(function(e){return o.revokeObjectURL(e.target.src)}),c.fail(function(){return u.reject("not image")}),c.done(function(t){var o;return o=t.target,u.always(function(){return o.src="//:0"}),a&&o.width*o.height>a?u.reject("max source"):e.getExif(n).always(function(t){var n,a,c,p,d,h,m,f,g,w;return h=(m=(d=e.parseExifOrientation(t)||1)>4)?[o.height,o.width]:[o.width,o.height],(f=[[1,0,0,1,0,0],[-1,0,0,1,p=(g=r.fitSize(h,[i,s]))[0],0],[-1,0,0,-1,p,c=g[1]],[1,0,0,-1,0,c],[0,1,1,0,0,0],[0,1,-1,0,p,0],[0,-1,-1,0,p,c],[0,-1,1,0,0,c]][d-1])?((n=document.createElement("canvas")).width=p,n.height=c,(a=n.getContext("2d")).transform.apply(a,f),m&&(p=(w=[c,p])[0],c=w[1]),l&&(a.fillStyle=l,a.fillRect(0,0,p,c)),a.drawImage(o,0,0,p,c),u.resolve(n,h)):u.reject("bad image")})}),u.promise()):u.reject("support")},e.readJpegChunks=function(e){var n,o,r,l,a;return a=function(e,t){var o;return(o=new i).onload=function(){return t(new s(o.result))},o.onerror=function(e){return n.reject("reader",e)},o.readAsArrayBuffer(e)},r=function(){return a(e.slice(o,o+128),function(e){var t,n,i;for(t=n=0,i=e.byteLength;0<=i?n<i:n>i;t=0<=i?++n:--n)if(255===e.getUint8(t)){o+=t;break}return l()})},l=function(){var t;return t=o,a(e.slice(o,o+=4),function(i){var s,l;return 4!==i.byteLength||255!==i.getUint8(0)?n.reject("corrupted"):218===(l=i.getUint8(1))?n.resolve():(s=i.getUint16(2)-2,a(e.slice(o,o+=s),function(e){return e.byteLength!==s?n.reject("corrupted"):(n.notify(t,s,l,e),r())}))})},n=t.Deferred(),i&&s?(o=2,a(e.slice(0,2),function(e){return 65496!==e.getUint16(0)?n.reject("not jpeg"):r()}),n.promise()):n.reject("support")},e.replaceJpegChunk=function(i,o,r){var l,a,u,c;return l=t.Deferred(),u=[],a=[],(c=e.readJpegChunks(i)).fail(l.reject),c.progress(function(e,t,n){if(n===o)return u.push(e),a.push(t)}),c.done(function(){var e,t,c,p,d,h,m,f,g;for(p=[i.slice(0,2)],h=0,f=r.length;h<f;h++)e=r[h],(c=new s(new ArrayBuffer(4))).setUint16(0,65280+o),c.setUint16(2,e.byteLength+2),p.push(c.buffer),p.push(e);for(d=2,t=m=0,g=u.length;0<=g?m<g:m>g;t=0<=g?++m:--m)u[t]>d&&p.push(i.slice(d,u[t])),d=u[t]+a[t]+4;return p.push(i.slice(d,i.size)),l.resolve(new n(p,{type:i.type}))}),l.promise()},e.getExif=function(n){var i,o;return i=null,(o=e.readJpegChunks(n)).progress(function(e,t,n,o){if(!i&&225===n&&o.byteLength>=14&&1165519206===o.getUint32(0)&&0===o.getUint16(4))return i=o}),o.then(function(){return i},function(e){return t.Deferred().reject(i,e)})},e.parseExifOrientation=function(e){var t,n,i,o;if(!e||e.byteLength<14||1165519206!==e.getUint32(0)||0!==e.getUint16(4)||42!==e.getUint16(8))return null;if(18761===e.getUint16(6))n=!0;else{if(19789!==e.getUint16(6))return null;n=!1}for(i=8+e.getUint32(10,n),t=e.getUint16(i-2,n),o=0;0<=t?o<t:o>t;0<=t?++o:--o){if(e.byteLength<i+10)return null;if(274===e.getUint16(i,n))return e.getUint16(i+8,n);i+=12}return null},e.hasTransparency=function(e){var t,n,i,o,r,s;for(50,(t=document.createElement("canvas")).width=t.height=50,(n=t.getContext("2d")).drawImage(e,0,0,50,50),i=n.getImageData(0,0,50,50).data,t.width=t.height=1,o=r=3,s=i.length;r<s;o=r+=4)if(i[o]<254)return!0;return!1}})}.call(this),function(){var t,n,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty;t=e.jQuery,n=e.utils,e.namespace("files",function(e){return e.ObjectFile=function(r){var s;function l(e){this.__file=e,this.setFile=i(this.setFile,this),l.__super__.constructor.apply(this,arguments),this.fileName=this.__file.name||"original",this.__notifyApi()}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(l,e.BaseFile),s=null,l.prototype.sourceName="local",l.prototype.setFile=function(e){if(e&&(this.__file=e),this.sourceInfo.file=this.__file,this.__file)return this.fileSize=this.__file.size,this.fileType=this.__file.type||"application/octet-stream",this.settings.debugUploads&&n.debug("Use local file.",this.fileName,this.fileType,this.fileSize),this.__runValidators(),this.__notifyApi()},l.prototype.__startUpload=function(){var e,i,o,r=this;return this.apiDeferred.always(function(){return r.__file=null}),this.__file.size>=this.settings.multipartMinSize&&n.abilities.Blob?(this.setFile(),this.multipartUpload()):(i=n.abilities.iOSVersion,!this.settings.imageShrink||i&&i<8?(this.setFile(),this.directUpload()):(e=t.Deferred(),o=.4,n.image.shrinkFile(this.__file,this.settings.imageShrink).progress(function(t){return e.notify(t*o)}).done(this.setFile).fail(function(){return r.setFile(),o*=.1}).always(function(){return e.notify(o),r.directUpload().done(e.resolve).fail(e.reject).progress(function(t){return e.notify(o+t*(1-o))})}),e))},l.prototype.__autoAbort=function(e){return this.apiDeferred.fail(e.abort),e},l.prototype.directRunner=function(e){return s||(s=n.taskRunner(this.settings.parallelDirectUploads)),s(e)},l.prototype.directUpload=function(){var e,n=this;return e=t.Deferred(),this.__file?this.fileSize>104857600?(this.__rejectApi("size"),e):(this.directRunner(function(i){var o;if(e.always(i),"pending"===n.apiDeferred.state())return(o=new FormData).append("UPLOADCARE_PUB_KEY",n.settings.publicKey),o.append("UPLOADCARE_STORE",n.settings.doNotStore?"":"auto"),o.append("file",n.__file,n.fileName),o.append("file_name",n.fileName),o.append("source",n.sourceInfo.source),n.__autoAbort(t.ajax({xhr:function(){var n;return(n=t.ajaxSettings.xhr()).upload&&n.upload.addEventListener("progress",function(t){return e.notify(t.loaded/t.total)},!1),n},crossDomain:!0,type:"POST",url:n.settings.urlBase+"/base/?jsonerrors=1",headers:{"X-PINGOTHER":"pingpong"},contentType:!1,processData:!1,data:o,dataType:"json",error:e.reject,success:function(t){return(null!=t?t.file:void 0)?(n.fileId=t.file,e.resolve()):e.reject()}}))}),e):(this.__rejectApi("baddata"),e)},l.prototype.multipartUpload=function(){var e,n=this;return e=t.Deferred(),this.__file?this.settings.imagesOnly?(this.__rejectApi("image"),e):(this.multipartStart().done(function(t){return n.uploadParts(t.parts,t.uuid).done(function(){return n.multipartComplete(t.uuid).done(function(t){return n.fileId=t.uuid,n.__handleFileData(t),e.resolve()}).fail(e.reject)}).progress(e.notify).fail(e.reject)}).fail(e.reject),e):e},l.prototype.multipartStart=function(){var e,t=this;return e={UPLOADCARE_PUB_KEY:this.settings.publicKey,filename:this.fileName,source:this.sourceInfo.source,size:this.fileSize,content_type:this.fileType,part_size:this.settings.multipartPartSize,UPLOADCARE_STORE:this.settings.doNotStore?"":"auto"},this.__autoAbort(n.jsonp(this.settings.urlBase+"/multipart/start/?jsonerrors=1","POST",e).fail(function(i){if(t.settings.debugUploads)return n.log("Can't start multipart upload.",i,e)}))},l.prototype.uploadParts=function(e,i){var o,r,s,l,a,u,c,p,d,h,m=this;for(l=[],s=t.now(),p=function(e,n){var i,r,a;if(l[e]=n,!(t.now()-s<250)){for(s=t.now(),i=0,r=0,a=l.length;r<a;r++)i+=n=l[r];return o.notify(i/m.fileSize)}},o=t.Deferred(),r=0,c=0,u=0,a=function(){var s,d,h,f,g;if(!(u>=m.fileSize))return h=u+m.settings.multipartPartSize,m.fileSize<h+m.settings.multipartMinLastPartSize&&(h=m.fileSize),d=m.__file.slice(u,h),u=h,f=c,r+=1,c+=1,s=0,(g=function(){if("pending"===m.apiDeferred.state())return l[f]=0,m.__autoAbort(t.ajax({xhr:function(){var e;return(e=t.ajaxSettings.xhr()).upload&&e.upload.addEventListener("progress",function(e){return p(f,e.loaded)},!1),e},url:e[f],crossDomain:!0,type:"PUT",processData:!1,contentType:m.fileType,data:d,error:function(){return(s+=1)>m.settings.multipartMaxAttempts?(m.settings.debugUploads&&n.info("Part #"+f+" and file upload is failed.",i),o.reject()):(m.settings.debugUploads&&n.debug("Part #"+f+"("+s+") upload is failed.",i),g())},success:function(){if(r-=1,a(),!r)return o.resolve()}}))})()},d=0,h=this.settings.multipartConcurrency;0<=h?d<h:d>h;0<=h?++d:--d)a();return o},l.prototype.multipartComplete=function(e){var t,i=this;return t={UPLOADCARE_PUB_KEY:this.settings.publicKey,uuid:e},this.__autoAbort(n.jsonp(this.settings.urlBase+"/multipart/complete/?jsonerrors=1","POST",t).fail(function(t){if(i.settings.debugUploads)return n.log("Can't complete multipart upload.",e,i.settings.publicKey,t)}))},l}()})}.call(this),function(){var t,n,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty;t=e.jQuery,n=e.utils,e.namespace("files",function(e){return e.InputFile=function(r){function s(e){this.__input=e,this.__cleanUp=i(this.__cleanUp,this),s.__super__.constructor.apply(this,arguments),this.fileId=n.uuid(),this.fileName=t(this.__input).val().split("\\").pop(),this.__notifyApi()}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,e.BaseFile),s.prototype.sourceName="local-compat",s.prototype.__startUpload=function(){var e,n,i,o;return e=t.Deferred(),o=this.settings.urlBase+"/iframe/",i="uploadcare-iframe-"+this.fileId,this.__iframe=t("<iframe>").attr({id:i,name:i}).css("display","none").appendTo("body").on("load",e.resolve).on("error",e.reject),n=function(e,n){return t("<input/>",{type:"hidden",name:e,value:n})},t(this.__input).attr("name","file"),this.__iframeForm=t("<form>").attr({method:"POST",action:o,enctype:"multipart/form-data",target:i}).append(n("UPLOADCARE_PUB_KEY",this.settings.publicKey)).append(n("UPLOADCARE_FILE_ID",this.fileId)).append(n("UPLOADCARE_STORE",this.settings.doNotStore?"":"auto")).append(n("UPLOADCARE_SOURCE",this.sourceInfo.source)).append(this.__input).css("display","none").appendTo("body").submit(),e.always(this.__cleanUp)},s.prototype.__cleanUp=function(){var e,t;return null!=(e=this.__iframe)&&e.off("load error").remove(),null!=(t=this.__iframeForm)&&t.remove(),this.__iframe=null,this.__iframeForm=null},s}()})}.call(this),function(){var e,t;void 0===Function.prototype.scopedTo&&(Function.prototype.scopedTo=function(e,t){var n=this;return function(){return n.apply(e,Array.prototype.slice.call(t||[]).concat(Array.prototype.slice.call(arguments)))}}),(e=function(t,n){this.options=n||{},this.key=t,this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher;var i=this;this.checkAppKey(),this.connection=new e.Connection(this.key,this.options),this.connection.bind("connected",function(){i.subscribeAll()}).bind("message",function(e){var t,n=0===e.event.indexOf("pusher_internal:");e.channel&&(t=i.channel(e.channel))&&t.emit(e.event,e.data),n||i.global_emitter.emit(e.event,e.data)}).bind("disconnected",function(){i.channels.disconnect()}).bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),e.isReady&&i.connect()}).instances=[],e.prototype={channel:function(e){return this.channels.find(e)},connect:function(){this.connection.connect()},disconnect:function(){this.connection.disconnect()},bind:function(e,t){return this.global_emitter.bind(e,t),this},bind_all:function(e){return this.global_emitter.bind_all(e),this},subscribeAll:function(){for(channelName in this.channels.channels)this.channels.channels.hasOwnProperty(channelName)&&this.subscribe(channelName)},subscribe:function(e){var t=this,n=this.channels.add(e,this);return"connected"===this.connection.state&&n.authorize(this.connection.socket_id,this.options,function(i,o){i?n.emit("pusher:subscription_error",o):t.send_event("pusher:subscribe",{channel:e,auth:o.auth,channel_data:o.channel_data})}),n},unsubscribe:function(e){this.channels.remove(e),"connected"===this.connection.state&&this.send_event("pusher:unsubscribe",{channel:e})},send_event:function(e,t,n){return this.connection.send_event(e,t,n)},checkAppKey:function(){null!==this.key&&void 0!==this.key||e.warn("Warning","You must pass your app key when you instantiate Pusher.")}},e.Util={extend:function e(t,n){for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?t[i]=e(t[i]||{},n[i]):t[i]=n[i];return t},stringify:function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):null==window.JSON?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(null==e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(i=0,l=e.length;i<l;i++)if(e[i]===t)return i;return-1}},e.debug=function(){e.log&&e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){if(window.console&&window.console.warn)window.console.warn(e.Util.stringify.apply(this,arguments));else{if(!e.log)return;e.log(e.Util.stringify.apply(this,arguments))}},e.VERSION="1.12.2",e.host="ws.pusherapp.com",e.ws_port=80,e.wss_port=443,e.channel_auth_endpoint="/pusher/auth",e.cdn_http="http://js.pusher.com/",e.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",e.dependency_suffix=".min",e.channel_auth_transport="ajax",e.activity_timeout=12e4,e.pong_timeout=3e4,e.isReady=!1,e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},function(){function t(){this._callbacks={}}function n(e){this.callbacks=new t,this.global_callbacks=[],this.failThrough=e}t.prototype.get=function(e){return this._callbacks[this._prefix(e)]},t.prototype.add=function(e,t){var n=this._prefix(e);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(t)},t.prototype.remove=function(t,n){if(this.get(t)){var i=e.Util.arrayIndexOf(this.get(t),n);this._callbacks[this._prefix(t)].splice(i,1)}},t.prototype._prefix=function(e){return"_"+e},n.prototype.bind=function(e,t){return this.callbacks.add(e,t),this},n.prototype.unbind=function(e,t){return this.callbacks.remove(e,t),this},n.prototype.emit=function(e,t){for(var n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var i=this.callbacks.get(e);if(i)for(n=0;n<i.length;n++)i[n](t);else this.failThrough&&this.failThrough(e,t);return this},n.prototype.bind_all=function(e){return this.global_callbacks.push(e),this},e.EventsDispatcher=n}(),function(){function t(e,t,n){void 0!==t[e]&&t[e](n)}function n(t,n,i){e.EventsDispatcher.call(this),this.state=void 0,this.errors=[],this.stateActions=i,this.transitions=n,this.transition(t)}n.prototype.transition=function(n,i){var o,r=this.state,s=this.stateActions;if(r&&-1==e.Util.arrayIndexOf(this.transitions[r],n))throw this.emit("invalid_transition_attempt",{oldState:r,newState:n}),new Error("Invalid transition ["+r+" to "+n+"]");t(r+"Exit",s,i),t(r+"To"+((o=n).substr(0,1).toUpperCase()+o.substr(1)),s,i),t(n+"Pre",s,i),this.state=n,this.emit("state_change",{oldState:r,newState:n}),t(n+"Post",s,i)},n.prototype.is=function(e){return this.state===e},n.prototype.isNot=function(e){return this.state!==e},e.Util.extend(n.prototype,e.EventsDispatcher.prototype),e.Machine=n}(),(t=function(){var t=this;e.EventsDispatcher.call(this),void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online",null)},!1),window.addEventListener("offline",function(){t.emit("offline",null)},!1))}).prototype.isOnLine=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e.Util.extend(t.prototype,e.EventsDispatcher.prototype),e.NetInfo=t,function(){var t={initialized:["waiting","failed"],waiting:["connecting","permanentlyClosed"],connecting:["open","permanentlyClosing","impermanentlyClosing","waiting"],open:["connected","permanentlyClosing","impermanentlyClosing","waiting"],connected:["permanentlyClosing","waiting"],impermanentlyClosing:["waiting","permanentlyClosing"],permanentlyClosing:["permanentlyClosed"],permanentlyClosed:["waiting","failed"],failed:["permanentlyClosed"]},n=2e3,i=2e3,o=2e3,r=5*n,s=5*i,l=5*o;function a(t){t.connectionWait=0,"flash"===e.TransportType?t.openTimeout=5e3:t.openTimeout=2e3,t.connectedTimeout=2e3,t.connectionSecure=t.compulsorySecure,t.connectionAttempts=0}function u(u,c){var p=this;function d(){p.connectionWait<r&&(p.connectionWait+=n),p.openTimeout<s&&(p.openTimeout+=i),p.connectedTimeout<l&&(p.connectedTimeout+=o),!0!==p.compulsorySecure&&(p.connectionSecure=!p.connectionSecure),p.connectionAttempts++}function h(){p._machine.transition("impermanentlyClosing")}function m(){p._activityTimer&&clearTimeout(p._activityTimer),p._activityTimer=setTimeout(function(){p.send_event("pusher:ping",{}),p._activityTimer=setTimeout(function(){p.socket.close()},p.options.pong_timeout||e.pong_timeout)},p.options.activity_timeout||e.activity_timeout)}function f(){p._machine.transition("open")}function g(e){var t,n,i=v(e);void 0!==i&&("pusher:connection_established"===i.event?p._machine.transition("connected",i.data.socket_id):"pusher:error"===i.event&&(t=i.data.code,n=i.data.message,p.emit("error",{type:"PusherError",data:{code:t,message:n}}),4e3===t?(p.compulsorySecure=!0,p.connectionSecure=!0,p.options.encrypted=!0,h()):t<4100?p._machine.transition("permanentlyClosing"):t<4200?(p.connectionWait=1e3,p._machine.transition("waiting")):t<4300?h():p._machine.transition("permanentlyClosing")))}function w(t){m();var n=v(t);if(void 0!==n){switch(e.debug("Event recd",n),n.event){case"pusher:error":p.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":p.send_event("pusher:pong",{})}p.emit("message",n)}}function v(e){try{var t=JSON.parse(e.data);if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){if(!(e instanceof SyntaxError))throw e}return t}catch(t){p.emit("error",{type:"MessageParseError",error:t,data:e.data})}}function y(){p._machine.transition("waiting")}function _(e){p.emit("error",{type:"WebSocketError",error:e})}function x(t,n){var i=p.state;p.state=t,i!==t&&(e.debug("State changed",i+" -> "+t),p.emit("state_change",{previous:i,current:t}),p.emit(t,n))}e.EventsDispatcher.call(this),this.options=e.Util.extend({encrypted:!1},c),this.netInfo=new e.NetInfo,this.netInfo.bind("online",function(){p._machine.is("waiting")&&(p._machine.transition("connecting"),x("connecting"))}),this.netInfo.bind("offline",function(){p._machine.is("connected")&&(p.socket.onclose=void 0,p.socket.onmessage=void 0,p.socket.onerror=void 0,p.socket.onopen=void 0,p.socket.close(),p.socket=void 0,p._machine.transition("waiting"))}),this._machine=new e.Machine("initialized",t,{initializedPre:function(){p.compulsorySecure=p.options.encrypted,p.key=u,p.socket=null,p.socket_id=null,p.state="initialized"},waitingPre:function(){p.connectionWait>0&&p.emit("connecting_in",p.connectionWait),p.netInfo.isOnLine()&&p.connectionAttempts<=4?x("connecting"):x("unavailable"),p.netInfo.isOnLine()&&(p._waitingTimer=setTimeout(function(){p._machine.transition("connecting")},function(){var e=p.connectionWait;if(0===e&&p.connectedAt){var t=(new Date).getTime()-p.connectedAt;t<1e3&&(e=1e3-t)}return e}()))},waitingExit:function(){clearTimeout(p._waitingTimer)},connectingPre:function(){if(!1===p.netInfo.isOnLine())return p._machine.transition("waiting"),void x("unavailable");var t=function(t,n){var i=e.ws_port,o="ws://";(n||"https:"===document.location.protocol)&&(i=e.wss_port,o="wss://");var r="flash"===e.TransportType?"true":"false";return o+e.host+":"+i+"/app/"+t+"?protocol=5&client=js&version="+e.VERSION+"&flash="+r}(p.key,p.connectionSecure);e.debug("Connecting",t),p.socket=new e.Transport(t),p.socket.onopen=f,p.socket.onclose=y,p.socket.onerror=_,p._connectingTimer=setTimeout(h,p.openTimeout)},connectingExit:function(){clearTimeout(p._connectingTimer),p.socket.onopen=void 0},connectingToWaiting:function(){d()},connectingToImpermanentlyClosing:function(){d()},openPre:function(){p.socket.onmessage=g,p.socket.onerror=_,p.socket.onclose=y,p._openTimer=setTimeout(h,p.connectedTimeout)},openExit:function(){clearTimeout(p._openTimer),p.socket.onmessage=void 0},openToWaiting:function(){d()},openToImpermanentlyClosing:function(){d()},connectedPre:function(e){p.socket_id=e,p.socket.onmessage=w,p.socket.onerror=_,p.socket.onclose=y,a(p),p.connectedAt=(new Date).getTime(),m()},connectedPost:function(){x("connected")},connectedExit:function(){p._activityTimer&&clearTimeout(p._activityTimer),x("disconnected")},impermanentlyClosingPost:function(){p.socket&&(p.socket.onclose=y,p.socket.close())},permanentlyClosingPost:function(){p.socket?(p.socket.onclose=function(){a(p),p._machine.transition("permanentlyClosed")},p.socket.close()):(a(p),p._machine.transition("permanentlyClosed"))},failedPre:function(){x("failed"),e.debug("WebSockets are not available in this browser.")},permanentlyClosedPost:function(){x("disconnected")}})}u.prototype.connect=function(){this._machine.is("failed")||e.Transport?this._machine.is("initialized")?(a(this),this._machine.transition("waiting")):this._machine.is("waiting")&&!0===this.netInfo.isOnLine()?this._machine.transition("connecting"):this._machine.is("permanentlyClosed")&&(a(this),this._machine.transition("waiting")):this._machine.transition("failed")},u.prototype.send=function(e){if(this._machine.is("connected")){var t=this;return setTimeout(function(){t.socket.send(e)},0),!0}return!1},u.prototype.send_event=function(t,n,i){var o={event:t,data:n};return i&&(o.channel=i),e.debug("Event sent",o),this.send(JSON.stringify(o))},u.prototype.disconnect=function(){this._machine.is("permanentlyClosed")||(this._machine.is("waiting")||this._machine.is("failed")?this._machine.transition("permanentlyClosed"):this._machine.transition("permanentlyClosing"))},e.Util.extend(u.prototype,e.EventsDispatcher.prototype),e.Connection=u}(),function(){e.Channels=function(){this.channels={}},e.Channels.prototype={add:function(t,n){var i=this.find(t);if(i)return i;var o=e.Channel.factory(t,n);return this.channels[t]=o,o},find:function(e){return this.channels[e]},remove:function(e){delete this.channels[e]},disconnect:function(){for(var e in this.channels)this.channels[e].disconnect()}},e.Channel=function(t,n){var i=this;e.EventsDispatcher.call(this,function(n,i){e.debug("No callbacks on "+t+" for "+n)}),this.pusher=n,this.name=t,this.subscribed=!1,this.bind("pusher_internal:subscription_succeeded",function(e){i.onSubscriptionSucceeded(e)})},e.Channel.prototype={init:function(){},disconnect:function(){this.subscribed=!1,this.emit("pusher_internal:disconnected")},onSubscriptionSucceeded:function(e){this.subscribed=!0,this.emit("pusher:subscription_succeeded")},authorize:function(e,t,n){return n(!1,{})},trigger:function(e,t){return this.pusher.send_event(e,t,this.name)}},e.Util.extend(e.Channel.prototype,e.EventsDispatcher.prototype),e.Channel.PrivateChannel={authorize:function(t,n,i){var o=this;return new e.Channel.Authorizer(this,e.channel_auth_transport,n).authorize(t,function(e,t){e||o.emit("pusher_internal:authorized",t),i(e,t)})}},e.Channel.PresenceChannel={init:function(){this.members=new t(this)},onSubscriptionSucceeded:function(e){this.subscribed=!0}};var t=function(e){var t=this,n=function(){this._members_map={},this.count=0,this.me=null};n.call(this),e.bind("pusher_internal:authorized",function(n){var i=JSON.parse(n.channel_data);e.bind("pusher_internal:subscription_succeeded",function(n){t._members_map=n.presence.hash,t.count=n.presence.count,t.me=t.get(i.user_id),e.emit("pusher:subscription_succeeded",t)})}),e.bind("pusher_internal:member_added",function(n){null===t.get(n.user_id)&&t.count++,t._members_map[n.user_id]=n.user_info,e.emit("pusher:member_added",t.get(n.user_id))}),e.bind("pusher_internal:member_removed",function(n){var i=t.get(n.user_id);i&&(delete t._members_map[n.user_id],t.count--,e.emit("pusher:member_removed",i))}),e.bind("pusher_internal:disconnected",function(){n.call(t)})};t.prototype={each:function(e){for(var t in this._members_map)e(this.get(t))},get:function(e){return this._members_map.hasOwnProperty(e)?{id:e,info:this._members_map[e]}:null}},e.Channel.factory=function(t,n){var i=new e.Channel(t,n);return 0===t.indexOf("private-")?e.Util.extend(i,e.Channel.PrivateChannel):0===t.indexOf("presence-")&&(e.Util.extend(i,e.Channel.PrivateChannel),e.Util.extend(i,e.Channel.PresenceChannel)),i.init(),i}}(),e.Channel.Authorizer=function(e,t,n){this.channel=e,this.type=t,this.authOptions=(n||{}).auth||{}},e.Channel.Authorizer.prototype={composeQuery:function(e){var t="&socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},authorize:function(t,n){return e.authorizers[this.type].call(this,t,n)}},e.auth_callbacks={},e.authorizers={ajax:function(t,n){var i;for(var o in(i=e.XHR?new e.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("POST",e.channel_auth_endpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)i.setRequestHeader(o,this.authOptions.headers[o]);return i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var t,o=!1;try{t=JSON.parse(i.responseText),o=!0}catch(e){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+i.responseText)}o&&n(!1,t)}else e.warn("Couldn't get auth info from your webapp",i.status),n(!0,i.status)},i.send(this.composeQuery(t)),i},jsonp:function(t,n){void 0!==this.authOptions.headers&&e.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=document.createElement("script");e.auth_callbacks[this.channel.name]=function(e){n(!1,e)};var o="Pusher.auth_callbacks['"+this.channel.name+"']";i.src=e.channel_auth_endpoint+"?callback="+encodeURIComponent(o)+this.composeQuery(t);var r=document.getElementsByTagName("head")[0]||document.documentElement;r.insertBefore(i,r.firstChild)}};var n=function(){function e(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("src",e),i.setAttribute("type","text/javascript"),i.setAttribute("async",!0),function(e,t){document.addEventListener?e.addEventListener("load",t,!1):e.attachEvent("onreadystatechange",function(){"loaded"!=e.readyState&&"complete"!=e.readyState||t()})}(i,function(){t()}),n.appendChild(i)}return function(t,n){for(var i=0,o=0;o<t.length;o++)e(t[o],function(){t.length==++i&&setTimeout(n,0)})}}();!function(){!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.WebSocket&&(e.Transport=window.WebSocket,e.TransportType="native");var t=("http:"==document.location.protocol?e.cdn_http:e.cdn_https)+e.VERSION,i=[];window.JSON||i.push(t+"/json2"+e.dependency_suffix+".js"),window.WebSocket||(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,i.push(t+"/flashfallback"+e.dependency_suffix+".js"));var o=window.WebSocket?function(){e.ready()}:function(){window.WebSocket?(e.Transport=window.WebSocket,e.TransportType="flash",window.WEB_SOCKET_SWF_LOCATION="https://s3.amazonaws.com/uploadcare-static/WebSocketMainInsecure.swf",WebSocket.__addTask(function(){e.ready()}),WebSocket.__initialize()):(e.Transport=null,e.TransportType="none",e.ready())},r=function(){var e,t;e=o,(t=function(){document.body?e():setTimeout(t,0)})()};i.length>0?n(i,r):r()}(),this.Pusher=e}.call(e),function(){var t,n={}.hasOwnProperty;t=e.jQuery,e.namespace("utils.pusher",function(i){var o,r;return r={},e.Pusher.prototype.constructor=e.Pusher,o=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}return function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(o,e.Pusher),o.prototype.subscribe=function(e){return this.disconnectTimeout&&(clearTimeout(this.disconnectTimeout),this.disconnectTimeout=null),this.connect(),o.__super__.subscribe.apply(this,arguments)},o.prototype.unsubscribe=function(e){var n=this;if(o.__super__.unsubscribe.apply(this,arguments),t.isEmptyObject(this.channels.channels))return this.disconnectTimeout=setTimeout(function(){return n.disconnectTimeout=null,n.disconnect()},5e3)},o}(),i.getPusher=function(e){return null==r[e]&&(r[e]=new o(e)),r[e].connect(),r[e]}})}.call(this),function(){var t,n,i,o=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;t=e.jQuery,i=e.utils,n=e.utils.pusher,e.namespace("files",function(e){var s,l;return e.UrlFile=function(n){function a(e){var t;if(this.__url=e,this.__listenWatcher=o(this.__listenWatcher,this),a.__super__.constructor.apply(this,arguments),t=i.splitUrlRegex.exec(this.__url)[3].split("/").pop())try{this.fileName=decodeURIComponent(t)}catch(e){e,this.fileName=t}this.__notifyApi()}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(a,e.BaseFile),a.prototype.sourceName="url",a.prototype.allEvents="progress success error fail",a.prototype.setName=function(e){return this.fileName=e,this.__realFileName=e,this.__notifyApi()},a.prototype.setIsImage=function(e){return this.isImage=e,this.__notifyApi()},a.prototype.__startUpload=function(){var e,n,o,r,a=this;return n=t.Deferred(),r=new l(this.settings),o=new s(this.settings),e={pub_key:this.settings.publicKey,source_url:this.__url,filename:this.__realFileName||"",source:this.sourceInfo.source,store:this.settings.doNotStore?"":"auto",jsonerrors:1},i.defer(function(){if("pending"===a.apiDeferred.state())return i.jsonp(a.settings.urlBase+"/from_url/",e).fail(function(t){return a.settings.debugUploads&&i.debug("Can't start upload from URL.",t,e),n.reject()}).done(function(e){var s;if("pending"===a.apiDeferred.state())return a.settings.debugUploads&&(i.debug("Start watchers.",e.token),s=setInterval(function(){return i.debug("Still watching.",e.token)},5e3),n.done(function(){return i.debug("Stop watchers.",e.token)}).always(function(){return clearInterval(s)})),a.__listenWatcher(n,t([r,o])),n.always(function(){return t([r,o]).off(a.allEvents),r.stopWatching(),o.stopWatching()}),t(r).one(a.allEvents,function(){if(o.interval)return a.settings.debugUploads&&i.debug("Start using pusher.",e.token),o.stopWatching()}),r.watch(e.token),o.watch(e.token)})}),n},a.prototype.__listenWatcher=function(e,n){var i=this;return n.on("progress",function(t,n){return i.fileSize=n.total,e.notify(n.done/n.total)}).on("success",function(n,o){return t(n.target).trigger("progress",o),i.fileId=o.uuid,i.__handleFileData(o),e.resolve()}).on("error fail",e.reject)},a}(),l=function(){function e(e){this.settings=e;try{this.pusher=n.getPusher(this.settings.pusherKey)}catch(e){this.pusher=null}}return e.prototype.watch=function(e){var n=this;if(this.token=e,this.pusher)return this.pusher.subscribe("task-status-"+this.token).bind_all(function(e,i){return t(n).trigger(e,i)})},e.prototype.stopWatching=function(){if(this.pusher)return this.pusher.unsubscribe("task-status-"+this.token)},e}(),s=function(){function e(e){this.settings=e,this.poolUrl=this.settings.urlBase+"/from_url/status/"}return e.prototype.watch=function(e){var t,n=this;return this.token=e,(t=function(){return n.interval=setTimeout(function(){return n.__updateStatus().done(function(){if(n.interval)return t()})},333)})()},e.prototype.stopWatching=function(){return this.interval&&clearTimeout(this.interval),this.interval=null},e.prototype.__updateStatus=function(){var e=this;return i.jsonp(this.poolUrl,{token:this.token}).fail(function(n){return t(e).trigger("error")}).done(function(n){return t(e).trigger(n.status,n)})},e}()})}.call(this),function(){var t,n={}.hasOwnProperty,i=function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i]);function o(){this.constructor=e}return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};e.jQuery,t=e.utils,e.namespace("files",function(e){return e.UploadedFile=function(e){function n(e){var i;n.__super__.constructor.apply(this,arguments),(i=t.splitCdnUrl(e))?(this.fileId=i[1],i[2]&&(this.cdnUrlModifiers=i[2])):this.__rejectApi("baddata")}return i(n,e),n.prototype.sourceName="uploaded",n}(e.BaseFile),e.ReadyFile=function(e){function t(e){t.__super__.constructor.apply(this,arguments),e?(this.fileId=e.uuid,this.__handleFileData(e)):this.__rejectApi("deleted")}return i(t,e),t.prototype.sourceName="uploaded",t}(e.BaseFile)})}.call(this),function(){var t,n,i,o,r,s,l=[].slice,a={}.hasOwnProperty;n=e.namespace,t=e.jQuery,r=e.utils,s=e.locale,o=s.t,i=e.settings,n("files",function(n){return n.FileGroup=function(){function e(e,n){var o,s=this;this.__uuid=null,this.settings=i.build(n),this.__fileColl=new r.CollectionOfPromises(e),this.__allFilesDf=t.when.apply(t,this.files()),this.__fileInfosDf=(e=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.files()).length;e<n;e++)o=i[e],r.push(o.then(null,function(e,n){return t.when(n)}));return r}.call(s),t.when.apply(t,e)),this.__createGroupDf=t.Deferred(),this.__initApiDeferred()}return e.prototype.files=function(){return this.__fileColl.get()},e.prototype.__save=function(){var e=this;if(!this.__saved)return this.__saved=!0,this.__allFilesDf.done(function(){return e.__createGroup().done(function(t){return e.__uuid=t.id,e.__buildInfo(function(t){return e.settings.imagesOnly&&!t.isImage?e.__createGroupDf.reject("image",t):e.__createGroupDf.resolve(t)})}).fail(function(){return e.__createGroupDf.reject("createGroup")})})},e.prototype.promise=function(){return this.__save(),this.__apiDf.promise()},e.prototype.__initApiDeferred=function(){var e,n,i,o=this;return this.__apiDf=t.Deferred(),this.__progressState="uploading",n=function(e){return o.__buildInfo(function(t){return o.__apiDf.reject(e,t)})},i=function(e){return o.__apiDf.resolve(e)},(e=function(){return o.__apiDf.notify(o.__progressInfo())})(),this.__fileColl.onAnyProgress(e),this.__allFilesDf.done(function(){return o.__progressState="uploaded",e()}).fail(n),this.__createGroupDf.done(function(t){return o.__progressState="ready",e(),i(t)}).fail(n)},e.prototype.__progressInfo=function(){var e,t,n,i,o;for(e=0,i=0,o=(n=this.__fileColl.lastProgresses()).length;i<o;i++)e+=((null!=(t=n[i])?t.progress:void 0)||0)/n.length;return{state:this.__progressState,uploadProgress:e,progress:"ready"===this.__progressState?1:.9*e}},e.prototype.__buildInfo=function(e){var t;return t={uuid:this.__uuid,cdnUrl:this.__uuid?this.settings.cdnBase+"/"+this.__uuid+"/":null,name:o("file",this.__fileColl.length()),count:this.__fileColl.length(),size:0,isImage:!0,isStored:!0},this.__fileInfosDf.done(function(){var n,i,o,r;for(i=0,r=(n=1<=arguments.length?l.call(arguments,0):[]).length;i<r;i++)o=n[i],t.size+=o.size,o.isImage||(t.isImage=!1),o.isStored||(t.isStored=!1);return e(t)})},e.prototype.__createGroup=function(){var e,n=this;return e=t.Deferred(),this.__fileColl.length()?this.__fileInfosDf.done(function(){var t,i;return i=1<=arguments.length?l.call(arguments,0):[],r.jsonp(n.settings.urlBase+"/group/","POST",{pub_key:n.settings.publicKey,files:function(){var e,n,o;for(o=[],e=0,n=i.length;e<n;e++)t=i[e],o.push("/"+t.uuid+"/"+(t.cdnUrlModifiers||""));return o}()}).fail(function(t){return n.settings.debugUploads&&r.log("Can't create group.",n.settings.publicKey,t),e.reject()}).done(e.resolve)}):e.reject(),e.promise()},e.prototype.api=function(){return this.__api||(this.__api=r.bindAll(this,["promise","files"])),this.__api},e}(),n.SavedFileGroup=function(t){function i(t,n){var o;this.__data=t,o=e.filesFrom("ready",this.__data.files,n),i.__super__.constructor.call(this,o,n)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,n.FileGroup),i.prototype.__createGroup=function(){return r.wrapToPromise(this.__data)},i}()}),n("",function(n){return n.FileGroup=function(t,n){var i,o,s,l,a,u,c,p;for(null==t&&(t=[]),o=[],l=0,u=t.length;l<u;l++)if(s=t[l],r.isFile(s))o.push(s);else if(r.isFileGroup(s))for(a=0,c=(p=s.files()).length;a<c;a++)i=p[a],o.push(i);return new e.files.FileGroup(o,n).api()},n.loadFileGroup=function(n,o){var s,l;return o=i.build(o),s=t.Deferred(),(l=r.groupIdRegex.exec(n))?r.jsonp(o.urlBase+"/group/info/",{jsonerrors:1,pub_key:o.publicKey,group_id:l[0]}).fail(function(e){return o.debugUploads&&r.log("Can't load group info. Probably removed.",l[0],o.publicKey,e),s.reject()}).done(function(t){var n;return n=new e.files.SavedFileGroup(t,o),s.resolve(n.api())}):s.reject(),s.promise()}}),n("utils",function(n){return n.isFileGroup=function(e){return e&&e.files&&e.promise},n.valueToGroup=function(i,o){var r,s;if(i)if(t.isArray(i))r=function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)s=i[e],r.push(n.valueToFile(s,o));return r}(),i=e.FileGroup(r,o);else if(!n.isFileGroup(i))return e.loadFileGroup(i,o);return n.wrapToPromise(i||null)},n.isFileGroupsEqual=function(e,t){var i,o,r,s,l;if(e===t)return!0;if(!n.isFileGroup(e)||!n.isFileGroup(t))return!1;if(i=e.files(),o=t.files(),i.length!==o.length)return!1;for(r=s=0,l=i.length;s<l;r=++s)if(i[r]!==o[r])return!1;return!0}})}.call(this),function(){var t,n,i;e.utils,t=e.jQuery,n=e.files,i=e.settings,e.namespace("",function(e){var o;return e.fileFrom=function(t,n,i){return e.filesFrom(t,[n],i)[0]},e.filesFrom=function(e,n,r){var s,l,a,u,c;for(r=i.build(r||{}),c=[],a=0,u=n.length;a<u;a++)l=n[a],s=null,t.isArray(l)&&(s=l[1],l=l[0]),c.push(new o[e](l,r,s).promise());return c},o={object:n.ObjectFile,input:n.InputFile,url:n.UrlFile,uploaded:n.UploadedFile,ready:n.ReadyFile}})}.call(this),function(){var t,n;(t=e.expose)("globals",e.settings.common),t("start",e.settings.common),t("fileFrom"),t("filesFrom"),t("FileGroup"),t("loadFileGroup"),t("locales",function(){var t;for(n in t=[],e.locale.translations)t.push(n);return t}())}.call(this)}({},"//ucarecdn.com/widget/2.8.2/uploadcare/")},{}],450:[function(e,t,n){!function(e,n){"use strict";"object"==typeof t&&t.exports?t.exports=n():"function"==typeof define&&define.amd?define(n):e.IPv6=n(e)}(this,function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,n,i=e.toLowerCase().split(":"),o=i.length,r=8;for(""===i[0]&&""===i[1]&&""===i[2]?(i.shift(),i.shift()):""===i[0]&&""===i[1]?i.shift():""===i[o-1]&&""===i[o-2]&&i.pop(),-1!==i[(o=i.length)-1].indexOf(".")&&(r=7),t=0;t<o&&""!==i[t];t++);if(t<r)for(i.splice(t,1,"0000");i.length<r;)i.splice(t,0,"0000");for(var s=0;s<r;s++){n=i[s].split("");for(var l=0;l<3&&"0"===n[0]&&n.length>1;l++)n.splice(0,1);i[s]=n.join("")}var a=-1,u=0,c=0,p=-1,d=!1;for(s=0;s<r;s++)d?"0"===i[s]?c+=1:(d=!1,c>u&&(a=p,u=c)):"0"===i[s]&&(d=!0,p=s,c=1);c>u&&(a=p,u=c),u>1&&i.splice(a,u,""),o=i.length;var h="";for(""===i[0]&&(h=":"),s=0;s<o&&(h+=i[s],s!==o-1);s++)h+=":";return""===i[o-1]&&(h+=":"),h},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}})},{}],451:[function(e,t,n){!function(e,n){"use strict";"object"==typeof t&&t.exports?t.exports=n():"function"==typeof define&&define.amd?define(n):e.SecondLevelDomains=n(e)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(i+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var i=n.list[e.slice(t+1)];return!!i&&i.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return null;var o=n.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})},{}],452:[function(e,t,n){!function(n,i){"use strict";"object"==typeof t&&t.exports?t.exports=i(e("./punycode"),e("./IPv6"),e("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],i):n.URI=i(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(e,t,n,i){"use strict";var o=i&&i.URI;function r(e,t){var n=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof r))return n?i?new r(e,t):new r(e):new r;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}r.version="1.18.12";var s=r.prototype,l=Object.prototype.hasOwnProperty;function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function c(e){return"Array"===u(e)}function p(e,t){var n,i,o={};if("RegExp"===u(t))o=null;else if(c(t))for(n=0,i=t.length;n<i;n++)o[t[n]]=!0;else o[t]=!0;for(n=0,i=e.length;n<i;n++){(o&&void 0!==o[e[n]]||!o&&t.test(e[n]))&&(e.splice(n,1),i--,n--)}return e}function d(e,t){var n,i;if(c(t)){for(n=0,i=t.length;n<i;n++)if(!d(e,t[n]))return!1;return!0}var o=u(t);for(n=0,i=e.length;n<i;n++)if("RegExp"===o){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function h(e,t){if(!c(e)||!c(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function m(e){return e.replace(/^\/+|\/+$/g,"")}function f(e){return escape(e)}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,f).replace(/\*/g,"%2A")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return r.domAttributes[t]}},r.encode=g,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=g,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return void 0===t&&(t=r.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="",void 0===t&&(t=r.escapeQuerySpace);try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var w,v={encode:"encode",decode:"decode"},y=function(e,t){return function(n){try{return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}catch(e){return n}}};for(w in v)r[w+"PathSegment"]=y("pathname",v[w]),r[w+"UrnPathSegment"]=y("urnpath",v[w]);var _=function(e,t,n){return function(i){var o;o=n?function(e){return r[t](r[n](e))}:r[t];for(var s=(i+"").split(e),l=0,a=s.length;l<a;l++)s[l]=o(s[l]);return s.join(e)}};function x(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function V(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="").charAt(0)===t&&(n=n.substring(1)),this._parts[e]=n,this.build(!i),this)}}r.decodePath=_("/","decodePathSegment"),r.decodeUrnPath=_(":","decodeUrnPathSegment"),r.recodePath=_("/","encodePathSegment","decode"),r.recodeUrnPath=_(":","encodeUrnPathSegment","decode"),r.encodeReserved=y("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),(n=e.indexOf("#"))>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),(n=e.indexOf("?"))>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0)),t.path=e,t},r.parseHost=function(e,t){var n,i,o=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,o)||null,"/"===t.port&&(t.port=null);else{var s=e.indexOf(":"),l=e.indexOf("/"),a=e.indexOf(":",s+1);-1!==a&&(-1===l||a<l)?(t.hostname=e.substring(0,o)||null,t.port=null):(i=e.substring(0,o).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),r.ensureValidHostname(t.hostname,t.protocol),t.port&&r.ensureValidPort(t.port),e.substring(o)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),o=e.lastIndexOf("@",i>-1?i:e.length-1);return o>-1&&(-1===i||o<i)?(n=e.substring(0,o).split(":"),t.username=n[0]?r.decode(n[0]):null,n.shift(),t.password=n[0]?r.decode(n.join(":")):null,e=e.substring(o+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,i,o,s={},a=e.split("&"),u=a.length,c=0;c<u;c++)n=a[c].split("="),i=r.decodeQuery(n.shift(),t),o=n.length?r.decodeQuery(n.join("="),t):null,l.call(s,i)?("string"!=typeof s[i]&&null!==s[i]||(s[i]=[s[i]]),s[i].push(o)):s[i]=o;return s},r.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(r.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username)),e.password&&(t+=":"+r.encode(e.password)),t&&(t+="@"),t},r.buildQuery=function(e,t,n){var i,o,s,a,u="";for(o in e)if(l.call(e,o)&&o)if(c(e[o]))for(i={},s=0,a=e[o].length;s<a;s++)void 0!==e[o][s]&&void 0===i[e[o][s]+""]&&(u+="&"+r.buildQueryParameter(o,e[o][s],n),!0!==t&&(i[e[o][s]+""]=!0));else void 0!==e[o]&&(u+="&"+r.buildQueryParameter(o,e[o],n));return u.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)l.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),c(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},r.removeQuery=function(e,t,n){var i,o,s;if(c(t))for(i=0,o=t.length;i<o;i++)e[t[i]]=void 0;else if("RegExp"===u(t))for(s in e)t.test(s)&&(e[s]=void 0);else if("object"==typeof t)for(s in t)l.call(t,s)&&r.removeQuery(e,s,t[s]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===u(n)?!c(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=p(e[t],n):e[t]!==String(n)||c(n)&&1!==n.length?c(e[t])&&(e[t]=p(e[t],n)):e[t]=void 0:e[t]=void 0}},r.hasQuery=function(e,t,n,i){switch(u(t)){case"String":break;case"RegExp":for(var o in e)if(l.call(e,o)&&t.test(o)&&(void 0===n||r.hasQuery(e,o,n)))return!0;return!1;case"Object":for(var s in t)if(l.call(t,s)&&!r.hasQuery(e,s,t[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(n)){case"Undefined":return t in e;case"Boolean":return n===Boolean(c(e[t])?e[t].length:e[t]);case"Function":return!!n(e[t],t,e);case"Array":return!!c(e[t])&&(i?d:h)(e[t],n);case"RegExp":return c(e[t])?!!i&&d(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return c(e[t])?!!i&&d(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var e=[],t=[],n=0,i=0;i<arguments.length;i++){var o=new r(arguments[i]);e.push(o);for(var s=o.segment(),l=0;l<s.length;l++)"string"==typeof s[l]&&t.push(s[l]),s[l]&&n++}if(!t.length||!n)return new r("");var a=new r("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||a.path("/"+a.path()),a.normalize()},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,o=n.end||r.findUri.end,s=n.trim||r.findUri.trim,l=n.parens||r.findUri.parens,a=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var u=i.exec(e);if(!u)break;var c=u.index;if(n.ignoreHtml){var p=e.slice(Math.max(c-3,0),c);if(p&&a.test(p))continue}for(var d=c+e.slice(c).search(o),h=e.slice(c,d),m=-1;;){var f=l.exec(h);if(!f)break;var g=f.index+f[0].length;m=Math.max(m,g)}if(!((h=m>-1?h.slice(0,m)+h.slice(m).replace(s,""):h.replace(s,"")).length<=u[0].length||n.ignore&&n.ignore.test(h))){var w=t(h,c,d=c+h.length,e);void 0!==w?(w=String(w),e=e.slice(0,c)+w+e.slice(d),i.lastIndex=c+w.length):i.lastIndex=d}}return i.lastIndex=0,e},r.ensureValidHostname=function(t,n){var i=!!t,o=!1;if(!!n&&(o=d(r.hostProtocols,n)),o&&!i)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(t&&t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},r.noConflict=function(e){if(e){var t={URI:this.noConflict()};return i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(t.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(t.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=i.SecondLevelDomains.noConflict()),t}return i.URI===this&&(i.URI=o),this},s.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new r(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=x("protocol"),s.username=x("username"),s.password=x("password"),s.hostname=x("hostname"),s.port=x("port"),s.query=V("query","?"),s.fragment=V("fragment","#"),s.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},s.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},s.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?r.decodeUrnPath:r.decodePath)(n):n}return this._parts.urn?this._parts.path=e?r.recodeUrnPath(e):"":this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},s.path=s.pathname,s.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,o="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[r.getDomAttribute(e)]||"",o=!1);if(!i&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=r.parse(String(e),this._parts);else{if(!i&&!o)throw new TypeError("invalid input");var s=i?e._parts:e;for(n in s)l.call(this._parts,n)&&(this._parts[n]=s[n])}return this.build(!t),this},s.is=function(e){var t=!1,i=!1,o=!1,s=!1,l=!1,a=!1,u=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),l=(s=!(t=i||o))&&n&&n.has(this._parts.hostname),a=s&&r.idn_expression.test(this._parts.hostname),u=s&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return l;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return a;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var R=s.protocol,b=s.port,C=s.hostname;s.protocol=function(e,t){if(void 0!==e&&e&&!(e=e.replace(/:(\/\/)?$/,"")).match(r.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return R.call(this,e,t)},s.scheme=s.protocol,s.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),r.ensureValidPort(e))),b.call(this,e,t))},s.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};if("/"!==r.parseHost(e,n))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname,r.ensureValidHostname(e,this._parts.protocol)}return C.call(this,e,t)},s.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var i=r(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},s.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildHost(this._parts):"";if("/"!==r.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildAuthority(this._parts):"";if("/"!==r.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=r.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},s.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},s.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,i),s=new RegExp("^"+a(o));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&r.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},s.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},s.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(i+1);return!0!==t&&n&&n.list[o.toLowerCase()]&&n.get(this._parts.hostname)||o}var r;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');r=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},s.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(i):i}var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),l=new RegExp("^"+a(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(l,e),this.build(!t),this},s.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?r.decodePathSegment(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var s=new RegExp(a(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),o?this.normalizePath(t):this.build(!t),this},s.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,o=this.filename(),s=o.lastIndexOf(".");return-1===s?"":(n=o.substring(s+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var l,u=this.suffix();if(u)l=e?new RegExp(a(u)+"$"):new RegExp(a("."+u)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return l&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(l,e)),this.build(!t),this},s.segment=function(e,t,n){var i=this._parts.urn?":":"/",o=this.path(),r="/"===o.substring(0,1),s=o.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(r&&s.shift(),e<0&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(c(t)){s=[];for(var l=0,a=t.length;l<a;l++)(t[l].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(m(t[l])))}else(t||"string"==typeof t)&&(t=m(t),""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t?s[e]=m(t):s.splice(e,1);return r&&s.unshift(""),this.path(s.join(i),n)},s.segmentCoded=function(e,t,n){var i,o,s;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(c(i=this.segment(e,t,n)))for(o=0,s=i.length;o<s;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(c(t))for(o=0,s=t.length;o<s;o++)t[o]=r.encode(t[o]);else t="string"==typeof t||t instanceof String?r.encode(t):t;return this.segment(e,t,n)};var S=s.query;return s.query=function(e,t){if(!0===e)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},s.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in e)l.call(e,o)&&(i[o]=e[o])}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},s.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},s.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},s.normalizePath=function(e){var t,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var i,o,s="";for("/"!==(n=r.recodePath(n)).charAt(0)&&(t=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(s=n.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(i=n.search(/\/\.\.(\/|$)/));)0!==i?(-1===(o=n.substring(0,i).lastIndexOf("/"))&&(o=i),n=n.substring(0,o)+n.substring(i+3)):n=n.substring(3);return t&&this.is("relative")&&(n=s+n.substring(1)),this._parts.path=n,this.build(!e),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},s.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var e=r.encode,t=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=e,r.decode=t}return this},s.unicode=function(){var e=r.encode,t=r.decode;r.encode=g,r.decode=unescape;try{this.normalize()}finally{r.encode=e,r.decode=t}return this},s.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",o=0,s=t._parts.query.split("&"),l=s.length;o<l;o++){var a=(s[o]||"").split("=");i+="&"+r.decodeQuery(a[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==a[1]&&(i+="="+r.decodeQuery(a[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0)},s.absoluteTo=function(e){var t,n,i,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),o._parts.protocol)return o;if(o._parts.protocol=e._parts.protocol,this._parts.hostname)return o;for(n=0;i=s[n];n++)o._parts[i]=e._parts[i];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),o.build(),o},s.relativeTo=function(e){var t,n,i,o,s,l=this.clone().normalize();if(l._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=l._parts,n=e._parts,o=l.path(),s=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return l.build();if(null!==t.protocol||null!==t.username||null!==t.password)return l.build();if(t.hostname!==n.hostname||t.port!==n.port)return l.build();if(t.hostname=null,t.port=null,o===s)return t.path="",l.build();if(!(i=r.commonPath(o,s)))return l.build();var a=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=a+t.path.substring(i.length)||"./",l.build()},s.equals=function(e){var t,n,i,o,s,a=this.clone(),u=new r(e),p={};if(a.normalize(),u.normalize(),a.toString()===u.toString())return!0;if(i=a.query(),o=u.query(),a.query(""),u.query(""),a.toString()!==u.toString())return!1;if(i.length!==o.length)return!1;for(s in t=r.parseQuery(i,this._parts.escapeQuerySpace),n=r.parseQuery(o,this._parts.escapeQuerySpace),t)if(l.call(t,s)){if(c(t[s])){if(!h(t[s],n[s]))return!1}else if(t[s]!==n[s])return!1;p[s]=!0}for(s in n)if(l.call(n,s)&&!p[s])return!1;return!0},s.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},s.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r})},{"./IPv6":450,"./SecondLevelDomains":451,"./punycode":453}],453:[function(e,t,n){(function(e){!function(i){var o="object"==typeof n&&n&&!n.nodeType&&n,r="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(i=s);var l,a,u=2147483647,c=36,p=1,d=26,h=38,m=700,f=72,g=128,w="-",v=/^xn--/,y=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=c-p,R=Math.floor,b=String.fromCharCode;function C(e){throw new RangeError(x[e])}function S(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function k(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+S((e=e.replace(_,".")).split("."),t).join(".")}function P(e){for(var t,n,i=[],o=0,r=e.length;o<r;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function T(e){return S(e,function(e){var t="";return e>65535&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=b(e)}).join("")}function M(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function L(e,t,n){var i=0;for(e=n?R(e/m):e>>1,e+=R(e/t);e>V*d>>1;i+=c)e=R(e/V);return R(i+(V+1)*e/(e+h))}function I(e){var t,n,i,o,r,s,l,a,h,m,v,y=[],_=e.length,x=0,V=g,b=f;for((n=e.lastIndexOf(w))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&C("not-basic"),y.push(e.charCodeAt(i));for(o=n>0?n+1:0;o<_;){for(r=x,s=1,l=c;o>=_&&C("invalid-input"),((a=(v=e.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||a>R((u-x)/s))&&C("overflow"),x+=a*s,!(a<(h=l<=b?p:l>=b+d?d:l-b));l+=c)s>R(u/(m=c-h))&&C("overflow"),s*=m;b=L(x-r,t=y.length+1,0==r),R(x/t)>u-V&&C("overflow"),V+=R(x/t),x%=t,y.splice(x++,0,V)}return T(y)}function O(e){var t,n,i,o,r,s,l,a,h,m,v,y,_,x,V,S=[];for(y=(e=P(e)).length,t=g,n=0,r=f,s=0;s<y;++s)(v=e[s])<128&&S.push(b(v));for(i=o=S.length,o&&S.push(w);i<y;){for(l=u,s=0;s<y;++s)(v=e[s])>=t&&v<l&&(l=v);for(l-t>R((u-n)/(_=i+1))&&C("overflow"),n+=(l-t)*_,t=l,s=0;s<y;++s)if((v=e[s])<t&&++n>u&&C("overflow"),v==t){for(a=n,h=c;!(a<(m=h<=r?p:h>=r+d?d:h-r));h+=c)V=a-m,x=c-m,S.push(b(M(m+V%x,0))),a=R(V/x);S.push(b(M(a,0))),r=L(n,_,i==o),n=0,++i}++n,++t}return S.join("")}if(l={version:"1.3.2",ucs2:{decode:P,encode:T},decode:I,encode:O,toASCII:function(e){return k(e,function(e){return y.test(e)?"xn--"+O(e):e})},toUnicode:function(e){return k(e,function(e){return v.test(e)?I(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return l});else if(o&&r)if(t.exports==o)r.exports=l;else for(a in l)l.hasOwnProperty(a)&&(o[a]=l[a]);else i.punycode=l}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],454:[function(e,t,n){(function(t){(function(){var i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v,y,_,x,V,R,b,C,S;({MakeRoutes:s,root:V,constant:c,identifier:d,number:f,uuid:C,makeConstructor:m}=e("./lib/URLTree")),a=e("underscore"),S=function(e){return c(`${e}Votes`).$({userID:d(`${e}Vote`)})},R=function(e){return c(`${e}SubsList`).$({userID:d(`${e}Subs`)})},u=function(e){return c(`${e}CommentList`).$({cID:f(`${e}Comment`).$({votes:S(`${e}Comment`),comments:c(`${e}ReplyList`),react:y(`${e}Comment`),reacted:v(`${e}Comment`)})})},w=function(e){return c(`${e}PendingList`)},p=function(e){return c(`${e}History`)},y=function(e){return c(`${e}React`).$({type:d(`${e}Reaction`)})},v=function(e){return c(`${e}Reacted`).$({type:d(`${e}ReactedType`)})},h=m(function(e){return{key:e,regex:"(?:~|%7E).*",make:function(e){return e}}}),g={allowRelativeURLs:!0},o={users:c("UserList").$({userID:d("User").$({recommendations:c("UserRecs"),notifications:c("Notifications"),karma:c("UserKarma"),topics:c("UserTopics"),viewpoints:c("UserViewpoints"),contributions:c("UserContributions"),votes:c("UserVotes"),subscriptions:c("UserSubs"),comments:c("UserComments"),pending:c("UserPending"),edit:c("UserEdit"),setpw:c("UserSetPassword"),following:c("UserFollowing"),followers:c("UserFollowers"),activity:c("UserActivity"),tagFilter:c("UserTagFilter"),meta:c("User_TVotesList").$({tID:f("User_TVotes")})})}),userInfo:c("UserInfo").$({following:c("UserInfo_Following"),meta:c("UserInfo_TVotesList").$({tID:f("UserInfo_TVotes")}),karma:c("UserInfo_Karma").$({tID:f("UserInfo_TKarma").$({vpID:f("UserInfo_VPKarma")})})}),mgmt:c("PWGetToken").$({userID:d("PWReset")}),auth:c("Auth"),geolocation:c("Geolocation"),login:c("Login").$({success:c("LoginSuccess"),failure:c("LoginFailure"),email:c("LoginEmail"),facebook:c("LoginFB").$({callback:c("LoginFBCallback")}),twitter:c("LoginTW").$({callback:c("LoginTWCallback")}),google:c("LoginGG").$({callback:c("LoginGGCallback")})}),logout:c("Logout")},r=V("Index").$(a.extend({},o,{"sitemap.xml":c("SitemapXML"),metrics:c("Metrics"),activity:c("Activity"),events:c("EventList"),sitemap:c("Sitemap").$({options:c("SitemapMasterOptions"),versus:c("SitemapMasterCompares"),questions:c("SitemapQuestions"),alternatives:c("SitemapMasterAlternatives")}),feed:c("Feed"),auto_tags:c("AutoTagFilter"),tags:c("TagList").$({tName:d("TagFilter").$({info:c("Tag")})}),options:c("MOptionList").$({"sitemap.xml":c("SitemapMasterOptionsXML"),"sitemap-alternatives.xml":c("SitemapMasterAlternativesXML"),mvpID:f("MOptionShort").$({alternatives:c("AlternativesShort").$({urlHint:h("Alternatives")}),urlHint:h("MOption")})}),versus:c("ComparisonList").$({"sitemap.xml":c("SitemapMasterComparesXML"),mvpID:f("ComparisonPartial").$({mvpID:f("ComparisonShort").$({urlHint:h("Comparison")})})}),improve:c("Improve"),topics:c("TopicList").$({"sitemap.xml":c("SitemapQuestionsXML"),random:c("TopicRandom"),tID:f("TopicShort").$({legacy:c("TopicLegacy"),activity:c("TopicActivity"),comments:u("T"),votes:c("TVotesList"),react:y("T"),reacted:v("T"),pending:w("T"),history:p("T"),subscriptions:R("T"),promote:c("TopicPromote").$({userID:d("TopicPromoteUser")}),urlHint:h("Topic"),compare:c("CompareShortRedirect").$({urlHint:h("CompareRedirect")}),versus:c("CompareShort").$({urlHint:h("Compare")}),viewpoints:c("ViewpointList").$({vpID:f("ViewpointShort").$({activity:c("ViewpointActivity"),comments:u("VP"),react:y("VP"),reacted:v("VP"),pending:w("VP"),history:p("VP"),votes:c("VPVotes").$({userID:d("VPVote").$({react:y("Rec"),reacted:v("Rec"),comments:u("Rec")})}),urlHint:h("Viewpoint"),manage:c("Manage"),sections:c("SectionList").$({spID:f("Section").$({activity:c("SectionActivity"),comments:u("SP"),react:y("SP"),reacted:v("SP"),votes:S("SP"),pending:w("SP"),history:p("SP"),urlHint:h("SectionWithHint")})})})})}),create:c("CreateTopic")}),related:c("Related"),search:c("Search"),stats:c("Stats"),help:c("Help"),business:c("BusinessGetToken").$({userID:d("BusinessClaim")}),maintenance:c("Maintenance"),test:c("TestPage"),ads_test:c("AdsTestPage")})),i=V("AIHome").$(a.extend({},o,{extension:c("AIWelcome").$({welcome:c("AIWelcome"),uninstall:c("AIUninstall")}),plugin:c("AIPlugin").$({category:c("AIPluginCategory"),details:c("AIPluginDetails"),mainPopup:c("AIPluginMainPopup"),parent_category:c("AIPluginParentCategory"),product:c("AIPluginProduct")}),parent:c("AIParent").$({cName:d("AIParentCategory")}),cName:d("AICategory")})),null!=(_=t.env.HOSTNAME)||env.HOSTNAME,b=null!=(x=t.env.USE_AI_URLS)?x:env.USE_AI_URLS,l=s(g,"true"===b?i:r),n.URLs=l.regex,n.makeKey=function(e,t,n){var i,o,r,s;return i=e,i+=t?`-${t.join("-")}`:"",console.log(i),i+=(r=function(){var e;for(o in e=[],n)s=n[o],e.push(`${o}=${s}`);return e}().join("-"))?`-${r}`:"",console.log(i),i},n.makeURL=function(e,t){if(null==l.make[e])throw new Error(`No URL for ${e}`);return l.make[e](...t)}}).call(this)}).call(this,e("_process"))},{"./lib/URLTree":455,_process:426,underscore:448}],455:[function(e,t,n){(function(){var t,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w;w=function(e,t){var n;return n=function(e,n){return t(n)?e.concat([n]):e},e.reduce(n,[])},h=function(e){return null!=e},r=function(e,t){var n,i;for(n in t)i=t[n],e[n]=i.value,r(e,i.children);return e},l=function(e,t,n){var i,o,r,s,a;for(i in o={},t)o[(s=n(r={key:i,value:(a=t[i]).value},e)).key]={value:s.value,children:l(e.concat(r),a.children,n)};return o},i={map:s=function(e,t){return l([],e,t)},flatten:o=function(e){return r({},e)},node:a=function(e){return{value:e,children:null,$:function(t){return{value:e,children:t}}}},makeValue:function(e){return u(a,e)},flatMap:(u=function(e,t){return function(...n){return e(t(...n))}})(o,s)},n.makeConstructor=m=function(e){return i.makeValue(function(t){return{routeName:t,construct:e}})},n.root=i.makeValue(function(e){return{routeName:e,construct:function(){return{key:e.toLowerCase(),regex:"",make:""}}}}),n.constant=m(function(e){return{key:e,regex:e,make:e}}),n.identifier=m(function(e){return{key:e,regex:"([0-9A-Za-z-_.:]+)",make:function(e){return e}}}),n.number=m(function(e){return{key:e,regex:"([0-9]+)",make:function(e){return e}}}),n.uuid=m(function(e){return{key:e,regex:"([0-9A-Fa-f-]+)",make:function(e){return e}}}),p=function(e){return e.value.construct(e.key)},d=function(e,t){return t.concat(e).map(p)},g=function(e,t){var n;return n=!0===e.allowRelativeURLs?"/?"+t.slice(1).join("/"):t.join("/"),new RegExp("^"+n+"/?$")},c=function(e){return function(t,n){var i;return i=d(t,n).map(function(e){return e.regex}),({}={key:t.value.routeName,value:g(e,i)})}},f=function(e,t){return{key:e.value.routeName,value:function(...n){var i,o,r;return i=function(e,t){return"function"==typeof e.make?e.make(n.shift()):e.make},r=d(e,t).map(i),""===(o=w(r,h).join("/"))?"/":o}}},n.MakeRoutes=function(e,t){var n;return n={root:t},{regex:i.flatMap(n,c(e)),make:i.flatMap(n,f)}},t=e("./either"),n.getRoute=function(e,n){var i,o,r;for(r in e)if(i=e[r],null!=(o=n.match(i)))return t.set({route:r,params:o.slice(1)});return t.fail()}}).call(this)},{"./either":456}],456:[function(e,t,n){(function(){var n,i,o,r,s,l,a,u,c,p,d,h,m,f,g,w,v;r=e("underscore"),f=e("./monadInstance"),m=function(e){return"function"==typeof e},d=function(e){return e},a=function(e,t){return function(n){return null!=e?n.Fail(e):n.Success(t)}},o=function(e){return function(t){return t.Success(e)}},i=function(e){return function(t){return t.Fail(e)}},v=(p=function(e){return function(t){return t(e)}})({Fail:function(e){return[!0,e]},Success:function(e){return[!1,e]}}),h=function(e){return e[0]},c=function(e){return e[1]},u=function(e,t){if(!m(e))throw new Error("First parameter of fmap must be an Either");if(!m(t))throw new Error("Second parameter of fmap must be a function");return e({Fail:i,Success:function(e){return o(t(e))}})},s=function(e,t){var n,s;return s=e.map(v),null!=(n=r.find(s,h))?i(c(n)):o(t(...s.map(c)))},g=function(e,t){return function(n){var r;return e(n)?i(null!=(r=null!=t?t.with():void 0)?r:"Failed Predicate Check"):o(n)}},w=function(e,t){return l(e,{Success:d,Fail:function(){var e;return null!=(e=null!=t?t.onFail():void 0)?e:void 0}})},n={set:o,fail:i,create:a,fmap:u,apply:s,bind:function(e,t){if(!m(e))throw new Error("First parameter of bind must be an Either");if(!m(t))throw new Error("Second parameter of bind must be a function");return e({Fail:i,Success:t})},check:l=function(e,t){return e(t)},handle:p,compose:function({Fail:e,Success:t},n){return{Fail:function(t){return n.Fail((null!=e?e:d)(t))},Success:function(e){return n.Success((null!=t?t:d)(e))}}},always:function(e){return{Fail:e,Success:e}},defMap:function(e,t){return null!=e?t(e):void 0},reject:g,run:w},t.exports=f(n)}).call(this)},{"./monadInstance":458,underscore:448}],457:[function(e,t,n){(function(){var n,i,o,r,s,l,a,u,c,p,d,h,m,f;u=function(e){return e},r=function(e){return function(t){return e(t),t}},i=function(e,...t){return e.bind(null,...t)},h=function(e){return function(t){return e(...t)}},f=function(e){return function(...t){return e(t)}},l=function(e){return function(t){return function(n){return e(n)(t)}}},s=function(e,t){return function(n){return[e(n),t(n)]}},n=function(e){return function(t){return t(e)}},m=function(e){return function(t){return e(...t)}},a=function(e){return function(t,n){return e(n,t)}},c=(p=function(e){return function(...t){return e.apply(null,t.reverse())}})(e("underscore").compose),o=function(e){return function(t){return function(n){return e(n)(t(n))}}},d=function(e){var t,n;return n=null,t=!1,function(){return t?n:(n=e(),t=!0,n)}},t.exports={id:u,exec:r,apply:n,applyArgs:i,tupify:h,untupify:f,flip:l,flipArgs:a,reverseCall:p,pipeline:c,fanout:s,uncurry:m,dupApply:o,thunk:d}}).call(this)},{underscore:448}],458:[function(e,t,n){(function(){var n,i,o;i=e("underscore"),e("./predicate"),n=e("./func"),o=function(e){var t,i,o,r,s;return{compose:t=function(t,n){return function(...i){return e.bind(n(...i),t)}},lift:function(t,n){return e.fmap(n,t)},waterfall:function(t){return t.reduce(e.bind)},composeAll:i=function(n){return 0===n.length?e.set:n.reduce(function(e,n){return t(n,e)})},pass:o=function(t){return function(...n){return e.bind(t(...n),function(){return e.set(...n)})}},execute:function(t){return function(n){return e.fmap(e.set(),function(){return t(n),n})}},series:s=function(e){return i(e.map(function(e){return function(){return e}}))()},forEach:function(t){return function(n){var i,o;return i=0,o=function(n){return e.fmap(t(n,i),function(e){return i+=1,e})},s(n.map(o))}},ifInput:function(t,n){return function(i){var o;return o=null!=n.else?n.else:e.set,t(i)?n.then(i):o(i)}},reject:r=function(t,n){return function(i){var o;return t(i)?e.fail(null!=(o=null!=n?n.with(i):void 0)?o:new Error("Failed Predicate Check")):e.set(i)}},rejectM:function(t,i){return o(function(o){return e.bind(t(o),r(n.id,{with:function(){return null!=i&&"function"==typeof i.with?i.with(o):void 0}}))})}}},t.exports=function(e){return i.extend({},o(e),e)}}).call(this)},{"./func":457,"./predicate":459,underscore:448}],459:[function(e,t,n){(function(){var e,n,i,o,r,s;e=function(...e){return function(t){var n,i;for(n=0,i=e.length;n<i;n++)if(!(0,e[n])(t))return!1;return!0}},n=function(...e){return function(t){var n,i;for(n=0,i=e.length;n<i;n++)if((0,e[n])(t))return!0;return!1}},r=function(...e){return function(t){var n,i;for(n=0,i=e.length;n<i;n++)if((0,e[n])(t))return!1;return!0}},s=function(e){return function(t){return!e(t)}},i=function(e){return null!=e},o=function(e){return function(t){return e===t}},t.exports={allOf:e,anyOf:n,noneOf:r,is:o,not:s,exists:i}}).call(this)},{}],460:[function(e,t,n){(function(){t.exports={Index:function(){return{name:"front-page",view:"FrontPageView"}},TagFilter:function(){return{name:"tag-page",view:"TagPageView"}},Search:function(){return{name:"search-page",view:"SearchPageView"}},Topic:function(e){return{name:"summary-page",view:"SummaryPageView"}},TopicActivity:function(){return{name:"post-activity-page",view:"PostActivityTopicPageView"}},Viewpoint:function(){return{name:"option-page",view:"OptionPageView"}},ViewpointActivity:function(){return{name:"post-activity-page",view:"PostActivityPageView"}},SectionActivity:function(){return{name:"post-activity-page",view:"PostActivityPageView"}},AIHome:function(){return{name:"ai-home-page",view:"AIHomePageView"}},AIUninstall:function(){return{name:"ai-uninstall-page",view:"AIUninstallPageView"}},AIWelcome:function(){return{name:"ai-welcome-page",view:"AIWelcomePageView"}},AICategory:function(){return{name:"ai-category-page",view:"AICategoryPageView"}},AIParentCategory:function(){return{name:"ai-parent-category-page",view:"AIParentCategoryPageView"}},AIPluginCategory:function(){return{name:"ai-plugin-category-page",view:"AIPluginCategoryPageView"}},AIPluginDetails:function(){return{name:"ai-plugin-details-page",view:"AIPluginDetailsPageView"}},AIPluginMainPopup:function(){return{name:"ai-plugin-main-popup-page",view:"AIPluginMainPopupPageView"}},AIPluginParentCategory:function(){return{name:"ai-plugin-parent-category-page",view:"AIPluginParentCategoryPageView"}},AIPluginProduct:function(){return{name:"ai-plugin-product-page",view:"AIPluginProductPageView"}},Compare:function(){return{name:"compare-page",view:"ComparePageView"}},MOption:function(){return{name:"master-option-page",view:"MasterOptionPageView"}},Comparison:function(){return{name:"master-compare-page",view:"MasterComparePageView"}},Alternatives:function(){return{name:"master-alternatives-page",view:"MasterAlternativesPageView"}},TCommentList:function(){return{name:"comments-page",view:"CommentsTopicPageView"}},VPCommentList:function(){return{name:"comments-page",view:"CommentsPageView"}},SPCommentList:function(){return{name:"comments-page",view:"CommentsPageView"}},TPendingList:function(){return{name:"update-question-page",view:"UpdateQuestionPageView"}},THistory:function(){return{name:"history-page",view:"HistoryTopicPageView"}},VPHistory:function(){return{name:"history-page",view:"HistoryPageView"}},SPHistory:function(){return{name:"history-page",view:"HistoryPageView"}},User:function(){return{name:"profile-recs-page",view:"ProfileRecsPageView"}},UserVotes:function(){return{name:"profile-recs-page",view:"ProfileRecsPageView"}},UserTopics:function(){return{name:"profile-asked-page",view:"ProfileAskedPageView"}},UserSubs:function(){return{name:"profile-subscribed-page",view:"ProfileSubscribedPageView"}},UserActivity:function(){return{name:"profile-activity-page",view:"ProfileActivityPageView"}},UserKarma:function(){return{name:"profile-karma-page",view:"ProfileKarmaPageView"}},UserEdit:function(){return{name:"edit-profile-page",view:"EditProfilePageView"}},Notifications:function(){return{name:"notifications-page",view:"NotificationsPageView"}},Activity:function(){return{name:"activity-page",view:"ActivityPageView"}},PWReset:function(){return{name:"password-reset-page",view:"PasswordResetPageView"}},BusinessClaim:function(){return{name:"claim-business-account-page",view:"ClaimBusinessAccountPageView"}},CreateTopic:function(){return{name:"add-question-page",view:"AddQuestionPageView"}},Help:function(){return{name:"help-page",view:"HelpPageView"}},Sitemap:function(){return{name:"sitemap-page",view:"SitemapPageView"}},SitemapMasterOptions:function(){return{name:"sitemap-master-option-list-page",view:"SitemapMasterOptionListPageView"}},SitemapMasterCompares:function(){return{name:"sitemap-master-compare-list-page",view:"SitemapMasterCompareListPageView"}},SitemapQuestions:function(){return{name:"sitemap-question-list-page",view:"SitemapQuestionListPageView"}},SitemapMasterAlternatives:function(){return{name:"sitemap-master-alternatives-list-page",view:"SitemapMasterAlternativesListPageView"}},Logs:function(){return{name:"logs-page",view:"LogsPageView"}},LogsTopic:function(){return{name:"logs-page",view:"LogsPageView"}},LogsTopicList:function(){return{name:"logs-page",view:"LogsPageView"}},LogsViewpoint:function(){return{name:"logs-page",view:"LogsPageView"}},LogsUser:function(){return{name:"logs-page",view:"LogsPageView"}},LogsUserUUID:function(){return{name:"logs-page",view:"LogsPageView"}},Error:function(){return{name:"error-page",view:"ErrorPageView"}},NotFound:function(){return{name:"not-found-page",view:"NotFoundPageView"}},Maintenance:function(){return{name:"maintenance-page",view:"MaintenancePageView"}},AIPluginError:function(){return{name:"ai-plugin-error-page",view:"AIPluginErrorPageView"}},AIPluginNotFound:function(){return{name:"ai-plugin-not-found-page",view:"AIPluginNotFoundPageView"}},AIPluginMaintenance:function(){return{name:"ai-plugin-maintenance-page",view:"AIPluginMaintenancePageView"}},AdsTestPage:function(){return{name:"ads-test-page",view:"AdsTestPageView"}}}}).call(this)},{}],461:[function(e,t,n){(function(){var n,i,o,r,s,l,a=[].indexOf;l=e("sub"),r=l.window.document,i=l.window.Node,n=l.window.Element,o=l.window.Text,(s=function(e){return new s.fn.init(e)}).fn=s.prototype={init:function(e){var t,n,o,r,a,u,c;if("string"==typeof e){for(r=o=0,u=(n=l.parser(e)).length;o<u;r=++o)t=n[r],this[r]=t;this.length=n.length}else if(e instanceof Array||e instanceof s){for(r=a=0,c=e.length;a<c;r=++a)t=e[r],this[r]=t;this.length=e.length}else e instanceof i&&(this[0]=e,this.length=1);return this},text:function(e){var t,n,i,l,a,u,c,p,d;if(null!=e){for(this,i=0,u=this.length;i<u;i++){for(n=this[i];null!=n.firstChild;)n.removeChild(n.firstChild);n.insertBefore(r.createTextNode(e))}return this}for(e="",this,l=0,c=this.length;l<c;l++)for(a=0,p=(d=(n=this[l]).childNodes).length;a<p;a++)e+=(t=d[a])instanceof o?t.data:s(t).text();return e},first:function(){return s(this[0])},last:function(){return s(this[this.length-1])},eq:function(e){return s(this[e])},get:function(e){var t,n,i,o;if(null!=e)return this[e];for(this,o=[],n=0,i=this.length;n<i;n++)t=this[n],o.push(t);return o},attr:function(e,t){var i,o,r,s,l,a;if(null!=t){for(this,o=0,l=this.length;o<l;o++)(i=this[o])instanceof n&&i.setAttribute(e,t);return this}if(Object.prototype.isPrototypeOf(e)){for(this,r=0,a=this.length;r<a;r++)if((i=this[r])instanceof n)for(s in e)t=e[s],i.setAttribute(s,t);return this}if(this[0]instanceof n)return this[0].getAttribute(e)},removeAttr:function(e){var t,i,o,r;for(this,r=[],i=0,o=this.length;i<o;i++)(t=this[i])instanceof n&&r.push(t.removeAttribute(e));return r},hasClass:function(e){var t;return-1!==(null!=(t=this.attr("class"))?t.split(" ").filter(function(e){return""!==e}).indexOf(e):void 0)},addClass:function(e){var t,i,o,r,s,l,u,c;for(o=0,s=(c=e.split(" ")).length;o<s;o++)for(u=c[o],this,r=0,l=this.length;r<l;r++)(i=this[r])instanceof n&&!((t=i.getAttribute("class"))&&a.call(t.split(" "),u)>=0)&&i.setAttribute("class",`${t} ${u}`);return this},removeClass:function(e){var t,n,i;if(~(n=null!=(i=null!=(t=this.attr("class"))?t.split(" ").filter(function(e){return""!==e}).indexOf(e):void 0)?i:-1))return t.splice(n,1),this.attr("class",t)},find:function(e){var t,i,o,r;for(r=[],this,i=0,o=this.length;i<o;i++)(t=this[i])instanceof n&&r.push(...t.querySelectorAll(e));return s(r)},prop:function(e){return this[0][e]},on:function(){return this},off:function(){return this},bind:function(){return this},unbind:function(){return this},delegate:function(){return this},undelegate:function(){return this},focus:function(){return this},before:function(e){var t,n,i,o,r,l,a;for(e=s(e),o=!1,this,i=0,l=this.length;i<l;i++)if(null!=(n=this[i]).parentElement)for(r=0,a=e.length;r<a;r++)t=e[r],o&&(t=t.cloneNode(!0)),n.parentElement.insertBefore(t,n),o=!0;return this},after:function(e){var t,n,i,o,r,l,a;for(e=s(e),o=!1,this,i=0,l=this.length;i<l;i++)if(null!=(n=this[i]).parentElement)for(r=0,a=e.length;r<a;r++)t=e[r],o&&(t=t.cloneNode(!0)),n.parentElement.insertBefore(t),o=!0;return this},remove:function(){var e,t,n;for(this,t=0,n=this.length;t<n;t++)null!=(e=this[t]).parentElement&&e.parentElement.removeChild(e);return this},replaceWith:function(e){var t,n,i,o,r,l,a;for(e=s(e),o=!1,this,i=0,l=this.length;i<l;i++)if(null!=(n=this[i]).parentElement){for(r=0,a=e.length;r<a;r++)t=e[r],o&&(t=t.cloneNode(!0)),n.parentElement.insertBefore(t,n),o=!0;n.parentElement.removeChild(n)}return this},height:function(){},innerHeight:function(){},outerHeight:function(){}},s.fn.init.prototype=s.fn,t.exports=s}).call(this)},{sub:425}]},{},[82]);
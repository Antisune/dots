(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{11:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(15);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.a.mixinEvents(this)}var t,n,r;return t=e,(n=[{key:"_dispatchEvent",value:function(e,t,n){var i=this;if("string"==typeof e)i.emit(e,{type:e,target:n||i,data:t});else if("object"===a(e)&&e.hasOwnProperty("type")){var o=e;i.emit(o.type,{target:o.target,type:o.type,data:o.data})}}},{key:"addOnceEventListener",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"addEventListener",value:function(e,t,n){this.on(e,t,n)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"mixin",value:function(e){var t;i.a.mixinEvents(e),(t=void 0!==e.prototype?e.prototype:e)._dispatchEvent=function(t,n,i){if("string"==typeof t)e.emit(t,{type:t,target:i||e,data:n});else if("object"===a(t)&&t.hasOwnProperty("type")){var o=t;e.emit(o.type,{type:o.type,target:o.target,data:o.data})}},t.addOnceEventListener=function(t,n,i){e.on(t,n,i,!0)},t.addEventListener=function(t,n,i){e.on(t,n,i)},t.removeEventListener=function(t,n){e.off(t,n)},t.removeAllListeners=function(t){e.off(t)}}}])&&o(t.prototype,n),r&&o(t,r),e}()},15:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(){var e=1;if(!Object.create)var t=function(){};var n=Array.prototype.slice,a={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){a.eventHandlers[e.guid][e.type]||(a.eventHandlers[e.guid][e.type]=[]),a.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type,once:e.once})},addEventHandler:function(e,t,n,i){var o,r={};for(var d in"string"==typeof e?(o=n||!1,r[e]=t):(o=t||!1,r=e),r)for(var l=r[d],s=d.split(" "),u=0,c=s.length;u<c;u++){var w=s[u];a.addEvent.call(this,{guid:this._guid||this._.guid,handler:l,scope:o,type:w,once:i})}},addGuid:function(t,n){t._guid&&!n||(t._guid=e++,a.attributes[t._guid]={},a.eventHandlers[t._guid]={})},attr:function(e){return a.attributes[e]},clone:function(e){var t=a.typeOf(e);return"object"===t?a.extend({},e):"array"===t?e.slice(0):void 0},create:function(e){return Object.create?Object.create(e):(t.prototype=e,new t)},emitEvents:function(e,t,i,o){i=i||!1,o=o||this._guid;for(var r=n.call(a.eventHandlers[o][e]),d=0,l=r.length;d<l;d++){var s=a.extend({},r[d]),u=s.scope?s.scope:this;i&&(s.type=i),s.scope=u,s.handler.call(s.scope,t,s),s.once&&a.removeEventHandler.call(this,s.type,s.handler)}},extend:function(){for(var e=n.call(arguments),t=e.shift(),i=0,a=e.length;i<a;i++){var o=e[i];for(var r in o)t[r]=o[r]}return t},extendThis:function(){var e=n.call(arguments);return e.unshift(this),a.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},removeAttribute:function(e,t){t=t||!1;for(var n=a.trim(e).split(" "),i={},o=0,r=n.length;o<r;o++){var d=a.trim(n[o]);d&&(i.key=d,i.oldValue=a.attr(this._guid)[d],delete a.attr(this._guid)[d],t||(this.emit("change",d),this.emit("change:"+d),this.emit("mutate",i),this.emit("mutate:"+d,i),this.emit("remove",d),this.emit("remove:"+d)),delete i.oldValue)}},removeEventHandler:function(e,t){var n=a.eventHandlers[this._guid];if(e&&t){if(!(n=n[e]))return;for(var i,o=0,r=n.length;o<r;o++)(i=n[o].handler)&&i===t&&(n.splice(o--,1),r--)}else e?delete n[e]:a.eventHandlers[this._guid]={}},setAttribute:function(e,t,n){n=n||!1;var i=this.has(e),o=a.attr(this._guid)[e];if(t!==o&&(a.attr(this._guid)[e]=t,!n)){this.emit("change",e),this.emit("change:"+e,t);var r={key:e,newValue:t,oldValue:o||null};this.emit("mutate",r),this.emit("mutate:"+e,r);var d=i?"update":"create";this.emit(d,e),this.emit(d+":"+e,t)}},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return null==e?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,n){var i=this.get(e),o=a.typeOf(i);"object"!==o&&"array"!==o||(i=a.clone(i));var r=t.call(this,i,e);a.setAttribute.call(this,e,r,n||!1)}},o={emit:function(e,t){t=void 0===t?null:t;for(var n=e.split(" "),i=0,o=n.length;i<o;i++){var r=n[i];a.eventHandlers[-1].all&&a.emitEvents.call(this,"all",t,r,-1),a.eventHandlers[-1][r]&&a.emitEvents.call(this,r,t,r,-1),"number"==typeof this._guid&&(a.eventHandlers[this._guid].all&&a.emitEvents.call(this,"all",t,r),a.eventHandlers[this._guid][r]&&a.emitEvents.call(this,r,t))}},off:function(){a.removeEventHandler.apply(this,arguments)},on:function(){a.addEventHandler.apply(this,arguments)}};a.Module=function(){},a.Module.prototype={each:function(e,t){var n=a.attr(this._guid);for(var i in n){var o=n[i];e.call(t||this,o,i)}},extend:function(){return a.extendThis.apply(this,arguments)},filter:function(e){var t=[],n=a.attr(this._guid);for(var i in n)e.call(this,n[i],i)&&t.push(n[i]);return t},get:function(e){if("string"==typeof e){if(arguments.length>1){for(var t={},n=0,i=arguments.length;n<i;n++){var o=arguments[n];t[o]=this.get(o)}return t}return this.has(e)?a.attr(this._guid)[e]:null}if("function"==typeof e){var r=this.filter(e);return r.length?r[0]:null}},getAll:function(){return a.clone(a.attr(this._guid))},getAllAsArray:function(){var e=[],t=a.attr(this._guid);for(var n in t){var i=t[n];"object"!==a.typeOf(i)||i.id||(i.id=n),e.push(i)}return e},has:function(e){return void 0!==a.attr(this._guid)[e]},map:function(e,t){var n=[];return this.each(function(i,a){n.push(e.call(t||this,i,a))},t||this),n},push:function(e,t){if("array"===a.typeOf(e))for(var n=0,i=e.length;n<i;n++)a.setAttribute.call(this,a.makeUuid(),e[n],t||!1);else a.setAttribute.call(this,a.makeUuid(),e,t||!1);return this},remove:function(e,t){return void 0===e?(a.attributes[this._guid]={},this.emit("change remove")):"function"==typeof e?this.each(function(n,i){e(n)&&a.removeAttribute.call(this,i,t)}):a.removeAttribute.call(this,e,t||!1),this},set:function(e,t,n){if("object"===i(e))for(var o in e)a.setAttribute.call(this,o,e[o],t||!1);else a.setAttribute.call(this,e,t,n||!1);return this},size:function(){var e=0,t=a.attr(this._guid);for(var n in t)e++;return e},update:function(e,t,n){return"string"==typeof e?a.updateAttribute.call(this,e,t,n||!1):"function"==typeof e&&this.each(function(t,n){a.updateAttribute.call(this,n,e)}),this}};var r={_:a,extend:function(){return a.extendThis.apply(a.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{},a.addGuid(e),a.extend(e,o)},on:function(){a.addEventHandler.apply(this,arguments)},version:"0.8.1"};return window.Stapes=r,r}()},16:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(11),a=n(2),o=n(0),r=n(3);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=s(t).call(this))||"object"!==d(i)&&"function"!=typeof i?u(n):i).video=null,e._poster=null,e._pastFirstQuartile=!1,e._pastMidpoint=!1,e._pastThirdQuartile=!1,e._bufferedTime=0,e._source=null,e.fastSeekEnabled=!1,e._isEnabled=!0,e._isRemoved=!1,e.type="native",e.videoPlayCount=0,e.cors=null,e.containerId=null,e.videoId=null,e.sourceChanged=!1,e._isAd=!1,e.buffered=0,e.ended=!1,e.paused=!1,e.muted=!0,e.fullscreen=!1,e.videoWidth=NaN,e.videoHeight=NaN,e.metadata=null,e.currentTime=0,e.duration=0,e.startTime=0,e.width=0,e.height=0,e.playing=!1,e.parent=null,e.canplay=!1,e.canplaythrough=!1,e.volume=1,e.loop=null,e.stopped=!1,e.hasStarted=!1,e.qualityChanged=!1,e.seekTime=null,e.adsCuepoints=[],e.previousCuepointIndex=-1,e.currentQuality=null,e.relatedVideos=[],e.autoplay=!1,e.waiting=!1,e._stalled=!1,e._originalSource=null,e._onLoadStart=e._onLoadStart.bind(u(e)),e._onLoadedMetadata=e._onLoadedMetadata.bind(u(e)),e._onLoadedData=e._onLoadedData.bind(u(e)),e._onDurationChanged=e._onDurationChanged.bind(u(e)),e._onPlay=e._onPlay.bind(u(e)),e._onPause=e._onPause.bind(u(e)),e._onSeeked=e._onSeeked.bind(u(e)),e._onTimeUpdate=e._onTimeUpdate.bind(u(e)),e._onWaiting=e._onWaiting.bind(u(e)),e._onPlaying=e._onPlaying.bind(u(e)),e._onProgress=e._onProgress.bind(u(e)),e._onCanPlay=e._onCanPlay.bind(u(e)),e._onCanPlayThrough=e._onCanPlayThrough.bind(u(e)),e._onVolumeChange=e._onVolumeChange.bind(u(e)),e._onEnded=e._onEnded.bind(u(e)),e._onEmptied=e._onEmptied.bind(u(e)),e._onStalled=e._onStalled.bind(u(e)),e._onError=e._onError.bind(u(e)),e._onAbort=e._onAbort.bind(u(e)),e}var w,h,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i["a"]),w=t,(h=[{key:"_init",value:function(e,t,n){if(this._isAd=n,this.containerId=e,this.videoId=t,this.video=document.getElementById(t),this.parent=this.video.parentNode,this._source=this.video.src,this.startTime=this.video.startTime||0,this.width=this.video.clientWidth,this.height=this.video.clientHeight,this.volume=this.video.getAttribute("volume")||1,this.muted=this.video.muted,this.videoHeight=this.video.clientHeight,this.videoWidth=this.video.clientWidth,!n){if(this.loop=window.CurrentVideoConfig.settings.loop,this._poster=window.CurrentVideoConfig.settings.poster,!this._poster){var i=window.CurrentVideoConfig.content.posterVersions;i?window.client.browser.chrome&&i.webp?this._poster=i.webp:i.optimized&&(this._poster=i.optimized):window.CurrentVideoConfig&&window.CurrentVideoConfig.content?this._poster=window.CurrentVideoConfig.content.poster:this._poster=this.video.poster}this._poster=Object(o.s)(this._poster),a.debug("[Bolt4 VideoBase] - poster",this._poster),this.currentQuality=window.CurrentVideoConfig.settings.defaultHd?"hd":"sd",this.onVideoConfigChanged()}}},{key:"isAd",value:function(e){a.debug("[Bolt4 VideoBase] - isAd() ABSTRACT METHOD")}},{key:"preload",value:function(){var e=this,t=document.body.getAttribute("data-default-src");e._isAd||null!==e._source&&""!==e._source||e.setSource(t),a.debug("[Bolt4 VideoBase] - ",e.containerId,"preload source = ",e._source,"autoplay",e.autoplay),e._isEnabled||e.enable(!0),e.hls&&e.hls.destroy();e._source.indexOf(".m3u8")>-1&&!window.client.nativeHLS?(e.hlsLoading=!0,n.e(10).then(n.t.bind(null,35,7)).then(function(t){var n=t.default;e.hls=new n,e.hls.ErrorTypes=n.ErrorTypes,e.hls.ErrorDetails=n.ErrorDetails,e.hls.DefaultConfig=n.DefaultConfig,e.hls.Events=n.Events,e.hls.attachMedia(e.video),e.hls.on(e.hls.Events.MANIFEST_PARSED,e._onHLSManifestParsed.bind(e)),e.hls.loadSource(e._source)})):(e.video.src=e._source,window.window.client.browser.firefox>0&&e.video.setAttribute("preload","metadata"),e.video.load())}},{key:"_playVideo",value:function(){var e=this,t=e.video.play();void 0!==t&&t.then(function(){a.info("[Bolt4 VideoBase] - Autoplay worked, playing video")}).catch(function(t){e.pause(),a.warn("[Bolt4 VideoBase] - Error in video.play() promise: ",t)})}},{key:"_onHLSManifestParsed",value:function(e,t){a.info("[Bolt4 VideoBase] - HLS manifest loaded, found ".concat(t.levels.length," quality level")),window.BoltAdManager.sequentialPrerollAdRequested||this.play()}},{key:"play",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,this.videoId,"play()",this._isEnabled,this.video.src,this.video.currentSrc),this.show(!0),this.ended?this.replay():(this._isEnabled||this.enable(!0),this._playVideo())}},{key:"replay",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"replay",this.video.src),this.ended=!1,this.fastSeekEnabled?(a.debug("[Bolt4 VideoBase] ",this.containerId,"pseudostream replay"),a.debug("[Bolt4 VideoBase] ",this.containerId,"startTime is ",this.startTime),this.startTime>0?(this.autoplay=!0,this.seek(0)):(this.stop(),this.play())):(this.autoplay=!0,this.seek(0))}},{key:"pause",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"pause",this.currentTime),this.paused=!0,this.video.pause()}},{key:"resume",value:function(){this.playing||(a.debug("[Bolt4 VideoBase] ",this.containerId,"resume",this.currentTime,this.video.currentTime),this.show(!0),this._playVideo())}},{key:"stop",value:function(){this.stopped||(a.debug("[Bolt4 VideoBase] ",this.containerId,"STOP",this.video.src),this.stopped=!0,this.video.pause(),this.video.currentTime=0)}},{key:"seek",value:function(e){var t=e/this.duration*100;this._pastThirdQuartile=t>=75,this._pastMidpoint=t>=50||this._pastThirdQuartile,this._pastFirstQuartile=t>=25||this._pastMidpoint,this._pastFirstQuartile&&a.info("[Bolt4 VideoBase] - seeking past first quartile"),this._pastMidpoint&&a.info("[Bolt4 VideoBase] - seeking past midpoint"),this._pastThirdQuartile&&a.info("[Bolt4 VideoBase] - seeking past third quartile")}},{key:"mute",value:function(e){console.warn("[Bolt4 VideoBase] - ABSTRACT METHOD NO OP")}},{key:"setVolume",value:function(e){console.warn("[Bolt4 VideoBase] - ABSTRACT METHOD NO OP")}},{key:"remove",value:function(e){a.debug("[Bolt4 VideoBase] ",this.containerId,"video",this.videoId,"REMOVE"),this._isRemoved=!0,this.video&&(this._disableVideoListeners(),this.video.pause(),this.video.src="",this.video.poster="",!0===e?(this.video.parentNode.removeChild(this.video),this.video=null):this._enableVideoListeners()),this._dispatchEvent(r.a.Player.Event.REMOVED),this.removeAllListeners()}},{key:"setSource",value:function(e){e=Object(o.s)(e),this._isRemoved=!1,this._originalSource=e,this.resetQuartiles(),this.metadata=null,this.playing=!1,this.hasStarted=!1,this.paused=!1,this.ended=!1,this.sourceChanged=!0,this.duration=0,this.buffered=0,this._bufferedTime=0,this.startTime=0,this.currentTime=0,this.waiting=!1,this._dispatchEvent(r.a.Media.Event.START_TIME_CHANGED,this.startTime),this._dispatchEvent(r.a.Player.Event.CONTENT_CHANGED),this.fastSeekEnabled=Object(o.c)(e),a.debug("[Bolt4 VideoBase] ",this.containerId,"PSEUDO STREAMING ENABLED",this.fastSeekEnabled),this._enableVideoListeners(),this._updateVideoSource(e)}},{key:"setQuality",value:function(e,t){e!==this.currentQuality&&(a.debug("[Bolt4 VideoBase] ",this.containerId,"setQuality",e,t),this._originalSource=t,this.autoplay=!0,this.currentQuality=e,this.qualityChanged=!0,this._dispatchEvent(r.a.Player.Event.QUALITY_CHANGED,this.currentQuality),this._updateVideoSource(t))}},{key:"_updateVideoSource",value:function(e){console.warn("ABSTRACT METHOD NO OP")}},{key:"getSource",value:function(){return this._source}},{key:"size",value:function(e,t){this.video.setAttribute("width",e),this.video.setAttribute("height",t),this.width=this.video.clientWidth,this.height=this.video.clientHeight,this._dispatchEvent(r.a.Player.Event.SIZE_CHANGED)}},{key:"setFullscreen",value:function(e){e!==this.fullscreen&&(this.fullscreen=e)}},{key:"show",value:function(e){!0===e&&"block"!==this.video.style.display?(a.debug("[Bolt4 VideoBase] ",this.containerId,"show video"),this.video.style.display="block"):!1===e&&"none"!==this.video.style.display&&(a.debug("[Bolt4 VideoBase] ",this.containerId,"hide video"),this.video.style.display="none")}},{key:"hitAdCuepoint",value:function(e){this.previousCuepointIndex=window.CurrentVideoConfig.advertising.cuepoints.indexOf(e)}},{key:"unload",value:function(){var e=this;a.info("[Bolt4 VideoBase] - unload video",this.video.currentSrc),e._isRemoved=!0,e._disableVideoListeners(),e.hls?e.hls.destroy():(e.video.src="",e.video.load())}},{key:"enable",value:function(e){this._isEnabled=e,!0===e?(a.info("[Bolt4 VideoBase] ",this.containerId,"ENABLE VIDEO",e,this.videoId,this._source,this.video.src),this._enableVideoListeners(),this.setSource(this._source)):(a.info("[Bolt4 VideoBase] ",this.containerId,"DISABLE VIDEO",e,this.videoId,this._source,this.video.src),this.unload())}},{key:"_onDurationChanged",value:function(){console.warn("ABSTRACT METHOD NO OP")}},{key:"_onPlay",value:function(){this.stopped=!1,this.ended=!1,this.hasStarted?this.paused&&(this.paused=!1,this._dispatchEvent(r.a.Media.Event.RESUME)):(a.info("[Bolt4 VideoBase] - dispatching play event"),this._dispatchEvent(r.a.Media.Event.PLAY),this.hasStarted=!0)}},{key:"_onPause",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"onPause",this.currentTime),this.paused=!0,this.playing=!1,this._dispatchEvent(r.a.Media.Event.PAUSED),this.stopped&&this._dispatchEvent(r.a.Media.Event.STOPPED)}},{key:"_onSeeked",value:function(){a.info("[Bolt4 VideoBase] - onSeeked",window.CurrentVideoConfig.settings.title,this.video.currentSrc),this.stopped||(this._dispatchEvent(r.a.Media.Event.SEEKED),this.autoplay&&this._playVideo()),this.seekTime=null}},{key:"_onTimeUpdate",value:function(){if(this.video){if(this._stalled=!1,this.qualityChanged)a.info("[Bolt4 VideoBase::_onTimeUpdate] - quality changed:",this.qualityChanged);else if(this.currentTime=this.video.currentTime+this.startTime,this.currentTime>this.duration&&(this.currentTime=this.duration),this._dispatchEvent(r.a.Media.Event.TIME_UPDATE,this.currentTime),this._checkQuartiles(),window.client.system.android>0&&28===window.client.browser.chrome&&Math.floor(this.currentTime)===Math.floor(this.video.duration)){var e=new CustomEvent("ended");this.video.dispatchEvent(e)}}else a.error(this.containerId,"video is null")}},{key:"_onWaiting",value:function(){this.waiting=!0,this._dispatchEvent(r.a.Media.Event.WAITING)}},{key:"_onPlaying",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"onPlaying",this.currentTime,this.video.currentTime),this.playing=!0,this.paused=!1,this._dispatchEvent(r.a.Media.Event.PLAYING)}},{key:"_onProgress",value:function(){try{var e=this.fastSeekEnabled?this.video.buffered.end(0)+this.startTime:this.video.buffered.end(0);e!==this._bufferedTime&&(e>this._bufferedTime&&(this._bufferedTime=e),this.buffered=Math.round(100*this._bufferedTime/this.duration),this.buffered>100&&(this.buffered=100))}catch(e){this.buffered=0,this._bufferedTime=0}this._dispatchEvent(r.a.Media.Event.LOAD_PROGRESS,this.buffered)}},{key:"_onLoadedMetadata",value:function(){this.metadata||(this.metadata={duration:this.video.duration,videoWidth:this.video.videoWidth,videoHeight:this.video.videoHeight},a.debug("[Bolt4 VideoBase] ",this.containerId,"video metadata",this.metadata,this.video.currentSrc),this._dispatchEvent(r.a.Media.Event.METADATA,this.metadata))}},{key:"_onCanPlay",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"onCanPlay",this.video.currentTime),this.waiting=!1,this.canplay=!0,this._dispatchEvent(r.a.Player.Event.CANPLAY),this._stalled&&(a.debug("[Bolt4 VideoBase] ",this.containerId,"onCanPlay after stalled"),this._stalled=!1,this._playVideo())}},{key:"_onCanPlayThrough",value:function(){this.canplaythrough=!0,this._dispatchEvent(r.a.Player.Event.CANPLAYTHROUGH)}},{key:"_onVolumeChange",value:function(){this.volume=this.video.volume,a.info("[Bolt4 VideoBase] - onVolumeChange",this.volume),this._dispatchEvent(r.a.Media.Event.VOLUME_CHANGED,this.volume)}},{key:"_onEnded",value:function(){this._isAd||a.debug("[Bolt4 VideoBase] ",this.containerId,"onEnded",window.CurrentVideoConfig.settings.title),this.ended=!0,this.playing=!1,this.paused=!1,this.hasStarted=!1,this._dispatchEvent(r.a.Media.Event.ENDED)}},{key:"_onEmptied",value:function(){this._isRemoved||this.sourceChanged||(this._isAd||a.debug("[Bolt4 VideoBase] ",this.containerId,"onEmptied",window.CurrentVideoConfig.settings.title,this.video.currentSrc),this._dispatchEvent(r.a.Media.Event.EMPTIED))}},{key:"_onStalled",value:function(){this._isRemoved||(this._stalled=!0,this.playing&&(a.debug("[Bolt4 VideoBase] ",this.containerId,"video stalled, calling play"),this._playVideo()))}},{key:"_onError",value:function(){var e="";if(!this._isRemoved){if(this.video.error.code)switch(this.video.error.code){case 1:e="USER ABORT";break;case 2:e="NETWORK ERROR";break;case 3:e="DECODE ERROR";break;case 4:e="MEDIA NOT SUPPORTED"}a.error("[Bolt4 VideoBase] ",this.containerId,"ZeusVideo::video error",this.video.error.code,":",e),4===this.video.error.code?window.client.browser.firefoxWithoutMp4&&this._source.indexOf(".mp4")>-1&&!window.client.hasFlash?this._dispatchEvent(r.a.Media.Event.NOT_SUPPORTED):this._dispatchEvent(r.a.Media.Event.NOT_FOUND):""===this.video.src||this._isRemoved||this.sourceChanged||this._dispatchEvent(r.a.ERROR)}}},{key:"_onLoadedData",value:function(){this._isLoading=!1,a.debug("[Bolt4 VideoBase] ",this.containerId,"onLoadedData"),this._dispatchEvent(r.a.Media.Event.LOADED)}},{key:"_onLoadStart",value:function(){this.video&&(this._isLoading=!0,a.info("[Bolt4 VideoBase] ",this.containerId,"onLoadStart",this.video.currentSrc,this.video.src),this._dispatchEvent(r.a.Media.Event.WAITING))}},{key:"_onAbort",value:function(e){a.info("[Bolt4 VideoBase] ",this.containerId,"onAbort",this.videoId,this.video.src)}},{key:"_enableVideoListeners",value:function(){a.debug("[Bolt4 VideoBase] - enable video listeners",this.videoId),this.video.addEventListener("loadstart",this._onLoadStart),this.video.addEventListener("loadedmetadata",this._onLoadedMetadata),this.video.addEventListener("loadeddata",this._onLoadedData),this.video.addEventListener("durationchange",this._onDurationChanged),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("seeked",this._onSeeked),this.video.addEventListener("timeupdate",this._onTimeUpdate),this.video.addEventListener("waiting",this._onWaiting),this.video.addEventListener("playing",this._onPlaying),this.video.addEventListener("progress",this._onProgress),this.video.addEventListener("canplay",this._onCanPlay),this.video.addEventListener("canplaythrough",this._onCanPlayThrough),this.video.addEventListener("volumechange",this._onVolumeChange),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("emptied",this._onEmptied),this.video.addEventListener("stalled",this._onStalled),this.video.addEventListener("error",this._onError),this.video.addEventListener("abort",this._onAbort)}},{key:"_disableVideoListeners",value:function(){a.debug("[Bolt4 VideoBase] ",this.containerId,"disable video listeners"),this.video.removeEventListener("loadstart",this._onLoadStart),this.video.removeEventListener("loadedmetadata",this._onLoadedMetadata),this.video.removeEventListener("loadeddata",this._onLoadedData),this.video.removeEventListener("durationchange",this._onDurationChanged),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("seeked",this._onSeeked),this.video.removeEventListener("timeupdate",this._onTimeUpdate),this.video.removeEventListener("waiting",this._onWaiting),this.video.removeEventListener("playing",this._onPlaying),this.video.removeEventListener("progress",this._onProgress),this.video.removeEventListener("canplay",this._onCanPlay),this.video.removeEventListener("canplaythrough",this._onCanPlayThrough),this.video.removeEventListener("volumechange",this._onVolumeChange),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("emptied",this._onEmptied),this.video.removeEventListener("stalled",this._onStalled),this.video.removeEventListener("error",this._onError),this.video.removeEventListener("abort",this._onAbort),this.video.removeEventListener("ended",this._onEnded)}},{key:"onVideoConfigChanged",value:function(){(this.playing||this.paused)&&this.enable(!1);var e=window.CurrentVideoConfig;this._poster=e.content.poster,void 0===this.loop&&void 0===window.Playlist&&(this.loop=e?e.settings.loop:this.loop),this.adsCuepoints=void 0!==e.advertising.cuepoints?e.advertising.cuepoints.concat():[],this._dispatchEvent(r.a.Player.Event.CONFIG_CHANGED)}},{key:"resetQuartiles",value:function(){this._pastFirstQuartile=!1,this._pastMidpoint=!1,this._pastThirdQuartile=!1}},{key:"_checkQuartiles",value:function(){if(this.currentTime&&this.duration){var e=this.currentTime/this.duration*100;!this._pastFirstQuartile&&e>=25?(this._pastFirstQuartile=!0,this._dispatchEvent(r.a.Media.Event.FIRSTQUARTILE,null)):!this._pastMidpoint&&e>=50?(this._pastMidpoint=!0,this._dispatchEvent(r.a.Media.Event.MIDPOINT,null)):!this._pastThirdQuartile&&e>=75&&(this._pastThirdQuartile=!0,this._dispatchEvent(r.a.Media.Event.THIRDQUARTILE,null))}}}])&&l(w.prototype,h),v&&l(w,v),t}()},20:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var i=n(16),a=n(3),o=n(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e,n,i){var a,o,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=!(d=u(t).call(this))||"object"!==r(d)&&"function"!=typeof d?l(o):d,w(l(a),"hasBeenTouched",!1),w(l(a),"_isEnabled",!1);var s=l(a);return s._init(e,n,i),window.PlayerSettings.autoplay&&(s.hasBeenTouched=!0,s.mute(!0)),s.video.addEventListener("webkitendfullscreen",function(){s.video.controls&&(s.video.controls=!1)}),a}var n,h,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i["a"]),n=t,(h=[{key:"_updateVideoSource",value:function(e){o.debug("[Bolt4 ios-video]",this.containerId,"updateSource",e,this.video.src,"autoplay",this.autoplay);var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){o.debug("seek",e),s(u(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){var t=-1===n._originalSource.indexOf("?")?"?":"&";n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e),n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load()};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?n.video.currentTime=e:i():(n.video.currentTime=e,n.playing||n.hasBeenTouched&&n.play())}},{key:"_onDurationChanged",value:function(){o.debug(this.containerId,this.video,"durationchanged",this.video.duration,this.duration),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),o.debug("[Bolt4 ios-video]",this.containerId,"duration changed, sourcechanged"),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?o.debug(this.containerId,"[Bolt4 ios-video] duration changed, quality changed"):this.seekTime?(o.debug(this.containerId,"[Bolt4 ios-video] duration changed, seektime",this.seekTime),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.play())):this.autoplay&&this.hasBeenTouched&&(o.debug("[Bolt4 ios-video] duration changed & play"),this.play())}},{key:"_onLoadedData",value:function(){if(this.qualityChanged)o.info("[Bolt4 ios-video] on loaded data:: new quality"),this.qualityChanged=!1,this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.play()):this.seek(this.currentTime);else if(o.info("[Bolt4 ios-video] on loaded data"),s(u(t.prototype),"_onLoadedData",this).call(this),window.client.system.ios&&window.PlayerView.fullscreen)try{this.video.webkitEnterFullscreen()}catch(e){o.warn("[Bolt4 ios-video] cannot enter fullscreen"),window.PlayerView.fullscreen=!1,window.PlayerView.setFullscreen(!1)}}},{key:"touch",value:function(){o.debug(this.videoId,"touch",this.video),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}}])&&d(n.prototype,h),v&&d(n,v),t}()},21:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var i=n(16),a=n(3),o=n(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,n,i){var a,o,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=!(d=u(t).call(this))||"object"!==r(d)&&"function"!=typeof d?l(o):d;var s=l(a);return s._init(e,n,i),s.hasBeenTouched=!1,s._isEnabled=!1,window.client.system.android&&window.PlayerSettings.autoplay&&(s.hasBeenTouched=!0,s.mute(!0)),window.PlayerSettings.automute&&s.video.addEventListener("webkitbeginfullscreen",function(){s.mute(!1)}),a}var n,w,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i["a"]),n=t,(w=[{key:"_init",value:function(e,n,i){s(u(t.prototype),"_init",this).call(this,e,n,i),o.debug(this.containerId,"init",this.video)}},{key:"_updateVideoSource",value:function(e){o.debug(this.containerId,"updateSource",e,this.video.src,"autoplay",this.autoplay);var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){o.debug("seek",e),s(u(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var t=-1===n._originalSource.indexOf("?")?"?":"&";n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load()};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?n.video.currentTime=e:i():(n.video.currentTime=e,n.playing||n.hasBeenTouched&&n.play())}},{key:"_onDurationChanged",value:function(){o.debug(this.containerId,this.video,"durationchanged",this.video.duration,this.duration),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),o.debug(this.containerId,"duration changed sourcechanged"),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?(o.debug(this.containerId,"duration changed, quality changed"),this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.video.play()):this.seek(this.currentTime),this.qualityChanged=!1):this.seekTime?(o.debug(this.containerId,"duration changed, seektime",this.seekTime),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.video.play())):this.autoplay&&this.hasBeenTouched&&(o.debug("duration changed & play"),this.video.play())}},{key:"touch",value:function(){o.debug(this.videoId,"touch",this.video),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){window.client.system.android&&(this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED))}}])&&d(n.prototype,w),h&&d(n,h),t}()},22:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var i=n(16),a=n(3),o=n(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,n,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=l(this,u(t).call(this)))._init(e,n,i,a),o}var n,r,w;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i["a"]),n=t,(r=[{key:"_init",value:function(e,n,i){s(u(t.prototype),"_init",this).call(this,e,n,i),this.video.oncontextmenu=function(){return!1},this._source&&(this.setSource(this._source),o.debug("[Bolt4 ZeusVideo] PSEUDO STREAMING ENABLED",this.fastSeekEnabled)),this._enableVideoListeners()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"mute",value:function(e){o.info("mute",e),this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}},{key:"setVolume",value:function(e){var t=void 0===e?1:parseFloat(e);o.info("[Bolt4 ZeusVideo] set volume",t),this.video.volume=t,this.volume=this.video.volume}},{key:"_updateVideoSource",value:function(e){if(o.debug("[Bolt4 ZeusVideo]",this.containerId,"VIDEO::updateSource",e,"autoplay",this.autoplay,"currentTime",this.currentTime),this._source=e,this.qualityChanged){if(this.fastSeekEnabled&&this.currentTime>0){var t=-1===e.indexOf("?")?"?":"&";this._source="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)}this.hasStarted&&this.preload()}}},{key:"_onDurationChanged",value:function(){var e=this;e.sourceChanged?(e.duration=e.video.duration,e._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,e.duration),o.debug("[Bolt4 ZeusVideo]",e.containerId,"duration changed sourcechanged"),e.sourceChanged=!1,e.autoplay&&!window.BoltAdManager.sequentialPrerollAdRequested&&e.play()):e.qualityChanged?(o.debug("[Bolt4 ZeusVideo]",e.containerId,"duration changed, quality changed"),e.fastSeekEnabled?(e.startTime=e.currentTime,e._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e.currentTime),e.play()):e.seek(e.currentTime),e.qualityChanged=!1):e.seekTime?(o.debug("[Bolt4 ZeusVideo]",e.containerId,"duration changed, seektime",e.seekTime),e.fastSeekEnabled&&(e.seekTime=null,e.play())):(o.debug("[Bolt4 ZeusVideo]",e.containerId,"duration changed, seek time",e.seekTime,"current source",e.video.currentSrc,"autoplay",e.autoplay),e.autoplay&&!window.BoltAdManager.sequentialPrerollAdRequested&&e.play())}},{key:"seek",value:function(e){o.debug("[Bolt4 ZeusVideo] seek",e),s(u(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var t=-1===n._originalSource.indexOf("?")?"?":"&";if(window.client.browser.firefox>0){n._disableVideoListeners();n.video.addEventListener("emptied",function i(){o.info("[Bolt4 ZeusVideo] FF video reset"),n.video.removeEventListener("emptied",i),n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n._enableVideoListeners(),n.video.load()}),n.video.src=""}else n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load()};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?(o.info("[Bolt4 ZeusVideo] Seeking pseudo-streamed video within the buffer",e,"of",n._bufferedTime),n.video.currentTime=e,n.seekTime=null):i():(n.video.currentTime=e,n.seekTime=null,n.playing||n.play())}}])&&d(n.prototype,r),w&&d(n,w),t}()},25:function(e,t,n){"use strict";(function(e){var i=n(2),a={buildLoadingIndicator:function(t){n.e(13).then(n.bind(null,28)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildWatermark:function(t){n.e(21).then(n.bind(null,30)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildContent:function(t){n.e(17).then(n.bind(null,38)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),n.invalidate(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildVolume:function(t){Promise.all([n.e(0),n.e(18)]).then(n.bind(null,23)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildControlBar:function(t){Promise.all([n.e(0),n.e(18)]).then(n.bind(null,37)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildPrerollScreen:function(t){n.e(22).then(n.bind(null,31)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildScrubber:function(t){Promise.all([n.e(0),n.e(24)]).then(n.bind(null,32)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildPlaylist:function(t,a){n.e(19).then(n.bind(null,19)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(a),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildRelatedVideos:function(t,a){n.e(23).then(n.bind(null,33)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(a),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildAgeGate:function(t){n.e(3).then(n.bind(null,34)).then(function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})},buildAppearanceManager:function(t){n.e(16).then(n.bind(null,36)).then(function(e){var n=new(0,e.default);n.init(),t.call(null,n)},function(t){throw i.error(t.message),new Error("Failed to load module: ".concat(e))})}};t.a=a}).call(this,n(26)(e))},26:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},27:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var i=n(2),a=n(11),o=n(3),r=n(0);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(i=s(t).call(this))||"object"!==d(i)&&"function"!=typeof i?u(n):i,w(u(e),"_startData",null),w(u(e),"_started",!1),w(u(e),"_completed",!1),w(u(e),"_faied",!1),w(u(e),"_aborted",!1),w(u(e),"_adloaded",!1),e}var n,h,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["a"]),n=t,(h=[{key:"reset",value:function(){i.info("%c[AdSession] reset","color:black;background:yellow"),this._startData=null,this._started=!1,this._completed=!1,this._failed=!1,this._aborted=!1,this._adloaded=!1}},{key:"getElapsedSecondsSinceStart",value:function(e){try{var t=(e.getTime()-this._startData.start_ts.getTime())/1e3;return parseFloat(t.toFixed(1))}catch(e){return-1}}},{key:"start",value:function(e){i.info("%c[AdSession start] is backfilling? ".concat(e),"color:black;background:lime");var t=this;t._started&&i.warn("[AdSession start] Previous session is still active"),t._started=!0;var n=window.BoltAdManager;t._startData={timing:n&&n.timing,publisher_id:Object(r.f)()||-1,video_id:window.CurrentVideoConfig.content.videoId||-1,player_width:parseFloat(window.Skin.clientWidth.toFixed(2)),player_height:parseFloat(window.Skin.clientHeight.toFixed(2)),fullscreen:window.PlayerView.fullscreen,start_ts:new Date,cuepoint:n&&n.cuepoint,server_type:n&&n.selectedServer.type,tag_type:n&&n.selectedServer.tagType,backfilling:e},this._dispatchEvent(o.a.Ad.Event.SESSION_START,this._startData)}},{key:"abort",value:function(){if(this._started&&!this._aborted){i.info("[AdSession abort]"),this._aborted=!0;var e=new Date,t={timestamp:e,et_session_start:this.getElapsedSecondsSinceStart(e)};this._dispatchEvent(o.a.Ad.Event.SESSION_ABORT,t),this.reset()}}},{key:"fail",value:function(){if(this._started&&!this._failed){i.info("%c[AdSession fail]","color:red;background:pink"),this._failed=!0;var e=new Date,t={timestamp:e,et_session_start:this.getElapsedSecondsSinceStart(e)};this._dispatchEvent(o.a.Ad.Event.SESSION_FAIL,t),this.reset()}}},{key:"complete",value:function(){i.info("%c[AdSession complete]","color:white;background:black;");if(this._started&&!this._completed){this._completed=!0;var e=new Date,t={timestamp:e,et_session_start:this.getElapsedSecondsSinceStart(e)};this._dispatchEvent(o.a.Ad.Event.SESSION_END,t),this.reset()}}}])&&l(n.prototype,h),v&&l(n,v),t}()},61:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n(1),o=n(15);function r(){this._data={},this._state=null,this._previousState=null,this._waitingStateDelay=null,o.a.mixinEvents(this),this.delayedWaitingState=this.delayedWaitingState.bind(this)}r.prototype={STATE_CHANGED:"stateChanged",AGE_GATE:"age-gate",START:"start",WAITING:"waiting",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",ERROR:"error",RELATED_VIDEOS:"related-videos",delayedWaitingState:function(e){var t=this;clearTimeout(t._waitingStateDelay),t._waitingStateDelay=setTimeout(function(){t.state=r.WAITING},e)},get previousState(){return this._previousState},get state(){return this._state},set state(e){if(e){e!==this._state&&(clearTimeout(this._waitingStateDelay),e===this.WAITING&&this._state===this.PLAYING||Object(a.d)(window.document.body,"bolt-state-"+this._state),this._previousState=this._state,this._state=e,i.info("Player state:",this._state),Object(a.a)(window.document.body,"bolt-state-"+e),this.emit(this.STATE_CHANGED))}},get data(){return this._data},set data(e){this._data=e}};var d=r,l=n(3),s=n(0),u=n(11);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,v(t).call(this))).data=null,e.autoPaused=!1,e.userDidPause=!1,e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,u["a"]),n=t,(i=[{key:"update",value:function(e){var t=this,n=!0;t.data&&(n=t.data.top!==e.top||t.data.left!==e.left||t.data.right!==e.right||t.data.bottom!==e.bottom||t.data.percent!==e.percent),n&&(this.data=e,this._dispatchEvent("changed",this.data))}},{key:"requestMetrics",value:function(){var e={type:"zeus_event",name:"requestViewabilityMetrics",id:window.id};window.parent.postMessage(JSON.stringify(e),"*")}}])&&w(n.prototype,i),a&&w(n,a),t}();function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"controller",void 0),E(this,"view",void 0),E(this,"_handleMediaEvents",function(e){var t=a,n=e.target;e.type===l.a.Media.Event.PLAY?(i.debug("Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId),n.isAd()||window.PlayerState.delayedWaitingState(500)):e.type===l.a.Media.Event.PLAYING?(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerSettings.minimumViewability&&(t.controller.viewability.data&&t.controller.viewability.data.percent&&t.controller.viewability.data.percent<window.PlayerSettings.minimumViewability&&t.controller.viewability.userDidPause?i.info(["Bolt4 Controller/ViewEventHandler::handleViewEvents] Viewability below threshold. Pause."]):t.controller.viewability.autoPaused=!1),n.isAd()||void 0===document.visibilityState||"hidden"!==document.visibilityState||t.controller.pause()):e.type===l.a.Media.Event.PAUSED?window.PlayerView.fullscreenRequested||(i.debug("[Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId),window.PlayerState.state=window.PlayerState.PAUSED):e.type===l.a.Media.Event.RESUME?i.debug("[Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId):e.type===l.a.Media.Event.ENDED?(i.debug("[Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId,"isAd?",n.isAd()),window.PlayerState.state=window.PlayerState.ENDED,n.isAd()||t.controller._adEnded()):e.type===l.a.Media.Event.DURATION_CHANGE?(i.debug("[Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId),window.PlayerState.data.duration=window.ContentPlayer.duration,!n.isAd()&&window.CurrentVideoConfig.advertising.on?(t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration),window.BoltAdManager&&window.BoltAdManager.prefetchEnabled&&window.ContentPlayer.duration>=45&&window.BoltAdManager.prefetchAds("overlay"),t.controller._createAdsCuepoints()):window.AdBlockDetected&&(t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration),t.controller._createAdsCuepoints())):e.type===l.a.Media.Event.TIME_UPDATE?n.playing&&!n.paused&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerState.data.currentTime=window.ContentPlayer.currentTime,t.controller._onTimeUpdated()):e.type===l.a.Media.Event.LOADED?i.debug("Bolt4 Controller/ViewEventHandler::handleViewEvents] window.PlayerView media events",e.type,n.containerId):e.type===l.a.Media.Event.WAITING?n.isAd()?window.PlayerState.state=window.PlayerState.WAITING:window.PlayerState.delayedWaitingState(500):e.type===l.a.Media.Event.MUTED?(window.PlayerSettings.automute=!0,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.UNMUTED?(window.PlayerSettings.automute=!1,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.VOLUME_CHANGED?(window.PlayerSettings.volume=e.data,window.PlayerState.data.currentVolume=window.PlayerSettings.volume):e.type===l.a.Media.Event.SEEKED&&window.PlayerState.previousState===window.PlayerState.PAUSED&&(window.PlayerState.state=window.PlayerState.previousState)}),E(this,"_handleUIEvents",function(e){var t,n,o=a,r=o.view.currentPlayer;window.PlayerState;switch(e.type){case l.a.UI.Event.REPLAY:case l.a.UI.Event.PLAYPAUSE:o.controller.togglePlayPause();break;case l.a.UI.Event.PLAYLIST_ITEM_SELECTED:o.controller.playlistHelper.loadPlaylistVideo(e.data,!0);break;case l.a.UI.Event.TOGGLE_MUTE:if(t=!r.muted,i.info("[Bolt4 Controller/ViewEventHandler::handleUIEvents] mute flag?",t),r.mute(t),r.isAd()?window.ContentPlayer.mute(t):window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.muted=t),!1===t&&0===parseFloat(r.volume)){var d=parseFloat(r.volume.toFixed(2));r.setVolume(d||1)}break;case l.a.UI.Event.CHANGE_VOLUME:i.info(e.type,e.data),r.setVolume(e.data),r.mute(0===e.data);break;case l.a.UI.Event.SEEK:o.controller.seek(e.data);break;case l.a.UI.Event.RELATED_VIDEO_SELECTED:r.autoplay=!0,o.controller.relatedVideosHelper.loadSelectedRelatedVideo(e.data);break;case l.a.UI.Event.REQUEST_QUALITY:n=""===r.getSource(),o.controller.contentHelper.loadVideoWithQuality(e.data,window.CurrentVideoConfig.content.media,n,!n);break;case l.a.UI.Event.AGE_GATE_FAILED:i.warn("[Bolt4 Controller/ViewEventHandler::handleUIEvents] age gate failed"),window.PlayerState.state=window.PlayerState.AGE_GATE;break;case l.a.UI.Event.IOS_FULLSCREEN_CHANGED:}});var o=this;o.view=t,o.controller=n,t.addEventListener(l.a.Media.Event.PLAY,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.PLAYING,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.PAUSED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.RESUME,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.DURATION_CHANGE,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.ENDED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.TIME_UPDATE,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.LOADED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.MUTED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.UNMUTED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.VOLUME_CHANGED,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.WAITING,o._handleMediaEvents),t.addEventListener(l.a.Media.Event.SEEKED,o._handleMediaEvents),t.addEventListener(l.a.UI.Event.REPLAY,o._handleUIEvents),t.addEventListener(l.a.UI.Event.PLAYPAUSE,o._handleUIEvents),t.addEventListener(l.a.UI.Event.PLAYLIST_ITEM_SELECTED,o._handleUIEvents),t.addEventListener(l.a.UI.Event.TOGGLE_MUTE,o._handleUIEvents),t.addEventListener(l.a.UI.Event.CHANGE_VOLUME,o._handleUIEvents),t.addEventListener(l.a.UI.Event.SUBTITLE_SELECTED,o._handleUIEvents),t.addEventListener(l.a.UI.Event.SEEK,o._handleUIEvents),t.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,o._handleUIEvents),t.addEventListener(l.a.UI.Event.REQUEST_QUALITY,o._handleUIEvents),t.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,o._handleUIEvents),t.addEventListener(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,o._handleUIEvents)},_=n(4);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=t}var t,n,o;return t=e,(n=[{key:"loadVideoWithQuality",value:function(e,t,n,a){var o=window.PlayerView.currentPlayer;if(e!==o.currentQuality||n){var r=o.getSource(),d=Object(s.h)(t,r,e);if(d){var l=d.quality,u=d.source;o.fastSeekEnabled=Object(s.c)(u),i.debug("[Content Helper] - old src= ",r," new=",u," quality=",l,"autoplay",a,"fast seek enabled",o.fastSeekEnabled),o.autoplay=a,!0===n?(i.debug("[Content Helper] - loadVideoQuality","new video",l),o.currentQuality=l,o.setSource(u),a&&"flash"!==this.type&&(o.preload(),window.PlayerState.delayedWaitingState(500))):(i.debug("[Content Helper] - loadVideoQuality","same video",l),o.setQuality(l,u),window.PlayerState.delayedWaitingState(500)),window.PlayerSettings.defaultHd="hd"===e,window.PlayerView.enableControls(!0)}}else i.debug("[Content Helper] - secleting the same video")}},{key:"loadNewVideo",value:function(e,t){var n=this;window.CurrentVideoConfig=e;var o=function(){if(window.CurrentVideoConfig.settings=Object(s.r)(window.CurrentVideoConfig.settings,window.PlayerSettings),Object(a.e)(),window.CurrentVideoConfig.advertising.on&&window.CurrentVideoConfig.advertising.cuepoints&&(window.CurrentVideoConfig.advertising.cuepoints=Object(s.w)(window.CurrentVideoConfig.advertising.cuepoints)),window.Playlist)for(var o=0;o<window.Playlist.length;o++){if(window.Playlist[o].videoId===e.content.videoId){window.CurrentPlaylistIndex=o,i.debug("[Content Helper] - current playlist index",window.CurrentPlaylistIndex);break}}i.info("[Content Helper] - load new video",e),Object(s.u)(e.content.media,function(a){void 0!==e.content.media.f4m?(i.debug("[Content Helper] - processed media",a),a&&(e.content.media=a)):(e.content.media=a,i.debug("[Content Helper] - Transformed media ",e.content.media)),i.debug("[Content Helper] - media data",e.content.media),window.CurrentVideoConfig.settings.minAge>0?(Object(_.b)(l.a.UI.POSTER),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,function(){t?(i.debug("[Content Helper] - age gate passed"),n.controller.play(function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)})):(window.PlayerState.state=window.PlayerState.START,i.debug("[Content Helper] - age gate passed"),n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t))}),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_FAILED,function(){window.PlayerState.state=window.PlayerState.AGE_GATE})):t?(i.info("[Content Helper] - no age-gate","auto play preroll"),window.PlayerState.state=window.PlayerState.START,n.controller.playPrerollAd(function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)})):(window.PlayerState.state=window.PlayerState.START,n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)),window.BoltAdManager.sequentialPrerollAdRequested||window.PlayerView.currentPlayer.onVideoConfigChanged()})};window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested?window.BoltAdManager.init(o):o()}},{key:"loadNewVideoConfig",value:function(e,t){var n=this;Object(s.o)(e,function(e){window.videoConfigChanged=!0,n.loadNewVideo(e,t)},function(){i.error("[Content Helper] - Failed to load video config",e)})}}])&&g(t.prototype,n),o&&g(t,o),e}();function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"_relatedVideosFetched",function(e){var t=n;if(e){var a="string"==typeof e?JSON.parse(e):e;window.RelatedVideos=a,window.RelatedVideos.length>0?(t.playerView.setRelatedVideosFetched(!0),t.playerView.setRelatedVideos(window.RelatedVideos),i.debug("ZeusController:: related videos",window.RelatedVideos)):(t._skipRelatedVideos(),i.debug("[ZeusController] No related videos found"))}else t._skipRelatedVideos()}),P(this,"_skipRelatedVideos",function(){n.playerView.setRelatedVideosFetched(!0),n.playerView.setRelatedVideos(null)}),this.contentHelper=t,this.playerView=window.PlayerView}var t,n,a;return t=e,(n=[{key:"fetch",value:function(){var e=this;window.CurrentVideoConfig.related?e.playerView.isRelatedVideoListFetched()||window.PlayerState.state!==window.PlayerState.PLAYING||(i.info("[RelatedVideosHelper] fetching related videos"),e.playerView.setRelatedVideosFetched(!0),Object(s.E)({url:window.CurrentVideoConfig.related,method:"get",dataFormat:"json"}).then(function(t){e._relatedVideosFetched(t.data)}).catch(e._skipRelatedVideos)):e._skipRelatedVideos()}},{key:"shouldAttemptPrefetch",value:function(){this.playerView=window.PlayerView;var e=this.playerView.currentPlayer;if(!window.CurrentVideoConfig.related)return!1;var t=!this.playerView.isRelatedVideoListFetched()&&0!==e.duration&&e.currentTime>e.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS;return i.info("[RelatedVideosHelper shouldAttemptPrefetch] ",t),t}},{key:"showRelatedVideosMenu",value:function(){return!!this.playerView.isRelatedVideoListFetched()&&(Array.isArray(window.RelatedVideos)&&window.RelatedVideos.length>0?(i.debug("ZeusController:: show related videos"),this.playerView.showRelatedVideosMenu(),window.PlayerState.state=window.PlayerState.RELATED_VIDEOS):(i.debug("ZeusController:: no related videos"),window.PlayerState.state=window.PlayerState.START),!0)}},{key:"loadSelectedRelatedVideo",value:function(e){var t;this.playerView.setRelatedVideosFetched(!1),window.PlayerState.delayedWaitingState(500);for(var n=0;n<window.RelatedVideos.length&&(t=window.RelatedVideos[n]).videoId!==e;n++);i.debug("related video to load",t),this.contentHelper.loadNewVideoConfig(t.config,!0)}}])&&A(t.prototype,n),a&&A(t,a),e}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentHelper=t}var t,n,a;return t=e,(n=[{key:"processPlaylist",value:function(){var e=window.Playlist;if(window.CurrentPlaylistIndex<e.length-1){var t=e[++window.CurrentPlaylistIndex],n=!!window.PlayerSettings.playlistPlaythrough;i.debug("[Bolt4 PlaylistHelper]  - process playlist",window.PlayerSettings,window.CurrentVideoConfig.settings),this.loadPlaylistVideo(t,n)}else window.PlayerState.state=window.PlayerState.ENDED}},{key:"loadPlaylistVideo",value:function(e,t){var n;window.PlayerState.delayedWaitingState(500),i.debug("[Bolt4 PlaylistHelper] - load playlist video",e,"autoplay",t),window.PlayerView.enableControls(!1),window.BoltAdManager&&window.BoltAdManager.abort(),(null===(n=window.BoltAdManager)||void 0===n?void 0:n.sequentialPrerollAdRequested)||window.ContentPlayer.unload(),this.contentHelper.loadNewVideoConfig(e.config,t)}}])&&S(t.prototype,n),a&&S(t,a),e}();function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nextVideoAdCuepoint=0,this.lastVideoAdCuepoint=0,this.skip=!1,this._lastAttempt=0,this._videoDuration=0}var t,n,a;return t=e,(n=[{key:"hasCueForTime",value:function(e,t,n){var a=this,o=a.videoDuration>this.MIN_DURATION&&t>=this.MIN_WIDTH&&n>=this.MIN_HEIGHT,r=Math.floor(e);return o&&(o=a.videoDuration-r>this.MIN_DURATION)&&(o=r-a.lastVideoAdCuepoint>=15)&&a.lastAttempt>0&&(o=r-a.lastAttempt>=a.AD_INTERVAL),o&&a.nextVideoAdCuepoint>0&&(o=a.nextVideoAdCuepoint-r>=this.MIN_DURATION),o&&(a._lastAttempt=r,i.info("[Overlay Ad Cue Finder] - last attempt",a.lastAttempt,"current time",r,"next ad cue",a.nextVideoAdCuepoint,"result",o)),o}},{key:"reset",value:function(e,t){if(!t)throw new Error("[Overlay Ad Cue Finder] - Null video duration");this._videoDuration=t,this.lastVideoAdCuepoint=0,this.nextVideoAdCuepoint=0,e&&(this.skip=!1,this.lastAttempt=0)}},{key:"lastAttempt",get:function(){return this._lastAttempt},set:function(e){this._lastAttempt=Math.floor(e)}},{key:"videoDuration",get:function(){return this._videoDuration}},{key:"MIN_WIDTH",get:function(){return 327}},{key:"MIN_HEIGHT",get:function(){return 340}},{key:"AD_INTERVAL",get:function(){return 420}},{key:"MIN_DURATION",get:function(){return 45}}])&&C(t.prototype,n),a&&C(t,a),e}();function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"viewEventHandler",void 0),O(this,"contentHelper",void 0),O(this,"relatedVideosHelper",void 0),O(this,"playlistHelper",void 0),O(this,"_overlayAdCueFinder",void 0),O(this,"_shouldRequestPreroll",function(e){var n=e.contentPlayer,i=void 0===n?window.ContentPlayer:n,a=e.adMgr,o=void 0===a?window.BoltAdManager:a;return!window.DebugMode.noPreroll&&o&&t._prerollEnabled&&window.CurrentVideoConfig.advertising.on&&(i.videoPlayCount-1)%i.videoAdRatio==0}),O(this,"_onViewabilityMetricsChanged",function(e){var n=t,a=e.data,o=window.PlayerSettings.minimumViewability;window.PlayerView.currentPlayer&&o&&(a.percent<o?window.PlayerState.state===window.PlayerState.PLAYING&&n.viewability.userDidPause&&i.info("[Bolt4 Controller] Viewability metrics below threshold. Pause."):window.PlayerState.state===window.PlayerState.PAUSED&&n.viewability.autoPaused?(i.info("[Bolt4 Controller] Viewability metrics above threshold. Resume."),n.resume()):window.PlayerState.state===window.PlayerState.START&&n.autoplayWhenViewabilityMetricsChanged&&(i.info("[Bolt4 Controller] Viewability metrics above threshold. Starting autoplay"),n.autoplayWhenViewabilityMetricsChanged=!1,n.playPrerollAd()))}),this.currentVideoConfig=window.CurrentVideoConfig,this.replay=this.replay.bind(this),this.viewability=new f,this.contentHelper=new b(this),this.relatedVideosHelper=new m(this.contentHelper),this.playlistHelper=new T(this.contentHelper),this._overlayAdCueFinder=new M}var t,o,r;return t=e,(o=[{key:"_doStartUp",value:function(){var e=this;if(i.debug("[Bolt4 Controller::_doStartUp]"),window.BoltAdManager){window.BoltAdManager.addEventListener(l.a.Ad.Event.VMAP_CUEPOINTS_CHANGED,function(t){e.currentVideoConfig.advertising.cuepoints||(e.currentVideoConfig.advertising.cuepoints=[]),e.currentVideoConfig.advertising.cuepoints=e.currentVideoConfig.advertising.cuepoints.concat(t.data),e.currentVideoConfig.advertising.cuepoints=Object(s.w)(Object(s.j)(e.currentVideoConfig.advertising.cuepoints)),i.info("VMAP CUEPOINTS CHANGED, new cps",t.data,e.currentVideoConfig.advertising.cuepoints),window.ContentPlayer&&(window.ContentPlayer.adsCuepoints=e.currentVideoConfig.advertising.cuepoints.concat())});var t=e.currentVideoConfig.advertising.prefetch;window.DebugMode.forcePrefetch&&!window.DebugMode.noPreroll?t=!0:window.DebugMode.forceNoPrefetch&&(t=!1),window.BoltAdManager.prefetchEnabled=t}window.ContentPlayer.pseudoAdsCuepoints=[],window.ContentPlayer.videoAdRatio=void 0!==e.currentVideoConfig.advertising.videoAdRatio?e.currentVideoConfig.advertising.videoAdRatio:1,window.ContentPlayer.videoPlayCount=1,e.viewEventHandler=new p(window.PlayerView,this),window.readyCallback.call(null,window.ContentPlayer.containerId);var a=function(){if(window.PlayerSettings.autoplay)if(window.PlayerSettings.minimumViewability){var t=window.PlayerSettings.minimumViewability;e.viewability.addOnceEventListener("changed",function(n){n.data.percent>=t?(i.info("[Bolt4 Controller] viewability metrics above threshold. Start autoplay."),"requesting"!==window.BoltAdManager.status&&e.playPrerollAd()):(i.info("[Bolt4 Controller] viewability metrics below threshold. Defer autoplay."),window.PlayerState.state=window.PlayerState.START),e.autoplayWhenViewabilityMetricsChanged=!0,e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged)}),e.viewability.requestMetrics()}else e.playPrerollAd();else window.PlayerState.state=window.PlayerState.START,window.PlayerSettings.minimumViewability&&(e.viewability.requestMetrics(),e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged))},o=function(){!window.DebugMode.noPreroll&&window.BoltAdManager&&window.BoltAdManager.prefetchEnabled?(i.info("[Bolt4 controller] prefetch preroll"),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager.prefetchAds("preroll",a)):a()};window.client.hasFlash?n.e(7).then(n.bind(null,48)).then(function(e){var t=e.default;window.Cors=new t(o)}):o()}},{key:"_createAdsCuepoints",value:function(){if(i.info("Create ads cuepoints",window.CurrentVideoConfig.advertising.cuepoints,window.ContentPlayer.adsCuepoints),void 0===window.ContentPlayer.adsCuepoints||0===window.ContentPlayer.adsCuepoints.length){if(window.ContentPlayer.pseudoAdsCuepoints=null,"number"==typeof window.CurrentVideoConfig.advertising.secondsBetweenAds&&window.CurrentVideoConfig.advertising.secondsBetweenAds>0){i.info("Create pseudo cuepoints");for(var e=window.CurrentVideoConfig.advertising.secondsBetweenAds,t=e;t<window.ContentPlayer.duration;t+=e)window.ContentPlayer.pseudoAdsCuepoints||(window.ContentPlayer.pseudoAdsCuepoints=[]),window.ContentPlayer.pseudoAdsCuepoints.push(t)}}else window.AdBlockDetected||window.PlayerView.drawCuepoints()}},{key:"replay",value:function(){var e=window.PlayerView.currentPlayer;e.isAd()||(i.debug("ZeusController::replay",window.CurrentVideoConfig.settings.title),e.replay(),e.videoPlayCount++,this._overlayAdCueFinder.reset(!1,e.duration))}},{key:"_shouldPrefetchNextPreroll",value:function(e){var t=e.currentPlayer,n=void 0===t?window.PlayerView.currentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i,o=e.adMgrStatus,r=void 0===o?window.BoltAdManager.status:o;return!!window.PlayerSettings.playlistPlaythrough&&!n.isAd()&&!a.sequentialPrerollAdRequested&&"prefetching"!==r&&"requesting"!==r&&"media_located"!==r&&window.Zeus.sessionVideoPlayCount>1&&n.currentTime>=n.duration-l.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS}},{key:"_onTimeUpdated",value:function(){var e=this,t=window.PlayerView.currentPlayer,n=window.BoltAdManager;if(window.PlayerState.state=window.PlayerState.PLAYING,!t.isAd()){var a=t.currentTime,o=null,r=null,d=!1;if(n&&n.hasVMAPBreak(a))return i.info("AdManager has a VMAP break at ".concat(a)),void e._playMidrollAd(window.parseInt(a,10));if(t.adsCuepoints&&t.adsCuepoints.length>0?(r=t.adsCuepoints,d=!1):t.pseudoAdsCuepoints&&t.pseudoAdsCuepoints.length>0&&(r=t.pseudoAdsCuepoints,d=!0),!window.DebugMode.noMidroll&&r){for(var s=0;s<r.length;s++){if(r[s]<t.currentTime){o=r.shift(),d||t.hitAdCuepoint(o);break}}o&&(e._currentCuepoint=o,d||window.PlayerView.drawCuepoints(),e._overlayAdCueFinder.lastVideoAdCuepoint=o,e._overlayAdCueFinder.nextVideoAdCuepoint=r[0],i.debug("[Bolt4 Controller] - ontimeupdate playmidroll",o,"currentTime",t.currentTime),e._playMidrollAd())}t.currentTime>=t.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS&&e.relatedVideosHelper.shouldAttemptPrefetch()&&(e.relatedVideosHelper.fetch({}),i.info("[Bolt4 Controller] - Fetch related videos ".concat(l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS," before video ends")));var u=n.status;e._shouldPrefetchNextPreroll({currentPlayer:t,adMgr:n,adMgrStatus:u})&&(n.sequentialPrerollAdRequested=!0,n.previousStatus=u,u="prefetching",e.playPrerollAd(),i.info("[Bolt4 Controller] - Prefetch Subsequent videos' preroll ads ".concat(l.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS," before video ends")))}}},{key:"seek",value:function(e){var t=window.PlayerView.currentPlayer;if(!t.isAd()){var n=e;if(window.PlayerState.state=window.PlayerState.WAITING,!window.DebugMode.noMidroll&&window.CurrentVideoConfig.advertising.on){var i=t.adsCuepoints;if(i.length>0)for(var a=0;a<i.length;a++){var o=i[a];if(o<e){n=o;break}}}t.seek(n)}}},{key:"_requestAd",value:function(e,t,n,o){!function(e,t){var n,o=t.timing,r=t.loadedCallback,d=t.finishedCallback,u=t.vmapBreakTime,c=function(){window.BoltAdManager.removeEventListener(l.a.Media.Event.LOADED,h),window.BoltAdManager.removeEventListener(l.a.Media.Event.ENDED,v),window.BoltAdManager.removeEventListener(l.a.Ad.Event.FAILED,y),window.BoltAdManager.removeEventListener(l.a.Ad.Event.ABORTED,f),window.BoltAdManager.removeEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,w)},w=function(){c(),d()},h=function e(){window.BoltAdManager.removeEventListener(l.a.Media.Event.LOADED,e),i.debug("[Bolt4 Controller::AdHelper] requestAd hit the ad loaded listener for a ".concat(o)),Object(a.a)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type));var t=null;window.BoltAdManager.type===l.a.Ad.Type.VAST||window.BoltAdManager.type===l.a.Ad.Type.FLASH_VPAID?t=window.BoltAdManager.adPlayer.adPlayer:window.BoltAdManager.type===l.a.Ad.Type.GOOGLE||window.BoltAdManager.type===l.a.Ad.Type.GOOGLE_DCM_VPAID?(i.debug("[Bolt4 Controller::AdHelper] GOOGLE AD LOADED"),t=window.BoltAdManager.adPlayer):t=window.BoltAdManager.adPlayer,i.debug("[Bolt4 Controller::AdHelper] got a linear ad",o),"preroll"!==o&&"midroll"!==o||(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.addOnceEventListener(l.a.Media.Event.PAUSED,function(){i.debug("[Bolt4 Controller::AdHelper] Exiting fullscreen"),window.ContentPlayer.video.webkitExitFullscreen()}),i.debug("[Bolt4 Controller::AdHelper] About to pause the content player so ad can play"),window.ContentPlayer.pause()),window.PlayerView.setCurrentPlayer(t),window.BoltAdManager.type!==l.a.Ad.Type.GOOGLE_DCM_VPAID&&window.BoltAdManager.type!==l.a.Ad.Type.GOOGLE&&t.type!==l.a.Ad.Type.FLASH_VPAID&&t.type!==l.a.Ad.Type.JS_VPAID&&t.play(),Object(_.b)(l.a.UI.LOADING_INDICATOR),r()},v=function(){window.AdSession.complete(),i.debug("[Bolt4 Controller::AdHelper] hit the ad completed listener for a ".concat(o)),c(),Object(_.b)(l.a.UI.LOADING_INDICATOR),window.BoltAdManager.VMAPBreaksForCurrentAdTiming&&window.BoltAdManager.VMAPBreaksForCurrentAdTiming.length>0||this._adPlays<window.prerollAdAmt?e._requestAd(o,r,d,u):(Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),window.BoltAdManager.remove(),"precontent"===window.PlayerSettings.playerType?e._showHiddenContainer(window.ContentPlayer):(window.PlayerView.setCurrentPlayer(window.ContentPlayer),d()))},y=function(){if(window.AdSession.fail(),i.debug("[Bolt4 Controller::AdHelper] hit the ad failed listener for a ".concat(o)),c(),window.BoltAdManager.remove(),window.PlayerView._dispatchEvent(l.a.Ad.Event.FAILED,{timing:o}),"precontent"===window.PlayerSettings.playerType){var t=window.tycheData;Object(s.t)(t,"features","interstitial","on")&&t.features.interstitial.on?window.setTimeout(function(){e._showHiddenContainer(window.ContentPlayer)},5e3):e._showHiddenContainer(window.ContentPlayer)}else window.PlayerView.setCurrentPlayer(window.ContentPlayer),Object(_.b)(l.a.UI.LOADING_INDICATOR),d()},f=function(){window.AdSession.abort(),i.warn("Ad aborted"),Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),c(),window.PlayerView.setCurrentPlayer(window.ContentPlayer)};"midroll"===o||window.BoltAdManager.sequentialPrerollAdRequested||(window.PlayerState.state=window.PlayerState.WAITING),n=e._currentCuepoint?e._currentCuepoint:"preroll"===o?-1:99999999999,"midroll"===o&&u&&(n=u);var E=function(){window.BoltAdManager.requestAd(o,n,function(){Object(_.f)(l.a.UI.AD_CONTAINER,"block","hidden"),window.BoltAdManager.addEventListener(l.a.Media.Event.LOADED,h),window.BoltAdManager.addEventListener(l.a.Media.Event.ENDED,v),window.BoltAdManager.addEventListener(l.a.Ad.Event.FAILED,y),window.BoltAdManager.addEventListener(l.a.Ad.Event.ABORTED,f),window.BoltAdManager.addEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,w)})};window.shouldSupportGDPR&&void 0===window.gdpr?(i.info("[Bolt4 Controller::_requestAd] querying GDPR"),window.MessageChannel.sendRequest("gdpr",function(e){i.info("[Bolt4 Controller::_requestAd] received GDPR value:",e),window.gdpr=e,E()})):E()}(this,{timing:e,loadedCallback:t,finishedCallback:n,vmapBreakTime:o})}},{key:"playPrerollAd",value:function(e,t){var n=this,a=window.ContentPlayer,o=window.BoltAdManager;if(window.AdBlockDetected&&window.AdBlocked.track("preroll"),window.CurrentVideoConfig.advertising.on||window.postLogMessage("Advertising is disabled for the current video","warn"),n._shouldRequestPreroll({contentPlayer:a,adMgr:o})){i.debug("[Bolt4 Controller] - playPrerollAd");var r=function(){},d=function(){if(o=window.BoltAdManager,i.info("[Bolt4 Controller] - Preroll finished callback"),window.PlayerSettings.adLoop)return i.info("[Bolt4 Controller] - Replaying preroll ads"),void l();if(o.prefetchEnabled){var t=window.CurrentVideoConfig.advertising.cuepoints||[];!window.DebugMode.noMidroll&&t.length>0&&o.prefetchAds("midroll")}window.client.isMobile?setTimeout(function(){"function"==typeof e?e():n.play()},500):"function"==typeof e?e():n.play()},l=function(){n._requestAd("preroll",r,d)};if(o.prefetchEnabled&&!t)i.info("[Bolt4 controller] prefetch preroll"),window.PlayerState.state=window.PlayerState.WAITING,o.prefetchAds("preroll",l);else{var u=!!window.DebugMode.delayedPreroll;Object(s.t)(o.selectedServer,"siteTags","delayedPreroll")&&(u=o.selectedServer.siteTags.delayedPreroll||window.DebugMode.delayedPreroll),i.info("[Bolt4 Controller] - Delayed Preroll ".concat(u?"Enabled":"Disabled")),u&&"precontent"!==window.PlayerSettings.playerType&&n.play(),l()}}else window.client.isMobile?setTimeout(function(){"function"==typeof e?e():n.play()},500):"function"==typeof e?e():n.play()}},{key:"_shouldRequestMidroll",value:function(e){var t=e.contentPlayer,n=void 0===t?window.ContentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i;return!window.DebugMode.noMidroll&&a&&window.CurrentVideoConfig.advertising.on&&(n.videoPlayCount-1)%n.videoAdRatio==0}},{key:"_playMidrollAd",value:function(e){var t=this,n=window.ContentPlayer,a=window.BoltAdManager;if(window.AdBlockDetected&&window.AdBlocked.track("midroll"),t._shouldRequestMidroll({contentPlayer:n,adMgr:a})){t._requestAd("midroll",function(){},function(){i.info("[Bolt4 Controller::_playMidrollAd] Midroll finished callback"),(window.CurrentVideoConfig.advertising.cuepoints||[]).length>0&&(a=window.BoltAdManager).prefetchEnabled&&(i.info("[Bolt4 Controller::_playMidrollAd] refill midroll pool"),a.prefetchAds("midroll",null,!0),(n=window.ContentPlayer).duration>45e3&&(i.info("[Bolt4 Controller::_playMidrollAd] refill overlay pool"),a.prefetchAds("overlay",null,!0))),t.resume()},e)}}},{key:"_adEnded",value:function(){var e=this;if(i.debug("[Bolt4 Controller::_adEnded]","video play count",window.ContentPlayer.videoPlayCount,"videoAdRatio",window.ContentPlayer.videoAdRatio),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&window.CurrentVideoConfig.advertising.on&&(window.ContentPlayer.videoPlayCount-1)%window.ContentPlayer.videoAdRatio==0){window.Playlist&&window.CurrentPlaylistIndex!==window.Playlist.length-1?e.playlistHelper.processPlaylist():(window.PlayerState.state=window.PlayerState.WAITING,function(){i.info("[Bolt4 Controller] Ad Ended finished callback");var t=!1;if(window.Playlist)e.playlistHelper.processPlaylist();else if(window.ContentPlayer.loop?t=!0:(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.video.webkitExitFullscreen(),window.ContentPlayer.show(!1)),i.debug("[Bolt4 Controller] replay after ad ended",t),t)var n=setTimeout(function(){clearTimeout(n),i.debug("[Bolt4 Controller] ad ended, auto replay"),e.playPrerollAd()},100);else window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}())}else window.Playlist?e.playlistHelper.processPlaylist():window.ContentPlayer.loop?e.play():window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}},{key:"_showHiddenContainer",value:function(){var e=window.PlayerSettings.hiddenContainer||window.PlayerSettings.postAdContainer;e&&(i.info("[Bolt4 Controller::showHiddenContainer] showing post content container",e),window.Zeus.dispatchEvent("showHiddenContainer",{hcId:e}))}},{key:"_setSize",value:function(e,t,n){window.PlayerView.size(t,n)}},{key:"play",value:function(){var e=window.PlayerView.currentPlayer;e&&(e.hasStarted&&e.paused?this.resume():e.ended?this.replay(e):(i.debug("[Bolt4 Controller::play]"),window.PlayerState.delayedWaitingState(500),"native"!==e.type&&"hls_xt"!==e.type||e.preload(),e.hlsLoading||e.play(),e.videoPlayCount++,window.Zeus.sessionVideoPlayCount++))}},{key:"pause",value:function(e){var t=this,n=window.PlayerView.currentPlayer;!n||n.isAd()&&!n.spotxScriptUrl||(i.debug("[Bolt4 Controller::pause]"),window.PlayerState.state=window.PlayerState.PAUSED,n.pause(),t.viewability.autoPaused=e,t.viewability.userDidPause||e||(t.viewability.userDidPause=!0))}},{key:"togglePlayPause",value:function(){var e=this;window.client.isMobile&&window.BoltAdManager&&!window.BoltAdManager.hasBeenTouched&&(i.debug("[Bolt4 Controller::togglePlayPause] touching ad video element"),window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.src="",window.BoltAdManager.videoElement.load()),window.BoltAdManager.hasBeenTouched=!0);var t=window.PlayerView.currentPlayer;if(t){if(i.debug("[Bolt4 Controller::togglePlayPause]",t,"hasStarted",t.hasStarted,"ended",t.ended,"paused",t.paused),window.client.isMobile&&!t.hasBeenTouched)try{t.touch()}catch(e){}t.hasStarted?t.paused?e.resume():e.pause():t.isAd()?e.play():e.playPrerollAd()}}},{key:"resume",value:function(){window.PlayerView.currentPlayer&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerView.currentPlayer.resume())}},{key:"stop",value:function(){window.PlayerView.currentPlayer&&!window.PlayerView.currentPlayer.isAd()&&window.PlayerView.currentPlayer.stop()}},{key:"setVolume",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.setVolume(e)}},{key:"mute",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.mute(e)}},{key:"updateViewabilityMetrics",value:function(e){this.viewability.update(e)}},{key:"_onVisibilityChange",value:function(){var e=this,t=window.PlayerView,n=window.PlayerState,a=t.currentPlayer;i.info("[Bolt4 Controller] Visibility State: ",document.visibilityState," Player State:",n.state," isAd:",a.isAd()),a.isAd()||n.state===n.START||("hidden"===document.visibilityState?e.paused||e.pause():n.state===n.PAUSED&&n.previousState===n.PLAYING?e.play():n.state===n.PAUSED&&e.pause())}},{key:"startUp",value:function(){var e=this,t=window.pageViews;window.BENCHMARK.end("bolt_coreJSLoaded_to_controllerStartUp"),i.debug("START UP",window.client.isMobile?"MOBILE":"DESKTOP");var n=window.PlayerSettings.skips||0;if(e._prerollEnabled=t>n,e._prerollEnabled||window.postLogMessage("Preroll is disabled because the video has been viewed more than ".concat(n," times"),"warn"),i.info("pageviews",t,"to skip",n),window.PlayerSettings.pageviewForAds){for(var a=window.PlayerSettings.pageviewForAds.split(","),o=0;o<a.length;o++)a[o]=parseInt(a[o],10);i.info("viewsForAds",a),e._prerollEnabled=a.indexOf(t)>-1}i.debug("preroll enabled",e._prerollEnabled),e._prerollEnabled||"precontent"!==window.PlayerSettings.playerType?(void 0!==document.visibilityState&&document.addEventListener("visibilitychange",function(){e._onVisibilityChange()},!1),window.PlayerView.addEventListener(l.a.Player.Event.VIEW_READY,function(){window.client.showHideIframe&&window.Zeus.dispatchEvent("showiframe"),window.CurrentVideoConfig.settings.minAge>0?(window.PlayerState.state=window.PlayerState.AGE_GATE,window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,function(){i.debug("Controller::age gate passed"),e._doStartUp()})):(i.debug("Controller::no age gate"),e._doStartUp())}),!0===window.PlayerSettings.adOnly?window.PlayerView.init(!1):window.PlayerView.init(window.CurrentVideoConfig.settings.minAge>0)):e._showHiddenContainer()}}])&&I(t.prototype,o),r&&I(t,r),e}(),V=n(25);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U,G=window.BENCHMARK,H=function(e){function t(e){var n,i,a,o,r,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=D(t).call(this),n=!a||"object"!==k(a)&&"function"!=typeof a?R(i):a,o=R(n),d=420,(r="TINY_PLAYER_MAX_WIDTH")in o?Object.defineProperty(o,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[r]=d;var l=R(n);return n._handleIOSFullscreenEvents=n._handleIOSFullscreenEvents.bind(R(n)),n.cssClass=e,n._isReady=!1,n.mouseInput=null,n._playlistMenu=null,n._volumeControl=null,n._subtitleMenu=null,n._sharingMenu=null,n._relatedVideoMenu=null,n._content=null,n._prerollScreen=null,n._uiModules=[],n._ageGateHandler=null,n._watermark=null,n._coreModules=["_controlbar","_scrubber"],window.client.isMobile||(n._coreModules.push("_volumeControl"),n._coreModules.push("mouseInput")),n._defaultBoxModel=null,n.fullscreen=!1,n.currentPlayer=null,n._enableAgeGate=!1,window.addEventListener("resize",function(){window.PlayerSettings.tinyPlayer=!1,window.innerWidth<=n.TINY_PLAYER_MAX_WIDTH&&(window.PlayerSettings.tinyPlayer=!0);var e=setTimeout(function(){clearTimeout(e),l.invalidate()},400)}),n.fixedControlbar=!1,n.fixedTitlebar=!1,n.fixedScrubber=!1,n.fixedBottomBar=!1,n}var o,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,u["a"]),o=t,(r=[{key:"enableAgeGate",value:function(e){var t=this;window.PlayerSettings.preview&&(e?t.currentPlayer&&t.currentPlayer.playing&&t.currentPlayer.pause():window.PlayerState.state=window.PlayerState.START),e?(i.info("Enable age-gate"),t._ageGateHandler?(t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie()):V.a.buildAgeGate(function(e){t._ageGateHandler=e,t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,function(e){i.debug("AGE GATE PASSED"),t._dispatchEvent(e.type,e.data)}),t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,function(e){i.debug("AGE GATE FAILED"),t._dispatchEvent(e.type)}),t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie(),t._uiModules.push(t._ageGateHandler)})):(i.info("Disable age-gate"),t._ageGateHandler?t._ageGateHandler.close():Object(_.b)(l.a.UI.AGE_GATE_LAYER),t._dispatchEvent(l.a.UI.Event.AGE_GATE_PASSED))}},{key:"buildCaptionMenu",value:function(e){var t=this,n=window.Skin,o=t._subtitleMenu;i.info("build caption menu"),Object(_.a)(l.a.UI.SUBTITLE_MENU)&&!window.client.system.iphone&&e&&e.length>0?(Object(a.d)(n,"bolt-subtitle-disabled"),Object(a.a)(n,"bolt-subtitle-enabled"),o?o.init(e):(i.info("build caption menu"),V.a.buildSubtitles(function(e){o=e,t._uiModules.push(o),t._subtitleMenu=o,o.init()},e))):(Object(a.d)(n,"bolt-subtitle-enabled"),Object(a.a)(n,"bolt-subtitle-disabled"))}},{key:"buildPlaylistMenu",value:function(e){var t=this,n=l.a.UI;e&&e.length>0&&Object(_.a)(n.PLAYLIST)&&(t._playlistMenu?t._playlistMenu.init(e):V.a.buildPlaylist(function(e){t._playlistMenu=e,t._playlistMenu.addEventListener(l.a.UI.Event.PLAYLIST_ITEM_SELECTED,function(e){i.debug(e),t._dispatchEvent(e.type,e.data)}),t._uiModules.push(t._playlistMenu)},e))}},{key:"showRelatedVideosMenu",value:function(){null!==this._relatedVideoMenu&&this._relatedVideoMenu.open()}},{key:"setRelatedVideos",value:function(e){var t=this;e?t._relatedVideoMenu?t._relatedVideoMenu.init(e):V.a.buildRelatedVideos(function(e){t._relatedVideoMenu=e,t._relatedVideoMenu.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,function(e){t._dispatchEvent(e.type,e.data)}),t._uiModules.push(t._relatedVideoMenu)},e):t._relatedVideoMenu&&t._relatedVideoMenu.close()}},{key:"setRelatedVideosFetched",value:function(e){this._relatedVideosFetched=e}},{key:"isRelatedVideoListFetched",value:function(){return this._relatedVideosFetched}},{key:"enableControls",value:function(){}},{key:"toggleFullscreen",value:function(){i.debug("[Bolt4 View::toggleFullscreen] current fullscreen",this.fullscreen),this.setFullscreen(!this.fullscreen)}},{key:"setFullscreen",value:function(e){i.debug("[Bolt4 View::setFullscreen] ",e);var t=this;if(!1!==window.PlayerSettings.fullscreen)if(this.fullscreenRequested=e,window.client.system.ios){if(!t.currentPlayer)return;!1===e?t.currentPlayer.video.webkitExitFullscreen():t.currentPlayer.video.webkitEnterFullscreen()}else window.fullscreenEnabled&&(!1===e?(i.info("[Bolt4 View] fullscreenRequested flag reset"),window.exitFullscreen()):(i.info("[Bolt4 View] fullscreenRequested flag reset"),window.enterFullscreen())),t._dispatchEvent(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,!t.fullscreen);else i.debug("ZeusView:: Fullscreen is not allowed by the publisher")}},{key:"_handleIOSFullscreenEvents",value:function(e){i.info("[Bolt4 View::handleIOSFullscreenEvent] event",e.type),"webkitendfullscreen"===e.type?this.fullscreen=!1:(this.fullscreen=!0,this.fullscreenRequested=!1),this._dispatchEvent(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,this.fullscreen)}},{key:"drawCuepoints",value:function(){var e=window.ContentPlayer,t=e.adsCuepoints,n=l.a.UI,a=Object(_.a)(n.AD_CUEPOINTS_CONTAINER);if(a)if(this.clearCuepoints(),e.duration<=0)i.debug("player duration <0, cannot draw cuepoints",t);else{i.debug("draw valid cuepoints",t);for(var o=0;o<t.length;o++){var r=t[o],d="".concat(100*r/e.duration,"%");i.debug("drawCuepoints",e.duration,r,d);var s='<svg data-bolt-ui="cuepoint" class="bolt-foreground bolt-cuepoint  cp_'.concat(r,'" style="left:').concat(d,'" width="512px" height="512px" viewbox="0 0 512 512" xml:space="preserve">')+'<circle cx="256" cy="256" r="256" /></svg>';a.insertAdjacentHTML("beforeend",s)}}}},{key:"clearCuepoints",value:function(){var e=l.a.UI,t=Object(_.a)(e.AD_CUEPOINTS_CONTAINER);if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"setCurrentPlayer",value:function(e){var t=l.a.UI,n=this;if(e!==n.currentPlayer){i.debug("setCurrentPlayer ",e),n.currentPlayer&&(n.currentPlayer.removeEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MUTED,n._onMuted),n.currentPlayer.removeEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n.currentPlayer.removeEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),n.currentPlayer.removeEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.removeEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.removeEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents))),n._handlePlayerEvents=n._handlePlayerEvents.bind(this),e.addEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n._onMuted=n._onMuted.bind(this),e.addEventListener(l.a.Media.Event.MUTED,n._onMuted),n._onUnmuted=n._onUnmuted.bind(this),e.addEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n._onVolumeChanged=n._onVolumeChanged.bind(this),e.addEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),e.addEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents);var o=window.BoltAdManager;e.isAd()?(Object(a.a)(document.body,"bolt-linear-ad-on"),Object(a.d)(document.body,"bolt-content-on"),Object(_.b)(t.TITLE_BAR),Object(_.b)(t.SUBTITLE_TEXT),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e),n.fixedControlbar=o.type===l.a.Ad.Type.FLASH_VPAID):window.PlayerSettings.adOnly||(Object(a.a)(document.body,"bolt-content-on"),Object(a.d)(document.body,"bolt-linear-ad-on"),e.addEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),Object(_.b)(t.AD_CONTAINER),n.buildCaptionMenu(window.CurrentVideoConfig.content.captions),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e),n.drawCuepoints(),n.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide),window.client.isMobile?e.mute(window.PlayerSettings.automute):(window.PlayerSettings.automute?e.setVolume(0):e.setVolume(window.PlayerSettings.volume||1),e.mute(window.PlayerSettings.automute)),n.currentPlayer=e,window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.addEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.addEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents)),n._isReady?(n._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),n.invalidate()):n._waitForCoreModules()}else i.debug("setCurrentPlayer:: not a new player. return")}},{key:"_waitForCoreModules",value:function(){var e=this;i.debug("CORE MODULES",e._coreModules),U||(U=setInterval(function(){if(e._coreModules.every(function(t){return i.debug("WAITING FOR MODULE",t),!!e[t]})){clearInterval(U),e._isReady=!0,i.info("view is ready"),window.Skin.style.visibility="visible",i.info("update appearance manager"),e.appearanceManager.updateColors(),e.appearanceManager.updateTextColors(),i.info("update modules appearance");for(var t=0;t<e._uiModules.length;t++){e._uiModules[t].updateAppearance()}e._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),e.invalidate(),e._dispatchEvent(l.a.Player.Event.VIEW_READY),e.enableAgeGate(e._enableAgeGate)}},100))}},{key:"_handlePlayerEvents",value:function(e){var t=this,n=e.target,o=l.a.UI;if(e.type===l.a.Player.Event.CONFIG_CHANGED){var r=window.CurrentVideoConfig;i.debug("PlayerView::Player config changed",r,n.config),r.settings.minAge>0?(i.debug("AGE GATED!",r),t.enableAgeGate(!0)):t.enableAgeGate(!1),t.buildCaptionMenu(r.content.captions),Object.keys(r.content.media).length>1?(Object(a.d)(window.Skin,"bolt-hd-disabled"),Object(a.a)(window.Skin,"bolt-hd-enabled")):(i.debug("showOrHideHDButton hide settings button"),Object(a.d)(window.Skin,"bolt-hd-enabled"),Object(a.a)(window.Skin,"bolt-hd-disabled")),Object(_.b)(o.ERROR_CONTAINER)}else e.type===l.a.Media.Event.PLAY?(i.debug("PlayerView::handlePlayerEvent",e.type,n.getSource()),n.isAd()||G.start("bolt_contentPlayRequested_to_contentPlaying"),t.invalidate()):e.type===l.a.Media.Event.PLAYING?(i.debug("PlayerView::handlePlayerEvent",e.type,n.getSource()),n.isAd()||G.end("bolt_contentPlayRequested_to_contentPlaying")):e.type===l.a.Media.Event.PAUSED?i.debug("PlayerView::PAUSED",n.getSource()):e.type===l.a.Media.Event.RESUME?(i.debug("PlayerView::RESUME",n.getSource()),n.isAd()||window.client.isMobile&&window.ContentPlayer.show(!0)):e.type===l.a.Media.Event.STOPPED?i.debug("PlayerView::STOPPED",n.getSource()):e.type===l.a.Media.Event.DURATION_CHANGE?i.debug("PlayerView::duration change",n.duration,n.getSource()):e.type===l.a.Media.Event.WAITING?i.debug("PlayerView::WAITING",n.getSource()):e.type===l.a.Media.Event.LOAD_PROGRESS||e.type===l.a.Media.Event.TIME_UPDATE||(e.type===l.a.Media.Event.ENDED?n.isAd()?i.info("VIEW::ENDED Ad"):i.info("VIEW::ENDED",n.getSource()):e.type===l.a.Media.Event.START_TIME_CHANGED?i.debug("PlayerView::START_TIME_CHANGED",n.getSource()):e.type===l.a.Player.Event.CONTENT_CHANGED||e.type===l.a.Media.Event.NOT_FOUND||e.type===l.a.Media.Event.NOT_SUPPORTED&&(n.isAd()||t.showError("Flash Player 11+ is required to view this content.")));t._dispatchEvent(e)}},{key:"showError",value:function(e){Object(_.f)(l.a.UI.ERROR_CONTAINER);var t=Object(_.a)(l.a.UI.ERROR_CONTAINER);t&&(t.firstElementChild.textContent=e);Object(_.b)(l.a.UI.LOADING_INDICATOR)}},{key:"init",value:function(e){var t=l.a.UI,o=this;i.debug("VIEW::init",window.ContentPlayer,"ageGateEnabled",e);var r=window.Skin;r.style.width="100%",r.style.height="100%",o.cssClass&&Object(a.a)(window.Skin,o.cssClass),Object(a.g)(),Object(a.e)(),o._coreModules.push("appearanceManager"),V.a.buildAppearanceManager(function(e){o.appearanceManager=e}),!1===window.PlayerSettings.branding&&Object(_.d)(t.BRANDING),!1===window.PlayerSettings.bigButton?Object(_.d)(l.a.UI.BIG_PLAY):Object(_.a)(t.BIG_PLAY)&&(o._coreModules.push("_prerollScreen"),o._buildPrerollScreen()),!1===window.PlayerSettings.fullscreen&&(i.info("Fullscreen disabled"),Object(_.d)(t.FULLSCREEN_BTN)),window.PlayerSettings.adOnly?(Object(_.d)(t.SHARING_BTN),Object(_.d)(t.PLAYLIST_BTN),Object(_.d)(t.SETTINGS_BTN),Object(_.d)(t.SUBTITLE_BTN),Object(_.d)(t.TITLE_BAR),o.fixedControlbar=!0,Object(a.a)(window.document.body,"bolt-linear-ad-on")):(window.Playlist?o.buildPlaylistMenu(window.Playlist):Object(_.d)(l.a.UI.PLAYLIST_BTN),i.debug("agegate",e),o._enableAgeGate=e,o.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide,i.info("Fixed controlbar",o.fixedControlbar),o._coreModules.push("_loadingIndicator"),V.a.buildLoadingIndicator(function(e){o._loadingIndicator=e,o._uiModules.push(e)})),window.client.isMobile?(o._buildVolumeControl(),Object(a.a)(document.body,"bolt-touch-input")):(o._buildVolumeControl(),n.e(30).then(n.bind(null,49)).then(function(e){var t=e.default;i.debug("LOAD MOUSE INPUT"),o.mouseInput=new t,o.mouseInput.on(l.a.UI.Event.MOUSE_OUT,function(){o.onMouseOut(window.Skin)}),o.mouseInput.on(l.a.UI.Event.MOUSE_OVER,function(){o.onMouseOver(window.Skin)}),i.info("mouse input ready")})),o._defaultBoxModel={width:r.style.width,height:r.style.height,marginTop:r.style.marginTop,marginLeft:r.style.marginLeft,marginBottom:r.style.marginBottom,marginRight:r.style.marginRight,paddingTop:r.style.paddingTop,paddingLeft:r.style.paddingLeft,paddingBottom:r.style.paddingBottom,paddingRight:r.style.paddingRight,zIndex:r.style.zIndex,position:r.style.position,top:r.style.top,right:r.style.right,bottom:r.style.bottom,left:r.style.left},o._buildContent(),o._buildControlBar(),o._buildScrubber(),o._buildWatermark(),o.setCurrentPlayer(window.ContentPlayer)}},{key:"_buildContent",value:function(){var e=this;V.a.buildContent(function(t){e._uiModules.push(t),e._content=t,i.info("content ready",e._content)})}},{key:"_buildVolumeControl",value:function(){var e=this;e._volumeControl||V.a.buildVolume(function(t){e._uiModules.push(t),e._volumeControl=t,e._volumeControl.addEventListener(l.a.VALUE_CHANGED,function(t){e._dispatchEvent(l.a.UI.Event.CHANGE_VOLUME,t.data)}),i.info("Volume ready")})}},{key:"_buildScrubber",value:function(){var e=this;e._scrubber||V.a.buildScrubber(function(t){e._uiModules.push(t),e._scrubber=t,e._scrubber.on(l.a.UI.Event.SEEK,function(t){i.info("[Bolt4 ZeusView/_scrubber] on seek",t),e._dispatchEvent(t)}),i.info("scrubber ready")})}},{key:"_buildControlBar",value:function(){var e=this;e._controlbar||V.a.buildControlBar(function(t){e._uiModules.push(t),e._controlbar=t,i.info("Controlbar ready")})}},{key:"_buildTitleBar",value:function(){var e=this;e._titleBar||V.a.buildTitleBar(function(t){e._uiModules.push(t),e._titleBar=t,i.info("Titlebar ready")})}},{key:"_buildPrerollScreen",value:function(){var e=this;e._prerollScreen||V.a.buildPrerollScreen(function(t){e._uiModules.push(t),e._prerollScreen=t,i.info("Preroll screen ready")})}},{key:"_isEnabled",value:function(e){return!Object(a.b)(e,l.a.UI.UI_DISABLED_CLASS)}},{key:"_buildWatermark",value:function(){var e=this;V.a.buildWatermark(function(t){e._watermark=t,e._uiModules.push(e._watermark)})}},{key:"_getModuleForElement",value:function(e){for(var t=0;t<this._uiModules.length;t++){var n=this._uiModules[t];if(n.UI===e)return n}return null}},{key:"size",value:function(e,t){var n=this,i=e,a=t;-1===e.indexOf("%")&&-1===e.indexOf("px")&&(i="".concat(e,"px")),-1===t.indexOf("%")&&-1===t.indexOf("px")&&(a="".concat(t,"px")),n._defaultBoxModel.width=i,n._defaultBoxModel.height=a,n.invalidate()}},{key:"onMouseOver",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-out"),Object(a.a)(window.Skin,"bolt-mouse-over"),this._dispatchEvent(l.a.UI.Event.MOUSE_OVER,null,e)}},{key:"onMouseOut",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-over"),Object(a.a)(window.Skin,"bolt-mouse-out"),this._dispatchEvent(l.a.UI.Event.MOUSE_OUT,null,e)}},{key:"invalidate",value:function(e){var t=this,n=t._uiModules;e&&(e.fullscreen!==t.fullscreen&&(t.fullscreen=e.fullscreen,t.mouseInput&&t.mouseInput.setFullscreen(t.fullscreen),i.debug("[Bolt4 View::invalidate] fullscreen changed to ",t.fullscreen),t._controlbar.open()),e.customizer&&t.appearanceManager.update(e.customizer)),t.fixedScrubber?Object(a.a)(window.Skin,"bolt-static-scrubber"):Object(a.d)(window.Skin,"bolt-static-scrubber"),t.fixedControlbar?(t._controlbar.open(),Object(a.a)(window.Skin,"bolt-static-control-bar")):Object(a.d)(window.Skin,"bolt-static-control-bar"),t.currentPlayer&&t.currentPlayer.setFullscreen(t.fullscreen);for(var o=0;o<n.length;o++){n[o].invalidate()}!0===t._isReady&&(window.client.browser.ie>0&&window.client.browser.ie<12?(t._controlbar.open(),t._titleBar&&t._titleBar.open()):window.Skin.style.visibility="visible"),Object(a.f)(window.Skin.clientWidth)}},{key:"_onVolumeChanged",value:function(e){i.info("volume changed",e),void 0!==e.data?this._dispatchEvent(e.type,e.data):i.warn("No volume data")}},{key:"_onMuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-disabled"),Object(a.a)(window.Skin,"bolt-automute-enabled"),this._dispatchEvent(e.type)}},{key:"_onUnmuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-enabled"),Object(a.a)(window.Skin,"bolt-automute-disabled"),this._dispatchEvent(e.type)}},{key:"getAppearanceSettings",value:function(){this.appearanceManager.getInitialSettings()}}])&&B(o.prototype,r),d&&B(o,d),t}(),F=n(27),j=function(e){var t,n=window.zeus_ga.label,i=window.zeus_ga.category,a=window.CurrentVideoConfig.content.videoId||0,o=Object(s.f)(),r="[videoId=".concat(a,"']");return e&&"function"==typeof e.isAd&&(t=e.isAd()?"".concat(n.ad," ").concat(r):"".concat(n.content," ").concat(r)),{gaCategory:i,gaLabel:n,videoId:a,publisherId:o,labelSuffix:r,selectedGALabel:t}},x=function(e){var t=window.PlayerView.currentPlayer;e.type!==l.a.Media.Event.TIME_UPDATE&&i.info("Zeus::handleViewEvents",e.type,"current player",t?t.containerId:null),e.type===l.a.Player.Event.LOADED?q(e):e.type===l.a.Media.Event.METADATA?W(e):e.type===l.a.Media.Event.PLAY?Q(e):e.type===l.a.Media.Event.PLAYING?Y(e):e.type===l.a.Media.Event.STOPPED?Z(e):e.type===l.a.Media.Event.PAUSED?z(e):e.type===l.a.Media.Event.RESUME?J(e):e.type===l.a.Media.Event.ENDED?K(e):e.type===l.a.Ad.Event.CUEPOINT?X(e):e.type===l.a.Ad.Event.FAILED?$(e):e.type===l.a.Media.Event.FIRSTQUARTILE?ee(e):e.type===l.a.Media.Event.MIDPOINT?te(e):e.type===l.a.Media.Event.THIRDQUARTILE?ne(e):e.type===l.a.Media.Event.NOT_FOUND?ie(e):e.type===l.a.Player.Event.CONFIG_NOT_FOUND?ae(e):e.type===l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE?oe(e):e.type===l.a.UI.Event.AGE_GATE_PASSED?re(e):e.type===l.a.UI.Event.AGE_GATE_FAILED?de(e):e.type===l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED?le(e):e.type===l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED?se(e):e.type===l.a.Media.Event.VOLUME_CHANGED?ue(e):e.type===l.a.Media.Event.TIME_UPDATE?ce(e):e.type===l.a.Player.Event.CONFIG_CHANGED&&we(e)},q=function(e){window.Bolt.dispatchEvent("playerLoaded",e.data)},W=function(){window.Bolt.dispatchEvent(window.Bolt.BOLT_CONTENT_STATE_CHANGED,{state:"ready"})},Q=function(e){var t=window.Bolt,n=e.target,a=j(n),o=a.videoId,r=a.publisherId,d=a.gaCategory,l=a.selectedGALabel;if(n.isAd()){var u,c,w;i.info("AD STARTED",window.id),window.postLogMessage("Ad starts"),"precontent"===window.PlayerSettings.playerType&&t.dispatchEvent(t.SET_IFRAME_VISIBILITY,{visibilityVal:"visible"});try{c=(w=window.BoltAdManager.ad.linear).tracking.events.click,u=Object(s.z)(w.clickThrough)}catch(e){}t.dispatchEvent(t.BOLT_AD_STARTED,{videoId:o,publisherId:r,linear:window.BoltAdManager.isLinear(),click_url:u,click_trackers:c}),t.dispatchAnalyticsEvent(t.BOLT_AD_STARTED,d.state,l),window.BoltAdManager.selectedVMAPBreak&&setTimeout(function(){window.BoltAdManager.trackVMAPEvent("breakStart")},100)}else t.dispatchEvent(t.BOLT_CONTENT_STARTED,{videoId:o,publisherId:r,title:window.CurrentVideoConfig.settings.title,duration:window.CurrentVideoConfig.duration}),window.postLogMessage("Content starts"),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_STARTED,d.state,l)},Y=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;window.videoConfigChanged=!1,n.isAd()||t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"playing"}),t.dispatchAnalyticsEvent("playing",a.state,o)},Z=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"stopped"}),t.dispatchAnalyticsEvent("stopped",a.state,o))},z=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(window.postLogMessage("Content is paused"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"paused"}),t.dispatchAnalyticsEvent("paused",a.state,o))},J=function(e){var t=window.Bolt,n=e.target,a=j(n),o=a.gaCategory,r=a.selectedGALabel;i.debug("Zeus::RESUME"),n.isAd()||(window.postLogMessage("Content is resumed"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"resume"}),t.dispatchAnalyticsEvent("resume",o.state,r))},K=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel,r=i.videoId,d=i.publisherId;n.isAd()?(window.postLogMessage("Ad ends"),t.dispatchEvent(t.BOLT_AD_COMPLETE,{videoId:r,publisherId:d}),t.dispatchAnalyticsEvent(t.BOLT_AD_COMPLETE,a.state,o)):(window.postLogMessage("Content ends"),t.dispatchEvent(t.BOLT_CONTENT_COMPLETE,{videoId:r,publisherId:d}),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_COMPLETE,a.state,o))},X=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;window.postLogMessage("Cuepoint at ".concat(e.data," seconds is hit")),t.dispatchEvent(t.BOLT_AD_CUEPOINT,{cuepoint:e.data}),t.dispatchAnalyticsEvent(t.BOLT_AD_CUEPOINT,a.state,o,e.data)},$=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.videoId,o=i.publisherId,r=i.gaCategory;window.postLogMessage("".concat(e.data.timing," Ad error"),"error"),(window.CurrentVideoConfig.settings.hiddenContainer||window.CurrentVideoConfig.settings.postAdContainer)&&t.dispatchEvent(t.PRE_CONTENT_AD_ERROR,{state:"noAdsAvailable"}),t.dispatchEvent(t.BOLT_AD_ERROR,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent("boltAdRequestFailed",r.state,"zeus ".concat(e.data.timing))},ee=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,l=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(l," reached first quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_FIRST_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_FIRST_QUARTILE,r.state,d)},te=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,l=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(l," reached midpoint")),n.isAd()&&t.dispatchEvent(t.BOLT_MIDPOINT,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_MIDPOINT,r.state,d)},ne=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,l=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(l," reached third quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_THIRD_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_THIRD_QUARTILE,r.state,d)},ie=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltContentNotFound",a.state,o)},ae=function(e){var t=window.Bolt,n=e.target,i=j(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltConfigNotFound",a.state,o)},oe=function(e){window.Bolt.dispatchEvent(e.type,e.data)},re=function(e){var t=window.Bolt;i.info("age gate",e),window.CurrentVideoConfig.settings.minAge>0&&(i.info("age gate",e),t.dispatchEvent(t.BOLT_AGE_GATE_PASSED,e.data))},de=function(e){var t=window.Bolt;i.info("age gate failed",e),t.dispatchEvent(t.BOLT_AGE_GATE_FAILED)},le=function(e){window.Bolt.dispatchEvent(e.type,e.data)},se=function(e){window.Bolt.dispatchEvent(e.type,e.data)},ue=function(e){var t=window.Bolt;i.info("volume changed",e),t.dispatchEvent(t.BOLT_VOLUME_CHANGED,e.data)},ce=function(e){var t=window.Bolt;t.dispatchEvent(t.BOLT_TIME_CHANGED,e.data)},we=function(){window.Bolt.dispatchEvent("videoConfigChanged",window.CurrentVideoConfig)};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return fe});var fe=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,"BOLT_CONTENT_STARTED","boltContentStarted"),ye(this,"BOLT_CONTENT_COMPLETE","boltContentComplete"),ye(this,"BOLT_CONTENT_ERROR","boltContentError"),ye(this,"BOLT_CONTENT_STATE_CHANGED","boltContentStateChanged"),ye(this,"BOLT_TOGGLE_FULLSCREEN","boltToggleFullscreen"),ye(this,"BOLT_FIRST_QUARTILE","boltFirstQuartile"),ye(this,"BOLT_MIDPOINT","boltMidPoint"),ye(this,"BOLT_THIRD_QUARTILE","boltThirdQuartile"),ye(this,"BOLT_AD_STARTED","boltAdStarted"),ye(this,"BOLT_AD_IMPRESSION","boltAdImpression"),ye(this,"BOLT_AD_VIDEO_START","boltAdVideoStart"),ye(this,"BOLT_AD_PLAYING","boltAdPlaying"),ye(this,"BOLT_AD_PAUSED","boltAdPaused"),ye(this,"BOLT_AD_COMPLETE","boltAdComplete"),ye(this,"BOLT_AD_ERROR","boltAdError"),ye(this,"BOLT_AGE_GATE_PASSED","boltAgeGatePassed"),ye(this,"BOLT_AGE_GATE_FAILED","boltAgeGateFailed"),ye(this,"BOLT_VOLUME_CHANGED","boltVolumeChanged"),ye(this,"BOLT_AD_CUEPOINT","boltAdCuepoint"),ye(this,"BOLT_TIME_CHANGED","boltTimeChanged"),ye(this,"SET_IFRAME_VISIBILITY","boltSetIframeVisibility"),ye(this,"PRE_CONTENT_AD_ERROR","noAdsAvailable"),ye(this,"sessionVideoPlayCount",1),ye(this,"embeds",void 0),ye(this,"FlashShim",void 0),ye(this,"Video",void 0),ye(this,"onMediaConfigProcessed",function(e){var n=t;n.PWBM.end("bolt_coreJSLoaded_to_manifestParsed");var a=window.PlayerSettings,o=a.skin||n._defaultSkin,r=a.css||n._defaultCss,d=a.cssClass;void 0!==window.CurrentVideoConfig.content.media.f4m?(i.debug("processed media",e),e&&(window.CurrentVideoConfig.content.media=e)):window.CurrentVideoConfig.content.media=e;var s=l.a.Player.ID_PREFIX+window.id;i.debug("media data",window.CurrentVideoConfig.content.media),n._renderVideo(s,o,r,d)}),ye(this,"processCustomEmbedTags",function(){if(window.PlayerSettings.adTag||window.PlayerSettings.desktopAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.vmapAdTag){window.PlayerSettings.embedAds={servers:[{type:null,tags:{default:{standard:{},html5:{}}}}]};var e=window.PlayerSettings.embedAds.servers[0],t=function(e){return"mobile"===e?window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.adTag:"flash"===e?window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.desktopAdTag||window.PlayerSettings.adTag:"desktop"===e&&(window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.adTag),window.DebugMode.on&&i.info("[Zeus Iframe] - Embed ".concat(e," ad tag"),window.PlayerSettings.adTag),window.PlayerSettings.vmapAdTag?{vmap:window.PlayerSettings.adTag}:{preroll:window.PlayerSettings.adTag,midroll:window.PlayerSettings.adTag}};window.client.isMobile?e.tags.default.html5.mobile=t("mobile"):window.client.hasFlash?e.tags.default.standard=t("flash"):e.tags.default.html5.desktop=t("desktop"),e.type=(n=window.PlayerSettings.adTag,/g.doubleclick/.test(n)?"generic-google":"generic-vast"),i.info("Embed ad settings",window.PlayerSettings.embedAds)}var n});var n=this;n.PWBM=window.BENCHMARK,n.PWBM.end("bolt_bootCall_to_iframeScriptLoaded"),n.PWBM.start("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_zeusAvailable"),n.PWBM.start("bolt_coreJSLoaded_to_renderPlayerCall"),n.PWBM.start("bolt_coreJSLoaded_to_initVideoCall"),n.PWBM.start("bolt_coreJSLoaded_to_initAdsCall"),n.PWBM.start("bolt_coreJSLoaded_to_manifestRequested"),n.PWBM.start("bolt_coreJSLoaded_to_manifestLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_manifestParsed"),n.PWBM.start("bolt_coreJSLoaded_to_controllerStartUp"),n.PWBM.start("bolt_coreJSLoaded_to_skinRequested"),window.PlayerState=new d,n.controller=new L,n._isFullscreen=!1,n.playerRendered=!1,n._baseUrl=window.zeusBaseUrl,n._swfUrl="".concat(n._baseUrl,"/swf/zeusplayer-9298ef2f7b.swf"),n._defaultSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultAdSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultCss="".concat(n._baseUrl,"/skins/pegasus.css"),n._dispatchTrackingEvent=n._dispatchTrackingEvent.bind(n),n.dispatchEvent=n.dispatchEvent.bind(n),n.dispatchAnalyticsEvent=n.dispatchAnalyticsEvent.bind(n),n._onAdRequested=n._onAdRequested.bind(n),n._onAdQueued=n._onAdQueued.bind(n),n.renderPlayer=n.renderPlayer.bind(n),n.setBaseUrl=n.setBaseUrl.bind(n),n.getBaseUrl=n.getBaseUrl.bind(n),n.getCSSUrl=n.getCSSUrl.bind(n),n.getSWFUrl=n.getSWFUrl.bind(n),n.initVideo=n.initVideo.bind(n),n.playMedia=n.playMedia.bind(n),n.replayMedia=n.replayMedia.bind(n),n.closeVideo=n.closeVideo.bind(n),n.pauseMedia=n.pauseMedia.bind(n),n.togglePlay=n.togglePlay.bind(n),n.stopMedia=n.stopMedia.bind(n),n.setVolume=n.setVolume.bind(n),n.getVolume=n.getVolume.bind(n),n.muteMedia=n.muteMedia.bind(n),n.unmuteMedia=n.unmuteMedia.bind(n),n.seek=n.seek.bind(n),n.updateViewabilityMetrics=n.updateViewabilityMetrics.bind(n),n.PWBM.end("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.end("bolt_coreJSLoaded_to_zeusAvailable"),n.init()}var t,o,r;return t=e,(o=[{key:"init",value:function(){}},{key:"setBaseUrl",value:function(e){this._baseUrl=e,l.a.Player.getSWFRoot=function(){return"".concat(this._baseUrl,"/frame/swf")},this._swfUrl="".concat(this._baseUrl,"/frame/swf/zeusplayer-9298ef2f7b.swf"),this._defaultSkin="pegasus.html",this._defaultAdSkin="pegasus.html",this._defaultCss="pegasus.css"}},{key:"getBaseUrl",value:function(){return this._baseUrl}},{key:"renderPlayer",value:function(){var e=this;if(!e.playerRendered){e.PWBM.end("bolt_coreJSLoaded_to_renderPlayerCall"),e.playerRendered=!0,window.CurrentVideoConfig.settings=Object(s.r)(window.CurrentVideoConfig.settings,window.PlayerSettings),i.info("Player settings",window.PlayerSettings);var t,a=function(t){if(void 0===t.disabled)e.initVideo();else{var n=document.body;if(void 0!==t.disabled.image&&(n.style.backgroundImage="url('".concat(t.disabled.image,"')")),void 0!==t.disabled.message){var i=document.createElement("div");i.id="disabled-msg",i.innerHTML=t.disabled.message,i.style.fontSize="24px",i.style.backgroundColor="#ffffff",i.style.border="1px solid #000000",i.style.padding="5px",i.style.position="relative",i.style.top="40%",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="center",n.appendChild(i)}}};if(window.client.isMobile)a(window.CurrentVideoConfig);else if(null===window.client.hasFlash){var o=window.client.browser.ie>0;if("amp"===window.site.hostapp||"precontent"===window.PlayerSettings.playerType&&o)return window.client.hasFlash=!1,e.dispatchEvent("flashdetection",null),void a(window.CurrentVideoConfig);(t=Object(s.f)())&&"1020945"===t.toString()?(e.PWBM.start("bolt_legacyFlashDetection"),n.e(6).then(n.bind(null,39)).then(function(t){var n=t.default;i.info("[Zeus Iframe] - Using flash_detector_legacy (Overwolf)"),n(function(t){window.DebugMode.noFlash&&(t=null),e.PWBM.end("bolt_legacyFlashDetection"),window.client.hasFlash=!!t,e.dispatchEvent("flashdetection",{version:t}),a(window.CurrentVideoConfig)})})):(e.PWBM.start("bolt_flashDetection"),n.e(6).then(n.bind(null,40)).then(function(t){var n=t.default;i.info("[Zeus Iframe] - Using standard flash_detector"),n(function(t){window.DebugMode.noFlash&&(t=null),e.PWBM.end("bolt_flashDetection"),window.client.hasFlash=!!t,e.dispatchEvent("flashdetection",{version:t}),a(window.CurrentVideoConfig)})}))}else a(window.CurrentVideoConfig)}}},{key:"initVideo",value:function(){this.PWBM.end("bolt_coreJSLoaded_to_initVideoCall");var e=window.PlayerSettings;!window.client.isMobile&&window.client.hasFlash&&e.forceFlash&&window.client.supportedVideoTypes.indexOf("m3u8")>-1&&window.client.supportedVideoTypes.splice(window.client.supportedVideoTypes.indexOf("m3u8"),1),Object(s.u)(window.CurrentVideoConfig.content.media,this.onMediaConfigProcessed)}},{key:"_renderVideo",value:function(e,t,o,r){var d,l=this,u=document.body,c=window.CurrentVideoConfig.settings.defaultHd;if(!0===c?(window.CurrentVideoConfig.content.media.hd&&(d=Object(s.v)(window.CurrentVideoConfig.content.media.hd)),d||(delete window.CurrentVideoConfig.content.media.hd,c=!1,d=Object(s.v)(window.CurrentVideoConfig.content.media.sd))):(window.CurrentVideoConfig.content.media.sd&&(d=Object(s.v)(window.CurrentVideoConfig.content.media.sd)),d||(delete window.CurrentVideoConfig.content.media.sd,c=!0,d=Object(s.v)(window.CurrentVideoConfig.content.media.hd))),window.PlayerSettings.defaultHd=c,i.debug("DEFAULT HD",window.PlayerSettings.defaultHd,"default src",d),d){if((window.PlayerSettings.forceFlash||d.indexOf(".mp4")>-1&&window.client.browser.firefoxWithoutMp4)&&!window.client.hasFlash)return void l._flashNotAvailableError();u.setAttribute("data-default-src",d),l.PWBM.start("bolt_loadCSS_to_CSSLoaded");n.e(20).then(n.t.bind(null,41,7)).then(function(n){l.PWBM.end("bolt_loadCSS_to_CSSLoaded"),i.info("CSS Loaded",o),l._loadSkin(e,t,r)})}else{var w=document.createElement("p");w.id="err-msg",w.style.color="red",w.style.position="absolute",Object(a.b)(u,"flash_required")?w.textContent='Flash Player 11 or newer is required. Get it <a href="http://get.adobe.com/flashplayer/" title="Adobe" style="color:inherit">here</a>.':w.textContent="Media not supported",u.appendChild(w)}}},{key:"_flashNotAvailableError",value:function(){i.error("Flash is required but not detected");for(var e=document.body;e.firstChild;)e.removeChild(e.firstChild);throw this.dispatchEvent(l.a.Player.Event.FATAL_ERROR,"Flash is required"),new Error("Flash is required")}},{key:"_onAdQueued",value:function(e){this.dispatchEvent("boltAdQueued",e.data)}},{key:"_onAdRequested",value:function(e){var t=window.CurrentVideoConfig.content.videoId||0,n="[videoId=".concat(t,"]");this.dispatchAnalyticsEvent("boltRequestAdSpot ".concat(window.BoltAdManager.timing),"ad",n),this.dispatchEvent("boltAdRequestStart",e.data)}},{key:"_bindAdListeners",value:function(e,t){var a=this;n.e(2).then(n.bind(null,27)).then(function(e){var t=e.default;window.AdSession=new t,window.AdSession.on(l.a.Ad.Event.SESSION_START,a._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_ABORT,a._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_END,a._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_FAIL,a._dispatchTrackingEvent)}),n.e(2).then(n.bind(null,42)).then(function(e){var t=e.default;window.AdRequest=new t,window.AdRequest.on(l.a.Ad.Event.REQUEST_START,a._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_ABORT,a._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_SUCCESS,a._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_FAIL,a._dispatchTrackingEvent)}),n.e(2).then(n.bind(null,43)).then(function(e){var t=e.default;window.SSTracker=new t}),n.e(2).then(n.bind(null,62)).then(function(n){var o=n.default;window.BoltAdManager=new o(window.DebugMode.dcOverride,e),window.BoltAdManager.addEventListener(l.a.Ad.Event.QUEUED,a._onAdQueued),window.BoltAdManager.addEventListener(l.a.Ad.Event.REQUESTED,a._onAdRequested),window.BoltAdManager.addEventListener(l.a.Ad.Event.CLICKED,a._dispatchTrackingEvent),window.BoltAdManager.init(function(){i.info("[ZeusIframe _initAds] BoltAdManager initialized. Selected server: ",window.selectedServer),t()})})}},{key:"_initAds",value:function(e){var t=this;t.PWBM.end("bolt_coreJSLoaded_to_initAdsCall"),i.info("[ZeusIframe] initAds");var a="ad_".concat(window.id),o=Object(_.a)(l.a.UI.AD_CONTAINER);if(o&&(l.a.AD_CONTAINER=a,l.a.UI.AD_CONTAINER=a,o.setAttribute("id",a)),i.info("[ZeusIframe initAds]"),window.client.isMobile&&(!window.google||!window.google.ima)){var r="https:"===document.location.protocol?"https://imasdk.googleapis.com/js/sdkloader/ima3.js":"http://imasdk.googleapis.com/js/sdkloader/ima3.js",d=document.createElement("script");d.onload=function(){i.debug("ima script attached"),l.a.Ad.IMA_ENABLED=!0,n.e(2).then(n.bind(null,44)).then(function(e){var t=e.default;window.MobileIMAPlayer=new t(window.BoltAdManager),i.debug("MobileIMAPlayer",window.MobileIMAPlayer)})},d.src=r,i.debug(document.getElementsByTagName("head")[0]),i.debug(d),document.getElementsByTagName("head")[0].appendChild(d)}t.processCustomEmbedTags(),t._bindAdListeners(a,e)}},{key:"_dispatchTrackingEvent",value:function(e){this.dispatchEvent(e.type,e.data)}},{key:"_start",value:function(e){var t=this;if(void 0===window.ContentPlayer)return i.debug("Unable to create player ".concat(e)),null;window.ContentPlayer.show(!1),window.AdBlockDetected&&(i.info("[ZeusIframe] Tracking blocked ad session"),window.AdSession=new F.default,window.AdSession.on(l.a.Ad.Event.SESSION_START,t._dispatchTrackingEvent),window.AdSession.start(!1),n.e(12).then(n.bind(null,45)).then(function(e){var n=e.default;window.AdBlocked=new n,window.AdBlocked.on(l.a.Ad.Event.SESSION_BLOCKED,t._dispatchTrackingEvent)}));var a=function(){if(window.PlayerView.addEventListener(l.a.Media.Event.TIME_UPDATE,x),window.PlayerView.addEventListener(l.a.Media.Event.METADATA,x),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,x),window.PlayerView.addEventListener(l.a.Media.Event.PLAYING,x),window.PlayerView.addEventListener(l.a.Media.Event.STOPPED,x),window.PlayerView.addEventListener(l.a.Media.Event.PAUSED,x),window.PlayerView.addEventListener(l.a.Media.Event.RESUME,x),window.PlayerView.addEventListener(l.a.Media.Event.ENDED,x),window.PlayerView.addEventListener(l.a.Media.Event.FIRSTQUARTILE,x),window.PlayerView.addEventListener(l.a.Media.Event.MIDPOINT,x),window.PlayerView.addEventListener(l.a.Media.Event.THIRDQUARTILE,x),window.PlayerView.addEventListener(l.a.Media.Event.VOLUME_CHANGED,x),window.PlayerView.addEventListener(l.a.Ad.Event.CUEPOINT,x),window.PlayerView.addEventListener(l.a.Ad.Event.FAILED,x),window.PlayerView.addEventListener(l.a.Media.Event.NOT_FOUND,x),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_NOT_FOUND,x),window.PlayerView.addEventListener(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,x),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,x),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,x),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_CHANGED,x),window.PlayerView.addEventListener(l.a.Player.Event.LOADED,x),window.PlayerView.addEventListener(l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED,x),window.PlayerView.addEventListener(l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED,x),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,t._dispatchTrackingEvent),!window.fullscreenEnabled&&window.client.hasTouch&&window.addEventListener("touchmove",function(e){t._isFullscreen&&(e.preventDefault(),i.debug(window.id,"touchmove prevented"))}),he(window.CurrentVideoConfig.settings.googleAnalytics)){var e=window.CurrentVideoConfig.settings.googleAnalytics;i.debug("Publisher GA Tracking Id",e),t.dispatchEvent("start_google_analytics",{pubTrackingId:e,universal:window.CurrentVideoConfig.settings.googleUniversal})}t.controller.startUp()};return"off"===window.PlayerSettings.advertising?(i.debug("Advertising is disabled via embed setting"),window.postLogMessage("Advertising is disabled via embed setting","warn"),a()):t._initAds(a),window.id}},{key:"dispatchAnalyticsEvent",value:function(e,t,n,i){n&&this.dispatchEvent("analyticsEvent",{action:e,category:t,label:n,value:i})}},{key:"_removeIosInlineAttribute",value:function(e){i.debug("[Bolt::iframe ] removing ios 10 safari autoplay attributes"),e.removeAttribute("muted"),e.removeAttribute("playsinline"),e.muted=!1}},{key:"_onSkinLoaded",value:function(e,t,a){var o=this;o.PWBM.end("bolt_loadSkin_to_skinLoaded");var r,d,u=document.body;e&&(i.info("SKIN LOADED"),u.insertAdjacentHTML("beforeend",e),function(){var e=document.body.getElementsByClassName("bolt-poster")[0];if(e){var t=Object(s.g)(window.CurrentVideoConfig.content);t&&(e.style.backgroundImage="url(".concat(t,")"),e.style.backgroundPosition="center center",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat")}}(),d=u.getElementsByClassName("bolt-container")[0],window.Skin=d,d.style.visibility="hidden",(r=Object(_.a)(l.a.UI.MAIN_VIDEO_CONTAINER).firstElementChild).setAttribute("id",t),window.client.system.ios&&window.PlayerSettings.autoplay||o._removeIosInlineAttribute(r),window.PlayerSettings.forceFlash?window.client.hasFlash?(i.info("Using Flash for playing video"),n.e(7).then(n.bind(null,46)).then(function(e){var n=e.default;o.FlashShim=n,window.ContentPlayer=new n(window.id,t,"window.ContentPlayer"),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new H(a);var r=setInterval(function(){if(window.ContentPlayer.playerReady)return i.info(window.ContentPlayer.containerId,"is ready"),clearInterval(r),o._start(t)},100)})):o._flashNotAvailableError():function(){if(window.client.isMobile){var e=function(e){return o.Video=e,window.ContentPlayer=new e(window.id,t,!1),window.ContentPlayer.muted=!!window.PlayerSettings.autoplay,window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new H(a),o._start(t)};window.client.system.ios?Promise.resolve().then(n.bind(null,20)).then(function(t){var n=t.default;e(n)}).catch(function(e){}):Promise.resolve().then(n.bind(null,21)).then(function(t){var n=t.default;e(n)}).catch(function(e){})}else Promise.resolve().then(n.bind(null,22)).then(function(e){var n=e.default;return window.PlayerView=new H(a),o.Video=n,window.ContentPlayer=new n(window.id,t,!1),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",o._start(t)}).catch(function(e){})}())}},{key:"_loadSkin",value:function(e,t,i){var a=this;a.PWBM.end("bolt_coreJSLoaded_to_skinRequested"),a.PWBM.start("bolt_loadSkin_to_skinLoaded"),n.e(20).then(n.t.bind(null,47,7)).then(function(t){var n=t.default;a._onSkinLoaded(n,e,i)})}},{key:"playMedia",value:function(){this.controller.playPrerollAd()}},{key:"stopMedia",value:function(){this.controller.stop()}},{key:"replayMedia",value:function(){this.controller.replay()}},{key:"closeVideo",value:function(){this.controller.closeVideo()}},{key:"pauseMedia",value:function(){this.controller.pause()}},{key:"muteMedia",value:function(){this.controller.mute(!0)}},{key:"unmuteMedia",value:function(){this.controller.mute(!1)}},{key:"togglePlay",value:function(){this.controller.togglePlayPause()}},{key:"seek",value:function(e){this.controller.seek(e)}},{key:"setVolume",value:function(e){e>1?e=1:e<0&&(e=0),this.controller.setVolume(e)}},{key:"getVolume",value:function(){if(window.PlayerView.currentPlayer)return window.PlayerView.currentPlayer.volume}},{key:"getCSSUrl",value:function(){return this._defaultCss}},{key:"getSWFUrl",value:function(){return this._swfUrl}},{key:"dispatchEvent",value:function(e,t){var n=this,a=!1;try{a=window.PlayerView.currentPlayer.isAd()}catch(e){}var o={type:"zeus_event",name:e,id:window.id,isAd:a,data:t};switch(o.name!==n.BOLT_TIME_CHANGED&&i.info("posting message",o),window.parent.postMessage(JSON.stringify(o),"*"),e){case l.a.Media.Event.PLAY:break;case l.a.Player.Event.LOADED:window.kinesis.send("bolt_players",t,"boltAds");break;case l.a.Ad.Event.SESSION_START:i.info("[ZeusIframe] tracking",e),window.kinesis.send("bolt_ad_sessions",t,"boltAds"),window.AdBlockDetected&&window.AdSession&&(window.AdSession.off(l.a.Ad.Event.SESSION_START),delete window.AdSession);break;case l.a.Ad.Event.SESSION_FAIL:t.resultType="failed",window.kinesis.send("bolt_ad_sessions_results",t,"boltAds");break;case l.a.Ad.Event.SESSION_ABORT:t.resultType="aborted",window.kinesis.send("bolt_ad_sessions_results",t,"boltAds");break;case l.a.Ad.Event.SESSION_END:t.resultType="complete",window.kinesis.send("bolt_ad_sessions_results",t,"boltAds");break;case l.a.Ad.Event.SESSION_BLOCKED:t.resultType="blocked",window.kinesis.send("bolt_ad_sessions_results",t,"boltAds");break;case l.a.Ad.Event.REQUEST_START:window.kinesis.send("bolt_ad_requests",t,"boltAds");break;case l.a.Ad.Event.REQUEST_SUCCESS:t.resultType="succeeded",window.kinesis.send("bolt_ad_request_results",t,"boltAds");break;case l.a.Ad.Event.REQUEST_FAIL:t.resultType="failed",window.kinesis.send("bolt_ad_request_results",t,"boltAds");break;case l.a.Ad.Event.REQUEST_ABORT:t.resultType="aborted",window.kinesis.send("bolt_ad_request_results",t,"boltAds");break;case n.BOLT_AD_STARTED:t.milestone="started",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case n.BOLT_FIRST_QUARTILE:t.milestone="q1",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case n.BOLT_MIDPOINT:t.milestone="q2",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case n.BOLT_THIRD_QUARTILE:t.milestone="q3",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case n.BOLT_AD_COMPLETE:t.milestone="complete",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case n.BOLT_AD_ERROR:t.milestone="error",window.kinesis.send("bolt_ad_playback_milestones",t,"boltAds");break;case l.a.Ad.Event.CLICKED:window.kinesis.send("bolt_ad_clicks",{clickUrl:t},"boltAds")}}},{key:"updateViewabilityMetrics",value:function(e){this.controller.updateViewabilityMetrics(e)}}])&&ve(t.prototype,o),r&&ve(t,r),e}()}}]);
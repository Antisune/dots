(window.webpackJsonp=window.webpackJsonp||[]).push([["CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326"],{"./src/lib/intersectionObserver/index.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return r}));s("./node_modules/core-js/modules/web.dom.iterable.js");let i;const o=new Map,n=new Map;"undefined"!=typeof window&&(s("./node_modules/intersection-observer/intersection-observer.js"),i=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,s=e.intersectionRatio>0;if(s!==!!n.get(t)){n.set(t,s);const i=o.get(t);if(i){i(e,s&&!!n.get(t))}}})},{threshold:[.001]}));const a=(e,t)=>{try{o.set(e,t),i&&i.observe(e)}catch(s){0}},r=e=>{try{o.delete(e),i&&i.unobserve(e)}catch(t){0}}},"./src/lib/onFocusAndVisibilityChange/index.ts":function(e,t,s){"use strict";var i,o=s("./node_modules/brcast/dist/brcast.es.js"),n=s("./node_modules/lodash/findKey.js"),a=s.n(n);!function(e){e.Hidden="hidden",e.Visible="visible"}(i||(i={}));const r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};let d=!1;const l=Object(o.a)({documentInFocus:!0});!function(){if(!d){const e=a()(r,(e,t)=>void 0!==document[t]);e&&document.addEventListener(r[e],()=>{l.setState({documentInFocus:document.visibilityState!==i.Hidden})}),d=!0}}(),t.a={subscribe:e=>{return l.subscribe(e)},unsubscribe:e=>{l.unsubscribe(e)}}},"./src/reddit/components/Media/RichTextContainer/index.m.less":function(e,t,s){e.exports={richTextContainer:"Chtkt3BCZQruf0LtmFg2c",richTextContainerTitleOnly:"_2XNPI46MXRfDdsSoDqaksI",richTextContainerFull:"_3xX726aBn29LDbsDtzr_6E",placeholder:"_1aLU7RPNLdvfcbaNdcN11x",placeholderParagraph:"Owi9iYzjyVpDq_0YbCdJY"}},"./src/reddit/components/Media/TwitterEmbed/index.m.less":function(e,t,s){e.exports={tweetPlaceholder:"q0jsD_ZcQRuuUQzXawr8J",tweetEmbedBox:"_3pYTJO5FjsoQWRUsIFQASN",isInvisible:"_3xICr9rbunMOudN40P1GgI",tweetDeleted:"sIgL7k1Lz6YLL146KNk8k",seeMore:"_2f5uYHvlfzs2DngQsiCdvB"}},"./src/reddit/components/Media/index.m.less":function(e,t,s){e.exports={hiddenLink:"_3dhFVFchWAAFXfLFTa94n9",displayNone:"_1Q2mF3u7v9hBVu_4bkC7R4"}},"./src/reddit/components/Media/index.tsx":function(e,t,s){"use strict";s("./node_modules/core-js/modules/web.dom.iterable.js");var i=s("./node_modules/lodash/debounce.js"),o=s.n(i),n=s("./node_modules/react/index.js"),a=s.n(n),r=s("./src/lib/CSSVariableProvider/withTheme.tsx"),d=s("./src/lib/env/index.ts"),l=s("./src/lib/isUrl/index.ts"),c=s("./src/lib/objectSelector/index.ts"),h=s("./src/lib/onFocusAndVisibilityChange/index.ts"),p=s("./src/lib/permalinkToOverlayLocation/index.ts"),m=s("./src/lib/sentry/index.ts"),u=s("./src/reddit/components/HTML5StreamPlayer/index.tsx");const g="https://www.redditmedia.com";var b=s("./src/reddit/components/Media/EmbedBox/index.tsx"),f=s("./src/reddit/components/Media/ImageBox/index.tsx"),x=s("./src/reddit/components/Media/MediaContainer/index.tsx"),w=(s("./node_modules/core-js/modules/es6.symbol.js"),s("./src/lib/classNames/index.ts")),v=s("./src/reddit/constants/componentSizes.ts"),C=s("./src/reddit/models/Media/index.ts"),E=s("./node_modules/react-redux/es/index.js"),y=s("./src/reddit/actions/post.ts"),O=s("./src/reddit/helpers/styles/mixins/loading.ts"),S=s("./src/reddit/components/Media/RichTextContainer/index.m.less"),M=s.n(S);class I extends a.a.Component{componentDidMount(){this.loadRichTextContentIfNeeded()}loadRichTextContentIfNeeded(){this.props.canLoadContent&&this.props.isExpando&&this.props.onLoadRichTextContentIfNeeded(this.props.postId)}render(){const e=Object(O.a)({isLoading:!0});return a.a.createElement("div",{className:M.a.placeholder},[1,2,3].map(t=>a.a.createElement("div",{key:t,className:M.a.placeholderParagraph},a.a.createElement("div",{className:e}),a.a.createElement("div",{className:e}),a.a.createElement("div",{className:e}))))}}var L=Object(E.b)(null,e=>({onLoadRichTextContentIfNeeded:t=>e(Object(y.r)(t))}))(I);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}var j=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]])}return s};var T=e=>{var{canLoadContent:t,children:s,className:i,isCommentsPage:o,isMediumHeight:n,isRichTextTruncated:r,isExpando:d,isTitleOnly:l,postId:c,showFull:h}=e,p=j(e,["canLoadContent","children","className","isCommentsPage","isMediumHeight","isRichTextTruncated","isExpando","isTitleOnly","postId","showFull"]);const m={[M.a.richTextContainerFull]:h,[M.a.richTextContainerTitleOnly]:l&&!h,[M.a.richTextContainer]:!h&&!l},u={};h||(u.maxHeight="".concat(l?C.l:n?C.k:C.j,"px")),o&&(u.maxWidth="".concat(v.e,"px"));const g=r&&h;return a.a.createElement("div",N({className:Object(w.a)(m,i),style:u},p),s,g&&a.a.createElement(L,{canLoadContent:!!t,isExpando:d,postId:c}))},P=s("./src/lib/intersectionObserver/index.ts"),W=s("./src/reddit/i18n/components.tsx"),F=s("./src/reddit/i18n/utils.ts"),B=s("./src/reddit/components/Media/TwitterEmbed/index.m.less"),R=s.n(B);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}const V=350,H=100,k=300;class _ extends a.a.Component{constructor(){super(...arguments),this.state={isFullyLoaded:!1},this.iframe=null,this.onWindowMessage=e=>{!this.state.isFullyLoaded&&this.iframe&&this.iframe.contentWindow===e.source&&"tweet-measured"===e.data.action&&this.setState({isFullyLoaded:!0})},this.embedBoxChildRef=e=>{this.iframe=e,e&&P.a(e,(t,s)=>{e&&e.contentWindow&&!this.props.media.height&&s&&e.contentWindow.postMessage("twitter-measure-requested",g)}),this.props.embedBoxChildRef(e)}}componentDidMount(){window.addEventListener("message",this.onWindowMessage)}componentWillUnmount(){this.iframe&&P.b(this.iframe),window.removeEventListener("message",this.onWindowMessage)}render(){const{canLoadContent:e,media:t,mediaContainerProps:s,onIframeLoaded:i,source:o,title:n}=this.props,{isFullyLoaded:r}=this.state,d=s.height||(t.isDeleted?H:k);return a.a.createElement(x.a,D({},s,{alwaysWrapMedia:!0,height:d,showFull:!s.isListing,width:V}),e&&a.a.createElement(a.a.Fragment,null,(!s.height||!r)&&(t.isDeleted?a.a.createElement("p",{className:R.a.tweetDeleted},Object(F.c)("This Tweet has been deleted.")):a.a.createElement("div",{className:Object(w.a)(Object(O.a)({isLoading:!0}),R.a.tweetPlaceholder)})),a.a.createElement(b.a,{childRef:this.embedBoxChildRef,className:Object(w.a)(R.a.tweetEmbedBox,{[R.a.isInvisible]:!s.height||!r}),height:d,isListing:s.isListing,isResponsive:!0,maxHeight:s.isListing?C.i:null,onLoad:i,showCentered:s.showCentered,showFull:!0,source:o,title:n,width:V}),s.isListing&&d>C.i&&a.a.createElement("div",{className:R.a.seeMore},a.a.createElement(W.c,null,"see full tweet"))))}}var A=s("./src/reddit/components/Media/VideoBox/index.tsx"),U=s("./src/reddit/components/PlayButton/index.tsx"),G=s("./src/reddit/helpers/styles/postBackgroundColor.ts"),J=s("./src/reddit/helpers/styles/smartTextColor.ts"),z=s("./src/reddit/components/RawHTMLDisplay/index.tsx");function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}var X=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]])}return s};var Y=Object(r.a)(e=>{var{flairStyleTemplate:t}=e,s=X(e,["flairStyleTemplate"]);return a.a.createElement(z.a,Q({style:{color:Object(J.a)(Object(G.a)(Object.assign({flairStyleTemplate:t},s)))}},s))}),q=s("./src/reddit/components/RichTextJson/index.tsx"),K=s("./src/reddit/constants/screenWidths.ts"),Z=s("./src/reddit/contexts/PageLayer/index.tsx"),$=s("./src/reddit/helpers/canPreviewSelfText/index.ts"),ee=s("./src/reddit/helpers/getRichTextContent.ts"),te=s("./src/reddit/helpers/postHasSelfText/index.ts"),se=(s("./node_modules/core-js/modules/es6.regexp.replace.js"),s("./src/lib/redditId/index.ts"));function ie(e,t,s){return e.replace('href="https://www.reddit.com/poll/'.concat(Object(se.c)(t)),'class="'.concat(s,'" href="https://www.reddit.com/poll/').concat(Object(se.c)(t)))}function oe(e,t){const s=function e(t,s){let i=!1;let o=[];try{for(const n of t)if("link"===n.e&&n.u&&n.u.includes("https://www.reddit.com/poll/".concat(s)))i=!0;else if(n.c&&"string"!=typeof n.c){const t=e(n.c,s);t.found?(i=!0,("par"!==n.e||t.updated.length)&&o.push(Object.assign({},n,{c:t.updated}))):o.push(n)}else o.push(n)}catch(n){i=!1,o=[]}return{found:i,updated:i?o:t}}(e.document,Object(se.c)(t));return s.found?{document:s.updated}:e}const ne=(e,t,s,i)=>{const o=e/t,n=s/i;return Math.abs(o-n)<.03},ae=(e,t)=>{for(let s=0;s<t.length;s++){const i=t[s];if(i.width>=e)return i}},re=(e,t,s)=>{for(let i=0;i<s.length;i++){const o=s[i];if(o.width>=C.e/2&&ne(e,t,o.height,o.width))return o}},de=e=>{for(let t=0;t<e.length;t++){const s=e[t];if(s.height>=C.e||s.width>=C.f)return s}};var le=s("./src/reddit/components/Media/index.m.less"),ce=s.n(le);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}const pe=1200,me=75,ue="player.js",ge=v.s+v.r,be=e=>e.isVisible?e.children:a.a.createElement("div",{className:ce.a.displayNone},e.children),fe=new Set([C.n.EMBED,C.n.GIFVIDEO,C.n.VIDEO]),xe=e=>!!e.media&&fe.has(e.media.type),we=new Set([C.n.EMBED,C.n.GIFVIDEO,C.n.IMAGE,C.n.VIDEO]),ve=e=>{let{post:t}=e;return!!t.media&&we.has(t.media.type)},Ce=Object(Z.t)(),Ee=Object(c.b)(e=>({renderingObjectInfo:e.post,pageLayer:e.pageLayer}));class ye extends a.a.Component{constructor(e){super(e),this.pauseContent=()=>{this.shouldFocusContentDebouncer(!1)},this.stopContent=()=>{const{media:e}=this.props.post;if(e&&C.d.has(e.type)){if(this.iframe){const t=e.type===C.n.EMBED?e.provider:null;this.pauseEmbed(this.iframe,t)}this.setState(e=>e.shouldStop?null:{shouldStop:!0})}},this.handleVisibilityChange=e=>{const{shouldPause:t}=this.state,{autoplayPref:s}=this.props;this.iframe&&(t||!s&&e.documentInFocus||this.toggleEmbedAutoplay(this.iframe,!e.documentInFocus)),this.setState({forcePause:!e.documentInFocus})},this.focusContent=()=>{this.shouldFocusContentDebouncer(!0)},this.loadContent=()=>{this.setState(e=>e.canLoadContent?null:{canLoadContent:!0})},this.unmountContent=()=>{},this.contentIsHeavyToMount=()=>{const{media:e}=this.props.post;return!!e&&C.d.has(e.type)},this.shouldFocusContentDebouncer=o()(e=>{const{media:t}=this.props.post,{autoplayPref:s}=this.props;if(t&&C.d.has(t.type)){if(this.iframe){const i=t.type===C.n.EMBED?t.provider:null;i&&!C.q.has(i)?!s&&e||this.toggleEmbedAutoplay(this.iframe,!e):e||this.pauseEmbed(this.iframe,i)}e?this.setState(e=>e.shouldPause||!e.canLoadContent?{canLoadContent:!0,shouldPause:!1,shouldStop:!1}:null):this.setState(e=>e.shouldPause?null:{shouldPause:!0})}},250,{leading:!0}),this.toggleEmbedAutoplay=(e,t)=>{if(e.contentWindow){const s=t?C.g.Pause:C.g.Play;e.contentWindow.postMessage({context:ue,method:s},g),e.contentWindow.postMessage({context:ue,method:C.g.Mute},g)}},this.pauseEmbed=(e,t)=>{e.contentWindow&&(t===C.t.YouTube?e.contentWindow.postMessage(JSON.stringify({event:"command",func:C.x.Pause}),g):e.contentWindow.postMessage({context:ue,method:C.g.Pause},g))},this.onIframeLoaded=()=>{const{media:e}=this.props.post,{autoplayPref:t}=this.props,s=e&&e.type===C.n.EMBED?e.provider:null;if(this.iframe&&s&&!C.q.has(s)){const{shouldPause:e}=this.state;(t||e)&&this.toggleEmbedAutoplay(this.iframe,e)}},this.onImageBoxClick=e=>{this.props.isListing||!this.shouldBlur()||this.state.isRevealed||(this.setState({isRevealed:!0}),e.preventDefault(),e.stopPropagation())},this.storeChildRef=e=>{this.iframe=e},this.updateDimensions=()=>{this.setState({viewportHeight:window.innerHeight,viewportWidth:window.innerWidth})},this.isSpoiler=()=>this.props.post.isSpoiler||!(!this.props.crosspost||!this.props.crosspost.isSpoiler),this.isNSFW=()=>this.props.post.isNSFW||!(!this.props.crosspost||!this.props.crosspost.isNSFW),this.state={canLoadContent:e.shouldLoad||!1,forcePause:!1,isRevealed:!1,shouldPause:void 0===e.shouldPause||e.shouldPause,shouldStop:void 0===e.shouldStop||e.shouldStop,viewportHeight:C.e,viewportWidth:C.f}}componentWillMount(){"undefined"!=typeof window&&(this.updateDimensions(),window.addEventListener("resize",this.updateDimensions))}componentDidMount(){xe(this.props.post)&&(this.visibilityChangeSubscriptionId=h.a.subscribe(e=>{this.handleVisibilityChange(e)})),this.props.scrollerItemRef&&ve(this.props)&&this.props.scrollerItemRef(this,this.state.canLoadContent)}componentWillUnmount(){this.visibilityChangeSubscriptionId&&h.a.unsubscribe(this.visibilityChangeSubscriptionId),this.props.scrollerItemRef&&ve(this.props)&&this.props.scrollerItemRef(void 0),window.removeEventListener("resize",this.updateDimensions)}componentWillReceiveProps(e){!this.state.canLoadContent&&e.shouldLoad&&this.setState({canLoadContent:!0}),void 0!==e.shouldPause&&e.shouldPause!==this.props.shouldPause&&this.shouldFocusContentDebouncer(!e.shouldPause)}getVideoExpandoMaxDimensions(){let e,t=Math.max(C.i,this.state.viewportHeight),s=Math.min(pe,16*t/9);s===pe&&(t=9*pe/16),e=this.state.viewportWidth>=K.c?this.state.viewportWidth<v.m?this.state.viewportWidth-ge-2*me:this.state.viewportWidth-ge-v.f-2*me:this.state.viewportWidth-2*me;const i=this.state.viewportHeight-2*me;if(s>e){t*=e/s,s=e}else if(t>i){const e=i/t;t=i,s*=e}return{maxVideoHeight:t,maxVideoWidth:s}}getVideoMaxDimensions(e,t){let s=C.i,i=C.m;return e.isExpando?this.getVideoExpandoMaxDimensions():(e.isPromotedTrend&&(s=C.r,i=C.s),{maxVideoHeight:s,maxVideoWidth:i})}getMediaInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;const{availableWidth:s,post:i}=e,o=i.media&&i.media.obfuscated||"";let n=i.media&&!Object(C.E)(i.media)?i.media.content:"",[a,r]=!i.media||Object(C.C)(i.media)||Object(C.D)(i.media)?[0,0]:[i.media.height,i.media.width];if(s&&i.media&&(i.media.type===C.n.IMAGE||i.media.type===C.n.GIFVIDEO)){const e=ae(s,i.media.resolutions);e&&(n=e.url,r=e.width,a=e.height)}else if(i&&i.media&&(!e.isListing||e.isExpando)&&(i.media.type===C.n.IMAGE||i.media.type===C.n.GIFVIDEO)){let e;(e=Object(f.b)(i.media.height,i.media.width)&&Object(f.c)(i.media.height)?re(i.media.height,i.media.width,i.media.resolutions):de(i.media.resolutions))&&(n=e.url,r=e.width,a=e.height)}if(e.isExpando)if(r>t.viewportWidth){a*=t.viewportWidth/r,r=t.viewportWidth}else if(a>t.viewportHeight){const e=t.viewportHeight/a;a=t.viewportHeight,r*=e}const{maxVideoHeight:d,maxVideoWidth:l}=this.getVideoMaxDimensions(e,t);if(i.media&&i.media.type===C.n.VIDEO){const t=a/r;e.isExpando?(a=d,r=l):t>C.c?(a=d,r=Math.min(Math.max(d/t,C.p),l)):(a=Math.min(Math.max(l*t,C.o),d),r=l)}i.media&&i.media.type===C.n.EMBED&&e.isExpando&&i.media.provider!==C.t.Twitter&&(a=d,r=l);let c=!1;if(e.isMiniCard){const e=a/r;c=Math.abs(e-C.c)>.01}return{source:n,obfuscated:o,width:r,height:a,needsBackgroundBlur:c}}shouldBlur(){const{isExpando:e,isOverlay:t,theme:s}=this.props,i=this.isNSFW(),o=this.isSpoiler();return!(e||this.state.isRevealed||t)&&(i&&!s.subredditContext.shouldShowNSFWContent||o)}render(){const{className:e,crosspost:t,flairStyleTemplate:s,forceAspectRatio:i,isCommentsPage:o,isExpando:n,isListing:r,isNotCardView:c,isMediumHeight:h,isTitleOnly:g,post:w,showCentered:v,showFull:E=!1}=this.props,{canLoadContent:y,forcePause:O,shouldPause:S,shouldStop:M,viewportWidth:I}=this.state;if(!w.media)return null;const L=O||S,N=M,{source:j,obfuscated:P,height:W,width:F,needsBackgroundBlur:B}=this.getMediaInfo(this.props,this.state),R={showCentered:v,isListing:r,showFull:E,height:W,width:F},D=Object.assign({},R,{className:e,forceAspectRatio:i,viewportWidth:I}),V=this.shouldBlur(),H=!(!w.isSponsored||!w.source);if(P&&V)return a.a.createElement(x.a,he({},D,{blurSrc:P}),a.a.createElement(be,{isVisible:y},a.a.createElement(f.a,he({},R,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isListing:r,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),isVideoThumbnail:!!w.media&&w.media.type===C.n.VIDEO,onClick:this.onImageBoxClick,postId:w.id,shouldBlur:V,source:P,outboundUrl:H&&w.source.outboundUrl||void 0,originalSource:j}))));if(!w.media)return null;switch(w.media.type){case C.n.RTJSON:const i=Object(ee.a)(w,null);if(null===i)return;return E||Object($.a)(w)?a.a.createElement(T,{canLoadContent:y,className:e,"data-click-id":"text",isCommentsPage:o,isExpando:n,isMediumHeight:h,isRichTextTruncated:w.media.isRichtextPreview,isTitleOnly:g,postId:w.id,showFull:E},a.a.createElement(q.a,{flairStyleTemplate:s,content:w.isMeta?oe(i,w.id):i,mediaMetadata:w.media.mediaMetadata,rtJsonElementProps:Ee(this.props),renderMediaAsLinks:r})):null;case C.n.TEXT:if(Object(te.a)(w)){const t="Text post should not include body content";return m.c.withScope(e=>{e.setExtra("info",{post:w,isListing:r,isCommentsPage:o}),m.c.captureMessage(t)}),Object(d.a)()&&console.log("".concat(w.id,": ").concat(t)),a.a.createElement(T,{postId:w.id,className:e,"data-click-id":"text",isCommentsPage:o,showFull:E},a.a.createElement(Y,{flairStyleTemplate:s,html:w.isMeta?ie(w.media.content,w.id,ce.a.hiddenLink):w.media.content}))}return null;case C.n.EMBED:return this.props.isMiniCard&&w.preview&&w.preview.url?a.a.createElement(x.a,he({},D,{alwaysWrapMedia:!0}),a.a.createElement(be,{isVisible:y},a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,he({},R,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:n,isListing:r,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),postId:w.id,shouldBlur:V,source:w.preview.url,originalSource:w.preview.url})),a.a.createElement(U.a,null)))):C.h.has(w.media.provider)?w.media.provider===C.t.Twitter?a.a.createElement(_,{canLoadContent:y,embedBoxChildRef:this.storeChildRef,media:w.media,mediaContainerProps:D,onIframeLoaded:this.onIframeLoaded,source:j,title:w.title}):a.a.createElement(x.a,he({},D,{alwaysWrapMedia:!0,height:n?W:C.i,width:n?F:C.i*(16/9)}),y&&a.a.createElement(b.a,{childRef:this.storeChildRef,height:n?W:C.i,width:n?F:void 0,isListing:r,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:v,showFull:E,source:j,title:w.title})):a.a.createElement(x.a,he({},D,{alwaysWrapMedia:!0}),y&&a.a.createElement(b.a,he({},R,{isResponsive:n||w.media.provider===C.t.IFrameEmbed,title:w.title,childRef:this.storeChildRef,onLoad:this.onIframeLoaded,source:j,fullWidth:w.media.provider===C.t.IFrameEmbed})));case C.n.GIFVIDEO:{let e=W,t=F;return e>C.i&&(t=F/W*(e=C.i)),a.a.createElement(x.a,he({},D,{blurSrc:B?w.media.gifBackgroundImage:void 0}),a.a.createElement(be,{isVisible:y},a.a.createElement(A.a,he({},R,{isNotCardView:c,height:n?void 0:e,width:n?void 0:t,postId:w.id,shouldLoad:!0,shouldPause:L,source:j,originalSource:w.media.content}))))}case C.n.VIDEO:{const e=w.media.posterUrl||w.preview&&w.preview.url;return this.props.isMiniCard&&e?a.a.createElement(x.a,he({},D,{alwaysWrapMedia:!0}),a.a.createElement(be,{isVisible:y},a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,he({},R,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:n,isListing:r,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),postId:w.id,shouldBlur:V,source:e,originalSource:e})),a.a.createElement(U.a,null)))):a.a.createElement(x.a,he({},D,{alwaysWrapMedia:!0,isVideo:!0}),y&&a.a.createElement(u.b,{autoPlay:"boolean"==typeof S?!S:void 0,isExpando:n,postUrl:Object(p.a)(w.permalink),shouldLoad:!0,shouldPause:L,shouldStop:N,hlsSource:w.media.hlsUrl,mpegDashSource:w.media.dashUrl,isGif:w.media.isGif,scrubberThumbSource:w.media.scrubberThumbSource,postId:w.id,callToActionSource:w.source||void 0,callToActionText:w.callToAction,isListing:r,posterUrl:w.media.posterUrl}))}case C.n.IMAGE:const O=this.state.viewportHeight-2*me,M=this.state.viewportWidth-2*me;let I=j;return this.props.isMiniCard&&!this.props.isMiniCardHQPreviews&&(w.thumbnail&&Object(l.a)(w.thumbnail.url)?I=w.thumbnail.url:w.preview&&Object(l.a)(w.preview.url)&&(I=w.preview.url)),a.a.createElement(x.a,he({},D,{blurSrc:B?I:void 0,isExpando:!!n}),a.a.createElement(be,{isVisible:y},a.a.createElement(f.a,he({},R,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:n,isListing:r,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),maxHeight:n?O:void 0,maxWidth:n?M:void 0,postId:w.id,shouldBlur:V,source:I,outboundUrl:H&&w.source.outboundUrl||void 0,originalSource:w.media.content}))));default:return null}}}t.a=Ce(Object(r.a)(ye))},"./src/reddit/helpers/canPreviewSelfText/index.ts":function(e,t,s){"use strict";var i=s("./src/reddit/helpers/postHasSelfText/index.ts");t.a=e=>Object(i.a)(e)&&!e.isSpoiler&&!e.isNSFW},"./src/reddit/helpers/postHasSelfText/index.ts":function(e,t,s){"use strict";var i=s("./src/reddit/models/Media/index.ts"),o=s("./src/reddit/models/RichTextJson/index.ts");t.a=e=>{const t=e&&e.media;return!!t&&(t.type===i.n.TEXT&&!!t.content||t.type===i.n.RTJSON&&!Object(o.E)(t.richtextContent))}}}]);
//# sourceMappingURL=CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326.3ba36305ac12ab702188.js.map
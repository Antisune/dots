(function(n){var q=window.AmazonUIPageJS||window.P,r=q._namespace||q.attributeErrors,d=r?r("DetailPageSnSAssets",""):q;d.guardFatal?d.guardFatal(n)(d,window):d.execute(function(){n(d,window)})})(function(n,q,r){n.register("sns-buybox-constants",function(){return{SNS_QUANTITY_FIELD:"#mobileQuantityDropDown, #tabletQuantityDropDown",SNS_FREQUENCY_NAME:"rcxOrdFreq",SNS_OPT_IN_NAME:"snsOptIn",QUANTITY_CONTAINER:"#selectQuantity, #mobileQuantitySelection, #sns",QUANTITY:"[name\x3dquantity]",SNS_QUANTITY:"[name\x3drcxsubsQuan]",
SNS_MOBILE_QUANTITY:".snsQuantityRadio input[name\x3d'quantity']:checked",SNS_FREQUENCY_FORM_FIELD:"[name\x3drcxOrdFreq]",SNS_FREQUENCY_FORM_FIELD_MOBILE:".rcxOrdFreq",SNS_ONMLV2_FREQUENCY_TRIGGER_DROPDOWN:"a:dropdown:rcxOrdFreq:select",SNS_ONMLV2_FREQUENCY_TRIGGER_RADIO_BUTTON:".snsOrdFreqRadio",SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN:"a:dropdown:rcxsubsQuan:select",SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON:".snsQuantityRadio",SNS_ONMLV2_FREQUENCY_FORM_FIELD:"#onmlv2FormFields [name\x3d'rcxOrdFreq']",
SNS_ONMLV2_QUANTITY_FORM_FIELD:"#onmlv2FormFields [name\x3d'quantity']",SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP:"#rcxsubsQuan",SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE:".snsQuantityRadio",SNS_DP_FREQUENCY_TRIGGER:"#sns-dp-frequency-trigger span",SNS_OPT_IN_CHECKBOX:"#snsOptInCheckbox",SNS_OFFER_LISTING_FIELD:"#snsOfferListingID",OFFER_LISTING_FIELD:"[name\x3dofferListingID]",SNS_FREQUENCY_SECTION:"#snsFrequencySection",SNS_SELECTED_FREQUENCY_LABEL:"#snsSelectedFrequencyLabel",SNS_FIRST_RECURRING_DELIVERY_DATE:"[id\x3dsnsFirstRecurringDeliveryDate]",
SNS_BUY_NEW_BUTTON:"#buyNewSection, #newAccordionRow .a-accordion-row-a11y",SNS_BUY_USED_BUTTON:"#usedBuySection, #usedAccordionRow .a-accordion-row-a11y",ONE_CLICK_BUTTON:".onml-one-click-button",ONE_CLICK_BUTTON_ICON:".onml-one-click-button i",ONE_CLICK_BUTTON_TEXT:".onml-one-click-button input+span",BUY_NOW_BUTTON:".onml-buy-now-button",BUY_NOW_BUTTON_ICON:".onml-buy-now-button i",BUY_NOW_BUTTON_TEXT:".onml-buy-now-button input+span",ADD_TO_CART_BUTTON:"#add-to-cart-button",ADD_TO_CART_DIV:"#addToCart",
DSK_BB:"#sns",DSK_BB_DPV1:"#snsBuyBox",MOBILE_ADD_TO_CART_DIV:"#sns",MOBILE_SNS_BUYBOX:"#snsBuyBox",TABLET_ADD_TO_CART_DIV:"#snsTablet",NEW_ACCORDION_ROW_SUBMISSION_FORM:"#newAccordionRow #addToCart",SNS_ACCORDION_ROW_SUBMISSION_FORM:"#snsAccordionRow #sns, #snsAccordionRowMobile #sns, #snsAccordionRowMobileApp #sns, #snsAccordionRowMovedUp #sns, #snsAccordionRowMobileMovedUp #sns, #snsAccordionRowMobileAppMovedUp #sns",SNS_OPT_IN_FORM_FIELD:"[name\x3dsnsOptIn]",LEGACY_SPC_FORM_INPUT:"[name\x3d'submit.rcx-subscribe']",
LEGACY_SPC_FORM_INPUT_X:"[name\x3d'submit.rcx-subscribe.x']",SNS_OFFER_FORM_FIELD:".snsONMLOffer",SNS_DISCOUNT_PILL:"#snsDiscountPill",SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED:"#sns-onml-buybox-upsell-message-non-tiered",SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED:"#sns-onml-buybox-upsell-message-tiered",SNS_ONML_FRDD:".sns-onml-frdd",SNS_ONMLV2_FRDD:".sns-onmlv2-frdd",SNS_FREQ_BOTTOMSHEET_SELECTOR:"[id\x3dsnsFrequencyBottomSheet]",SNS_OPT_IN_FEATURE_DIV:"#snsOptIn_div",SNS_OPT_IN_INPUT_ID:"[name\x3dsnsOptIn]",
SNS_ONML_INIT_INPUT_ID:"isOnmlInitialized",SNS_ONML_INIT_INPUT_SELECTOR:"#isOnmlInitialized",SNS_DATA_UPDATE_EVENT:"sns-declarative-data-update",SNS_ONML_MERCHANT_INFO:"#snsOnmlMerchantInfo",SNS_DISCOUNT_PILL_POPOVER_TIERED:".snsDiscountPillPopoverTiered",SNS_DISCOUNT_PILL_POPOVER_NON_TIERED:".snsDiscountPillPopoverNonTiered",SNS_BUY_NEW_PRICE:"#onml_snsBuyNew",CBB_BUY_NEW_PRICE:"#buyNew_cbb",NON_CBB_BUY_NEW_PRICE:"#buyNew_noncbb",SNS_PRICE_IN_BUY_USED_SECTION:"#usedBuySection #onml_snsBuyNew",CBB_SNS_BUY_NEW_PRICE:"#onml_snsBuyNew_cbb",
SNS_CBB_ACCORDION_ROW:"#snsAccordionRow, #snsAccordionRowMobile, #snsAccordionRowMobileApp, #snsAccordionRowMovedUp, #snsAccordionRowMobileMovedUp, #snsAccordionRowMobileAppMovedUp",SNS_ONMLV2_FORM_FIELDS:"#onmlv2FormFields",SNS_ACCORDION_HEADER_RADIO_BUTTON:'#snsAccordionRow [role\x3d"radio"], #snsAccordionRowMobile [role\x3d"radio"], #snsAccordionRowMobileApp [role\x3d"radio"], snsAccordionRowMovedUp [role\x3d"radio"], snsAccordionRowMobileMovedUp [role\x3d"radio"], snsAccordionRowMobileAppMovedUp [role\x3d"radio"]',
SNS_CBB_PRIME_SHIPPING:"#sns-cbb-prime-shipping-header, #sns-cbb-prime-shipping-row",DPV2_BUY_NEW_PRICE:"#buyNew_dpv2",SUBSCRIBE_ONLY_LINK:"#subscribe-only",SUBSCRIBE_ONLY_FORM:"#sns-onml-subscribe-only",JUST_SUBSCRIBE_DIV:"#just-subscribe-button-container",GOLDBOX_DISCOUNT_MESSAGE:"#onml-goldbox-discount-message",SUBSCRIBE_ONLY_FORM_ATTRIBUTES:{name:"sns-onml-subscribe-only",id:"sns-onml-subscribe-only",method:"POST",action:"/gp/product/handle-buy-box/ref\x3donml_so_l"},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",
id:"sns-onmlv2-add-to-cart",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"},JUST_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-just-subscribe",id:"sns-onmlv2-just-subscribe",method:"POST",action:"/gp/subscribe-and-save/pipeline/subscribe.html"},BUY_NOW_FORM_ATTRIBUTES:{name:"sns-onmlv2-buy-now",id:"sns-onmlv2-buy-now",method:"POST",action:""},SNS_ATC_DECLARATIVE:"#addToCart_feature_div #atc-declarative",MOBB_ALTERNATE_OFFERS:"#SecondNewAccordionRow .a-accordion-row-a11y, #ThirdNewAccordionRow .a-accordion-row-a11y",
SNS_SUBMIT_SECTION_ID:"#snsSubmitSection",SNS_SWITCH_SUBMIT_SECTION_ID:"#snsSwitchSubmitSection",SNS_BUY_NOW_BUTTON:"#snsBuyNowSubmit",SNS_SUBSCRIBE_ONLY_BUTTON:"#snsSubscribeOnlySubmit",SNS_DECLARATIVE_ACTION:"#sns-submit-declarative",SNS_SUBSCRIBE_ONLY_ACTION:"sns-subscribe-only",SNS_BUY_BOX_PARAMS:"sns-buybox-message-params",SNS_BUY_BOX_PARAM_MAP:"buyboxMessageParamsMap",SNS_SELECT_DELIVERY_URL:"/gp/subscribe-and-save/dp/delivery.html/ref\x3drcxsubs_sns_delivery_url?app-nav-type\x3dmodal",SNS_SELECT_DELIVERY_OPTION_ID:"#snsDeliveryOption",
SNS_DELIVERY_OPTION_SNS:"sns",SNS_DELIVERY_OPTION_ONML:"onml",SNS_BASE_PRICE:"#sns-base-price",SNS_TIERED_PRICE:"#sns-tiered-price",SNS_DELIVERY_OPTION_DIV:"#snsDeliveryOpt",ONML_DELIVERY_OPTION_DIV:"#onmlDeliveryOpt",SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT:"#sns-button-text",SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT:"#onml-button-text",SNS_MOD_ACCORDION_HEADER_FEATURES:"#sns-cbb-prime-shipping-header-wrapper, #accordion-header-delivery-link",SNS_SUBSCRIPTION_PRICE:"#subscriptionPrice",SNS_DELIVERY_OPTION_SNS_LINK:"#sns-delivery-link",
ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK:"#accordion-header-sns-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK:"#onml-delivery-link",ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK:"#accordion-header-onml-delivery-link",SNS_DELIVERY_BOTTOM_SHEET:"#snsDeliveryDateBottomSheet",SNS_DELIVERY_BOTTOM_SHEET_SPINNER:"#snsDeliveryDateBottomSheetSpinner",SNS_DELIVERY_BOTTOM_SHEET_CONTENT:"#snsDeliveryDateBottomSheetContent",SNS_SUBSCRIBE_SUBMIT_BUTTON:"#rcx-subscribe-submit-button",SNS_DELIVERY_UPSELL:"#sns-delivery-buybox-upsell-message",
SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#sns-delivery-buybox-upsell-message-new-or-unrecognized",SNS_DELIVERY_NON_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-non-tiered",SNS_DELIVERY_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-tiered",ONML_DELIVERY_UPSELL:"#onml-delivery-buybox-upsell-message",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#onml-delivery-buybox-upsell-message-new-or-unrecognized-sns-customer",ONML_DELIVERY_NON_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-non-tiered",
ONML_DELIVERY_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-tiered",SNS_ADD_TO_CART_FORM:"#sns-onmlv2-add-to-cart",JUST_SUBSCRIBE_FORM:"#sns-onmlv2-just-subscribe",BUY_NOW_FORM:"#sns-onmlv2-buy-now",SNS_DELIVERY_PILL:"#sns-delivery-pill",SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#sns-delivery-new-or-unrecognized-sns-customer-pill",SNS_DELIVERY_NON_TIERED_PILL:"#sns-delivery-non-tiered-pill",SNS_DELIVERY_TIERED_PILL:"#sns-delivery-tiered-pill",ONML_DELIVERY_PILL:"#onml-delivery-pill",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#onml-delivery-new-or-unrecognized-sns-customer-pill",
ONML_DELIVERY_NON_TIERED_PILL:"#onml-delivery-non-tiered-pill",ONML_DELIVERY_TIERED_PILL:"#onml-delivery-tiered-pill",SNS_TOGGLE_BUY_BOX:"[name\x3dtoggleBuyBox]",SNS_ONMLV2_JOIN_PRIME_UPSELL:"#momAEmsg",SNS_ONMLV2_JOIN_PRIME_CHECKBOX:"#chkMom",SNS_ONMLV2_JOIN_PRIME_BUTTON:"#mom-join-button",SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX:"#snsDeliveryDateBottomSheet",SNS_SWITCH_WIDGET_ONML_URL:"/gp/subscribe-and-save/myd/switchWidgetMobile?",SNS_SWITCH_WIDGET_LEGACY_URL:"/gp/subscribe-and-save/myd/switchWidgetLegacy?",
SNS_SWITCH_WIDGET_LEGACY_CONTINUE_URL:"/gp/subscribe-and-save/pipeline/subscribe.html?",SNS_SWITCH_WIDGET_ONML_DESKTOP_URL:"/hz/subscribe-and-save/myd/switchWidgetAjax?",SNS_SWITCH_WIDGET_LEGACY_DESKTOP_URL:"/hz/subscribe-and-save/myd/switchWidgetAjaxLegacy?",SNS_SWITCH_WIDGET_PARAMS:"sns-switch-message-params",SNS_SWITCH_WIDGET_PARAM_MAP:"switchMessageParamsMap"}});n.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-bottom-sheet",
function(d,a,c,b,e,g){return{init:function(){function h(){var a=f(b.SNS_FREQUENCY_FORM_FIELD).val();f(b.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+a+"]").click()}var f=d.$;a.isMobileDevice()&&(a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,h),a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,h),d.declarative("sns-frequency-selected","click",function(h){var m=f(b.SNS_FREQUENCY_FORM_FIELD);h=h.$target;var l=h.val(),p={};p[b.SNS_FREQUENCY_NAME]=
l;g.setOnmlDeclaratives(p);m.val(l);q.setTimeout(function(){d.trigger(b.SNS_DATA_UPDATE_EVENT)},0);f(b.SNS_FIRST_RECURRING_DELIVERY_DATE).html(h.data("frdd-label"));f(b.SNS_SELECTED_FREQUENCY_LABEL).html(h.data("freq-button-label"));e.updateMessages(l);a.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY,l)}))}}});n.when("A","sns-constants","sns-utils","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-popover",function(d,a,c,b,e,g){return{init:function(){function h(){var a=
f(b.SNS_FREQUENCY_FORM_FIELD).val();f("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(a-1)+"] a").click()}var f=d.$;c.isMobileDevice()||(c.registerCallbackForNameSpace(a.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,h),d.on("a:accordion:sns-dp-frequency-accordion:select",function(h){var m=f(b.SNS_FREQUENCY_FORM_FIELD),l=f(b.SNS_DP_FREQUENCY_TRIGGER),p=f(h.selectedRow.$row[0]);h=p.data().frequencyLabel;var p=p.data().frequencyValue,t={};t[b.SNS_FREQUENCY_NAME]=p;g.setOnmlDeclaratives(t);m.val(p);
q.setTimeout(function(){d.trigger(b.SNS_DATA_UPDATE_EVENT)},0);l.text(h);e.updateMessages(p);c.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY,p)}))}}});n.when("A","sns-utils","sns-constants","sns-buybox-utils","sns-buybox-constants","sns-atc-utils","sns-atc-login").register("sns-opt-in-checkbox",function(d,a,c,b,e,g,h){return{init:function(){function f(f){var l=d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked"),k=d.$(e.SNS_OPT_IN_FORM_FIELD);if(l&&(a.isMobileApp()||a.isTabletApp())){var t=g.getAddToCartStrings();
h.signInIfNotSignedIn(t,f&&f.snsOnLoad)}f={};f[e.SNS_OPT_IN_NAME]=l;g.setOnmlDeclaratives(f);k.val(l);q.setTimeout(function(){d.trigger(e.SNS_DATA_UPDATE_EVENT)},0);q.setTimeout(function(){b.updateAddToCartButtonLabel(l);b.updateOneClickButtonLabel(l);b.updateBuyNowButtonLabel(l)},0);b.showSnSMerchantInfoIfSnSOptInChecked(l);b.showGoldBoxDiscountMessageIfSnSOptInChecked(l);b.showSubscribeOnlyButtonIfSnSOptInChecked(l);a.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,l)}function k(){var b=function(){var a=
d.$("#buybox").find(".a-declarative").has("#add-to-cart-button");if(1===a.length)return a;a=d.$("#atc-declarative");return 1===a.length?a:null}();b&&b.click(function(){var c=g.getAddToCartData();if(c.inputs[e.SNS_OPT_IN_NAME]!==r){var f=a.getAStateFromDom(e.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams"),h=d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked"),k={},k=f||{};k[e.SNS_OPT_IN_NAME]=h;var x=b.data("awMash");Object.keys(k).forEach(function(a){x.inputs[a]!==c.inputs[a]&&(x.inputs[a]=
c.inputs[a])})}})}(a.isMobileApp()||a.isTabletApp())&&h.setValuesFromUrlParamsIfPresent();a.isSnSEligible()&&f({snsOnLoad:!0});d.declarative("sns-opt-in-checked","change",f);a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,f);a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,a.enableSnSOptIn);a.isMobileApp()&&(a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,k),k());a.enableSnSOptIn()}}});n.when("A","sns-constants","sns-buybox-constants","sns-utils").register("sns-messaging-utils",
function(d,a,c,b){var e=function(a,b){var f=a.firstRecurringDeliveryDates[b-1];d.$(c.SNS_ONML_FRDD).each(function(){d.$(this).html(f)})};return{updateMessages:function(g){var h=b.getAStateFromDom(c.SNS_OPT_IN_FEATURE_DIV,"sns-buybox-message-params","buyboxMessageParamsMap");if(h){var f=d.$(c.SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED),k=d.$(c.SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED),m=d.$(c.SNS_DISCOUNT_PILL_POPOVER_TIERED),l=d.$(c.SNS_DISCOUNT_PILL_POPOVER_NON_TIERED);h.tieredStatusOnRecurringDeliveryDates[g-
1]===a.TIERED?(f.addClass("aok-hidden"),k.removeClass("aok-hidden"),l.addClass("aok-hidden"),m.removeClass("aok-hidden")):(f.removeClass("aok-hidden"),k.addClass("aok-hidden"),l.removeClass("aok-hidden"),m.addClass("aok-hidden"));f=h.discountType;k=d.$(c.SNS_DISCOUNT_PILL);h.tieredStatusOnRecurringDeliveryDates[g-1]===a.TIERED?(k.attr("data-tiered-level",a.PREMIUM),f===a.ZERO_BASE&&k.removeClass("aok-hidden")):(k.attr("data-tiered-level",a.BASE),f===a.ZERO_BASE&&k.addClass("aok-hidden"));e(h,g)}}}});
n.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-buy-now",function(d,a,c,b){var e=d.$;d.declarative("sns-buy-now","click",function(d){if(!b.isSnsLocked()&&!b.isSnsLocked()){d=e("\x3cform\x3e",{method:a.BUY_NOW_FORM_ATTRIBUTES.method,action:"/gp/subscribe-and-save/buynow/buy-now.html",id:a.BUY_NOW_FORM_ATTRIBUTES.id,name:a.BUY_NOW_FORM_ATTRIBUTES.name});var h="";if(c.isCbbTemplateEnabled())for(var f=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},
{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],k=0;k<f.length;k++)var m=f[k].name,l=f[k].fieldName?f[k].fieldName:m,l=c.getOnmlv2FormValueByName(l),h=h+c.createHiddenInput(m,l);else{c.removeFormFieldsIntroducedByCbb();f=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}];for(k=0;k<f.length;k++)m=f[k].name,l=f[k].fieldName?
f[k].fieldName:m,l=c.isMobileDevice()?e(a.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+l+"]").val():c.isWeb()?e(a.ADD_TO_CART_DIV+" [name\x3d"+l+"]").val():e(a.TABLET_ADD_TO_CART_DIV+" [name\x3d"+l+"]").val(),h+=c.createHiddenInput(m,l);f=c.isMobileDevice()?e(a.SNS_MOBILE_QUANTITY):e(a.QUANTITY_CONTAINER).find(a.SNS_QUANTITY);h+=c.createHiddenInput("quantity",f.val())}h+=c.createHiddenInput("submit.buy-now","1");d.html(h);e("body").append(d);e(a.BUY_NOW_FORM).submit();e(a.BUY_NOW_FORM).remove()}})});n.when("A",
"sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-subscribe-only",function(d,a,c,b){var e=d.$;d.declarative("sns-subscribe-only","click",function(d){if(!b.isSnsLocked()){d=e("\x3cform\x3e",{method:a.JUST_SUBSCRIBE_FORM_ATTRIBUTES.method,action:a.JUST_SUBSCRIBE_FORM_ATTRIBUTES.action,id:a.JUST_SUBSCRIBE_FORM_ATTRIBUTES.id,name:a.JUST_SUBSCRIBE_FORM_ATTRIBUTES.name});var h="";if(c.isCbbTemplateEnabled())for(var f=[{name:"ASIN"},{name:"snsMerchantID"},{name:"offerListingID",fieldName:"snsOfferListingID"},
{name:"longShipAddressId",fieldName:"snsAddressId"},{name:"rcxOrdFreq"},{name:"quantity"}],k=0;k<f.length;k++)var m=f[k].name,l=f[k].fieldName?f[k].fieldName:m,l=c.getOnmlv2FormValueByName(l),h=h+c.createHiddenInput(m,l);else{c.removeFormFieldsIntroducedByCbb();f=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsMerchantID"},{name:"longShipAddressId",fieldName:"snsAddressId"}];for(k=0;k<f.length;k++)m=f[k].name,l=f[k].fieldName?f[k].fieldName:m,l=c.isMobileDevice()?
e(a.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+l+"]").val():c.isWeb()?e(a.ADD_TO_CART_DIV+" [name\x3d"+l+"]").val():e(a.TABLET_ADD_TO_CART_DIV+" [name\x3d"+l+"]").val(),h+=c.createHiddenInput(m,l);f=c.isMobileDevice()?e(a.SNS_MOBILE_QUANTITY):e(a.QUANTITY_CONTAINER).find(a.SNS_QUANTITY);h+=c.createHiddenInput("quantity",f.val())}h+=c.createHiddenInput("ref","sns-subscribe-only");h+=c.createHiddenInput("submit.subscribe-only","1");d.html(h);e("body").append(d);e(a.JUST_SUBSCRIBE_FORM).submit();e(a.JUST_SUBSCRIBE_FORM).remove()}})});
n.when("A","sns-onmlv2-utils","sns-onmlv2-message-utils","sns-buybox-constants","sns-constants","a-modal","sns-priceblock-constants","sns-onmlv2-priceblock-utils").register("sns-select-delivery",function(d,a,c,b,e,g,h,f){var k=d.$,m;d.declarative("sns-delivery-date","click",function(c){if(c=a.getBuyboxMessageParam()){var f=a.generateUrlParams(c),e=k(b.SNS_SUBMIT_SECTION_ID);m=g.create(e,{url:f,header:c.deliveryModalTitle,name:"sns-delivery-modal"});m.show()}});d.declarative("sns-delivery-cancel-btn",
"click",function(a){m.hide()});d.declarative("sns-delivery-change-btn","click",function(h){if(h=a.getBuyboxMessageParam()){k(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(a.setDeliveryOption(e.DELIVERY_OPTION.SNS),d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,b.SNS_SUBSCRIBE_ONLY_ACTION)):k(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(a.setDeliveryOption(e.DELIVERY_OPTION.ONML),d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,
a.getOnmlDeclarativeAction()));var g=a.getDeliveryOption();h=a.getBuyboxMessageParam();var t=k(b.SNS_FREQUENCY_FORM_FIELD).val();c.updateUpsellMessages(g,h,t);c.updateFirstRecurringDeliveryDate(h,t);c.updateDiscountPill(g,h,t);f.updateDesktopPriceBlock(h);f.updateBuyboxPriceBlock(h);f.updateBuyboxDeliveryOption(h);m.hide()}});d.on("a:popover:beforeHide:sns-delivery-modal",function(a){g.remove(k(b.SNS_SUBMIT_SECTION_ID))})});n.when("A","sns-onmlv2-utils","sns-onmlv2-message-utils","sns-buybox-constants",
"sns-constants","a-sheet","sns-onmlv2-priceblock-utils").register("sns-select-delivery-bottom-sheet",function(d,a,c,b,e,g,h){var f=d.$,k;d.declarative("sns-delivery-date-bottom-sheet","click",function(c){if(c=a.getBuyboxMessageParam()){var e=f(b.MOBILE_SNS_BUYBOX+", "+b.SNS_CBB_ACCORDION_ROW).find(b.SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX);if(e.length||k){var h=a.generateUrlParams(c);f.get(h,function(a){f(b.SNS_DELIVERY_BOTTOM_SHEET_SPINNER).addClass("aok-hidden");f(b.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).removeClass("aok-hidden");
f(b.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).html(a)});f(b.SNS_DELIVERY_BOTTOM_SHEET_SPINNER).removeClass("aok-hidden");f(b.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).addClass("aok-hidden");e.length&&(k&&(k.$container.remove(),k=null),k=g.create({name:"sns_delivery_bottom_sheet",preloadDomId:"snsDeliveryDateBottomSheet",height:270,closeType:"message",closeMessage:c.bottomSheetCloseMessage,sheetType:"web"}));k.show()}}});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){var m=a.getBuyboxMessageParam();
if(m){f(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(a.setDeliveryOption(e.DELIVERY_OPTION.SNS),d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,b.SNS_SUBSCRIBE_ONLY_ACTION)):f(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(a.setDeliveryOption(e.DELIVERY_OPTION.ONML),d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,a.getOnmlDeclarativeAction()));var l=a.getDeliveryOption(),m=a.getBuyboxMessageParam(),g=f(b.SNS_FREQUENCY_FORM_FIELD_MOBILE).val();
c.updateUpsellMessages(l,m,g);c.updateFirstRecurringDeliveryDate(m,g);c.updateDiscountPill(l,m,g);h.updateBuyboxPriceBlock(m);h.updateBuyboxDeliveryOption(m)}})});n.when("A","sns-buybox-constants","sns-priceblock-constants").register("sns-onmlv2-priceblock-utils",function(d,a,c){var b=d.$;return{updateDesktopPriceBlock:function(e){if(e){var d=e.zeroBaseDiscount,h=0<b(a.SNS_TOGGLE_BUY_BOX).length,f=0<b(c.DP_STRIKE_PRICE).length;b(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(b(c.ONE_NOW_SHIPPING_MESSAGE).addClass("aok-hidden"),
e.justSubscribeTieredStatus?(b(c.SNS_TIERED_PRICE).removeClass("aok-hidden"),b(c.SNS_BASED_PRICE).addClass("aok-hidden"),b(c.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),b(c.SNS_BASED_SAVINGS).addClass("aok-hidden"),b(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),b(c.SNS_SAVINGS_ROW).removeClass("aok-hidden")):d?(b(c.SNS_TIERED_PRICE).addClass("aok-hidden"),b(c.SNS_BASED_PRICE).removeClass("aok-hidden"),b(c.SNS_SAVINGS_ROW).addClass("aok-hidden")):(b(c.SNS_TIERED_PRICE).addClass("aok-hidden"),b(c.SNS_BASED_PRICE).removeClass("aok-hidden"),
b(c.SNS_TIERED_SAVINGS).addClass("aok-hidden"),b(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),b(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),b(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"))):b(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(b(c.ONE_NOW_SHIPPING_MESSAGE).removeClass("aok-hidden"),d?(b(c.SNS_TIERED_PRICE).addClass("aok-hidden"),b(c.SNS_BASED_PRICE).removeClass("aok-hidden"),b(c.SNS_SAVINGS_ROW).addClass("aok-hidden"),f&&(b(a.SNS_TIERED_PRICE).hasClass("aok-hidden")?(b(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"),
b(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),b(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),b(c.SNS_TIERED_SAVINGS).addClass("aok-hidden")):b(a.SNS_BASE_PRICE).hasClass("aok-hidden")&&(b(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"),b(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),b(c.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),b(c.SNS_BASED_SAVINGS).addClass("aok-hidden")))):(b(c.SNS_TIERED_PRICE).addClass("aok-hidden"),b(c.SNS_BASED_PRICE).removeClass("aok-hidden"),b(c.SNS_TIERED_SAVINGS).addClass("aok-hidden"),
b(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),b(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),b(c.SNS_SAVINGS_ROW).removeClass("aok-hidden")));h&&b(c.SNS_SAVINGS_ROW).addClass("aok-hidden")}},updateBuyboxPriceBlock:function(e){e&&(b(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(e.oneNowDiscountEligible||b(c.SNS_STRIKETHROUGH_PRICE).removeClass("aok-hidden"),e.justSubscribeTieredStatus?(b(a.SNS_BASE_PRICE).addClass("aok-hidden"),b(a.SNS_TIERED_PRICE).removeClass("aok-hidden")):(b(a.SNS_BASE_PRICE).removeClass("aok-hidden"),
b(a.SNS_TIERED_PRICE).addClass("aok-hidden"))):b(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(b(a.SNS_BASE_PRICE).removeClass("aok-hidden"),b(a.SNS_TIERED_PRICE).addClass("aok-hidden"),e.oneNowDiscountEligible||(b(c.SNS_STRIKETHROUGH_PRICE).addClass("aok-hidden"),b(c.SNS_BASED_SAVINGS).addClass("aok-hidden"))))},updateBuyboxDeliveryOption:function(c){c&&(b(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(b(a.SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT).addClass("aok-hidden"),b(a.SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT).removeClass("aok-hidden"),
b(a.SNS_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),b(a.SNS_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden"),b(a.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),b(a.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden"),b(a.SNS_SELECT_DELIVERY_OPTION_ID).val(a.SNS_DELIVERY_OPTION_SNS)):b(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(b(a.SNS_SELECT_DELIVERY_OPTION_ID).addClass("aok-hidden"),b(a.SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT).addClass("aok-hidden"),b(a.SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT).removeClass("aok-hidden"),
b(a.SNS_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),b(a.SNS_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),b(a.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),b(a.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),b(a.SNS_SELECT_DELIVERY_OPTION_ID).val(a.SNS_DELIVERY_OPTION_ONML)))}}});n.when("A","sns-buybox-constants","sns-constants").register("sns-onmlv2-message-utils",function(d,a,c){function b(){g("#sns-delivery-buybox-upsell-message").find([a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,
a.SNS_DELIVERY_NON_TIERED_UPSELL,a.SNS_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden");g("#onml-delivery-buybox-upsell-message").find([a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,a.ONML_DELIVERY_NON_TIERED_UPSELL,a.ONML_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden")}function e(){g("#sns-delivery-pill").find([a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,a.SNS_DELIVERY_NON_TIERED_PILL,a.SNS_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden");g("#onml-delivery-pill").find([a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,
a.ONML_DELIVERY_NON_TIERED_PILL,a.ONML_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden")}var g=d.$;return{updateFirstRecurringDeliveryDate:function(b,c){if(b&&c){var e=b.firstRecurringDeliveryDates[c-1];g(a.SNS_ONMLV2_FRDD).each(function(){g(this).html(e)})}},updateUpsellMessages:function(e,f,d){if(e&&f&&d){var m=f.snsCustomer,l=null==f.snsJustSubscribeOptionEnabled?f.snsCustomer||!1:f.snsJustSubscribeOptionEnabled||!1,p=g(a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).length?!0:!1,t=f.suppressSnSOneNowOption||
!1,u=f.justSubscribeTieredStatus;f=f.tieredStatusOnRecurringDeliveryDates[d-1]===c.TIERED;e===c.DELIVERY_OPTION.SNS?(g(a.SNS_DELIVERY_UPSELL).removeClass("aok-hidden"),g(a.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),l||t?p&&!m?(b(),g(a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):u?(b(),g(a.SNS_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(b(),g(a.SNS_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):b()):e===c.DELIVERY_OPTION.ONML?(g(a.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),
g(a.ONML_DELIVERY_UPSELL).removeClass("aok-hidden"),l?p&&!m?(b(),g(a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):f?(b(),g(a.ONML_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(b(),g(a.ONML_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):(b(),g(a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden"))):(g(a.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),g(a.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),b())}},updateDiscountPill:function(b,f,d){if(b&&f&&
d){var m=f.snsCustomer,l=null==f.snsJustSubscribeOptionEnabled?f.snsCustomer||!1:f.snsJustSubscribeOptionEnabled||!1,p=g(a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).length?!0:!1,t=f.suppressSnSOneNowOption||!1,u=f.justSubscribeTieredStatus;d=f.tieredStatusOnRecurringDeliveryDates[d-1]===c.TIERED;f=f.zeroBaseDiscount;b===c.DELIVERY_OPTION.SNS?(g(a.SNS_DELIVERY_PILL).removeClass("aok-hidden"),g(a.ONML_DELIVERY_PILL).addClass("aok-hidden"),l||t?p&&!m?(e(),f||g(a.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):
u?(e(),g(a.SNS_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(e(),f||g(a.SNS_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):e()):b===c.DELIVERY_OPTION.ONML?(g(a.SNS_DELIVERY_PILL).addClass("aok-hidden"),g(a.ONML_DELIVERY_PILL).removeClass("aok-hidden"),l?p&&!m?(e(),f||g(a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):d?(e(),g(a.ONML_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(e(),f||g(a.ONML_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):(e(),f||g(a.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden"))):
(e(),g(a.SNS_DELIVERY_PILL).addClass("aok-hidden"),g(a.ONML_DELIVERY_PILL).addClass("aok-hidden"))}}}});n.when("A","sns-onmlv2-utils","sns-buybox-constants","sns-onmlv2-message-utils").register("sns-onmlv2-frequency-update",function(d,a,c,b){var e=d.$;d.on(c.SNS_ONMLV2_FREQUENCY_TRIGGER_DROPDOWN,function(d){var h=a.getDeliveryOption(),f=a.getBuyboxMessageParam(),k=e(c.SNS_FREQUENCY_FORM_FIELD).val();f&&(h||(a.setDeliveryOption(f.deliveryOption),h=a.getDeliveryOption()),b.updateUpsellMessages(h,f,
k),b.updateFirstRecurringDeliveryDate(f,k),b.updateDiscountPill(h,f,k));d=d.value;e(c.SNS_ONMLV2_FREQUENCY_FORM_FIELD).val(d)});e(c.SNS_ONMLV2_FREQUENCY_TRIGGER_RADIO_BUTTON).change(function(d){var h=a.getDeliveryOption(),f=a.getBuyboxMessageParam(),k=d.target.value;f&&(h||(a.setDeliveryOption(f.deliveryOption),h=a.getDeliveryOption()),b.updateUpsellMessages(h,f,k),b.updateFirstRecurringDeliveryDate(f,k),b.updateDiscountPill(h,f,k));d=d.target.value;e(c.SNS_ONMLV2_FREQUENCY_FORM_FIELD).val(d)})});
n.when("A","sns-buybox-constants").register("sns-onmlv2-quantity-update",function(d,a){var c=d.$;d.on(a.SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN,function(b){b=b.value;c(a.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(b)});c(a.SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON).change(function(b){b=b.target.value;c(a.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(b)})});n.register("sns-priceblock-constants",function(){return{PRICEBLOCK_SNSPRICE_ROW:"#priceblock_snsprice_row",SNS_UPSELL:"#priceblock_snsupsell_row",SNS_SAVINGS:"#snsprice_savings",
DP_OUR_PRICE:"#priceblock_ourprice",DP_OUR_PRICE_LABEL:"#priceblock_ourprice_lbl",DP_OUR_PRICE_SAVINGS:"#regularprice_savings",DP_OUR_PRICE_BADGING:"#ourprice_fbabadge",DP_OUR_PRICE_SHIPPING:"#ourprice_shippingmessage",DP_OUR_PRICE_PPU:"#priceblock_ourprice_row #priceblock_ourprice+.a-size-small",DP_STRIKE_PRICE:"#price .a-text-strike",DP_SALE_PRICE:"#priceblock_saleprice",DP_SALE_PRICE_LABEL:"#priceblock_saleprice_lbl",DP_SALE_PRICE_SHIPPING:"#saleprice_shippingmessage",DP_SALE_PRICE_PPU:"#priceblock_saleprice_row #priceblock_saleprice+.a-size-small",
DP_DEAL_PRICE:"#priceblock_dealprice",DP_DEAL_PRICE_SAVINGS:"#dealprice_savings",DP_DEAL_PRICE_SHIPPING:"#dealprice_shippingmessage",DP_DEAL_PRICE_PPU:"#priceblock_dealprice_row #priceblock_dealprice+.a-size-small",SNS_PITCH_PRICE_UPSELL_TEXT:"#onmlPriceBlockUpsellText",SNS_ATF_REDESIGN_UPSELL_UNCHECKED:"#onml-atf-redesign-upsell-unchecked",SNS_ATF_REDESIGN_UPSELL_CHECKED:"#onml-atf-redesign-upsell-checked",ONML_ATF_REDESIGN_UPSELL:"#onml-atf-redesign-upsell",SNS_PITCH_PRICE_FEATURE:"#snsPitchPrice_feature_div",
NEW_PITCH_PRICE_FEATURE:"#newPitchPriceWrapper_feature_div",MOBILE_OUR_PRICE_SHIPPING:"#ourPrice_availability",SHIPPING_DETAILS:'[data-a-sheet*\x3d"shippingDetailsDisplayContent"]',SNS_TIERED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Tiered, #snsPrice #priceblock_snsprice_Tiered",SNS_BASED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Based, #snsPrice #priceblock_snsprice_Based",SNS_TIERED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_Tiered, #snsPrice #snsSavings_Tiered",SNS_BASED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_NonTiered, #snsPrice #snsSavings_NonTiered",
SNS_SAVINGS_LABEL:"#unifiedPrice_feature_div #snsSavings_lbl",SNS_SAVINGS_ROW:"#unifiedPrice_feature_div #priceblock_snsSavings_row, #snsPrice #priceblock_snsSavings_row",ONE_NOW_SHIPPING_MESSAGE:"#priceblock_oneNowShippingMessage, #priceblock_oneNowShippingMessage_dpv2",SNS_STRIKETHROUGH_PRICE:"#snsStrikeThroughPrice"}});n.when("A","sns-utils","sns-constants","sns-price-utils","sns-buybox-constants","sns-priceblock-constants").register("sns-price-refresh",function(d,a,c,b,e,g){return{init:function(){d.declarative("sns-opt-in-checked",
"change",function(){b.showSnSPriceIfSnSOptInChecked()});a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,b.showSnSPriceIfSnSOptInChecked);b.showSnSPriceIfSnSOptInChecked();d.$(e.SNS_BUY_NEW_BUTTON).click(function(){var b=e.SNS_OPT_IN_CHECKBOX,h=a.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN),m=g.SNS_UPSELL,l=g.SNS_PITCH_PRICE_UPSELL_TEXT,p=g.ONML_ATF_REDESIGN_UPSELL;d.$(b).is(":checked")!==h&&(d.$(b).click(),a.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,h));d.$(p).removeClass("aok-hidden");
!1===d.$(b).is(":checked")&&(d.$(m).removeClass("aok-hidden"),d.$(l).removeClass("aok-hidden"))});d.$(e.SNS_BUY_USED_BUTTON).click(function(){h()});d.$(e.MOBB_ALTERNATE_OFFERS).click(function(){h()});var h=function(){var b=e.SNS_OPT_IN_CHECKBOX,h=a.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN),m=g.SNS_UPSELL,l=g.SNS_PITCH_PRICE_UPSELL_TEXT,p=g.ONML_ATF_REDESIGN_UPSELL;!0===h&&(d.$(b).click(),a.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,!0));d.$(p).addClass("aok-hidden");d.$(m).addClass("aok-hidden");
d.$(l).addClass("aok-hidden")}}}});n.when("A","sns-utils","sns-priceblock-constants","sns-buybox-constants").register("sns-price-utils",function(d,a,c,b){var e=d.$,g=c.SNS_PITCH_PRICE_UPSELL_TEXT,h=c.SNS_PITCH_PRICE_FEATURE,f=c.NEW_PITCH_PRICE_FEATURE,k=c.PRICEBLOCK_SNSPRICE_ROW,m=b.SNS_OPT_IN_CHECKBOX,l=c.SNS_UPSELL,p=c.SNS_SAVINGS,t=c.DP_OUR_PRICE,u=c.DP_OUR_PRICE_LABEL,x=c.DP_OUR_PRICE_SAVINGS,q=c.DP_OUR_PRICE_BADGING,n=c.DP_OUR_PRICE_SHIPPING,y=c.DP_SALE_PRICE,z=c.DP_SALE_PRICE_LABEL,A=c.DP_SALE_PRICE_SHIPPING,
r=c.DP_DEAL_PRICE,v=c.DP_DEAL_PRICE_SAVINGS,w=c.DP_DEAL_PRICE_SHIPPING,B=c.MOBILE_OUR_PRICE_SHIPPING,C=c.SHIPPING_DETAILS,D=b.SNS_BUY_NEW_PRICE,E=b.NON_CBB_BUY_NEW_PRICE,F=b.CBB_BUY_NEW_PRICE,G=b.SNS_PRICE_IN_BUY_USED_SECTION,H=b.CBB_SNS_BUY_NEW_PRICE,I=b.DPV2_BUY_NEW_PRICE,J=c.SNS_ATF_REDESIGN_UPSELL_CHECKED,K=c.SNS_ATF_REDESIGN_UPSELL_UNCHECKED;return{showSnSPriceIfSnSOptInChecked:function(){a.isSnSEligible()&&(e(m).is(":checked")?a.shouldShowPrice()&&(e(k).length?(e(k).removeClass("aok-hidden"),
e(p).removeClass("a-hidden"),e(l).addClass("aok-hidden"),e(x).addClass("a-hidden"),e(q).addClass("a-hidden"),e(n).addClass("a-hidden"),e(B).addClass("a-hidden"),e(t).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),e(u).addClass("onml-price-inactive"),e(y).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price "),e(z).addClass("onml-price-inactive"),e(A).addClass("a-hidden"),
e(r).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),e(v).addClass("a-hidden"),e(w).addClass("a-hidden"),e(k).css({display:"table-row",visibility:"visible"}),e(k).prev().has(C).addClass("aok-hidden"),e(E).addClass("aok-hidden"),e(D).removeClass("aok-hidden"),e(F).addClass("aok-hidden"),e(G).addClass("aok-hidden"),e(H).removeClass("aok-hidden"),e(I).addClass("aok-hidden")):(e(g).addClass("aok-hidden"),e(f).addClass("aok-hidden"),
e(h).removeClass("aok-hidden"),e(h).css({display:"block",visibility:"visible"}),e(J).removeClass("aok-hidden"),e(K).addClass("aok-hidden"))):e(k).length?(e(k).addClass("aok-hidden"),e(p).addClass("a-hidden"),e(l).removeClass("aok-hidden"),e(x).removeClass("a-hidden"),e(q).removeClass("a-hidden"),e(n).removeClass("a-hidden"),e(B).removeClass("a-hidden"),e(t).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(u).removeClass("onml-price-inactive"),
e(y).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(z).removeClass("onml-price-inactive"),e(A).removeClass("a-hidden"),e(r).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(v).removeClass("a-hidden"),e(w).removeClass("a-hidden"),e(k).prev().has(C).removeClass("aok-hidden"),e(E).removeClass("aok-hidden"),e(D).addClass("aok-hidden"),e(F).removeClass("aok-hidden"),
e(G).addClass("aok-hidden"),e(H).addClass("aok-hidden"),e(I).removeClass("aok-hidden")):(e(g).removeClass("aok-hidden"),e(f).removeClass("aok-hidden"),e(h).addClass("aok-hidden"),e(g).css({display:"block",visibility:"visible"}),e(K).removeClass("aok-hidden"),e(J).addClass("aok-hidden")))}}});n.when("A","sns-constants","sns-buybox-constants","sns-states-loaded-in-dom").register("sns-utils",function(d,a,c){var b=d.$,e={},g={},h=function(a,c,f){var e,d=function(a){if(!a||"object"===typeof a)return a;
var f=b.parseJSON;q.JSON&&q.JSON.parse&&(f=JSON.parse);try{return"string"===typeof a?f(a):null}catch(e){return q.ueLogError&&q.ueLogError(e,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};a=b(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+c+"']"))&&1<=a.length?(e=d(a.first().text()),d("object"===typeof e?e[f]:null)):e},f=function(a){var b=h(c.SNS_OPT_IN_FEATURE_DIV,"sns-onml-params","onmlParams");
return a?b&&b[a]:b},k=function(){var b=f("deviceType"),c=g[a.USER_PREFS_KEYS.ONML_PARAMS],c=c&&c.deviceType;return b||c};return{isSnSEligible:function(){return f("snsEligible")},getAStateFromDom:h,getOnmlParam:f,shouldShowPrice:function(){return f("showPrice")},getDeviceType:k,registerCallbackForNameSpace:function(a,b){e[a]||(e[a]=[]);-1===e[a].indexOf(b)&&e[a].push(b)},executeCallbacksForNameSpace:function(a){if((a=e[a])&&a.constructor===Array)for(var b=0;b<a.length;b++)a[b]()},setOnmlUserPref:function(a,
b){g[a]=b},getOnmlUserPref:function(a){return g[a]},deleteOnmlUserPref:function(a){delete g[a]},isMobileDevice:function(){var a=k();return"mobile"===a||"mobileApp"===a},isMobileApp:function(){return"mobileApp"===k()},isTabletApp:function(){var a=k();return"iPad"===a||"tabletApp"===a||"tabletLargeApp"===a},isVerucaBuyNowEnabled:function(){return f("verucaBuyNowEnabled")},isVerucaOneClickEnabled:function(){return f("verucaOneClickEnabled")},enableSnSOptIn:function(){b(c.SNS_OPT_IN_CHECKBOX).removeAttr("disabled")},
isSnsCustomer:function(){return f("snsCustomer")}}});n.when("A","sns-buybox-constants","sns-constants").register("sns-onmlv2-utils",function(d,a,c){var b=d.$,e,g=function(a,c,f){var e,d=function(a){if(!a||"object"===typeof a)return a;var f=b.parseJSON;q.JSON&&q.JSON.parse&&(f=JSON.parse);try{return"string"===typeof a?f(a):null}catch(e){return q.ueLogError&&q.ueLogError(e,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};
a=b(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+c+"']"))&&1<=a.length?(e=d(a.first().text()),d("object"===typeof e?e[f]:null)):e},h=function(){return g(r,a.SNS_BUY_BOX_PARAMS,a.SNS_BUY_BOX_PARAM_MAP)},f=function(a){var b=h();return b?b.deviceType===a:!1},k=function(){return f("mobile")||f("mobileApp")},m=function(){return f("web")},l=function(){return document.querySelector(a.SNS_ACCORDION_HEADER_RADIO_BUTTON)},p=function(a,b){return a&&b?a.tieredStatusOnRecurringDeliveryDates[b-
1]===c.TIERED:!1},t=function(a,b){return a&&b?a.firstRecurringDeliveryDates[b-1]:""};return{getAStateFromDom:g,getDeliveryOption:function(){if(!e){var a=h();a&&(e=a.deliveryOption)}return e},setDeliveryOption:function(a){e=a},getSwitchDeliveryOption:function(){if(!e){var a=h();a&&(e=a.deliveryOption)}return e},getBuyboxMessageParam:h,isMobileDevice:k,isMobileWeb:function(){return f("mobile")},isMobileApp:function(){return f("mobileApp")},isTabletApp:function(){return f("iPad")||f("tabletApp")||f("tabletLargeApp")},
isWeb:m,createHiddenInput:function(a,b){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'"\x3e'},getBuyNowAction:function(){return k()?b(a.MOBILE_ADD_TO_CART_DIV).attr("action"):m()?b(a.ADD_TO_CART_DIV).attr("action"):b(a.TABLET_ADD_TO_CART_DIV).attr("action")},getBuyNowActionFromCbbTemplate:function(){if(m())return b(a.NEW_ACCORDION_ROW_SUBMISSION_FORM).attr("action");if(k())return b(a.SNS_ACCORDION_ROW_SUBMISSION_FORM).attr("action")},getOnmlv2FormValueByName:function(c){return b(a.SNS_ONMLV2_FORM_FIELDS+
" [name\x3d'"+c+"']").val()},isCbbTemplateEnabled:function(){return b(a.SNS_CBB_ACCORDION_ROW).length},removeFormFieldsIntroducedByCbb:function(){b(a.SNS_ONMLV2_FORM_FIELDS+" #ASIN").remove();b(a.SNS_ONMLV2_FORM_FIELDS+" #offerListingID").remove();b(a.SNS_ONMLV2_FORM_FIELDS+" #snsOfferListingID").remove();b(a.SNS_ONMLV2_FORM_FIELDS+" #snsMerchantID").remove();b(a.SNS_ONMLV2_FORM_FIELDS+" #rcxOrdFreq").remove();b(a.SNS_ONMLV2_FORM_FIELDS+" #quantity").remove()},getCbbSnsAccordionRowRadioButton:l,isCbbSnsAccordionRowExpanded:function(){return"true"===
l().getAttribute("aria-checked")},isTiered:p,getOnmlFirstRecurringDeliveryDate:t,getOnmlDeclarativeAction:function(){return b("#onmlDeclarativeAction").val()},generateUrlParams:function(c){if(!c){var f=a.SNS_SELECT_DELIVERY_URL;return f}var e=(k()?b(a.SNS_FREQUENCY_FORM_FIELD_MOBILE):b(a.SNS_FREQUENCY_FORM_FIELD)).val(),d=[];d.subscribeOnlyDate=c.justSubscribeDeliveryDate;d.subscribeOnlyDateShort=c.justSubscribeShortDeliveryDate;d.subscribeOnlyDiscount=c.justSubscribeTieredStatus?c.tieredDiscountPercent:
c.baseDiscountPercent;d.onmlDate=c.oneTimeDeliveryDate;d.onmlDateShort=c.oneTimeShortDeliveryDate;d.onmlDiscount=c.baseDiscountPercent;d.onmlNextDate=t(c,e);d.onmlNextDiscount=p(c,e)?c.tieredDiscountPercent:c.baseDiscountPercent;d.snsDeliveryOption=b(a.SNS_SELECT_DELIVERY_OPTION_ID).val();d.isMobile=k();d.snscsrf=c.deliveryModalCSRFToken;f=a.SNS_SELECT_DELIVERY_URL;Object.keys(d).forEach(function(a){f+="\x26"+a+"\x3d"+encodeURI(d[a])});return f},createUrlParameter:function(a,b){b=encodeURIComponent(b);
return a+"\x3d"+b+"\x26"}}});n.when("A","sns-buybox-constants").register("sns-accessibilty-handler",function(d,a){var c=d.$;d=[a.SNS_QUANTITY,a.SNS_FREQUENCY_FORM_FIELD];var b=function(a){!a||!a instanceof c||0===a.length||a.attr("tabIndex",0)};b(c(a.DSK_BB+", "+a.SNS_CBB_ACCORDION_ROW+", "+a.DSK_BB_DPV1).find(d.join()));return{setZeroTabIndex:b}});n.when("ready").register("sns-stringify-util",function(){return JSON&&"function"===typeof JSON.stringify?JSON.stringify:function(){var d={'"':'\\"',"\\":"\\\\",
"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},a=/[\\"\u0000-\u001F\u2028\u2029]/g,c=Object.prototype.toString,b=Array.isArray||function(a){return"[object Array]"===c.call(a)},e=function(a){return d[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)};return function h(f){if(null===f)return"null";if("number"===typeof f)return isFinite(f)?f.toString():"null";if("boolean"===typeof f)return f.toString();if("object"===typeof f){if("function"===typeof f.toJSON)return h(f.toJSON());if(b(f)){for(var d=
"[",m=0;m<f.length;m++)d+=(m?", ":"")+h(f[m]);return d+"]"}if("[object Object]"===c.call(f)){d=[];for(m in f)f.hasOwnProperty(m)&&d.push(h(m)+": "+h(f[m]));return"{"+d.join(", ")+"}"}}return'"'+f.toString().replace(a,e)+'"'}}()});n.when("A","sns-stringify-util","ready").register("sns-declarative-util",function(d,a){function c(a){return a&&("object"===typeof a||"object"===typeof a.prototype)}function b(){for(var a=0;a<arguments.length;a++)if("string"!==typeof arguments[a])throw"Function parameter must be of type string.";
}function e(){for(var a=Object.prototype.toString,c=Array.isArray||function(b){return"[object Array]"===a.call(b)},d=0;d<arguments.length;d++){var e=arguments[d];if(c(e)&&0<e.length)for(var g=0;g<e.length;g++)b(e[g]);else throw"Function parameter must be a non empty array.";}}function g(b){var f="data-"+b.getAttribute("data-action"),e=function(){var c=b.getAttribute(f),e=c?d.parseJSON(c):{};e.save=function(){var c=e.save;delete e.save;var d=a(e);b.setAttribute(f,d);e.save=c};return e};return{hasExactKeyHeirarchy:function(a,
b){var f=e();a=a.split(".");for(var d=0<a.length,h=0;h<a.length&&d;h++)var g=a[h],d=c(f)&&f.hasOwnProperty(g),f=f[g];d&&b!==r&&(d=f===b);return d},hasParsableJSON:function(){try{return e().save(),!0}catch(a){return!1}},put:function(a){var b=e();c(b.inputs)||(b.inputs={});d.$.each(a,function(a,c){b.inputs[a]=c});b.save()},getData:e}}return{query:function(a){e(a);var f=[],k=[],m=[],l,p,q=function(){return{numberOfMatchingActions:f.length,allMatchKeyValue:function(a,c){b(a);for(var d=0<this.numberOfMatchingActions,
e=0;e<this.numberOfMatchingActions&&d;e++)d=(d=f[e])&&d.hasExactKeyHeirarchy(a,c);return d},putAll:function(a){for(var b=0;b<this.numberOfMatchingActions;b++)f[b].put(a)},getStrings:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=f[a];if(b.getData().strings)return b.getData().strings}return[]},getData:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=f[a];if(b.getData())return b.getData()}return[]}}},n=function(){for(var b=d.$("#buybox").find(".a-declarative").get(),
e=0<k.length,l=0;l<b.length;l++){var p=b[l],n;a:{n=p;for(var r=a,u=0;u<r.length;u++){var v;var w=n;v=r[u];c(w)&&"string"===typeof v?(w=w.getAttribute("data-action")||"",v=0===v.localeCompare(w)):v=!1;if(v){n=!0;break a}}n=!1}if(n&&(p=g(p),p.hasParsableJSON()))if(e){n=!0;for(r=0;r<k.length&&n;r++)n=p.hasExactKeyHeirarchy(k[r],m[r]);n&&f.push(p)}else f.push(p)}return q()};l=function(a){b(a);k.push(a);return{equals:p,equalsAny:function(){return p(r)}}};p=function(a){m.push(a);return{where:l,execute:n}};
return{where:l,execute:n}}}});n.when("A","sns-utils","sns-buybox-constants","sns-declarative-util").register("sns-atc-utils",function(d,a,c,b){var e=d.$,g=["aw-mash","add-to-cart","one-click","show-services-interstitial"],h=function(a){b.query(g).where("buttonID").equals("add-to-cart").execute().putAll(a);b.query(g).where("buttonID").equals("buy-now").execute().putAll(a);b.query(g).where("buttonID").equals("buy-now-one-click").execute().putAll(a)};return{initializeOnmlDeclaratives:function(){if(a.isSnSEligible()){var b=
a.getAStateFromDom(c.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams");h(b||{});e("\x3cinput type\x3dhidden value\x3dtrue \x3e").prop("id",c.SNS_ONML_INIT_INPUT_ID).appendTo(c.SNS_OPT_IN_FEATURE_DIV)}},setOnmlDeclaratives:h,getAddToCartStrings:function(){return b.query(g).where("buttonID").equals("add-to-cart").execute().getStrings()},getAddToCartData:function(){return b.query(g).where("buttonID").equals("add-to-cart").execute().getData()}}});n.when("A","sns-utils","sns-constants",
"sns-atc-utils").register("sns-atc",function(d,a,c,b){return{init:function(){a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,b.initializeOnmlDeclaratives);b.initializeOnmlDeclaratives()}}});n.when("A","sns-utils","sns-buybox-constants","sns-metrics-constants").register("sns-atc-login",function(d,a,c,b){function e(a){var b=q.location.search.substring(1);return decodeURIComponent(b).split("\x26").map(function(a){return a.split("\x3d")}).filter(function(b){return b[0]===a}).map(function(a){return a[1]})[0]||
r}var g=function(a){function b(c){amazon.mash.showAlert({title:a.aa_mash_encounter_problem,message:c,buttonTitles:[a.aa_mash_ok],successCallback:function(a){},failCallback:function(a){}})}amazon.mash.showLoginDialog({successCallback:function(){var a=d.$(c.SNS_QUANTITY_FIELD).val(),b=d.$(c.SNS_FREQUENCY_FORM_FIELD).val(),a={snsQty:a,snsOptIn:!0,snsFreq:b},a=d.$.param(a),b=location.href,b=-1<b.indexOf("?")?b+("\x26"+a):b+("?"+a);q.location.href=b},failCallback:function(a){"CANCELED"!==a?b(a):(a=c.SNS_OPT_IN_CHECKBOX,
!0===d.$(a).is(":checked")&&d.$(a).click())}})},h=function(){!0===d.$(c.SNS_OPT_IN_CHECKBOX).is(":checked")&&d.$(c.SNS_OPT_IN_CHECKBOX).click()};return{setValuesFromUrlParamsIfPresent:function(){var b=e("snsOptIn");b&&"true"===b&&(a.enableSnSOptIn(),!1===d.$(c.SNS_OPT_IN_CHECKBOX).is(":checked")&&d.$(c.SNS_OPT_IN_CHECKBOX).click());(b=e("snsFreq"))&&(a.isMobileApp()?d.$(c.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+b+"]").click():a.isTabletApp()&&d.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+
(b-1)+"] a").click());(b=e("snsQty"))&&d.$(c.SNS_QUANTITY_FIELD).val(b)},signInIfNotSignedIn:function(a,c){d.$.ajax({url:"/gp/subscribe-and-save/ajax/requireSignIn.html",success:function(d){1===d.requireSignIn&&(c?(h(),q.ue&&q.ue.count(b.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN,(ue.count(b.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN)||0)+1)):(g(a),q.ue&&q.ue.count(b.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS,(ue.count(b.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS)||0)+1)))},error:function(a,c,d){h();
q.ue&&q.ue.count(b.SNS_REQUIRE_SIGN_IN_STATUS_FAILED,(ue.count(b.SNS_REQUIRE_SIGN_IN_STATUS_FAILED)||0)+1)}})}}});n.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-onmlv2-atc",function(d,a,c,b){function e(d){if(!b.isSnsLocked()){var e=g("\x3cform\x3e",{method:a.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.method,action:a.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.action,id:a.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.id,name:a.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.name}),k="";if(c.isCbbTemplateEnabled())for(var m=
[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],l=0;l<m.length;l++)var p=m[l].name,n=m[l].fieldName?m[l].fieldName:p,n=c.getOnmlv2FormValueByName(n),k=k+c.createHiddenInput(p,n);else{c.removeFormFieldsIntroducedByCbb();m=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},
{name:"snsAddressId"}];for(l=0;l<m.length;l++)p=m[l].name,n=m[l].fieldName?m[l].fieldName:p,n=c.isMobileDevice()?g(a.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():c.isWeb()?g(a.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():g(a.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),k+=c.createHiddenInput(p,n);m=c.isMobileDevice()?g(a.SNS_MOBILE_QUANTITY):g(a.QUANTITY_CONTAINER).find(a.SNS_QUANTITY);k+=c.createHiddenInput("quantity",m.val())}k+=c.createHiddenInput("ref",d);k+=c.createHiddenInput("submit.add-to-cart",
"1");e.html(k);g("body").append(e);g(a.SNS_ADD_TO_CART_FORM).submit();g(a.SNS_ADD_TO_CART_FORM).remove()}}var g=d.$;d.declarative("sns-add-to-cart","click",function(a){e("onmlv2_atc")});return{createAndSubmitAddToCartForm:e}});n.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-atc-utils").register("sns-buybox-utils",function(d,a,c,b){var e=function(a){if(0<a.length)return a.innerWidth()<a[0].scrollWidth},g=function(b,e,g){e=b+"_"+(g?"checkedLabel":"uncheckedLabel")+"_"+("oneClick"===
b?e:"all");b=a.getOnmlParam(e);e=(g=a.getOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS))&&g[e];if(b=b||e)return d.$("\x3cp\x3e"+b+"\x3c/p\x3e").text()};return{updateOneClickButtonLabel:function(c){if(a.isVerucaOneClickEnabled()){c="boolean"===typeof c?c:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(b.ONE_CLICK_BUTTON),k=d.$(b.ONE_CLICK_BUTTON_ICON),m=d.$(b.ONE_CLICK_BUTTON_TEXT),l=a.getDeviceType(),p=g("oneClick",l,!0),l=g("oneClick",l,!1);p&&l&&(c?(m.text(p),e(m)&&(k.addClass("aok-hidden"),f.removeClass("a-button-icon"))):
(m.text(l),k.length&&(f.addClass("a-button-icon"),k.removeClass("aok-hidden"))))}},updateBuyNowButtonLabel:function(c){if(a.isVerucaBuyNowEnabled()){c="boolean"===typeof c?c:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(b.BUY_NOW_BUTTON),k=d.$(b.BUY_NOW_BUTTON_ICON),m=d.$(b.BUY_NOW_BUTTON_TEXT),l=a.getDeviceType(),p=g("buyNow",l,!0),l=g("buyNow",l,!1);p&&l&&(c?(m.text(p),e(m)&&(k.addClass("aok-hidden"),f.removeClass("a-button-icon"))):(m.text(l),k.length&&(f.addClass("a-button-icon"),k.removeClass("aok-hidden"))))}},
updateAddToCartButtonLabel:function(c){c="boolean"===typeof c?c:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(b.ADD_TO_CART_BUTTON).closest(".a-button"),k=f.find(".a-button-inner"),m=f.find("i.a-icon"),l=f.find("span.a-button-text"),p=a.getDeviceType(),n=g("addToCart",p,!0),p=g("addToCart",p,!1);n&&p&&(c?(l.text(n),k.addClass("sns-onml-sky-button-inner"),l.addClass("sns-onml-sky-button-text"),e(l)&&(m.addClass("aok-hidden"),f.removeClass("a-button-icon"))):(l.text(p),k.removeClass("sns-onml-sky-button-inner"),
l.removeClass("sns-onml-sky-button-text"),m.length&&(f.addClass("a-button-icon"),m.removeClass("aok-hidden"))))},showSnSMerchantInfoIfSnSOptInChecked:function(a){var c=d.$(b.SNS_ONML_MERCHANT_INFO);a="boolean"===typeof a?a:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!a)},showGoldBoxDiscountMessageIfSnSOptInChecked:function(a){var c=d.$(b.GOLDBOX_DISCOUNT_MESSAGE);a="boolean"===typeof a?a:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!a)},showSubscribeOnlyButtonIfSnSOptInChecked:function(a){var c=
d.$(b.JUST_SUBSCRIBE_DIV);a="boolean"===typeof a?a:d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!a)}}});n.when("A","sns-buybox-constants","sns-onmlv2-utils","ready").register("sns-onmlv2-join-prime",function(d,a,c){var b=d.$,e=function(){b(a.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).length&&(b(a.SNS_ONMLV2_JOIN_PRIME_UPSELL).removeClass("aok-hidden"),b(a.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).is(":checked")?(b(a.SNS_ONMLV2_JOIN_PRIME_BUTTON).removeClass("aok-hidden"),b(a.SNS_SUBSCRIBE_SUBMIT_BUTTON).addClass("aok-hidden")):
(b(a.SNS_ONMLV2_JOIN_PRIME_BUTTON).addClass("aok-hidden"),b(a.SNS_SUBSCRIBE_SUBMIT_BUTTON).removeClass("aok-hidden")))};e();b(document).delegate(a.SNS_ONMLV2_JOIN_PRIME_CHECKBOX,"change",function(a){e()})});n.register("sns-constants",function(){return{TIERED:"tiered",NON_TIERED:"nonTiered",BASE:"BASE",PREMIUM:"PREMIUM",ZERO_BASE:"ZERO_BASE",EVENT_NAMESPACE:{PAGE_UPDATE:"pageUpdate",FREQUENCY_HIDDEN_INPUT_CHANGE:"frequencyHiddenInputChange"},USER_PREFS_KEYS:{SNS_OPT_IN:"snsOptIn",SNS_FREQUENCY:"rcxOrdFreq",
ONML_PARAMS:"onmlParams"},DELIVERY_OPTION:{SNS:"sns",ONML:"onml"}}});n.when("A","sns-utils","sns-constants","sns-buybox-constants").register("sns-event-handler",function(d,a,c,b){return{init:function(){function e(a){for(var c=d.$("\x3cform\x3e",{method:b.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.method,action:b.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.action,id:b.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.id,name:b.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.name}),e=[{name:"ASIN"},{name:"offerListingID"},{name:"merchantID"},{name:"rcxOrdFreq"},
{name:"snsOfferListingID"},{name:"snsMerchantID"}],k="",m=0;m<e.length;m++)var l=e[m].name,p=d.$("[name\x3d"+l+"]").val(),k=k+('\x3cinput type\x3d"hidden" name\x3d"'+l+'" value\x3d"'+p+'"\x3e');k=k+('\x3cinput type\x3d"hidden" name\x3d"ref" value\x3d"'+a+'"\x3e')+'\x3cinput type\x3d"hidden" name\x3d"submit.rcx-subscribe" value\x3d"1"\x3e';a=d.$(b.QUANTITY_CONTAINER).find(b.QUANTITY);k+='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d"'+a.val()+'"\x3e';c.html(k);d.$("body").append(c);d.$(b.SUBSCRIBE_ONLY_FORM).submit()}
a.isSnSEligible()&&a.setOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS,a.getOnmlParam());a.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,function(){var e=a.getOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS)||{},h=e.asin,f=a.getOnmlParam("asin");e.asin=f;a.setOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS,e);e=h!==f;h=a.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN);"undefined"!==typeof h&&d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked")!==h&&(a.enableSnSOptIn(),d.$(b.SNS_OPT_IN_CHECKBOX).click());(h=a.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY))&&
!e?a.isMobileDevice()?d.$(b.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+h+"]").click():d.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(h-1)+"] a").click():a.deleteOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY)});d.$(b.SNS_FREQUENCY_FORM_FIELD).change(function(){a.executeCallbacksForNameSpace(c.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE)});d.on("a:pageUpdate",function(){a.executeCallbacksForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE)});d.declarative("subscribe-only","click",function(a){e("onml_so_l")});
d.declarative("just-subscribe","click",function(a){e("onml_justsub_l")})}}});n.register("sns-metrics-constants",function(){return{SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlExistingSnsCustomerCheck",SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlNewSnsCustomerCheck",SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlExistingSnsCustomerUncheck",SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlNewSnsCustomerUncheck",SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS:"snsSignInIfNotAlreadySignedIn",
SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS:"snsOnmlFrequencyLabelClick",SNS_ONML_FREQUENCY_CHANGE_METRICS:"snsOnmlFrequencyChange",SNS_ONML_UPSELL_MESSAGE_METRICS:"snsOnmlUpsellMessage",SNS_ONML_SUBSCRIBE_ONLY_METRICS:"snsOnmlSubscribeOnly",SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN:"snsOnmlCustomerRecognizedButNotSignedIn",SNS_REQUIRE_SIGN_IN_STATUS_FAILED:"snsOnmlRequireSignInStatusFailed",SNS_ONMLV2_POPOVER_TRIGGERS:"justSubscribeLearnMorePopoverNonTiered justSubscribeLearnMorePopoverTiered onmlv2LearnMorePopoverNonTiered onmlv2LearnMorePopoverTiered onmlv2LearnMorePopoverNewOrUnrecognized justSubscribePillPopoverNonTiered justSubscribePillPopoverTiered onmlv2PillPopoverNonTiered onmlv2PillPopoverTiered onmlv2PillPopoverNewOrUnrecognized".split(" "),
SNS_ONMLV2_BOTTOMSHEET_TRIGGERS:"justSubscribeLearnMoreBottomsheetNonTiered justSubscribeLearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNonTiered onmlv2LearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNewOrUnrecognized justSubscribePillBottomsheetNonTiered justSubscribePillBottomsheetTiered onmlv2PillBottomsheetNonTiered onmlv2PillBottomsheetTiered onmlv2PillBottomsheetNewOrUnrecognized".split(" "),SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS:"snsOnmlv2DesktopPopoverShow",SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS:"snsOnmlv2MobileBottomsheetShow",
SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS:"snsOnmlv2DeliveryOptionClick",SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS:"snsOnmlv2DeliveryOptionClickMobile",SNS_ONMLV2_SWITCH_TO_SNS_METRICS:"snsOnmlv2SwitchToSns",SNS_ONMLV2_SWITCH_TO_ONML_METRICS:"snsOnmlv2SwitchToOnml",SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS:"snsOnmlv2SwitchToSnsMobile",SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS:"snsOnmlv2SwitchToOnmlMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithOnmlDelivery",
SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithSnsDelivery",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithOnmlDeliveryMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithSnsDeliveryMobile",SNS_QUANTITY_SELECT_DESKTOP:"snsQuantitySelectDesktop",SNS_QUANTITY_SELECT_MOBILE:"snsQuantitySelectMobile",SNS_SWITCH_WIDGET_SEE_PRODUCTS_ONMLV2_METRICS:"snsSwitchWidgetSeeProductsOnmlv2",SNS_SWITCH_WIDGET_SEE_PRODUCTS_LEGACY_METRICS:"snsSwitchWidgetSeeProductsLegacy",
SNS_SWITCH_WIDGET_CONTINUE_LEGACY_METRICS:"snsSwitchWidgetContinueLegacy",SNS_SWITCH_WIDGET_CONTINUE_WITH_ONE_NOW_METRICS:"snsSwitchWidgetContinueWithOneNow",SNS_SWITCH_WIDGET_CONTINUE_WITH_SNS_METRICS:"snsSwitchWidgetContinueWithSns",SNS_SWITCH_WIDGET_BOTTOMSHEET_TOTAL_COUNT_METRICS:"snsSwitchWidgetBottomsheetTotalCount"}});n.when("A","sns-utils","sns-metrics-constants","sns-buybox-constants").register("sns-metrics-helper",function(d,a,c,b){return{init:function(){d.declarative("sns-opt-in-checked",
"change",function(){var e=d.$(b.SNS_OPT_IN_CHECKBOX).is(":checked");q.ue&&(e?a.isSnsCustomer()?q.ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS,(ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS)||0)+1):q.ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS,(ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS)||0)+1):a.isSnsCustomer()?q.ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1):q.ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS,
(ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1))});d.$(document).delegate(".sns-buybox-upsell-trigger","click",function(a){q.ue&&q.ue.count(c.SNS_ONML_UPSELL_MESSAGE_METRICS,(ue.count(c.SNS_ONML_UPSELL_MESSAGE_METRICS)||0)+1)});d.$(document).delegate("#sns-dp-frequency-trigger","click",function(a){q.ue&&q.ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.$(document).delegate("#snsSelectedFrequencyLabel","click",function(a){q.ue&&
q.ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.on("a:accordion:sns-dp-frequency-accordion:select",function(){q.ue&&q.ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#snsFrequencyBottomSheet button","click",function(a){q.ue&&q.ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#subscribe-only",
"click",function(a){q.ue&&q.ue.count(c.SNS_ONML_SUBSCRIBE_ONLY_METRICS,(ue.count(c.SNS_ONML_SUBSCRIBE_ONLY_METRICS)||0)+1)})}}});n.when("A","sns-onmlv2-utils","sns-metrics-constants","sns-buybox-constants","sns-constants","sns-onmlv2-cache").register("sns-onmlv2-metrics-helper",function(d,a,c,b,e,g){var h=d.$,f="",k="";c.SNS_ONMLV2_POPOVER_TRIGGERS.forEach(function(a){f+=" a:popover:beforeShow:"+a});c.SNS_ONMLV2_BOTTOMSHEET_TRIGGERS.forEach(function(a){k+=" a:sheet:beforeShow:"+a});d.declarative("sns-delivery-date",
"click",function(a){g.incrementDeliveryOptionClickCounter()});d.declarative("sns-delivery-date-bottom-sheet","click",function(a){g.incrementDeliveryOptionClickCounterMobile()});d.declarative("sns-delivery-change-btn","click",function(a){h(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(g.incrementDeliveryOptionSwitchToSnsCounter(),g.setDeliveryOption(e.DELIVERY_OPTION.SNS)):h(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(g.incrementDeliveryOptionSwitchToOnmlCounter(),g.setDeliveryOption(e.DELIVERY_OPTION.ONML))});
d.on("a:popover:beforeHide:sns-delivery-modal",function(a){l(c.SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS,g.getDeliveryOptionClickCounter());l(c.SNS_ONMLV2_SWITCH_TO_SNS_METRICS,g.getDeliveryOptionSwitchToSnsCounter());l(c.SNS_ONMLV2_SWITCH_TO_ONML_METRICS,g.getDeliveryOptionSwitchToOnmlCounter());l(c.SNS_QUANTITY_SELECT_DESKTOP,g.getQuantityClickCounterDesktop())});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){l(c.SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS,g.getDeliveryOptionClickCounterMobile());
h(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(g.incrementDeliveryOptionSwitchToSnsCounterMobile(),g.setDeliveryOption(e.DELIVERY_OPTION.SNS)):h(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(g.incrementDeliveryOptionSwitchToOnmlCounterMobile(),g.setDeliveryOption(e.DELIVERY_OPTION.ONML));l(c.SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS,g.getDeliveryOptionSwitchToSnsCounterMobile());l(c.SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS,g.getDeliveryOptionSwitchToOnmlCounterMobile());l(c.SNS_QUANTITY_SELECT_MOBILE,
g.getQuantityClickCounterMobile())});d.on(f,function(){m(c.SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS)});d.on(k,function(){m(c.SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS)});d.$(document).delegate("#sns-submit-declarative","click",function(b){b=g.getDeliveryOption();var d=a.isMobileDevice();b===e.DELIVERY_OPTION.SNS?d?m(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS):m(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS):b===e.DELIVERY_OPTION.ONML&&(d?m(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS):
m(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS))});d.$(document).delegate(b.SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP,"change",function(a){g.incrementQuantityClickCounterDesktop();l(c.SNS_QUANTITY_SELECT_DESKTOP,g.getQuantityClickCounterDesktop())});d.$(document).delegate(b.SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE,"change",function(a){g.incrementQuantityClickCounterMobile();l(c.SNS_QUANTITY_SELECT_MOBILE,g.getQuantityClickCounterMobile())});var m=function(a){q.ue&&q.ue.count(a,(ue.count(a)||0)+1)},l=
function(a,b){q.ue&&q.ue.count(a,b)}});n.when("A","sns-onmlv2-utils","sns-buybox-constants").register("sns-onmlv2-cache",function(d,a,c){var b=0,e=0,g=0,h=0,f=0,k=0,m,l=0,n=0;return{getDeliveryOptionClickCounter:function(){return b},incrementDeliveryOptionClickCounter:function(){b++},getDeliveryOptionClickCounterMobile:function(){return e},incrementDeliveryOptionClickCounterMobile:function(){e++},getDeliveryOptionSwitchToSnsCounter:function(){return g},incrementDeliveryOptionSwitchToSnsCounter:function(){g++},
getDeliveryOptionSwitchToSnsCounterMobile:function(){return h},incrementDeliveryOptionSwitchToSnsCounterMobile:function(){h++},getDeliveryOptionSwitchToOnmlCounterMobile:function(){return k},incrementDeliveryOptionSwitchToOnmlCounterMobile:function(){k++},getDeliveryOptionSwitchToOnmlCounter:function(){return f},incrementDeliveryOptionSwitchToOnmlCounter:function(){f++},getDeliveryOption:function(){if(m)return m;var b=a.getBuyboxMessageParam();return b?m=b=b.deliveryOption:"error"},setDeliveryOption:function(a){m=
a},getQuantityClickCounterDesktop:function(){return l},incrementQuantityClickCounterDesktop:function(a){l++},getQuantityClickCounterMobile:function(){return n},incrementQuantityClickCounterMobile:function(a){n++}}});n.when("sns-atc","sns-frequency-bottom-sheet","sns-frequency-popover","sns-opt-in-checkbox","sns-event-handler","sns-metrics-helper","sns-price-refresh").execute("sns-execute",function(d,a,c,b,e,g,h){d.init();a.init();c.init();b.init();e.init();g.init();h.init()});n.when("moq-core").register("sns-moq-helper",
function(d){return{isSnsLocked:d.isSnsLocked}})});